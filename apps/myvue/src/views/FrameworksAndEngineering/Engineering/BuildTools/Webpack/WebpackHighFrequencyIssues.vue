<template>
  <div class="webpack-container">
    <header class="header">
      <h1>Webpack é«˜é¢‘é—®é¢˜æŒ‡å—</h1>
      <p class="subtitle">é¢è¯•å¿…å¤‡ + ç”Ÿäº§å®è·µè§£å†³æ–¹æ¡ˆ</p>
    </header>

    <div class="content-wrapper">
      <!-- åŸºç¡€æ¦‚å¿µéƒ¨åˆ† -->
      <section class="section">
        <div class="section-header">
          <h2 class="section-title">
            <span class="icon">ğŸ“š</span> Webpack æ ¸å¿ƒæ¦‚å¿µ
          </h2>
          <p class="section-description">ç†è§£è¿™äº›æ˜¯è§£å†³å¤æ‚é—®é¢˜çš„åŸºç¡€</p>
        </div>

        <div class="concept-grid">
          <div class="concept-card">
            <div class="concept-icon">ğŸ”§</div>
            <h3>Loader ä¸ Plugin åŒºåˆ«</h3>
            <div class="comparison">
              <div class="comparison-item">
                <h4>Loader</h4>
                <ul>
                  <li>æ–‡ä»¶åŠ è½½å™¨ï¼ˆè½¬æ¢å™¨ï¼‰</li>
                  <li>å¤„ç†å•ä¸ªæ–‡ä»¶</li>
                  <li>åœ¨ module.rules ä¸­é…ç½®</li>
                  <li>å¦‚ï¼šbabel-loader, css-loader</li>
                </ul>
              </div>
              <div class="comparison-item">
                <h4>Plugin</h4>
                <ul>
                  <li>æ’ä»¶ï¼ˆæ‰©å±•å™¨ï¼‰</li>
                  <li>ä½œç”¨äºæ•´ä¸ªæ„å»ºè¿‡ç¨‹</li>
                  <li>åœ¨ plugins æ•°ç»„ä¸­é…ç½®</li>
                  <li>å¦‚ï¼šHtmlWebpackPlugin, CleanWebpackPlugin</li>
                </ul>
              </div>
            </div>
          </div>

          <div class="concept-card">
            <div class="concept-icon">ğŸ”„</div>
            <h3>æ„å»ºæµç¨‹</h3>
            <ol class="build-process">
              <li>åˆå§‹åŒ–å‚æ•°ï¼šåˆå¹¶é…ç½®</li>
              <li>å¼€å§‹ç¼–è¯‘ï¼šåˆ›å»º Compiler å¯¹è±¡</li>
              <li>ç¡®å®šå…¥å£ï¼šä» entry å¼€å§‹</li>
              <li>ç¼–è¯‘æ¨¡å—ï¼šè°ƒç”¨ loader å¤„ç†</li>
              <li>å®Œæˆç¼–è¯‘ï¼šå¾—åˆ°æ¨¡å—ä¾èµ–å›¾</li>
              <li>è¾“å‡ºèµ„æºï¼šæ ¹æ®ä¾èµ–ç”Ÿæˆ chunks</li>
              <li>å†™å…¥æ–‡ä»¶ç³»ç»Ÿï¼šemit é˜¶æ®µ</li>
            </ol>
          </div>

          <div class="concept-card">
            <div class="concept-icon">ğŸ“¦</div>
            <h3>æ¨¡å—çƒ­æ›¿æ¢åŸç†</h3>
            <div class="hmr-flow">
              <div class="step">1. å»ºç«‹ WebSocket è¿æ¥</div>
              <div class="step">2. æ–‡ä»¶ä¿®æ”¹è§¦å‘ç¼–è¯‘</div>
              <div class="step">3. Webpack å‘é€æ›´æ–°æ¶ˆæ¯</div>
              <div class="step">4. å®¢æˆ·ç«¯æ¥æ”¶æ›´æ–°é€šçŸ¥</div>
              <div class="step">5. é€šè¿‡ JSONP è·å–æ–°æ¨¡å—</div>
              <div class="step">6. æ›¿æ¢æ—§æ¨¡å—å¹¶æ‰§è¡Œå›è°ƒ</div>
            </div>
          </div>
        </div>
      </section>

      <!-- é¢è¯•é«˜é¢‘é—®é¢˜ -->
      <section class="section">
        <div class="section-header">
          <h2 class="section-title">
            <span class="icon">ğŸ’¼</span> é¢è¯•é«˜é¢‘é—®é¢˜
          </h2>
          <p class="section-description">æ±‚èŒé¢è¯•ä¸­å¸¸è¢«é—®åˆ°çš„ Webpack é—®é¢˜</p>
        </div>

        <div class="problem-grid">
          <div class="problem-card">
            <div class="problem-header">
              <span class="problem-tag">é«˜é¢‘</span>
              <h3>å¦‚ä½•ä¼˜åŒ– Webpack æ„å»ºé€Ÿåº¦ï¼Ÿ</h3>
            </div>
            <div class="solution">
              <h4>è§£å†³æ–¹æ¡ˆï¼š</h4>
              <ul>
                <li>ä½¿ç”¨ <code>speed-measure-webpack-plugin</code> åˆ†ææ„å»ºè€—æ—¶</li>
                <li>å¼€å¯ç¼“å­˜ï¼š<code>cache-loader</code> æˆ– <code>hard-source-webpack-plugin</code></li>
                <li>å¤šçº¿ç¨‹/å¹¶è¡Œæ„å»ºï¼š<code>thread-loader</code></li>
                <li>åˆç†é…ç½® <code>resolve.extensions</code> å’Œ <code>resolve.modules</code></li>
                <li>ä½¿ç”¨ <code>DllPlugin</code> é¢„ç¼–è¯‘ä¸å¸¸å˜åŒ–çš„æ¨¡å—</li>
                <li>ç¼©å°æ–‡ä»¶æœç´¢èŒƒå›´ï¼šè®¾ç½® <code>exclude</code>/<code>include</code></li>
              </ul>
              <div class="code-block">
                <pre><code>// webpack.config.js
module.exports = {
  // ...
  module: {
    rules: [
      {
        test: /\.js$/,
        exclude: /node_modules/,
        use: [
          'thread-loader', // å¤šçº¿ç¨‹
          {
            loader: 'babel-loader',
            options: {
              cacheDirectory: true // å¯ç”¨ç¼“å­˜
            }
          }
        ]
      }
    ]
  },
  plugins: [
    new HardSourceWebpackPlugin() // æ¨¡å—ç¼“å­˜
  ]
};</code></pre>
              </div>
            </div>
          </div>

          <div class="problem-card">
            <div class="problem-header">
              <span class="problem-tag">é«˜é¢‘</span>
              <h3>å¦‚ä½•ä¼˜åŒ–æ‰“åŒ…ä½“ç§¯ï¼Ÿ</h3>
            </div>
            <div class="solution">
              <h4>è§£å†³æ–¹æ¡ˆï¼š</h4>
              <ul>
                <li>ä½¿ç”¨ <code>webpack-bundle-analyzer</code> åˆ†æåŒ…ä½“ç§¯</li>
                <li>ä»£ç åˆ†å‰²ï¼š<code>SplitChunksPlugin</code></li>
                <li>Tree Shakingï¼šES6 æ¨¡å— + <code>sideEffects: false</code></li>
                <li>æŒ‰éœ€åŠ è½½ï¼šåŠ¨æ€ <code>import()</code></li>
                <li>å‹ç¼©ä»£ç ï¼š<code>TerserWebpackPlugin</code></li>
                <li>å‹ç¼©å›¾ç‰‡ï¼š<code>image-webpack-loader</code></li>
                <li>ä½¿ç”¨ CDN åŠ è½½ç¬¬ä¸‰æ–¹åº“</li>
              </ul>
              <div class="code-block">
                <pre><code>// æŒ‰éœ€åŠ è½½ç¤ºä¾‹
const Login = () => import('./views/Login.vue');

// webpack é…ç½®
module.exports = {
  optimization: {
    splitChunks: {
      chunks: 'all',
      cacheGroups: {
        vendors: {
          test: /[\\/]node_modules[\\/]/,
          name: 'vendors',
          chunks: 'all'
        }
      }
    },
    minimizer: [
      new TerserPlugin({
        parallel: true, // å¹¶è¡Œå‹ç¼©
        extractComments: false // ç§»é™¤æ³¨é‡Š
      })
    ]
  }
};</code></pre>
              </div>
            </div>
          </div>

          <div class="problem-card">
            <div class="problem-header">
              <span class="problem-tag">é«˜é¢‘</span>
              <h3>Loader å’Œ Plugin çš„æ‰§è¡Œé¡ºåºï¼Ÿ</h3>
            </div>
            <div class="solution">
              <h4>æ‰§è¡Œé¡ºåºè§„åˆ™ï¼š</h4>
              <ol>
                <li>é…ç½®æ–‡ä»¶ä¸­ <code>plugins</code> æ•°ç»„æŒ‰é¡ºåºæ‰§è¡Œ</li>
                <li>æ¯ä¸ªæ–‡ä»¶æŒ‰ <code>rules</code> ä¸­ loader ä»å³åˆ°å·¦æ‰§è¡Œï¼ˆä»ä¸‹åˆ°ä¸Šï¼‰</li>
                <li>Pitching loader ä»å·¦åˆ°å³æ‰§è¡Œ</li>
                <li>Normal loader ä»å³åˆ°å·¦æ‰§è¡Œ</li>
              </ol>
              <div class="diagram">
                <div class="loader-flow">
                  <div class="flow-step">pitch-loader1</div>
                  <div class="arrow">â†’</div>
                  <div class="flow-step">pitch-loader2</div>
                  <div class="arrow">â†’</div>
                  <div class="flow-step">æ–‡ä»¶èµ„æº</div>
                  <div class="arrow">â†’</div>
                  <div class="flow-step">normal-loader2</div>
                  <div class="arrow">â†’</div>
                  <div class="flow-step">normal-loader1</div>
                </div>
              </div>
              <div class="code-block">
                <pre><code>// loader æ‰§è¡Œé¡ºåºç¤ºä¾‹
module: {
  rules: [
    {
      test: /\.scss$/,
      use: [
        'style-loader',  // æœ€åæ‰§è¡Œ
        'css-loader',    // å…¶æ¬¡æ‰§è¡Œ
        'sass-loader'   // æœ€å…ˆæ‰§è¡Œ
      ]
    }
  ]
}</code></pre>
              </div>
            </div>
          </div>
        </div>
      </section>

      <!-- ç”Ÿäº§ç¯å¢ƒé—®é¢˜ -->
      <section class="section">
        <div class="section-header">
          <h2 class="section-title">
            <span class="icon">ğŸ­</span> ç”Ÿäº§ç¯å¢ƒé—®é¢˜
          </h2>
          <p class="section-description">å®é™…å¼€å‘ä¸­é‡åˆ°çš„æ£˜æ‰‹é—®é¢˜åŠè§£å†³æ–¹æ¡ˆ</p>
        </div>

        <div class="problem-grid">
          <div class="problem-card">
            <div class="problem-header">
              <span class="problem-tag warning">ç”Ÿäº§</span>
              <h3>å¦‚ä½•è§£å†³é•¿ç¼“å­˜é—®é¢˜ï¼Ÿ</h3>
            </div>
            <div class="solution">
              <h4>é—®é¢˜æè¿°ï¼š</h4>
              <p>ç”¨æˆ·æµè§ˆå™¨ç¼“å­˜å¯¼è‡´æ›´æ–°åæ— æ³•è·å–æœ€æ–°ä»£ç </p>

              <h4>è§£å†³æ–¹æ¡ˆï¼š</h4>
              <ul>
                <li>æ–‡ä»¶åæ·»åŠ  contenthashï¼š<code>filename: '[name].[contenthash:8].js'</code></li>
                <li>æå– runtime åˆ°å•ç‹¬æ–‡ä»¶</li>
                <li>æ¨¡å— ID ä½¿ç”¨ <code>hashed</code> æ›¿ä»£æ•°å­— ID</li>
                <li>ç¡®ä¿ä¾èµ–æ¨¡å—çš„ <code>package.json</code> ç‰ˆæœ¬å›ºå®š</li>
              </ul>
              <div class="code-block">
                <pre><code>// webpack.config.js
output: {
  filename: '[name].[contenthash:8].js',
  chunkFilename: '[name].[contenthash:8].chunk.js'
},

optimization: {
  runtimeChunk: 'single', // æå– runtime
  moduleIds: 'deterministic', // æ¨¡å—IDç¨³å®š
  splitChunks: {
    chunks: 'all',
    cacheGroups: {
      vendor: {
        test: /[\\/]node_modules[\\/]/,
        name: 'vendors',
        chunks: 'all'
      }
    }
  }
}</code></pre>
              </div>
            </div>
          </div>

          <div class="problem-card">
            <div class="problem-header">
              <span class="problem-tag warning">ç”Ÿäº§</span>
              <h3>å¦‚ä½•è°ƒè¯• Source Mapï¼Ÿ</h3>
            </div>
            <div class="solution">
              <h4>é—®é¢˜æè¿°ï¼š</h4>
              <p>ç”Ÿäº§ç¯å¢ƒé”™è¯¯éš¾ä»¥å®šä½åˆ°æºä»£ç ä½ç½®</p>

              <h4>è§£å†³æ–¹æ¡ˆï¼š</h4>
              <ul>
                <li>å¼€å‘ç¯å¢ƒï¼š<code>devtool: 'eval-cheap-module-source-map'</code></li>
                <li>ç”Ÿäº§ç¯å¢ƒï¼š<code>devtool: 'hidden-source-map'</code></li>
                <li>ä¸Šä¼  Source Map åˆ°é”™è¯¯ç›‘æ§å¹³å°</li>
                <li>ä½¿ç”¨ <code>source-map-loader</code> å¤„ç†ç¬¬ä¸‰æ–¹åº“</li>
                <li>é¿å…åœ¨ç”Ÿäº§ç¯å¢ƒæš´éœ²å®Œæ•´ Source Map</li>
              </ul>
              <div class="code-block">
                <pre><code>// æ¨èé…ç½®
module.exports = {
  devtool: process.env.NODE_ENV === 'production'
    ? 'hidden-source-map'  // ç”Ÿäº§ç¯å¢ƒ
    : 'eval-cheap-module-source-map', // å¼€å‘ç¯å¢ƒ

  module: {
    rules: [
      {
        test: /\.js$/,
        enforce: 'pre', // ä¼˜å…ˆæ‰§è¡Œ
        use: ['source-map-loader'] // åŠ è½½ç°æœ‰ Source Map
      }
    ]
  }
};</code></pre>
              </div>
            </div>
          </div>

          <div class="problem-card">
            <div class="problem-header">
              <span class="problem-tag warning">ç”Ÿäº§</span>
              <h3>å¦‚ä½•å¤„ç† CSS å…¼å®¹æ€§é—®é¢˜ï¼Ÿ</h3>
            </div>
            <div class="solution">
              <h4>é—®é¢˜æè¿°ï¼š</h4>
              <p>ä¸åŒæµè§ˆå™¨å¯¹ CSS ç‰¹æ€§æ”¯æŒä¸ä¸€è‡´</p>

              <h4>è§£å†³æ–¹æ¡ˆï¼š</h4>
              <ul>
                <li>ä½¿ç”¨ <code>postcss-loader</code> + <code>autoprefixer</code></li>
                <li>æ·»åŠ  <code>browserslist</code> é…ç½®</li>
                <li>ä½¿ç”¨ <code>cssnano</code> å‹ç¼© CSS</li>
                <li>ä½¿ç”¨ <code>@babel/preset-env</code> å¤„ç† JS å…¼å®¹æ€§</li>
              </ul>
              <div class="code-block">
                <pre><code>// postcss.config.js
module.exports = {
  plugins: [
    require('autoprefixer')({
      overrideBrowserslist: [
        'last 2 versions',
        '> 1%',
        'iOS >= 8',
        'Android >= 4'
      ]
    }),
    require('cssnano') // å‹ç¼©CSS
  ]
};

// webpack.config.js
module: {
  rules: [
    {
      test: /\.css$/,
      use: [
        'style-loader',
        'css-loader',
        'postcss-loader' // å¤„ç†å…¼å®¹æ€§
      ]
    }
  ]
}</code></pre>
              </div>
            </div>
          </div>

          <div class="problem-card">
            <div class="problem-header">
              <span class="problem-tag warning">ç”Ÿäº§</span>
              <h3>å¦‚ä½•ä¼˜åŒ–é¦–å±åŠ è½½é€Ÿåº¦ï¼Ÿ</h3>
            </div>
            <div class="solution">
              <h4>è§£å†³æ–¹æ¡ˆï¼š</h4>
              <ul>
                <li>ä»£ç åˆ†å‰² + æŒ‰éœ€åŠ è½½</li>
                <li>é¢„åŠ è½½å…³é”®èµ„æºï¼š<code>&lt;link rel="preload"&gt;</code></li>
                <li>ä½¿ç”¨éª¨æ¶å±ï¼ˆSkeleton Screenï¼‰</li>
                <li>æœåŠ¡ç«¯æ¸²æŸ“ï¼ˆSSRï¼‰æˆ–é™æ€ç«™ç‚¹ç”Ÿæˆï¼ˆSSGï¼‰</li>
                <li>å¼€å¯ HTTP/2 å’Œ Gzip å‹ç¼©</li>
                <li>ä½¿ç”¨ CDN åŠ é€Ÿèµ„æºåŠ è½½</li>
              </ul>
              <div class="code-block">
                <pre><code>// é¢„åŠ è½½å…³é”®èµ„æºç¤ºä¾‹
import(/* webpackPreload: true */ 'CriticalModule');

// æŒ‰éœ€åŠ è½½éå…³é”®æ¨¡å—
const NonCriticalModule = () => import('./NonCriticalModule');

// è·¯ç”±æ‡’åŠ è½½ï¼ˆVueï¼‰
const routes = [
  {
    path: '/dashboard',
    component: () => import(/* webpackChunkName: "dashboard" */ './Dashboard.vue')
  }
];</code></pre>
              </div>
            </div>
          </div>
        </div>
      </section>

      <!-- é«˜çº§æŠ€å·§ -->
      <section class="section">
        <div class="section-header">
          <h2 class="section-title">
            <span class="icon">ğŸš€</span> é«˜çº§æŠ€å·§ä¸ä¼˜åŒ–
          </h2>
          <p class="section-description">æå‡ Webpack é…ç½®çš„ä¸“ä¸šæŠ€å·§</p>
        </div>

        <div class="tips-grid">
          <div class="tip-card">
            <h3>è‡ªå®šä¹‰ Loader</h3>
            <p>åˆ›å»ºç®€å•çš„ markdown åŠ è½½å™¨</p>
            <div class="code-block">
              <pre><code>// markdown-loader.js
const marked = require('marked');

module.exports = function(source) {
  const html = marked(source);

  // è¿”å› JS æ¨¡å—
  return `module.exports = ${JSON.stringify(html)}`;
};

// webpack.config.js
module: {
  rules: [
    {
      test: /\.md$/,
      use: 'markdown-loader'
    }
  ]
}</code></pre>
            </div>
          </div>

          <div class="tip-card">
            <h3>è‡ªå®šä¹‰ Plugin</h3>
            <p>åˆ›å»ºæ„å»ºå®Œæˆé€šçŸ¥æ’ä»¶</p>
            <div class="code-block">
              <pre><code>class BuildNotifyPlugin {
  apply(compiler) {
    compiler.hooks.done.tap('BuildNotify', stats => {
      if (stats.hasErrors()) {
        console.error('âŒ æ„å»ºå¤±è´¥ï¼');
        // å‘é€é”™è¯¯é€šçŸ¥...
      } else {
        console.log('âœ… æ„å»ºæˆåŠŸï¼');
        // å‘é€æˆåŠŸé€šçŸ¥...
      }
    });
  }
}

// webpack.config.js
plugins: [
  new BuildNotifyPlugin()
]</code></pre>
            </div>
          </div>

          <div class="tip-card">
            <h3>å¤šç¯å¢ƒé…ç½®</h3>
            <p>ä½¿ç”¨ webpack-merge ç®¡ç†é…ç½®</p>
            <div class="code-block">
              <pre><code>// webpack.common.js
module.exports = {
  entry: './src/index.js',
  // å…¬å…±é…ç½®...
};

// webpack.dev.js
const merge = require('webpack-merge');
const common = require('./webpack.common.js');

module.exports = merge(common, {
  mode: 'development',
  devtool: 'eval-source-map',
  // å¼€å‘ç¯å¢ƒç‰¹æœ‰é…ç½®...
});

// webpack.prod.js
const merge = require('webpack-merge');
const common = require('./webpack.common.js');

module.exports = merge(common, {
  mode: 'production',
  devtool: 'source-map',
  // ç”Ÿäº§ç¯å¢ƒç‰¹æœ‰é…ç½®...
});</code></pre>
            </div>
          </div>
        </div>
      </section>
    </div>

    <footer class="footer">
      <div class="summary">
        <h3>Webpack æœ€ä½³å®è·µï¼š</h3>
        <ul>
          <li>ä½¿ç”¨æœ€æ–° Webpack ç‰ˆæœ¬ï¼ˆv5+ï¼‰ä»¥è·å¾—æœ€ä½³æ€§èƒ½å’Œç‰¹æ€§</li>
          <li>å®šæœŸæ›´æ–°ä¾èµ–ï¼ˆloader/pluginï¼‰ä»¥ä¿®å¤å®‰å…¨é—®é¢˜</li>
          <li>ä½¿ç”¨ <code>webpack-cli</code> å’Œ <code>webpack-dev-server</code> æé«˜å¼€å‘æ•ˆç‡</li>
          <li>é…ç½®æŒç»­é›†æˆï¼ˆCIï¼‰ç¯å¢ƒç¼“å­˜ node_modules å’Œæ„å»ºç¼“å­˜</li>
          <li>ç›‘æ§ç”Ÿäº§ç¯å¢ƒçš„èµ„æºåŠ è½½æ€§èƒ½</li>
        </ul>
      </div>
      <div class="footer-links">
        <a href="https://webpack.js.org/" target="_blank">Webpack å®˜æ–¹æ–‡æ¡£</a>
        <a href="https://github.com/webpack-contrib/awesome-webpack" target="_blank">Awesome Webpack</a>
        <a href="https://webpack.academy/" target="_blank">Webpack Academy</a>
      </div>
    </footer>
  </div>
</template>

<script setup lang="ts">
// è¿™é‡Œå¯ä»¥æ·»åŠ ç»„ä»¶é€»è¾‘ï¼ˆå¦‚æœéœ€è¦ï¼‰
</script>

<style lang="less" scoped>
@import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap');

:root {
  --primary-color: #4361ee;
  --primary-light: #eef2ff;
  --secondary-color: #3a0ca3;
  --accent-color: #4cc9f0;
  --success-color: #2ec4b6;
  --warning-color: #ff9f1c;
  --danger-color: #e71d36;
  --light-color: #f8f9fa;
  --dark-color: #212529;
  --gray-light: #e9ecef;
  --gray-medium: #adb5bd;
  --border-radius: 10px;
  --box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
  --transition: all 0.3s ease;
}

* {
  box-sizing: border-box;
  margin: 0;
  padding: 0;
}

.webpack-container {
  font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
  max-width: 1200px;
  margin: 0 auto;
  padding: 0 20px 40px;
  color: var(--dark-color);
  line-height: 1.6;
  background-color: #fff;
}

.header {
  text-align: center;
  padding: 50px 20px 30px;
  background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
  color: white;
  border-radius: var(--border-radius);
  margin: 20px 0 30px;
  box-shadow: var(--box-shadow);

  h1 {
    font-size: 2.5rem;
    margin-bottom: 10px;
    font-weight: 700;
  }

  .subtitle {
    font-size: 1.2rem;
    opacity: 0.9;
    max-width: 700px;
    margin: 0 auto;
    font-weight: 300;
  }
}

.section {
  margin-bottom: 40px;
  background: white;
  border-radius: var(--border-radius);
  padding: 30px;
  box-shadow: var(--box-shadow);
}

.section-header {
  margin-bottom: 25px;
  padding-bottom: 15px;
  border-bottom: 1px solid var(--gray-light);
}

.section-title {
  font-size: 1.8rem;
  display: flex;
  align-items: center;
  gap: 12px;
  color: var(--secondary-color);

  .icon {
    font-size: 1.5em;
  }
}

.section-description {
  font-size: 1.1rem;
  color: var(--gray-medium);
  margin-top: 5px;
}

// æ ¸å¿ƒæ¦‚å¿µéƒ¨åˆ†
.concept-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
  gap: 25px;
}

.concept-card {
  border: 1px solid var(--gray-light);
  border-radius: var(--border-radius);
  padding: 25px;
  transition: var(--transition);

  &:hover {
    transform: translateY(-5px);
    box-shadow: 0 10px 20px rgba(0, 0, 0, 0.08);
    border-color: var(--primary-color);
  }

  .concept-icon {
    font-size: 2.5rem;
    text-align: center;
    margin-bottom: 15px;
  }

  h3 {
    font-size: 1.4rem;
    text-align: center;
    margin-bottom: 20px;
    color: var(--secondary-color);
  }
}

.comparison {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 15px;

  .comparison-item {
    background: var(--light-color);
    border-radius: var(--border-radius);
    padding: 15px;

    h4 {
      font-size: 1.1rem;
      margin-bottom: 10px;
      color: var(--primary-color);
      text-align: center;
    }
  }
}

.build-process {
  padding-left: 20px;

  li {
    margin-bottom: 12px;
    position: relative;
    padding-left: 25px;

    &::before {
      content: 'â†’';
      position: absolute;
      left: 0;
      color: var(--primary-color);
      font-weight: bold;
    }
  }
}

.hmr-flow {
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  gap: 10px;

  .step {
    background: var(--light-color);
    border-radius: var(--border-radius);
    padding: 12px;
    text-align: center;
    font-size: 0.9rem;
  }
}

// é—®é¢˜å¡ç‰‡
.problem-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(500px, 1fr));
  gap: 25px;

  @media (max-width: 768px) {
    grid-template-columns: 1fr;
  }
}

.problem-card {
  border: 1px solid var(--gray-light);
  border-radius: var(--border-radius);
  overflow: hidden;
  transition: var(--transition);

  &:hover {
    transform: translateY(-3px);
    box-shadow: 0 8px 16px rgba(0, 0, 0, 0.08);
  }
}

.problem-header {
  padding: 20px;
  background: var(--primary-light);
  border-bottom: 1px solid var(--gray-light);
  display: flex;
  align-items: center;
  gap: 15px;

  h3 {
    font-size: 1.4rem;
    margin: 0;
    color: var(--secondary-color);
  }
}

.problem-tag {
  padding: 5px 12px;
  border-radius: 30px;
  background: var(--primary-color);
  color: white;
  font-size: 0.9rem;
  font-weight: 600;

  &.warning {
    background: var(--warning-color);
  }
}

.solution {
  padding: 20px;

  h4 {
    font-size: 1.1rem;
    margin: 15px 0 10px;
    color: var(--primary-color);
  }

  ul,
  ol {
    padding-left: 25px;
    margin-bottom: 15px;

    li {
      margin-bottom: 8px;
    }
  }
}

.code-block {
  background: #f5f7ff;
  border-radius: var(--border-radius);
  overflow: hidden;
  margin: 15px 0;
  border: 1px solid var(--gray-light);

  pre {
    margin: 0;
    padding: 15px;
    overflow-x: auto;

    code {
      font-family: 'Fira Code', 'Consolas', monospace;
      font-size: 0.85rem;
      color: var(--secondary-color);
      line-height: 1.5;
    }
  }
}

.diagram {
  background: var(--light-color);
  border-radius: var(--border-radius);
  padding: 15px;
  margin: 15px 0;
}

.loader-flow {
  display: flex;
  justify-content: center;
  align-items: center;
  gap: 10px;
  flex-wrap: wrap;

  .flow-step {
    background: white;
    border: 1px solid var(--gray-light);
    border-radius: var(--border-radius);
    padding: 10px 15px;
    font-size: 0.9rem;
  }

  .arrow {
    color: var(--primary-color);
    font-weight: bold;
  }
}

// é«˜çº§æŠ€å·§éƒ¨åˆ†
.tips-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
  gap: 25px;
}

.tip-card {
  border: 1px solid var(--gray-light);
  border-radius: var(--border-radius);
  padding: 20px;
  transition: var(--transition);

  &:hover {
    border-color: var(--primary-color);
    box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
  }

  h3 {
    font-size: 1.3rem;
    margin-bottom: 15px;
    color: var(--secondary-color);
    text-align: center;
  }

  p {
    text-align: center;
    margin-bottom: 15px;
    color: #495057;
  }
}

// é¡µè„š
.footer {
  margin-top: 40px;
  padding-top: 30px;
  border-top: 1px solid var(--gray-light);

  .summary {
    background: var(--primary-light);
    border-radius: var(--border-radius);
    padding: 25px;
    margin-bottom: 25px;

    h3 {
      font-size: 1.3rem;
      margin-bottom: 15px;
      color: var(--secondary-color);
    }

    ul {
      padding-left: 25px;

      li {
        margin-bottom: 10px;
        font-weight: 500;

        code {
          background: rgba(67, 97, 238, 0.1);
          padding: 2px 6px;
          border-radius: 4px;
          font-family: 'Fira Code', monospace;
          color: var(--primary-color);
        }
      }
    }
  }

  .footer-links {
    display: flex;
    justify-content: center;
    gap: 25px;
    flex-wrap: wrap;

    a {
      color: var(--primary-color);
      text-decoration: none;
      font-weight: 500;
      transition: var(--transition);
      padding: 8px 15px;
      border-radius: 30px;
      border: 1px solid var(--primary-color);

      &:hover {
        background: var(--primary-color);
        color: white;
        text-decoration: none;
      }
    }
  }
}

@media (max-width: 768px) {
  .header {
    padding: 30px 15px;

    h1 {
      font-size: 2rem;
    }

    .subtitle {
      font-size: 1.1rem;
    }
  }

  .section {
    padding: 20px;
  }

  .hmr-flow {
    grid-template-columns: 1fr 1fr;
  }
}
</style>
