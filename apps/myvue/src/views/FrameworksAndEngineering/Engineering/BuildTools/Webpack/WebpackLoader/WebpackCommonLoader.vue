<template>
  <div class="loader-container">
    <header class="header">
      <h1>Webpack Loaders åŸºç¡€ä»‹ç»</h1>
      <p class="subtitle">äº†è§£å¸¸è§loaderçš„åŠŸèƒ½ã€é…ç½®å’Œä½¿ç”¨åœºæ™¯</p>
    </header>

    <section class="intro-section">
      <h2>ä»€ä¹ˆæ˜¯Webpack Loader?</h2>
      <p>Loaderæ˜¯Webpackçš„æ ¸å¿ƒåŠŸèƒ½ä¹‹ä¸€ï¼Œç”¨äºå¯¹æ¨¡å—çš„æºä»£ç è¿›è¡Œè½¬æ¢ã€‚å®ƒä»¬å…è®¸ä½ åœ¨å¯¼å…¥æˆ–åŠ è½½æ–‡ä»¶æ—¶é¢„å¤„ç†æ–‡ä»¶ï¼Œå°†éJavaScriptæ–‡ä»¶è½¬æ¢ä¸ºWebpackèƒ½å¤Ÿå¤„ç†çš„æ¨¡å—ã€‚</p>
      <div class="loader-process">
        <div class="step">
          <div class="step-icon">1</div>
          <div class="step-text">æºæ–‡ä»¶</div>
        </div>
        <div class="arrow">â†’</div>
        <div class="step">
          <div class="step-icon">2</div>
          <div class="step-text">Loaderå¤„ç†</div>
        </div>
        <div class="arrow">â†’</div>
        <div class="step">
          <div class="step-icon">3</div>
          <div class="step-text">JavaScriptæ¨¡å—</div>
        </div>
      </div>
    </section>

    <section class="loader-list">
      <div class="loader-card" v-for="(loader, index) in loaders" :key="loader.name">
        <div class="loader-header">
          <div class="loader-icon" :class="`icon-${index % 5}`">
            <span>{{ loader.name.charAt(0) }}</span>
          </div>
          <div class="loader-title">
            <h2>{{ loader.name }}</h2>
            <div class="loader-tags">
              <span class="tag" v-for="tag in loader.tags" :key="tag">{{ tag }}</span>
            </div>
          </div>
        </div>

        <div class="loader-content">
          <div class="loader-description">
            <h3>ä½œç”¨</h3>
            <p>{{ loader.description }}</p>
          </div>

          <div class="loader-config">
            <h3>é…ç½®æ–¹æ³•</h3>
            <pre><code>{{ loader.config }}</code></pre>
          </div>

          <div class="loader-usage">
            <h3>ä½¿ç”¨åœºæ™¯</h3>
            <ul>
              <li v-for="(scenario, i) in loader.useCases" :key="i">{{ scenario }}</li>
            </ul>
          </div>
        </div>
      </div>
    </section>

    <section class="best-practices">
      <h2>Loader ä½¿ç”¨æœ€ä½³å®è·µ</h2>
      <div class="practice-grid">
        <div class="practice-card">
          <div class="practice-icon">ğŸ“</div>
          <h3>é¡ºåºå¾ˆé‡è¦</h3>
          <p>Loaderæ‰§è¡Œé¡ºåºæ˜¯ä»å³åˆ°å·¦ï¼ˆæˆ–ä»ä¸‹åˆ°ä¸Šï¼‰ï¼Œç¡®ä¿loaderçš„é¡ºåºæ­£ç¡®</p>
        </div>
        <div class="practice-card">
          <div class="practice-icon">âš™ï¸</div>
          <h3>æ€§èƒ½ä¼˜åŒ–</h3>
          <p>ä½¿ç”¨include/excludeç¼©å°loaderå¤„ç†èŒƒå›´ï¼Œæå‡æ„å»ºé€Ÿåº¦</p>
        </div>
        <div class="practice-card">
          <div class="practice-icon">ğŸ“</div>
          <h3>é…ç½®æ¸…æ™°</h3>
          <p>ä¸ºæ¯ä¸ªloaderæ·»åŠ æ˜ç¡®çš„æ³¨é‡Šï¼Œè¯´æ˜å…¶ä½œç”¨å’Œé…ç½®é¡¹</p>
        </div>
        <div class="practice-card">
          <div class="practice-icon">ğŸ”„</div>
          <h3>é“¾å¼è°ƒç”¨</h3>
          <p>å¤šä¸ªloaderå¯ä»¥é“¾å¼è°ƒç”¨ï¼Œå‰ä¸€ä¸ªloaderçš„è¾“å‡ºæ˜¯åä¸€ä¸ªloaderçš„è¾“å…¥</p>
        </div>
      </div>
    </section>

    <footer class="footer">
      <p> Webpack Loader æŒ‡å— | æŒç»­æ›´æ–°ä¸­</p>
      <p>äº†è§£æ›´å¤šWebpackçŸ¥è¯†ï¼Œè¯·è®¿é—®å®˜æ–¹æ–‡æ¡£: <a href="https://webpack.js.org/" target="_blank">webpack.js.org</a></p>
    </footer>
  </div>
</template>

<script setup lang="ts">
import { ref } from 'vue';

// å®šä¹‰loaderç±»å‹
interface Loader {
  name: string;
  description: string;
  config: string;
  useCases: string[];
  tags: string[];
}

// å¸¸è§loaderæ•°æ®
const loaders = ref<Loader[]>([
  {
    name: "babel-loader",
    description: "ä½¿ç”¨Babelè½¬æ¢JavaScriptæ–‡ä»¶ï¼Œå°†ES6+ä»£ç è½¬æ¢ä¸ºå‘åå…¼å®¹çš„JavaScriptç‰ˆæœ¬ã€‚",
    config: `module: {
  rules: [
    {
      test: /\\.js$/,
      exclude: /node_modules/,
      use: {
        loader: 'babel-loader',
        options: {
          presets: ['@babel/preset-env'],
          plugins: ['@babel/plugin-transform-runtime']
        }
      }
    }
  ]
}`,
    useCases: [
      "è½¬æ¢ç°ä»£JavaScriptè¯­æ³•ä¸ºæ—§ç‰ˆæœ¬æµè§ˆå™¨å…¼å®¹çš„è¯­æ³•",
      "ä½¿ç”¨JSXè¯­æ³•å¼€å‘Reactåº”ç”¨",
      "ä½¿ç”¨TypeScriptå¼€å‘ä½†éœ€è¦è½¬æ¢ä¸ºJavaScript"
    ],
    tags: ["JavaScript", "ç¼–è¯‘", "è½¬æ¢"]
  },
  {
    name: "css-loader",
    description: "è§£æCSSæ–‡ä»¶ä¸­çš„@importå’Œurl()ï¼Œå¤„ç†æ¨¡å—ä¾èµ–å…³ç³»ï¼Œè¿”å›CSSä»£ç ã€‚",
    config: `module: {
  rules: [
    {
      test: /\\.css$/,
      use: [
        'style-loader',
        {
          loader: 'css-loader',
          options: {
            modules: true, // å¯ç”¨CSSæ¨¡å—
            importLoaders: 1
          }
        },
        'postcss-loader'
      ]
    }
  ]
}`,
    useCases: [
      "åœ¨JavaScriptä¸­å¯¼å…¥CSSæ–‡ä»¶",
      "ä½¿ç”¨CSSæ¨¡å—å®ç°å±€éƒ¨ä½œç”¨åŸŸæ ·å¼",
      "å¤„ç†CSSä¸­çš„èµ„æºè·¯å¾„"
    ],
    tags: ["CSS", "æ ·å¼", "é¢„å¤„ç†"]
  },
  {
    name: "style-loader",
    description: "å°†CSSæ³¨å…¥åˆ°DOMä¸­ï¼Œé€šè¿‡åˆ›å»º<style>æ ‡ç­¾å°†CSSæ·»åŠ åˆ°é¡µé¢å¤´éƒ¨ã€‚",
    config: `module: {
  rules: [
    {
      test: /\\.css$/,
      use: ['style-loader', 'css-loader']
    }
  ]
}`,
    useCases: [
      "åœ¨å¼€å‘ç¯å¢ƒä¸­å¿«é€Ÿæ³¨å…¥æ ·å¼",
      "HMRï¼ˆçƒ­æ¨¡å—æ›¿æ¢ï¼‰æ”¯æŒ",
      "ä¸éœ€è¦å•ç‹¬æå–CSSçš„å°å‹é¡¹ç›®"
    ],
    tags: ["CSS", "æ³¨å…¥", "æ ·å¼"]
  },
  {
    name: "sass-loader",
    description: "åŠ è½½Sass/SCSSæ–‡ä»¶å¹¶ç¼–è¯‘ä¸ºCSSã€‚é€šå¸¸ä¸css-loaderå’Œstyle-loaderä¸€èµ·ä½¿ç”¨ã€‚",
    config: `module: {
  rules: [
    {
      test: /\\.s[ac]ss$/,
      use: [
        'style-loader',
        'css-loader',
        {
          loader: 'sass-loader',
          options: {
            implementation: require('sass'),
            sassOptions: {
              fiber: require('fibers')
            }
          }
        }
      ]
    }
  ]
}`,
    useCases: [
      "ä½¿ç”¨Sass/SCSSé¢„å¤„ç†å™¨ç¼–å†™æ ·å¼",
      "åˆ©ç”¨Sassçš„å˜é‡ã€åµŒå¥—ã€æ··åˆç­‰åŠŸèƒ½",
      "æé«˜CSSå¼€å‘æ•ˆç‡å’Œå¯ç»´æŠ¤æ€§"
    ],
    tags: ["Sass", "SCSS", "é¢„å¤„ç†å™¨"]
  },
  {
    name: "file-loader",
    description: "å°†æ–‡ä»¶è§£æä¸ºURLå¹¶ç”Ÿæˆæ–‡ä»¶åˆ°è¾“å‡ºç›®å½•ï¼Œè¿”å›æ–‡ä»¶çš„å…¬å…±URLã€‚",
    config: `module: {
  rules: [
    {
      test: /\\.(png|jpe?g|gif|svg)$/,
      use: [
        {
          loader: 'file-loader',
          options: {
            name: '[name].[hash].[ext]',
            outputPath: 'images/'
          }
        }
      ]
    }
  ]
}`,
    useCases: [
      "å¤„ç†å›¾ç‰‡ã€å­—ä½“ç­‰é™æ€èµ„æº",
      "ç”Ÿæˆå¸¦å“ˆå¸Œå€¼çš„æ–‡ä»¶åç”¨äºç¼“å­˜",
      "å°†èµ„æºå¤åˆ¶åˆ°è¾“å‡ºç›®å½•"
    ],
    tags: ["èµ„æº", "æ–‡ä»¶", "å›¾ç‰‡"]
  },
  {
    name: "url-loader",
    description: "ç±»ä¼¼äºfile-loaderï¼Œä½†å¯ä»¥åœ¨æ–‡ä»¶å¤§å°ä½äºæŒ‡å®šé˜ˆå€¼æ—¶è¿”å›DataURLï¼ˆbase64ç¼–ç ï¼‰ã€‚",
    config: `module: {
  rules: [
    {
      test: /\\.(png|jpe?g|gif)$/,
      use: [
        {
          loader: 'url-loader',
          options: {
            limit: 8192, // å°äº8KBçš„æ–‡ä»¶è½¬ä¸ºbase64
            name: '[name].[hash].[ext]',
            outputPath: 'images/'
          }
        }
      ]
    }
  ]
}`,
    useCases: [
      "å°†å°å›¾ç‰‡è½¬æ¢ä¸ºbase64åµŒå…¥åˆ°ä»£ç ä¸­",
      "å‡å°‘å°æ–‡ä»¶çš„HTTPè¯·æ±‚",
      "å¤§æ–‡ä»¶è‡ªåŠ¨å›é€€åˆ°file-loaderå¤„ç†"
    ],
    tags: ["èµ„æº", "base64", "ä¼˜åŒ–"]
  },
  {
    name: "vue-loader",
    description: "è§£æVueå•æ–‡ä»¶ç»„ä»¶ï¼ˆ.vueæ–‡ä»¶ï¼‰ï¼Œæå–å…¶ä¸­çš„templateã€scriptå’Œstyleã€‚",
    config: `const { VueLoaderPlugin } = require('vue-loader');

module.exports = {
  module: {
    rules: [
      {
        test: /\\.vue$/,
        loader: 'vue-loader'
      }
    ]
  },
  plugins: [
    new VueLoaderPlugin()
  ]
}`,
    useCases: [
      "å¼€å‘Vueå•æ–‡ä»¶ç»„ä»¶åº”ç”¨",
      "å¤„ç†Vueç»„ä»¶ä¸­çš„æ¨¡æ¿ã€æ ·å¼å’Œé€»è¾‘",
      "ä¸Vueç”Ÿæ€å·¥å…·é›†æˆï¼ˆå¦‚Vuexã€Vue Routerï¼‰"
    ],
    tags: ["Vue", "å•æ–‡ä»¶ç»„ä»¶", "æ¡†æ¶"]
  },
  {
    name: "ts-loader",
    description: "å°†TypeScriptç¼–è¯‘ä¸ºJavaScriptï¼Œæ”¯æŒTypeScriptçš„æ‰€æœ‰ç‰¹æ€§ã€‚",
    config: `module: {
  rules: [
    {
      test: /\\.tsx?$/,
      use: 'ts-loader',
      exclude: /node_modules/,
    }
  ]
}`,
    useCases: [
      "å¼€å‘TypeScripté¡¹ç›®",
      "åœ¨JavaScripté¡¹ç›®ä¸­ä½¿ç”¨TypeScriptæ–‡ä»¶",
      "åˆ©ç”¨TypeScriptçš„ç±»å‹æ£€æŸ¥åŠŸèƒ½"
    ],
    tags: ["TypeScript", "ç¼–è¯‘", "ç±»å‹æ£€æŸ¥"]
  },
  {
    name: "eslint-loader",
    description: "åœ¨Webpackæ„å»ºè¿‡ç¨‹ä¸­ä½¿ç”¨ESLintæ£€æŸ¥ä»£ç è§„èŒƒï¼Œå¯åœ¨å¼€å‘æ—¶å®æ—¶æç¤ºé”™è¯¯ã€‚",
    config: `module: {
  rules: [
    {
      enforce: 'pre', // å‰ç½®loaderï¼Œå…ˆäºå…¶ä»–loaderæ‰§è¡Œ
      test: /\\.(js|vue)$/,
      loader: 'eslint-loader',
      exclude: /node_modules/,
      options: {
        fix: true, // è‡ªåŠ¨ä¿®å¤å¯ä¿®å¤çš„é—®é¢˜
        emitWarning: true // å°†é”™è¯¯æ˜¾ç¤ºä¸ºè­¦å‘Š
      }
    }
  ]
}`,
    useCases: [
      "åœ¨æ„å»ºè¿‡ç¨‹ä¸­è¿›è¡Œä»£ç è´¨é‡æ£€æŸ¥",
      "ç»Ÿä¸€å›¢é˜Ÿä»£ç é£æ ¼",
      "è‡ªåŠ¨ä¿®å¤å¯ä¿®å¤çš„ä»£ç é—®é¢˜"
    ],
    tags: ["ä»£ç è´¨é‡", "è§„èŒƒ", "æ£€æŸ¥"]
  }
]);
</script>

<style lang="less" scoped>
.loader-container {
  max-width: 1200px;
  margin: 0 auto;
  padding: 30px 20px;
  font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
  color: #2c3e50;
  background-color: #f8fafc;
  line-height: 1.6;

  .header {
    text-align: center;
    margin-bottom: 40px;
    padding-bottom: 20px;
    border-bottom: 1px solid #e2e8f0;

    h1 {
      font-size: 2.5rem;
      color: #3498db;
      margin-bottom: 10px;
    }

    .subtitle {
      font-size: 1.2rem;
      color: #718096;
    }
  }

  .intro-section {
    background: white;
    padding: 25px;
    border-radius: 10px;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
    margin-bottom: 35px;

    h2 {
      color: #3498db;
      margin-top: 0;
      border-left: 4px solid #3498db;
      padding-left: 12px;
    }

    p {
      font-size: 1.1rem;
      margin-bottom: 25px;
    }

    .loader-process {
      display: flex;
      justify-content: center;
      align-items: center;
      margin-top: 25px;

      .step {
        text-align: center;
        min-width: 120px;

        .step-icon {
          width: 60px;
          height: 60px;
          margin: 0 auto 10px;
          background: #3498db;
          color: white;
          border-radius: 50%;
          display: flex;
          align-items: center;
          justify-content: center;
          font-size: 24px;
          font-weight: bold;
        }

        .step-text {
          font-weight: 500;
          color: #2d3748;
        }
      }

      .arrow {
        font-size: 24px;
        color: #a0aec0;
        margin: 0 20px;
      }
    }
  }

  .loader-list {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(500px, 1fr));
    gap: 25px;
    margin-bottom: 40px;

    .loader-card {
      background: white;
      border-radius: 10px;
      overflow: hidden;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
      transition: transform 0.3s ease, box-shadow 0.3s ease;

      &:hover {
        transform: translateY(-5px);
        box-shadow: 0 6px 16px rgba(0, 0, 0, 0.1);
      }

      .loader-header {
        display: flex;
        align-items: center;
        padding: 20px;
        background: linear-gradient(135deg, #f0f9ff 0%, #e6f7ff 100%);
        border-bottom: 1px solid #e2e8f0;

        .loader-icon {
          width: 50px;
          height: 50px;
          border-radius: 50%;
          display: flex;
          align-items: center;
          justify-content: center;
          margin-right: 15px;
          font-weight: bold;
          font-size: 20px;
          color: white;

          &.icon-0 {
            background: linear-gradient(135deg, #3498db, #1abc9c);
          }

          &.icon-1 {
            background: linear-gradient(135deg, #9b59b6, #e74c3c);
          }

          &.icon-2 {
            background: linear-gradient(135deg, #f39c12, #d35400);
          }

          &.icon-3 {
            background: linear-gradient(135deg, #2ecc71, #27ae60);
          }

          &.icon-4 {
            background: linear-gradient(135deg, #e74c3c, #c0392b);
          }
        }

        .loader-title {
          h2 {
            margin: 0;
            color: #2c3e50;
            font-size: 1.6rem;
          }
        }

        .loader-tags {
          margin-top: 5px;

          .tag {
            display: inline-block;
            background: #edf2f7;
            color: #4a5568;
            font-size: 0.8rem;
            padding: 3px 10px;
            border-radius: 20px;
            margin-right: 8px;
          }
        }
      }

      .loader-content {
        padding: 20px;

        h3 {
          color: #3498db;
          margin-top: 0;
          margin-bottom: 12px;
          font-size: 1.2rem;
          display: flex;
          align-items: center;

          &::before {
            content: '';
            display: inline-block;
            width: 6px;
            height: 6px;
            border-radius: 50%;
            background: #3498db;
            margin-right: 10px;
          }
        }

        .loader-description {
          margin-bottom: 20px;

          p {
            margin: 0;
            color: #4a5568;
          }
        }

        .loader-config {
          margin-bottom: 20px;
          background: #f8fafc;
          border-radius: 6px;
          overflow: hidden;
          border: 1px solid #e2e8f0;

          pre {
            margin: 0;
            padding: 15px;
            overflow-x: auto;
            font-size: 0.9rem;
            background: #f8fafc;

            code {
              font-family: 'Fira Code', 'Courier New', monospace;
              color: #2d3748;
              line-height: 1.5;
            }
          }
        }

        .loader-usage {
          ul {
            padding-left: 20px;
            margin: 0;

            li {
              margin-bottom: 8px;
              position: relative;
              padding-left: 20px;

              &::before {
                content: 'â€¢';
                position: absolute;
                left: 0;
                color: #3498db;
                font-size: 1.2rem;
              }
            }
          }
        }
      }
    }
  }

  .best-practices {
    background: white;
    padding: 30px;
    border-radius: 10px;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
    margin-bottom: 40px;

    h2 {
      color: #3498db;
      margin-top: 0;
      margin-bottom: 25px;
      text-align: center;
      font-size: 1.8rem;
    }

    .practice-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
      gap: 20px;

      .practice-card {
        background: #f8fafc;
        padding: 25px;
        border-radius: 8px;
        text-align: center;
        transition: transform 0.3s ease;

        &:hover {
          transform: translateY(-5px);
        }

        .practice-icon {
          font-size: 2.5rem;
          margin-bottom: 15px;
        }

        h3 {
          color: #2c3e50;
          margin-top: 0;
          margin-bottom: 12px;
        }

        p {
          margin: 0;
          color: #4a5568;
          font-size: 0.95rem;
        }
      }
    }
  }

  .footer {
    text-align: center;
    padding: 20px;
    color: #718096;
    font-size: 0.9rem;
    border-top: 1px solid #e2e8f0;

    a {
      color: #3498db;
      text-decoration: none;

      &:hover {
        text-decoration: underline;
      }
    }
  }
}

@media (max-width: 768px) {
  .loader-list {
    grid-template-columns: 1fr !important;
  }

  .practice-grid {
    grid-template-columns: 1fr !important;
  }
}
</style>
