<template>
  <div class="webpack-plugins-container">
    <div class="intro-header">
      <h1 class="main-title">
        <span class="title-icon">ğŸ“¦</span> Webpack å¸¸ç”¨ Plugin åŸºç¡€ä»‹ç»
      </h1>
      <div class="subtitle">
        æå‡æ„å»ºæ•ˆç‡ä¸é¡¹ç›®ä¼˜åŒ–çš„æ ¸å¿ƒå·¥å…·
      </div>
    </div>

    <div class="content-explanation">
      <div class="explanation-card">
        <h2 class="explanation-title">ğŸ” ä»€ä¹ˆæ˜¯ Webpack Plugin?</h2>
        <p class="explanation-text">
          Plugin æ˜¯ Webpack ç”Ÿæ€ç³»ç»Ÿçš„é‡è¦ç»„æˆéƒ¨åˆ†ï¼Œç”¨äºæ‰§è¡Œæ›´å¹¿æ³›çš„ä»»åŠ¡ï¼ŒåŒ…æ‹¬æ‰“åŒ…ä¼˜åŒ–ã€èµ„æºç®¡ç†å’Œç¯å¢ƒå˜é‡æ³¨å…¥ç­‰ã€‚
          ä¸ loader ä¸åŒï¼Œplugin å¯ä»¥æ·±å…¥åˆ°æ‰“åŒ…æµç¨‹çš„å„ä¸ªç¯èŠ‚ï¼Œæä¾›æ›´å¼ºå¤§çš„å®šåˆ¶åŠŸèƒ½ã€‚
        </p>
      </div>
    </div>

    <div class="plugin-grid">
      <!-- HtmlWebpackPlugin -->
      <div class="plugin-card">
        <div class="plugin-header">
          <div class="plugin-icon">ğŸ“„</div>
          <h3 class="plugin-title">HtmlWebpackPlugin</h3>
        </div>

        <div class="plugin-section">
          <h4 class="section-title">ğŸ’¡ ä½œç”¨</h4>
          <ul class="feature-list">
            <li>è‡ªåŠ¨ç”Ÿæˆ HTML æ–‡ä»¶</li>
            <li>è‡ªåŠ¨æ³¨å…¥æ‰“åŒ…åçš„ JS/CSS èµ„æº</li>
            <li>æ”¯æŒæ¨¡æ¿å®šåˆ¶å’Œå˜é‡æ³¨å…¥</li>
          </ul>
        </div>

        <div class="plugin-section">
          <h4 class="section-title">âš™ï¸ é…ç½®ç¤ºä¾‹</h4>
          <pre class="code-block">const HtmlWebpackPlugin = require('html-webpack-plugin');

module.exports = {
  plugins: [
    new HtmlWebpackPlugin({
      template: './src/index.html',
      filename: 'index.html',
      title: 'My App',
      favicon: './src/favicon.ico',
      minify: {
        collapseWhitespace: true,
        removeComments: true
      }
    })
  ]
}</pre>
        </div>

        <div class="plugin-section">
          <h4 class="section-title">ğŸ¯ ä½¿ç”¨åœºæ™¯</h4>
          <ul class="usage-list">
            <li>SPA åº”ç”¨å…¥å£æ–‡ä»¶ç”Ÿæˆ</li>
            <li>å¤šé¡µé¢åº”ç”¨(MPA)çš„ HTML ç®¡ç†</li>
            <li>è‡ªåŠ¨åŒ–èµ„æºæ³¨å…¥</li>
          </ul>
        </div>
      </div>

      <!-- MiniCssExtractPlugin -->
      <div class="plugin-card">
        <div class="plugin-header">
          <div class="plugin-icon">ğŸ¨</div>
          <h3 class="plugin-title">MiniCssExtractPlugin</h3>
        </div>

        <div class="plugin-section">
          <h4 class="section-title">ğŸ’¡ ä½œç”¨</h4>
          <ul class="feature-list">
            <li>æå– CSS åˆ°å•ç‹¬æ–‡ä»¶</li>
            <li>æ”¯æŒ CSS å’Œ SourceMaps æŒ‰éœ€åŠ è½½</li>
            <li>å‡å°‘ JS ä½“ç§¯ï¼Œæé«˜åŠ è½½é€Ÿåº¦</li>
          </ul>
        </div>

        <div class="plugin-section">
          <h4 class="section-title">âš™ï¸ é…ç½®ç¤ºä¾‹</h4>
          <pre class="code-block">const MiniCssExtractPlugin = require('mini-css-extract-plugin');

module.exports = {
  module: {
    rules: [
      {
        test: /\.css$/,
        use: [
          MiniCssExtractPlugin.loader,
          'css-loader',
          'postcss-loader'
        ]
      }
    ]
  },
  plugins: [
    new MiniCssExtractPlugin({
      filename: 'styles/[name].[contenthash:8].css',
      chunkFilename: 'styles/[id].[contenthash:8].css'
    })
  ]
}</pre>
        </div>

        <div class="plugin-section">
          <h4 class="section-title">ğŸ¯ ä½¿ç”¨åœºæ™¯</h4>
          <ul class="usage-list">
            <li>ç”Ÿäº§ç¯å¢ƒ CSS ä¼˜åŒ–</li>
            <li>å¤§å‹é¡¹ç›®æ ·å¼æ–‡ä»¶ç®¡ç†</li>
            <li>CSS æ–‡ä»¶ç¼“å­˜ä¼˜åŒ–</li>
          </ul>
        </div>
      </div>

      <!-- CopyWebpackPlugin -->
      <div class="plugin-card">
        <div class="plugin-header">
          <div class="plugin-icon">ğŸ“‚</div>
          <h3 class="plugin-title">CopyWebpackPlugin</h3>
        </div>

        <div class="plugin-section">
          <h4 class="section-title">ğŸ’¡ ä½œç”¨</h4>
          <ul class="feature-list">
            <li>å¤åˆ¶æ–‡ä»¶/ç›®å½•åˆ°æ„å»ºç›®å½•</li>
            <li>æ”¯æŒæ–‡ä»¶è¿‡æ»¤å’Œè·¯å¾„è½¬æ¢</li>
            <li>ä¿ç•™æ–‡ä»¶åŸå§‹ç»“æ„å’Œå±æ€§</li>
          </ul>
        </div>

        <div class="plugin-section">
          <h4 class="section-title">âš™ï¸ é…ç½®ç¤ºä¾‹</h4>
          <pre class="code-block">const CopyPlugin = require('copy-webpack-plugin');

module.exports = {
  plugins: [
    new CopyPlugin({
      patterns: [
        {
          from: 'public/assets',
          to: 'static',
          globOptions: {
            ignore: ['**/.DS_Store', '**/temp/**']
          }
        },
        {
          from: 'public/favicon.ico',
          to: 'favicon.ico'
        }
      ]
    })
  ]
}</pre>
        </div>

        <div class="plugin-section">
          <h4 class="section-title">ğŸ¯ ä½¿ç”¨åœºæ™¯</h4>
          <ul class="usage-list">
            <li>é™æ€èµ„æºï¼ˆå›¾ç‰‡/å­—ä½“ï¼‰å¤åˆ¶</li>
            <li>é…ç½®æ–‡ä»¶ï¼ˆå¦‚ robots.txtï¼‰å¤åˆ¶</li>
            <li>ç¬¬ä¸‰æ–¹åº“ä¸éœ€è¦æ‰“åŒ…æ—¶çš„å¤åˆ¶</li>
          </ul>
        </div>
      </div>

      <!-- DefinePlugin -->
      <div class="plugin-card">
        <div class="plugin-header">
          <div class="plugin-icon">ğŸ”§</div>
          <h3 class="plugin-title">DefinePlugin</h3>
        </div>

        <div class="plugin-section">
          <h4 class="section-title">ğŸ’¡ ä½œç”¨</h4>
          <ul class="feature-list">
            <li>å®šä¹‰å…¨å±€å¸¸é‡</li>
            <li>åœ¨ç¼–è¯‘é˜¶æ®µæ›¿æ¢ä»£ç ä¸­çš„å˜é‡</li>
            <li>åŒºåˆ†å¼€å‘ç¯å¢ƒä¸ç”Ÿäº§ç¯å¢ƒ</li>
          </ul>
        </div>

        <div class="plugin-section">
          <h4 class="section-title">âš™ï¸ é…ç½®ç¤ºä¾‹</h4>
          <pre class="code-block">const webpack = require('webpack');

module.exports = {
  plugins: [
    new webpack.DefinePlugin({
      // å­—ç¬¦ä¸²éœ€è¦ JSON.stringify
      'process.env.API_URL': JSON.stringify('https://api.example.com'),
      'process.env.NODE_ENV': JSON.stringify(process.env.NODE_ENV),
      'APP_VERSION': JSON.stringify('1.2.0'),
      __DEV__: process.env.NODE_ENV === 'development'
    })
  ]
}</pre>
        </div>

        <div class="plugin-section">
          <h4 class="section-title">ğŸ¯ ä½¿ç”¨åœºæ™¯</h4>
          <ul class="usage-list">
            <li>ç¯å¢ƒå˜é‡æ³¨å…¥</li>
            <li>å…¨å±€é…ç½®å¸¸é‡</li>
            <li>æ¡ä»¶ç¼–è¯‘ï¼ˆå¼€å‘/ç”Ÿäº§ç¯å¢ƒï¼‰</li>
          </ul>
        </div>
      </div>

      <!-- CleanWebpackPlugin -->
      <div class="plugin-card">
        <div class="plugin-header">
          <div class="plugin-icon">ğŸ§¹</div>
          <h3 class="plugin-title">CleanWebpackPlugin</h3>
        </div>

        <div class="plugin-section">
          <h4 class="section-title">ğŸ’¡ ä½œç”¨</h4>
          <ul class="feature-list">
            <li>åœ¨æ¯æ¬¡æ„å»ºå‰æ¸…ç†è¾“å‡ºç›®å½•</li>
            <li>é¿å…æ—§æ–‡ä»¶æ®‹ç•™</li>
            <li>æ”¯æŒæ’é™¤ç‰¹å®šæ–‡ä»¶</li>
          </ul>
        </div>

        <div class="plugin-section">
          <h4 class="section-title">âš™ï¸ é…ç½®ç¤ºä¾‹</h4>
          <pre class="code-block">const { CleanWebpackPlugin } = require('clean-webpack-plugin');

module.exports = {
  plugins: [
    new CleanWebpackPlugin({
      cleanOnceBeforeBuildPatterns: [
        '**/*',
        '!stats.json', // æ’é™¤ç‰¹å®šæ–‡ä»¶
        '!important-config.json'
      ],
      cleanAfterEveryBuildPatterns: ['!*.html'],
      dry: false, // æ¨¡æ‹Ÿåˆ é™¤ï¼ˆæµ‹è¯•ç”¨ï¼‰
      verbose: true // æ˜¾ç¤ºåˆ é™¤æ—¥å¿—
    })
  ]
}</pre>
        </div>

        <div class="plugin-section">
          <h4 class="section-title">ğŸ¯ ä½¿ç”¨åœºæ™¯</h4>
          <ul class="usage-list">
            <li>ç”Ÿäº§æ„å»ºå‰æ¸…ç† dist ç›®å½•</li>
            <li>é¿å…æ—§æ–‡ä»¶å¯¼è‡´æ„å»ºç»“æœä¸ä¸€è‡´</li>
            <li>CI/CD ç¯å¢ƒè‡ªåŠ¨åŒ–æ¸…ç†</li>
          </ul>
        </div>
      </div>

      <!-- BundleAnalyzerPlugin -->
      <div class="plugin-card">
        <div class="plugin-header">
          <div class="plugin-icon">ğŸ“Š</div>
          <h3 class="plugin-title">BundleAnalyzerPlugin</h3>
        </div>

        <div class="plugin-section">
          <h4 class="section-title">ğŸ’¡ ä½œç”¨</h4>
          <ul class="feature-list">
            <li>å¯è§†åŒ–åˆ†ææ‰“åŒ…ç»“æœ</li>
            <li>å±•ç¤ºæ¨¡å—å¤§å°åŠä¾èµ–å…³ç³»</li>
            <li>å¸®åŠ©è¯†åˆ«æ€§èƒ½ç“¶é¢ˆ</li>
          </ul>
        </div>

        <div class="plugin-section">
          <h4 class="section-title">âš™ï¸ é…ç½®ç¤ºä¾‹</h4>
          <pre class="code-block">const BundleAnalyzerPlugin = require('webpack-bundle-analyzer')
  .BundleAnalyzerPlugin;

module.exports = {
  plugins: [
    new BundleAnalyzerPlugin({
      analyzerMode: 'server', // server | static | disabled
      analyzerHost: '127.0.0.1',
      analyzerPort: 8888,
      openAnalyzer: true,
      generateStatsFile: true,
      statsFilename: 'stats.json'
    })
  ]
}</pre>
        </div>

        <div class="plugin-section">
          <h4 class="section-title">ğŸ¯ ä½¿ç”¨åœºæ™¯</h4>
          <ul class="usage-list">
            <li>åˆ†ææ‰“åŒ…ä½“ç§¯å¤§å°</li>
            <li>è¯†åˆ«é‡å¤ä¾èµ–å’Œå¤§å‹æ¨¡å—</li>
            <li>ä¼˜åŒ–åº”ç”¨ç¨‹åºåŠ è½½æ€§èƒ½</li>
          </ul>
        </div>
      </div>
    </div>

    <div class="comparison-section">
      <h2 class="section-title">âš–ï¸ Plugin vs Loader å¯¹æ¯”</h2>
      <div class="comparison-table">
        <table>
          <thead>
            <tr>
              <th>ç‰¹æ€§</th>
              <th>Plugin</th>
              <th>Loader</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>ä¸»è¦èŒè´£</td>
              <td>æ‰©å±•åŠŸèƒ½ï¼Œæ‰§è¡Œæ›´å¹¿æ³›çš„ä»»åŠ¡</td>
              <td>è½¬æ¢ç‰¹å®šç±»å‹æ¨¡å—</td>
            </tr>
            <tr>
              <td>æ‰§è¡Œæ—¶æœº</td>
              <td>æ•´ä¸ªæ„å»ºç”Ÿå‘½å‘¨æœŸ</td>
              <td>æ¨¡å—åŠ è½½æ—¶</td>
            </tr>
            <tr>
              <td>åŠŸèƒ½èŒƒå›´</td>
              <td>æ‰“åŒ…ä¼˜åŒ–ã€èµ„æºç®¡ç†ã€ç¯å¢ƒæ³¨å…¥</td>
              <td>æ–‡ä»¶è½¬æ¢ï¼ˆå¦‚JSXâ†’JSï¼‰</td>
            </tr>
            <tr>
              <td>é…ç½®ä½ç½®</td>
              <td>plugins æ•°ç»„</td>
              <td>module.rules æ•°ç»„</td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>

    <div class="best-practices">
      <h2 class="section-title">ğŸš€ Plugin æœ€ä½³å®è·µ</h2>
      <div class="practices-grid">
        <div class="practice-card">
          <div class="practice-icon">1ï¸âƒ£</div>
          <h3>æŒ‰ç¯å¢ƒä½¿ç”¨</h3>
          <p>å¼€å‘ç¯å¢ƒï¼šçƒ­æ›´æ–°æ’ä»¶<br>ç”Ÿäº§ç¯å¢ƒï¼šå‹ç¼©ã€ä¼˜åŒ–æ’ä»¶</p>
        </div>
        <div class="practice-card">
          <div class="practice-icon">2ï¸âƒ£</div>
          <h3>æ³¨æ„æ‰§è¡Œé¡ºåº</h3>
          <p>pluginsæ•°ç»„ä¸­çš„é¡ºåºå¾ˆé‡è¦ï¼Œå½±å“æ‰§è¡Œé¡ºåº</p>
        </div>
        <div class="practice-card">
          <div class="practice-icon">3ï¸âƒ£</div>
          <h3>å®šæœŸæ›´æ–°</h3>
          <p>ä¿æŒæ’ä»¶ç‰ˆæœ¬æ›´æ–°ä»¥è·å–æ€§èƒ½æ”¹è¿›å’Œå®‰å…¨ä¿®å¤</p>
        </div>
        <div class="practice-card">
          <div class="practice-icon">4ï¸âƒ£</div>
          <h3>é€‚å½“é…ç½®</h3>
          <p>é¿å…ä½¿ç”¨é»˜è®¤é…ç½®ï¼Œæ ¹æ®é¡¹ç›®éœ€æ±‚è°ƒæ•´å‚æ•°</p>
        </div>
      </div>
    </div>
  </div>
</template>

<script lang="ts" setup>
import { ref } from 'vue';

// ç®€å•æ¨¡æ‹Ÿæ•°æ®ï¼Œå®é™…ç»„ä»¶ä¸­ä¸éœ€è¦
const plugins = ref([
  { name: 'HtmlWebpackPlugin', description: 'ç”ŸæˆHTMLæ–‡ä»¶å¹¶æ³¨å…¥èµ„æº' },
]);
</script>

<style lang="less" scoped>
@import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap');

.webpack-plugins-container {
  max-width: 1200px;
  margin: 0 auto;
  padding: 2rem 1.5rem;
  font-family: 'Inter', sans-serif;
  background-color: #f8fafc;
  color: #334155;
  line-height: 1.6;
}

.intro-header {
  text-align: center;
  margin-bottom: 2.5rem;
}

.main-title {
  font-size: 2.4rem;
  margin-bottom: 0.5rem;
  color: #1e293b;
  font-weight: 700;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 0.8rem;

  .title-icon {
    font-size: 2.2rem;
  }
}

.subtitle {
  font-size: 1.1rem;
  color: #64748b;
  font-weight: 500;
}

.content-explanation {
  margin-bottom: 2.5rem;

  .explanation-card {
    background: white;
    border-radius: 12px;
    padding: 1.75rem;
    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
    border: 1px solid #e2e8f0;
  }

  .explanation-title {
    font-size: 1.5rem;
    margin-top: 0;
    color: #1e40af;
    display: flex;
    align-items: center;
    gap: 0.6rem;
  }

  .explanation-text {
    font-size: 1.05rem;
    margin-bottom: 0;
    color: #475569;
  }
}

.plugin-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
  gap: 1.8rem;
  margin-bottom: 3rem;
}

.plugin-card {
  background: white;
  border-radius: 12px;
  overflow: hidden;
  box-shadow: 0 6px 15px rgba(0, 0, 0, 0.06);
  border: 1px solid #e2e8f0;
  transition: transform 0.3s ease, box-shadow 0.3s ease;

  &:hover {
    transform: translateY(-5px);
    box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
  }
}

.plugin-header {
  background: linear-gradient(135deg, #3b82f6, #6366f1);
  color: white;
  padding: 1.3rem 1.5rem;
  display: flex;
  align-items: center;
  gap: 1rem;
}

.plugin-icon {
  font-size: 2rem;
  background: rgba(255, 255, 255, 0.2);
  border-radius: 10px;
  width: 50px;
  height: 50px;
  display: flex;
  align-items: center;
  justify-content: center;
}

.plugin-title {
  margin: 0;
  font-size: 1.45rem;
  font-weight: 600;
}

.plugin-section {
  padding: 1.2rem 1.5rem;
  border-bottom: 1px solid #f1f5f9;

  &:last-child {
    border-bottom: none;
  }
}

.section-title {
  font-size: 1.15rem;
  margin: 0.5rem 0 1rem;
  color: #1e40af;
  display: flex;
  align-items: center;
  gap: 0.5rem;

  &::before {
    content: "";
    display: inline-block;
    width: 6px;
    height: 6px;
    background: #3b82f6;
    border-radius: 50%;
    margin-right: 0.5rem;
  }
}

.feature-list,
.usage-list {
  padding-left: 1.2rem;
  margin: 0.8rem 0;

  li {
    margin-bottom: 0.5rem;
    position: relative;
    padding-left: 1.2rem;

    &::before {
      content: "â€¢";
      color: #3b82f6;
      font-weight: bold;
      position: absolute;
      left: 0;
    }
  }
}

.usage-list li::before {
  color: #10b981;
}

.code-block {
  background-color: #1e293b;
  color: #e2e8f0;
  border-radius: 8px;
  padding: 1.2rem;
  font-family: 'Fira Code', monospace;
  font-size: 0.88rem;
  line-height: 1.5;
  overflow-x: auto;
  margin: 1rem 0;
  border-left: 4px solid #3b82f6;
}

.comparison-section {
  background: white;
  border-radius: 12px;
  padding: 1.75rem;
  margin-bottom: 2.5rem;
  box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
  border: 1px solid #e2e8f0;

  .section-title {
    font-size: 1.5rem;
    margin-top: 0;
    color: #1e40af;
    margin-bottom: 1.5rem;
    text-align: center;
  }
}

.comparison-table {
  overflow-x: auto;

  table {
    width: 100%;
    border-collapse: collapse;
    min-width: 600px;

    th,
    td {
      padding: 1rem;
      text-align: left;
      border: 1px solid #e2e8f0;
    }

    th {
      background-color: #eff6ff;
      color: #1d4ed8;
      font-weight: 600;
    }

    tr:nth-child(even) {
      background-color: #f8fafc;
    }

    tr:hover {
      background-color: #f1f5f9;
    }
  }
}

.best-practices {
  .section-title {
    font-size: 1.5rem;
    margin-top: 0;
    color: #1e40af;
    margin-bottom: 1.5rem;
    text-align: center;
  }
}

.practices-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
  gap: 1.5rem;
}

.practice-card {
  background: white;
  border-radius: 10px;
  padding: 1.5rem;
  text-align: center;
  box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
  border: 1px solid #e2e8f0;
  transition: transform 0.2s ease;

  &:hover {
    transform: translateY(-3px);
  }

  h3 {
    margin: 1rem 0 0.8rem;
    color: #1e40af;
    font-size: 1.2rem;
  }

  p {
    margin: 0;
    color: #475569;
    font-size: 0.95rem;
    line-height: 1.5;
  }
}

.practice-icon {
  font-size: 1.8rem;
  margin-bottom: 0.5rem;
  display: inline-block;
}

@media (max-width: 768px) {
  .main-title {
    font-size: 2rem;
  }

  .plugin-grid {
    grid-template-columns: 1fr;
  }

  .comparison-table {
    table {
      min-width: 100%;
    }
  }
}

@media (max-width: 480px) {
  .main-title {
    font-size: 1.7rem;
    flex-direction: column;
    gap: 0.5rem;
  }

  .plugin-header {
    flex-direction: column;
    text-align: center;
    gap: 0.8rem;
  }

  .practices-grid {
    grid-template-columns: 1fr;
  }
}
</style>
