<template>
  <div class="module-federation-container">
    <header class="header">
      <h1>Webpack æ¨¡å—è”é‚¦åŸç†å‰–æ</h1>
      <p class="subtitle">æ·±å…¥ç†è§£å¾®å‰ç«¯æ¶æ„çš„æ ¸å¿ƒæŠ€æœ¯</p>
    </header>

    <div class="toc-container">
      <div class="toc-card">
        <h2 class="toc-title">å†…å®¹å¯¼èˆª</h2>
        <ul class="toc-list">
          <li v-for="item in toc" :key="item.id">
            <a :href="`#${item.id}`" class="toc-link">
              <i class="toc-icon">â†’</i>
              {{ item.title }}
            </a>
          </li>
        </ul>
      </div>
    </div>

    <div class="content-section">
      <section id="overview" class="section">
        <h2 class="section-title">
          <i class="section-icon">ğŸ”</i>
          æ¨¡å—è”é‚¦æ¦‚è¿°
        </h2>
        <div class="section-content">
          <p>
            Webpack æ¨¡å—è”é‚¦ï¼ˆModule Federationï¼‰æ˜¯ Webpack 5
            å¼•å…¥çš„ä¸€é¡¹é©å‘½æ€§åŠŸèƒ½ï¼Œå®ƒå…è®¸åœ¨ç‹¬ç«‹çš„åº”ç”¨ç¨‹åºä¹‹é—´å…±äº«ä»£ç å’Œä¾èµ–é¡¹ã€‚
            è¿™ç§æŠ€æœ¯ä½¿å¾—å¾®å‰ç«¯æ¶æ„èƒ½å¤ŸçœŸæ­£å®ç°ç‹¬ç«‹éƒ¨ç½²å’Œè¿è¡Œæ—¶é›†æˆã€‚
          </p>
          <div class="core-principle">
            <h3>æ ¸å¿ƒåŸç†</h3>
            <p>
              <strong>åŠ¨æ€åŠ è½½è¿œç¨‹æ¨¡å—</strong> - åœ¨è¿è¡Œæ—¶ä»å…¶ä»–ç‹¬ç«‹éƒ¨ç½²çš„åº”ç”¨ç¨‹åºä¸­åŠ è½½æ¨¡å—<br />
              <strong>å…±äº«ä¾èµ–</strong> - åœ¨ä¸»æœºå’Œè¿œç¨‹åº”ç”¨ä¹‹é—´å…±äº«å…¬å…±ä¾èµ–é¡¹<br />
              <strong>å»ä¸­å¿ƒåŒ–æ¶æ„</strong> - æ¯ä¸ªåº”ç”¨éƒ½å¯ä»¥ä½œä¸ºä¸»æœºæˆ–è¿œç¨‹åº”ç”¨<br />
              <strong>è¿è¡Œæ—¶é›†æˆ</strong> - ä¸éœ€è¦åœ¨æ„å»ºæ—¶é›†æˆæ‰€æœ‰ä»£ç 
            </p>
          </div>
        </div>
      </section>

      <section id="architecture" class="section">
        <h2 class="section-title">
          <i class="section-icon">ğŸ—ï¸</i>
          ç³»ç»Ÿæ¶æ„
        </h2>
        <div class="section-content">
          <div class="architecture-diagram">
            <div class="architecture-row">
              <div class="app-card host">
                <div class="app-header">ä¸»æœºåº”ç”¨ (Host)</div>
                <div class="app-modules">
                  <div class="module">æ¨¡å— A</div>
                  <div class="module">æ¨¡å— B</div>
                  <div class="module remote-module">è¿œç¨‹æ¨¡å— X</div>
                </div>
                <div class="app-footer">Webpack</div>
              </div>

              <div class="connection">
                <div class="connection-line"></div>
                <div class="connection-label">æ¨¡å—è”é‚¦</div>
              </div>

              <div class="app-card remote">
                <div class="app-header">è¿œç¨‹åº”ç”¨ (Remote)</div>
                <div class="app-modules">
                  <div class="module shared">å…±äº«ä¾èµ–</div>
                  <div class="module exposed">æ¨¡å— X</div>
                  <div class="module">æ¨¡å— Y</div>
                </div>
                <div class="app-footer">Webpack</div>
              </div>
            </div>

            <div class="architecture-legend">
              <div class="legend-item">
                <div class="color-box host"></div>
                <span>ä¸»æœºåº”ç”¨</span>
              </div>
              <div class="legend-item">
                <div class="color-box remote"></div>
                <span>è¿œç¨‹åº”ç”¨</span>
              </div>
              <div class="legend-item">
                <div class="color-box shared"></div>
                <span>å…±äº«ä¾èµ–</span>
              </div>
              <div class="legend-item">
                <div class="color-box exposed"></div>
                <span>æš´éœ²çš„æ¨¡å—</span>
              </div>
            </div>
          </div>

          <div class="architecture-desc">
            <h3>æ¶æ„å…³é”®ç‚¹ï¼š</h3>
            <ul>
              <li><strong>ä¸»æœºåº”ç”¨ (Host)</strong> - æ¶ˆè´¹è¿œç¨‹æ¨¡å—çš„åº”ç”¨</li>
              <li><strong>è¿œç¨‹åº”ç”¨ (Remote)</strong> - æä¾›æ¨¡å—ç»™å…¶ä»–åº”ç”¨ä½¿ç”¨çš„åº”ç”¨</li>
              <li><strong>å…±äº«ä½œç”¨åŸŸ (Shared Scope)</strong> - ç”¨äºå…±äº«å…¬å…±ä¾èµ–é¡¹</li>
              <li><strong>å®¹å™¨ (Container)</strong> - æ¯ä¸ªåº”ç”¨éƒ½æ˜¯ä¸€ä¸ªå®¹å™¨ï¼Œå¯ä»¥æ¶ˆè´¹å…¶ä»–å®¹å™¨</li>
              <li><strong>è¦†ç›–æœºåˆ¶</strong> - å½“å¤šä¸ªç‰ˆæœ¬å…±äº«æ—¶ï¼Œé€‰æ‹©æœ€é«˜å…¼å®¹ç‰ˆæœ¬</li>
            </ul>
          </div>
        </div>
      </section>

      <section id="workflow" class="section">
        <h2 class="section-title">
          <i class="section-icon">ğŸ”„</i>
          å·¥ä½œæµç¨‹
        </h2>
        <div class="section-content">
          <div class="workflow-steps">
            <div class="step">
              <div class="step-number">1</div>
              <div class="step-content">
                <h3>è¿œç¨‹åº”ç”¨é…ç½®</h3>
                <p>åœ¨ Webpack é…ç½®ä¸­æš´éœ²æ¨¡å—ï¼š</p>
                <pre class="code-block">
new ModuleFederationPlugin({
  name: 'remote_app',
  filename: 'remoteEntry.js',
  exposes: {
    './Button': './src/components/Button',
  },
  shared: ['react', 'react-dom']
})</pre
                >
              </div>
            </div>

            <div class="step">
              <div class="step-number">2</div>
              <div class="step-content">
                <h3>ä¸»æœºåº”ç”¨é…ç½®</h3>
                <p>åœ¨ Webpack é…ç½®ä¸­å¼•ç”¨è¿œç¨‹åº”ç”¨ï¼š</p>
                <pre class="code-block">
new ModuleFederationPlugin({
  name: 'host_app',
  remotes: {
    remote_app: 'remote_app@http://example.com/remoteEntry.js'
  },
  shared: ['react', 'react-dom']
})</pre
                >
              </div>
            </div>

            <div class="step">
              <div class="step-number">3</div>
              <div class="step-content">
                <h3>è¿è¡Œæ—¶åŠ è½½</h3>
                <p>ä¸»æœºåº”ç”¨åŠ¨æ€åŠ è½½è¿œç¨‹æ¨¡å—ï¼š</p>
                <pre class="code-block">
const RemoteButton = React.lazy(() =>
  import('remote_app/Button')
);</pre
                >
              </div>
            </div>

            <div class="step">
              <div class="step-number">4</div>
              <div class="step-content">
                <h3>å…±äº«ä¾èµ–è§£æ</h3>
                <p>Webpack åˆ›å»ºå…±äº«ä½œç”¨åŸŸï¼ŒåŠ è½½å¹¶ç®¡ç†å…±äº«ä¾èµ–ï¼š</p>
                <pre class="code-block">
__webpack_require__.S = (global) => {
  // å…±äº«ä½œç”¨åŸŸç®¡ç†
  // æ£€æŸ¥ä¾èµ–ç‰ˆæœ¬å…¼å®¹æ€§
  // åŠ è½½æœ€é«˜å…¼å®¹ç‰ˆæœ¬
}</pre
                >
              </div>
            </div>
          </div>
        </div>
      </section>

      <section id="core-mechanism" class="section">
        <h2 class="section-title">
          <i class="section-icon">âš™ï¸</i>
          æ ¸å¿ƒæœºåˆ¶
        </h2>
        <div class="section-content">
          <div class="mechanism-grid">
            <div class="mechanism-card">
              <h3>1. å®¹å™¨åˆå§‹åŒ–</h3>
              <p>å½“ä¸»æœºåº”ç”¨å¯åŠ¨æ—¶ï¼Œä¼šåŠ è½½è¿œç¨‹åº”ç”¨çš„å…¥å£æ–‡ä»¶ï¼ˆremoteEntry.jsï¼‰ï¼Œè¯¥æ–‡ä»¶åŒ…å«ï¼š</p>
              <ul>
                <li>è¿œç¨‹æ¨¡å—çš„æ˜ å°„è¡¨</li>
                <li>å…±äº«ä¾èµ–çš„ç‰ˆæœ¬ä¿¡æ¯</li>
                <li>åˆå§‹åŒ–å‡½æ•°å’ŒåŠ è½½é€»è¾‘</li>
              </ul>
            </div>

            <div class="mechanism-card">
              <h3>2. æ¨¡å—åŠ è½½åè®®</h3>
              <p>å½“ä¸»æœºåº”ç”¨è¯·æ±‚è¿œç¨‹æ¨¡å—æ—¶ï¼š</p>
              <pre class="code-block">
// 1. æ£€æŸ¥å…±äº«ä¾èµ–
// 2. åŠ è½½è¿œç¨‹æ¨¡å—å®¹å™¨
// 3. ä»å®¹å™¨ä¸­è·å–æ¨¡å—å·¥å‚
// 4. æ‰§è¡Œå·¥å‚å‡½æ•°åˆ›å»ºæ¨¡å—å®ä¾‹</pre
              >
            </div>

            <div class="mechanism-card">
              <h3>3. å…±äº«ä¾èµ–ç®¡ç†</h3>
              <p>Webpack ä½¿ç”¨å…±äº«ä½œç”¨åŸŸï¼ˆ__webpack_require__.Sï¼‰æ¥ï¼š</p>
              <ul>
                <li>å­˜å‚¨æ‰€æœ‰å…±äº«ä¾èµ–</li>
                <li>è§£å†³ç‰ˆæœ¬å†²çªï¼ˆä½¿ç”¨è¯­ä¹‰åŒ–ç‰ˆæœ¬æ§åˆ¶ï¼‰</li>
                <li>ç¡®ä¿æ‰€æœ‰åº”ç”¨ä½¿ç”¨ç›¸åŒçš„ä¾èµ–å®ä¾‹</li>
              </ul>
            </div>

            <div class="mechanism-card">
              <h3>4. å¼‚æ­¥åŠ è½½æœºåˆ¶</h3>
              <p>æ¨¡å—è”é‚¦ä½¿ç”¨ Webpack çš„åŠ¨æ€å¯¼å…¥åŠŸèƒ½ï¼š</p>
              <pre class="code-block">
// åº•å±‚ä½¿ç”¨ promise é“¾
__webpack_require__.e("remote_app_Button")
  .then(__webpack_require__.bind(__webpack_require__,
        "remote_app/Button"))
  .then(module => {
    // ä½¿ç”¨æ¨¡å—
  });</pre
              >
            </div>
          </div>
        </div>
      </section>

      <section id="config-reference" class="section">
        <h2 class="section-title">
          <i class="section-icon">âš™ï¸</i>
          é…ç½®å‚è€ƒ
        </h2>
        <div class="section-content">
          <div class="config-table">
            <table>
              <thead>
                <tr>
                  <th>é…ç½®é¡¹</th>
                  <th>ç±»å‹</th>
                  <th>è¯´æ˜</th>
                  <th>ç¤ºä¾‹</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td><code>name</code></td>
                  <td>string</td>
                  <td>åº”ç”¨å”¯ä¸€æ ‡è¯†</td>
                  <td><code>name: 'app1'</code></td>
                </tr>
                <tr>
                  <td><code>filename</code></td>
                  <td>string</td>
                  <td>è¿œç¨‹å…¥å£æ–‡ä»¶å</td>
                  <td><code>filename: 'remoteEntry.js'</code></td>
                </tr>
                <tr>
                  <td><code>remotes</code></td>
                  <td>object</td>
                  <td>å¼•ç”¨çš„è¿œç¨‹åº”ç”¨</td>
                  <td><code>remotes: { app2: 'app2@[url]' }</code></td>
                </tr>
                <tr>
                  <td><code>exposes</code></td>
                  <td>object</td>
                  <td>æš´éœ²ç»™å…¶ä»–åº”ç”¨çš„æ¨¡å—</td>
                  <td><code>exposes: { './Button': './src/Button' }</code></td>
                </tr>
                <tr>
                  <td><code>shared</code></td>
                  <td>array/object</td>
                  <td>å…±äº«çš„ä¾èµ–é¡¹</td>
                  <td><code>shared: ['react', 'react-dom']</code></td>
                </tr>
                <tr>
                  <td><code>library</code></td>
                  <td>object</td>
                  <td>æ¨¡å—å¯¼å‡ºç±»å‹</td>
                  <td><code>library: { type: 'var', name: 'app1' }</code></td>
                </tr>
              </tbody>
            </table>
          </div>

          <div class="config-details">
            <h3>å…±äº«ä¾èµ–é«˜çº§é…ç½®</h3>
            <pre class="code-block">
shared: {
  react: {
    requiredVersion: '^17.0.0',
    singleton: true, // åªå…è®¸å•ä¸ªå®ä¾‹
    eager: true      // ç«‹å³åŠ è½½è€Œéå¼‚æ­¥
  },
  'react-dom': {
    requiredVersion: '^17.0.0',
    singleton: true
  }
}</pre
            >
          </div>
        </div>
      </section>

      <section id="advantages" class="section">
        <h2 class="section-title">
          <i class="section-icon">ğŸš€</i>
          ä¼˜åŠ¿ä¸æŒ‘æˆ˜
        </h2>
        <div class="section-content">
          <div class="pros-cons">
            <div class="pros">
              <h3>ä¼˜åŠ¿</h3>
              <ul>
                <li><strong>ç‹¬ç«‹éƒ¨ç½²</strong> - æ¯ä¸ªåº”ç”¨å¯ä»¥ç‹¬ç«‹æ„å»ºå’Œéƒ¨ç½²</li>
                <li><strong>è¿è¡Œæ—¶é›†æˆ</strong> - ä¸éœ€è¦åœ¨æ„å»ºæ—¶é›†æˆæ‰€æœ‰ä»£ç </li>
                <li><strong>ä»£ç å…±äº«</strong> - é«˜æ•ˆå…±äº«å…¬å…±ä¾èµ–å’Œç»„ä»¶</li>
                <li><strong>å›¢é˜Ÿè‡ªæ²»</strong> - ä¸åŒå›¢é˜Ÿå¯ä»¥ä½¿ç”¨ä¸åŒæŠ€æœ¯æ ˆ</li>
                <li><strong>å¢é‡å‡çº§</strong> - é€æ­¥æ›¿æ¢æ—§ç³»ç»Ÿç»„ä»¶</li>
              </ul>
            </div>

            <div class="cons">
              <h3>æŒ‘æˆ˜</h3>
              <ul>
                <li><strong>ä¾èµ–ç®¡ç†</strong> - å…±äº«ä¾èµ–ç‰ˆæœ¬å†²çªé—®é¢˜</li>
                <li><strong>æ€§èƒ½å½±å“</strong> - åˆå§‹åŠ è½½å¯èƒ½éœ€è¦å¤šä¸ªè¯·æ±‚</li>
                <li><strong>è°ƒè¯•å¤æ‚åº¦</strong> - è·¨åº”ç”¨è°ƒè¯•æ›´å›°éš¾</li>
                <li><strong>ç±»å‹å®‰å…¨</strong> - TypeScript æ”¯æŒéœ€è¦é¢å¤–é…ç½®</li>
                <li><strong>å®‰å…¨è€ƒè™‘</strong> - éœ€è¦ç¡®ä¿è¿œç¨‹èµ„æºçš„å®‰å…¨æ€§</li>
              </ul>
            </div>
          </div>

          <div class="optimization">
            <h3>æœ€ä½³å®è·µä¸ä¼˜åŒ–</h3>
            <ul>
              <li>ä½¿ç”¨ <code>singleton: true</code> ç¡®ä¿å…±äº«ä¾èµ–å•ä¾‹</li>
              <li>åˆç†è®¾ç½® <code>requiredVersion</code> çº¦æŸç‰ˆæœ¬èŒƒå›´</li>
              <li>å¯¹å…³é”®å…±äº«ä¾èµ–ä½¿ç”¨ <code>eager: true</code> é¢„åŠ è½½</li>
              <li>ä½¿ç”¨ CDN åˆ†å‘è¿œç¨‹å…¥å£æ–‡ä»¶</li>
              <li>å®ç°æ¨¡å—è”é‚¦çš„å®¹é”™å’Œé™çº§æœºåˆ¶</li>
              <li>ä½¿ç”¨ç±»å‹å®‰å…¨å·¥å…·ï¼ˆå¦‚ @module-federation/typescriptï¼‰</li>
            </ul>
          </div>
        </div>
      </section>
    </div>

    <footer class="footer">
      <p>Webpack æ¨¡å—è”é‚¦åŸç†ä»‹ç»  | å‰ç«¯æ¶æ„ä¸å·¥ç¨‹åŒ–</p>
      <p class="version">Webpack 5+ | æ¨¡å—è”é‚¦ API v1.0</p>
    </footer>
  </div>
</template>

<script setup lang="ts">
import { ref } from 'vue'

const toc = ref([
  { id: 'overview', title: 'æ¨¡å—è”é‚¦æ¦‚è¿°' },
  { id: 'architecture', title: 'ç³»ç»Ÿæ¶æ„' },
  { id: 'workflow', title: 'å·¥ä½œæµç¨‹' },
  { id: 'core-mechanism', title: 'æ ¸å¿ƒæœºåˆ¶' },
  { id: 'config-reference', title: 'é…ç½®å‚è€ƒ' },
  { id: 'advantages', title: 'ä¼˜åŠ¿ä¸æŒ‘æˆ˜' },
])
</script>

<style lang="less" scoped>
@primary-color: #4361ee;
@secondary-color: #3a0ca3;
@accent-color: #4cc9f0;
@light-bg: #f8f9fa;
@card-bg: #ffffff;
@border-color: #e0e0e0;
@text-color: #333;
@text-light: #666;
@text-lighter: #999;
@success-color: #2ecc71;
@warning-color: #f39c12;
@danger-color: #e74c3c;

.module-federation-container {
  max-width: 1200px;
  margin: 0 auto;
  padding: 20px;
  font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
  background-color: #f5f7ff;
  min-height: 100vh;
  color: @text-color;
  line-height: 1.6;
}

.header {
  text-align: center;
  margin-bottom: 40px;
  padding: 30px 0;
  background: linear-gradient(135deg, @primary-color, @secondary-color);
  border-radius: 12px;
  color: white;
  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);

  h1 {
    margin: 0;
    font-size: 2.5rem;
    letter-spacing: -0.5px;
  }

  .subtitle {
    font-size: 1.2rem;
    margin-top: 10px;
    opacity: 0.9;
    font-weight: 300;
  }
}

.toc-container {
  margin-bottom: 40px;

  .toc-card {
    background: @card-bg;
    border-radius: 12px;
    padding: 25px;
    box-shadow: 0 4px 15px rgba(0, 0, 0, 0.05);
    border-left: 4px solid @accent-color;
  }

  .toc-title {
    margin-top: 0;
    color: @secondary-color;
    font-size: 1.5rem;
    padding-bottom: 15px;
    border-bottom: 2px solid #f0f0f0;
  }

  .toc-list {
    list-style: none;
    padding: 0;
    margin: 0;
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
    gap: 15px;
  }

  .toc-link {
    display: flex;
    align-items: center;
    padding: 12px 15px;
    background: #f9f9ff;
    border-radius: 8px;
    text-decoration: none;
    color: @text-color;
    transition: all 0.3s;
    border-left: 3px solid @primary-color;

    &:hover {
      background: rgba(67, 97, 238, 0.1);
      transform: translateX(5px);
    }

    .toc-icon {
      margin-right: 10px;
      color: @primary-color;
      font-weight: bold;
    }
  }
}

.section {
  background: @card-bg;
  border-radius: 12px;
  box-shadow: 0 4px 15px rgba(0, 0, 0, 0.05);
  padding: 30px;
  margin-bottom: 40px;
  transition: transform 0.3s;

  &:hover {
    transform: translateY(-5px);
    box-shadow: 0 6px 20px rgba(0, 0, 0, 0.08);
  }
}

.section-title {
  color: @secondary-color;
  font-size: 1.8rem;
  margin-top: 0;
  margin-bottom: 25px;
  display: flex;
  align-items: center;
  padding-bottom: 15px;
  border-bottom: 2px solid #f0f0f0;

  .section-icon {
    margin-right: 15px;
    font-size: 1.5rem;
  }
}

.section-content {
  h3 {
    color: @primary-color;
    margin-top: 25px;
    font-size: 1.3rem;
  }

  p {
    margin-bottom: 20px;
  }

  ul {
    padding-left: 20px;
    margin-bottom: 20px;

    li {
      margin-bottom: 10px;
    }
  }
}

.architecture-diagram {
  background: #f9f9ff;
  border-radius: 10px;
  padding: 25px;
  margin-bottom: 30px;
  border: 1px solid #e8e8ff;
}

.architecture-row {
  display: flex;
  justify-content: center;
  align-items: center;
  gap: 50px;
  margin-bottom: 30px;
  flex-wrap: wrap;
}

.app-card {
  width: 280px;
  border-radius: 10px;
  overflow: hidden;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);

  .app-header {
    padding: 15px;
    font-weight: bold;
    text-align: center;
    font-size: 1.1rem;
  }

  .app-modules {
    padding: 15px;
    display: flex;
    flex-direction: column;
    gap: 10px;
    min-height: 150px;
  }

  .app-footer {
    padding: 10px;
    text-align: center;
    font-size: 0.9rem;
    color: @text-lighter;
    background: #f0f0f0;
  }
}

.host {
  .app-header {
    background: fade(@primary-color, 20%);
    color: darken(@primary-color, 10%);
  }
}

.remote {
  .app-header {
    background: fade(@accent-color, 20%);
    color: darken(@accent-color, 20%);
  }
}

.module {
  padding: 10px;
  border-radius: 6px;
  text-align: center;
  background: #f0f0f0;
  font-size: 0.9rem;
}

.remote-module {
  background: fade(@accent-color, 30%);
  border: 1px dashed @accent-color;
}

.exposed {
  background: fade(@success-color, 30%);
  border: 1px dashed @success-color;
}

.shared {
  background: fade(@warning-color, 30%);
  border: 1px dashed @warning-color;
}

.connection {
  text-align: center;

  .connection-line {
    width: 2px;
    height: 100px;
    background: @secondary-color;
    margin: 0 auto;
    position: relative;

    &::before,
    &::after {
      content: '';
      position: absolute;
      width: 10px;
      height: 10px;
      border: 2px solid @secondary-color;
      border-radius: 50%;
      background: white;
      left: 50%;
      transform: translateX(-50%);
    }

    &::before {
      top: -5px;
    }

    &::after {
      bottom: -5px;
    }
  }

  .connection-label {
    margin-top: 10px;
    font-weight: bold;
    color: @secondary-color;
    background: fade(@secondary-color, 10%);
    padding: 5px 10px;
    border-radius: 20px;
    display: inline-block;
  }
}

.architecture-legend {
  display: flex;
  justify-content: center;
  gap: 20px;
  flex-wrap: wrap;
  margin-top: 20px;

  .legend-item {
    display: flex;
    align-items: center;
    gap: 8px;
  }

  .color-box {
    width: 20px;
    height: 20px;
    border-radius: 4px;

    &.host {
      background: fade(@primary-color, 30%);
      border: 1px solid @primary-color;
    }

    &.remote {
      background: fade(@accent-color, 30%);
      border: 1px solid @accent-color;
    }

    &.shared {
      background: fade(@warning-color, 30%);
      border: 1px solid @warning-color;
    }

    &.exposed {
      background: fade(@success-color, 30%);
      border: 1px solid @success-color;
    }
  }
}

.workflow-steps {
  display: flex;
  flex-direction: column;
  gap: 30px;
  counter-reset: step-counter;
}

.step {
  display: flex;
  position: relative;
  padding-left: 70px;
  counter-increment: step-counter;

  &::before {
    content: '';
    position: absolute;
    left: 0;
    top: 0;
    height: 100%;
    width: 2px;
    background: @primary-color;
  }
}

.step-number {
  position: absolute;
  left: 0;
  top: 0;
  transform: translateX(-50%);
  width: 40px;
  height: 40px;
  background: @primary-color;
  color: white;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: bold;
  font-size: 1.2rem;
  z-index: 2;
}

.step-content {
  background: #f9f9ff;
  border-radius: 10px;
  padding: 20px;
  width: 100%;
  border-left: 3px solid @primary-color;

  h3 {
    margin-top: 0;
    color: @secondary-color;
  }
}

.mechanism-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(400px, 1fr));
  gap: 25px;
}

.mechanism-card {
  background: #f9f9ff;
  border-radius: 10px;
  padding: 20px;
  border-left: 4px solid @accent-color;

  h3 {
    margin-top: 0;
    color: @primary-color;
    font-size: 1.2rem;
  }

  ul {
    padding-left: 20px;
  }
}

.config-table {
  overflow-x: auto;
  margin-bottom: 30px;

  table {
    width: 100%;
    border-collapse: collapse;
    background: white;

    th,
    td {
      padding: 12px 15px;
      text-align: left;
      border-bottom: 1px solid #f0f0f0;
    }

    th {
      background: fade(@primary-color, 10%);
      color: @primary-color;
      font-weight: 600;
    }

    tr:hover {
      background: #f9f9ff;
    }

    code {
      background: fade(@primary-color, 10%);
      padding: 2px 6px;
      border-radius: 4px;
      font-family: 'Fira Code', monospace;
    }
  }
}

.code-block {
  background: #2d3748;
  color: #e2e8f0;
  border-radius: 8px;
  padding: 15px;
  overflow-x: auto;
  font-family: 'Fira Code', monospace;
  font-size: 0.95rem;
  line-height: 1.5;
  margin: 15px 0;

  pre {
    margin: 0;
  }
}

.pros-cons {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 30px;
  margin-bottom: 30px;

  @media (max-width: 768px) {
    grid-template-columns: 1fr;
  }
}

.pros,
.cons {
  background: #f9f9ff;
  border-radius: 10px;
  padding: 20px;

  h3 {
    margin-top: 0;
    padding-bottom: 10px;
    border-bottom: 2px solid #f0f0f0;
  }
}

.pros {
  border-left: 4px solid @success-color;
}

.cons {
  border-left: 4px solid @warning-color;
}

.optimization {
  background: #f9f9ff;
  border-radius: 10px;
  padding: 20px;
  border-left: 4px solid @accent-color;
}

.footer {
  text-align: center;
  margin-top: 60px;
  padding: 30px 0;
  color: @text-lighter;
  font-size: 0.95rem;
  border-top: 1px solid @border-color;

  .version {
    margin-top: 8px;
    font-size: 0.85rem;
  }
}

@media (max-width: 768px) {
  .header h1 {
    font-size: 2rem;
  }

  .section {
    padding: 20px;
  }

  .architecture-row {
    gap: 30px;
    flex-direction: column;
  }

  .step {
    padding-left: 50px;
  }

  .step-number {
    width: 30px;
    height: 30px;
    font-size: 1rem;
  }
}
</style>
