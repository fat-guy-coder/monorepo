<template>
  <div class="mockjs-guide-container">
    <header class="guide-header">
      <h1>Mock.js ä½¿ç”¨æŒ‡å—</h1>
      <p>è½»æ¾ç”Ÿæˆéšæœºæ•°æ®ï¼Œæ‹¦æˆª AJAX è¯·æ±‚ï¼Œæå‡å‰ç«¯å¼€å‘æ•ˆç‡</p>
      <p><a href="https://mockjs.fenxianglu.cn/" target="_blank">Mock.js ä¸­æ–‡å®˜ç½‘</a></p>
    </header>

    <div class="guide-content">
      <!-- å¯¼èˆª -->
      <nav class="navigation">
        <ul>
          <li v-for="section in sections" :key="section.id" @click="scrollToSection(section.id)">
            {{ section.title }}
          </li>
        </ul>
      </nav>

      <!-- å†…å®¹åŒºåŸŸ -->
      <div class="content">
        <!-- ä»€ä¹ˆæ˜¯Mock.js -->
        <section id="what-is-mockjs" class="guide-section">
          <h2>1. ä»€ä¹ˆæ˜¯ Mock.jsï¼Ÿ</h2>
          <p>
            Mock.js æ˜¯ä¸€ä¸ªç”¨äºç”Ÿæˆéšæœºæ•°æ®ã€æ‹¦æˆª AJAX
            è¯·æ±‚çš„å‰ç«¯åº“ã€‚å®ƒå¯ä»¥è®©å‰ç«¯å¼€å‘äººå‘˜ç‹¬ç«‹äºåç«¯è¿›è¡Œå¼€å‘ï¼Œé€šè¿‡å®šä¹‰æ•°æ®æ¨¡æ¿ç”Ÿæˆæ¨¡æ‹Ÿæ•°æ®ï¼Œå®ç°å‰åç«¯åˆ†ç¦»å¼€å‘ã€‚
          </p>
          <div class="feature-grid">
            <div class="feature-card">
              <div class="feature-icon">ğŸ“Š</div>
              <h3>æ•°æ®æ¨¡æ‹Ÿ</h3>
              <p>æ ¹æ®æ¨¡æ¿ç”Ÿæˆéšæœºæ•°æ®ï¼Œæ”¯æŒå¤šç§æ•°æ®ç±»å‹</p>
            </div>
            <div class="feature-card">
              <div class="feature-icon">ğŸ”Œ</div>
              <h3>AJAX æ‹¦æˆª</h3>
              <p>æ‹¦æˆª AJAX è¯·æ±‚å¹¶è¿”å›æ¨¡æ‹Ÿæ•°æ®</p>
            </div>
            <div class="feature-card">
              <div class="feature-icon">âš™ï¸</div>
              <h3>è¯­æ³•ä¸°å¯Œ</h3>
              <p>æä¾›å¤šç§æ•°æ®å ä½ç¬¦å’Œç”Ÿæˆè§„åˆ™</p>
            </div>
            <div class="feature-card">
              <div class="feature-icon">ğŸš€</div>
              <h3>å¼€å‘åŠ é€Ÿ</h3>
              <p>æ— éœ€ç­‰å¾…åç«¯æ¥å£ï¼Œå‰ç«¯å¯ç‹¬ç«‹å¼€å‘</p>
            </div>
          </div>
        </section>

        <!-- å®‰è£…ä¸é…ç½® -->
        <section id="installation" class="guide-section">
          <h2>2. å®‰è£…ä¸é…ç½®</h2>
          <h3>å®‰è£…</h3>
          <pre class="code-block">
npm install mockjs --save-dev
# æˆ–
yarn add mockjs --dev</pre
          >

          <h3>åœ¨ Vue é¡¹ç›®ä¸­é…ç½®</h3>
          <p>åœ¨é¡¹ç›®ä¸­åˆ›å»º <code>src/mock/index.ts</code> æ–‡ä»¶ï¼š</p>
          <pre class="code-block">
import Mock from 'mockjs'

// åˆ›å»º Mock.Random å®ä¾‹
const Random = Mock.Random

// è®¾ç½®å…¨å±€å»¶æ—¶
Mock.setup({
  timeout: '200-600' // 200ms åˆ° 600ms éšæœºå»¶æ—¶
})

// å¯¼å‡º Mock å’Œ Random
export { Mock, Random }</pre
          >

          <p>åœ¨ <code>main.ts</code> ä¸­å¼•å…¥ï¼š</p>
          <pre class="code-block">
import { createApp } from 'vue'
import App from './App.vue'
import './mock' // å¼•å…¥ mock é…ç½®

createApp(App).mount('#app')</pre
          >
        </section>

        <!-- åŸºæœ¬ä½¿ç”¨ -->
        <section id="basic-usage" class="guide-section">
          <h2>3. åŸºæœ¬ä½¿ç”¨</h2>
          <h3>åˆ›å»ºæ¨¡æ‹Ÿæ•°æ®</h3>
          <pre class="code-block">
import { Mock } from 'mockjs'

// å®šä¹‰æ•°æ®æ¨¡æ¿
const template = {
  'list|5-10': [ // éšæœºç”Ÿæˆ 5-10 ä¸ªå…ƒç´ 
    {
      'id|+1': 1, // è‡ªå¢ ID
      name: '@cname', // éšæœºä¸­æ–‡å
      age: '@integer(20,60)', // 20-60 ä¹‹é—´çš„æ•´æ•°
      email: '@email', // éšæœºé‚®ç®±
      address: '@county(true)', // éšæœºçœå¸‚åŒº
      birth: '@date("yyyy-MM-dd")', // éšæœºæ—¥æœŸ
      avatar: Random.image('100x100', '#4A7BF7', '#fff', 'avatar') // éšæœºå›¾ç‰‡
    }
  ]
}

// ç”Ÿæˆæ¨¡æ‹Ÿæ•°æ®
const mockData = Mock.mock(template)
console.log(mockData)</pre
          >

          <h3>æ‹¦æˆª AJAX è¯·æ±‚</h3>
          <pre class="code-block">
// åœ¨ mock/index.ts ä¸­æ·»åŠ 
Mock.mock('/api/users', 'get', {
  code: 200,
  message: 'success',
  data: {
    'list|10': [
      {
        'id|+1': 1,
        name: '@cname',
        'age|20-60': 1,
        'gender|1': ['ç”·', 'å¥³']
      }
    ]
  }
})

// åœ¨ç»„ä»¶ä¸­è¯·æ±‚
fetch('/api/users')
  .then(response => response.json())
  .then(data => console.log(data))</pre
          >
        </section>

        <!-- æ•°æ®æ¨¡æ¿è¯­æ³• -->
        <section id="template-syntax" class="guide-section">
          <h2>4. æ•°æ®æ¨¡æ¿è¯­æ³•</h2>
          <p>Mock.js ä½¿ç”¨ç‰¹æ®Šè¯­æ³•å®šä¹‰æ•°æ®æ¨¡æ¿ï¼š</p>

          <div class="syntax-examples">
            <div class="example">
              <h3>åŸºæœ¬æ ¼å¼</h3>
              <pre class="code-block">'name|rule': value</pre>
              <p>å…¶ä¸­ <code>rule</code> æ˜¯ç”Ÿæˆè§„åˆ™ï¼Œ<code>value</code> æ˜¯å€¼</p>
            </div>

            <div class="example">
              <h3>å±æ€§å€¼æ˜¯å­—ç¬¦ä¸²</h3>
              <pre class="code-block">
{
  'name|1-10': 'â˜…',    // é‡å¤ 1-10 ä¸ªæ˜Ÿå·
  'email|3': '@email'  // é‡å¤ 3 æ¬¡éšæœºé‚®ç®±
}</pre
              >
            </div>

            <div class="example">
              <h3>å±æ€§å€¼æ˜¯æ•°å­—</h3>
              <pre class="code-block">
{
  'age|1-100': 1,       // 1-100 ä¹‹é—´çš„æ•´æ•°
  'score|80-100.1-2': 1 // 80-100 ä¹‹é—´çš„æµ®ç‚¹æ•°ï¼Œå°æ•°ç‚¹å1-2ä½
}</pre
              >
            </div>

            <div class="example">
              <h3>å±æ€§å€¼æ˜¯å¸ƒå°”å€¼</h3>
              <pre class="code-block">
{
  'isAdmin|1': true,    // 50% æ¦‚ç‡ä¸º true
  'isActive|1-9': true  // 1/10 æ¦‚ç‡ä¸º trueï¼Œ9/10 æ¦‚ç‡ä¸º false
}</pre
              >
            </div>
          </div>
        </section>

        <!-- å ä½ç¬¦ -->
        <section id="placeholders" class="guide-section">
          <h2>5. å¸¸ç”¨å ä½ç¬¦</h2>
          <div class="placeholder-table">
            <table>
              <thead>
                <tr>
                  <th>å ä½ç¬¦</th>
                  <th>æè¿°</th>
                  <th>ç¤ºä¾‹</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td><code>@boolean</code></td>
                  <td>éšæœºå¸ƒå°”å€¼</td>
                  <td><code>@boolean</code></td>
                </tr>
                <tr>
                  <td><code>@natural</code></td>
                  <td>è‡ªç„¶æ•°(å¤§äºç­‰äº0çš„æ•´æ•°)</td>
                  <td><code>@natural(1, 100)</code></td>
                </tr>
                <tr>
                  <td><code>@integer</code></td>
                  <td>æ•´æ•°</td>
                  <td><code>@integer(-100, 100)</code></td>
                </tr>
                <tr>
                  <td><code>@float</code></td>
                  <td>æµ®ç‚¹æ•°</td>
                  <td><code>@float(0, 100, 2, 4)</code></td>
                </tr>
                <tr>
                  <td><code>@character</code></td>
                  <td>éšæœºå­—ç¬¦</td>
                  <td><code>@character("aeiou")</code></td>
                </tr>
                <tr>
                  <td><code>@string</code></td>
                  <td>éšæœºå­—ç¬¦ä¸²</td>
                  <td><code>@string(5, 10)</code></td>
                </tr>
                <tr>
                  <td><code>@range</code></td>
                  <td>æ•´æ•°æ•°ç»„</td>
                  <td><code>@range(1, 10, 2)</code></td>
                </tr>
                <tr>
                  <td><code>@date</code></td>
                  <td>æ—¥æœŸ</td>
                  <td><code>@date("yyyy-MM-dd")</code></td>
                </tr>
                <tr>
                  <td><code>@time</code></td>
                  <td>æ—¶é—´</td>
                  <td><code>@time("HH:mm:ss")</code></td>
                </tr>
                <tr>
                  <td><code>@datetime</code></td>
                  <td>æ—¥æœŸæ—¶é—´</td>
                  <td><code>@datetime</code></td>
                </tr>
                <tr>
                  <td><code>@image</code></td>
                  <td>å›¾ç‰‡URL</td>
                  <td><code>@image("200x100")</code></td>
                </tr>
                <tr>
                  <td><code>@color</code></td>
                  <td>é¢œè‰²</td>
                  <td><code>@color</code></td>
                </tr>
                <tr>
                  <td><code>@cname</code></td>
                  <td>ä¸­æ–‡å§“å</td>
                  <td><code>@cname</code></td>
                </tr>
                <tr>
                  <td><code>@cword</code></td>
                  <td>ä¸­æ–‡è¯è¯­</td>
                  <td><code>@cword(2, 4)</code></td>
                </tr>
                <tr>
                  <td><code>@csentence</code></td>
                  <td>ä¸­æ–‡å¥å­</td>
                  <td><code>@csentence(5, 10)</code></td>
                </tr>
              </tbody>
            </table>
          </div>
        </section>

        <!-- é«˜çº§ç”¨æ³• -->
        <section id="advanced-usage" class="guide-section">
          <h2>6. é«˜çº§ç”¨æ³•</h2>

          <h3>è‡ªå®šä¹‰å ä½ç¬¦</h3>
          <pre class="code-block">
import { Random } from 'mockjs'

// æ‰©å±•å ä½ç¬¦
Random.extend({
  constellation: function() {
    const constellations = ['ç™½ç¾Šåº§', 'é‡‘ç‰›åº§', 'åŒå­åº§', 'å·¨èŸ¹åº§', 'ç‹®å­åº§', 'å¤„å¥³åº§', 'å¤©ç§¤åº§', 'å¤©èåº§', 'å°„æ‰‹åº§', 'æ‘©ç¾¯åº§', 'æ°´ç“¶åº§', 'åŒé±¼åº§']
    return this.pick(constellations)
  }
})

// ä½¿ç”¨è‡ªå®šä¹‰å ä½ç¬¦
Mock.mock({
  'list|5': [{
    name: '@cname',
    constellation: '@constellation'
  }]
})</pre
          >

          <h3>ä½¿ç”¨å‡½æ•°ç”Ÿæˆæ•°æ®</h3>
          <pre class="code-block">
Mock.mock('/api/user', 'get', function(options) {
  // options åŒ…å«è¯·æ±‚ä¿¡æ¯
  console.log(options.url) // /api/user
  console.log(options.type) // GET

  return Mock.mock({
    id: '@id',
    name: '@cname',
    'age|20-50': 1,
    token: Mock.Random.guid()
  })
})</pre
          >

          <h3>æ ¹æ®è¯·æ±‚å‚æ•°åŠ¨æ€å“åº”</h3>
          <pre class="code-block">
Mock.mock(/\/api\/user\/\d+/, 'get', function(options) {
  // ä» URL ä¸­æå–ç”¨æˆ· ID
  const id = options.url.split('/').pop()

  return Mock.mock({
    code: 200,
    data: {
      id: id,
      name: '@cname',
      email: '@email',
      role: '@pick(["admin", "editor", "user"])'
    }
  })
})</pre
          >
        </section>

        <!-- æœ€ä½³å®è·µ -->
        <section id="best-practices" class="guide-section">
          <h2>7. æœ€ä½³å®è·µ</h2>
          <div class="practices">
            <div class="practice">
              <h3>æ¨¡å—åŒ–ç®¡ç†</h3>
              <p>å°†ä¸åŒæ¨¡å—çš„ mock æ•°æ®åˆ†å¼€ç®¡ç†ï¼š</p>
              <pre class="code-block">
src/mock/
â”œâ”€â”€ index.ts         # å…¥å£æ–‡ä»¶
â”œâ”€â”€ user.ts          # ç”¨æˆ·ç›¸å…³ mock
â”œâ”€â”€ product.ts       # äº§å“ç›¸å…³ mock
â””â”€â”€ order.ts         # è®¢å•ç›¸å…³ mock</pre
              >
            </div>

            <div class="practice">
              <h3>ç¯å¢ƒåŒºåˆ†</h3>
              <p>åªåœ¨å¼€å‘ç¯å¢ƒå¯ç”¨ mockï¼š</p>
              <pre class="code-block">
// main.ts
if (process.env.NODE_ENV === 'development') {
  import('./mock')
}</pre
              >
            </div>

            <div class="practice">
              <h3>çœŸå®æ•°æ®æ¨¡æ‹Ÿ</h3>
              <p>å°½é‡æ¨¡æ‹ŸçœŸå®æ•°æ®ç»“æ„ï¼ŒåŒ…æ‹¬çŠ¶æ€ç ã€æ¶ˆæ¯å’Œæ•°æ®ç»“æ„ï¼š</p>
              <pre class="code-block">
Mock.mock('/api/login', 'post', {
  code: 200,
  message: 'ç™»å½•æˆåŠŸ',
  data: {
    userId: '@id',
    token: '@guid',
    expire: '@datetime'
  }
})</pre
              >
            </div>
          </div>
        </section>

        <!-- æ€»ç»“ -->
        <section id="conclusion" class="guide-section">
          <h2>8. æ€»ç»“</h2>
          <div class="summary">
            <p>Mock.js æ˜¯ä¸€ä¸ªå¼ºå¤§çš„å‰ç«¯æ•°æ®æ¨¡æ‹Ÿå·¥å…·ï¼Œå¯ä»¥å¸®åŠ©å¼€å‘è€…ï¼š</p>
            <ul>
              <li>ç‹¬ç«‹äºåç«¯è¿›è¡Œå¼€å‘ï¼Œæé«˜å¼€å‘æ•ˆç‡</li>
              <li>ç”Ÿæˆä¸°å¯Œå¤šæ ·çš„éšæœºæ•°æ®</li>
              <li>æ‹¦æˆª AJAX è¯·æ±‚å¹¶è¿”å›æ¨¡æ‹Ÿæ•°æ®</li>
              <li>è‡ªå®šä¹‰æ•°æ®ç”Ÿæˆè§„åˆ™å’Œå ä½ç¬¦</li>
              <li>å®ç°çœŸå®åœºæ™¯çš„æ•°æ®æ¨¡æ‹Ÿ</li>
            </ul>
            <p>é€šè¿‡åˆç†ä½¿ç”¨ Mock.jsï¼Œå¯ä»¥æ˜¾è‘—æå‡å‰ç«¯å¼€å‘ä½“éªŒå’Œæ•ˆç‡ã€‚</p>
          </div>
        </section>
      </div>
    </div>
  </div>
</template>

<script setup lang="ts">
import { ref } from 'vue'

// å¯¼èˆªéƒ¨åˆ†
const sections = ref([
  { id: 'what-is-mockjs', title: 'ä»€ä¹ˆæ˜¯ Mock.jsï¼Ÿ' },
  { id: 'installation', title: 'å®‰è£…ä¸é…ç½®' },
  { id: 'basic-usage', title: 'åŸºæœ¬ä½¿ç”¨' },
  { id: 'template-syntax', title: 'æ•°æ®æ¨¡æ¿è¯­æ³•' },
  { id: 'placeholders', title: 'å¸¸ç”¨å ä½ç¬¦' },
  { id: 'advanced-usage', title: 'é«˜çº§ç”¨æ³•' },
  { id: 'best-practices', title: 'æœ€ä½³å®è·µ' },
  { id: 'conclusion', title: 'æ€»ç»“' },
])

// æ»šåŠ¨åˆ°æŒ‡å®šéƒ¨åˆ†
const scrollToSection = (id: string) => {
  const element = document.getElementById(id)
  if (element) {
    element.scrollIntoView({ behavior: 'smooth' })
  }
}
</script>

<style scoped lang="less">
@primary-color: #4a7bf7;
@secondary-color: #6c5ce7;
@text-color: #2d3436;
@light-bg: #f8f9fa;
@border-color: #e0e0e0;
@code-bg: #f5f7fa;

.mockjs-guide-container {
  max-width: 1200px;
  margin: 0 auto;
  padding: 2rem;
  font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
  color: @text-color;
  background-color: #fff;
  box-shadow: 0 0 20px rgba(0, 0, 0, 0.05);
  border-radius: 8px;
}

.guide-header {
  text-align: center;
  margin-bottom: 2.5rem;
  padding-bottom: 1.5rem;
  border-bottom: 1px solid @border-color;

  h1 {
    color: @primary-color;
    font-size: 2.5rem;
    margin-bottom: 0.5rem;
  }

  p {
    font-size: 1.1rem;
    color: lighten(@text-color, 20%);
  }
}

.guide-content {
  display: flex;
  gap: 2rem;
}

.navigation {
  flex: 0 0 240px;
  position: sticky;
  top: 2rem;
  height: fit-content;
  background: @light-bg;
  border-radius: 8px;
  padding: 1.5rem;
  box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);

  ul {
    list-style: none;
    padding: 0;
    margin: 0;

    li {
      padding: 0.8rem 1rem;
      margin-bottom: 0.5rem;
      border-radius: 6px;
      cursor: pointer;
      transition: all 0.3s ease;
      font-weight: 500;

      &:hover {
        background: lighten(@primary-color, 40%);
        color: @primary-color;
      }

      &:active {
        transform: translateY(1px);
      }
    }
  }
}

.content {
  flex: 1;
}

.guide-section {
  margin-bottom: 3rem;
  padding: 1.5rem 2rem;
  background: @light-bg;
  border-radius: 8px;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.03);

  h2 {
    color: @secondary-color;
    font-size: 1.8rem;
    margin-top: 0;
    padding-bottom: 0.5rem;
    border-bottom: 2px solid lighten(@secondary-color, 40%);
  }

  h3 {
    color: @primary-color;
    font-size: 1.3rem;
    margin-top: 1.5rem;
  }

  p {
    line-height: 1.6;
    margin-bottom: 1.2rem;
  }
}

.code-block {
  display: block;
  background: @code-bg;
  border-radius: 6px;
  padding: 1.2rem;
  font-family: 'Fira Code', 'Consolas', monospace;
  font-size: 0.95rem;
  overflow-x: auto;
  margin: 1.2rem 0;
  border-left: 4px solid @primary-color;
  line-height: 1.5;
}

.feature-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
  gap: 1.5rem;
  margin: 1.5rem 0;
}

.feature-card {
  background: white;
  border-radius: 8px;
  padding: 1.5rem;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
  text-align: center;
  transition: transform 0.3s ease;

  &:hover {
    transform: translateY(-5px);
  }

  .feature-icon {
    font-size: 2.5rem;
    margin-bottom: 1rem;
  }

  h3 {
    margin: 0.5rem 0;
    font-size: 1.2rem;
  }

  p {
    font-size: 0.95rem;
    color: lighten(@text-color, 20%);
    margin: 0;
  }
}

.syntax-examples {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
  gap: 1.5rem;
  margin: 1.5rem 0;
}

.example {
  background: white;
  border-radius: 8px;
  padding: 1.5rem;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);

  h3 {
    margin-top: 0;
  }
}

.placeholder-table {
  overflow-x: auto;
  margin: 1.5rem 0;

  table {
    width: 100%;
    border-collapse: collapse;
    background: white;
    border-radius: 8px;
    overflow: hidden;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);

    th,
    td {
      padding: 1rem;
      text-align: left;
      border-bottom: 1px solid @border-color;
    }

    th {
      background: lighten(@primary-color, 45%);
      font-weight: 600;
    }

    tr:last-child td {
      border-bottom: none;
    }

    code {
      background: @code-bg;
      padding: 0.2rem 0.4rem;
      border-radius: 4px;
      font-family: monospace;
    }
  }
}

.practices {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
  gap: 1.5rem;
  margin: 1.5rem 0;
}

.practice {
  background: white;
  border-radius: 8px;
  padding: 1.5rem;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);

  h3 {
    margin-top: 0;
  }
}

.summary {
  background: lighten(@primary-color, 48%);
  border-radius: 8px;
  padding: 1.5rem;

  p {
    font-weight: 500;
  }

  ul {
    padding-left: 1.5rem;

    li {
      margin-bottom: 0.8rem;
      line-height: 1.5;
    }
  }
}

@media (max-width: 768px) {
  .guide-content {
    flex-direction: column;
  }

  .navigation {
    position: static;
    margin-bottom: 1.5rem;
  }
}
</style>
