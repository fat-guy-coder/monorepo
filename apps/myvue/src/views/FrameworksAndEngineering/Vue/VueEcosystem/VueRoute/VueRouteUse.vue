<template>
  <div class="router-guide-container">
    <div class="header">
      <h1>Vue Router æ ¸å¿ƒæŒ‡å—</h1>
      <p class="subtitle">Vue.js å®˜æ–¹è·¯ç”±ç®¡ç†åº“çš„ä½¿ç”¨åŸºç¡€ä»‹ç»</p>
      <a href="https://router.vuejs.org/zh/guide/" target="_blank">Vue Router å®˜æ–¹æ–‡æ¡£</a>
    </div>

    <div class="content">
      <section class="intro-section">
        <h2><span class="icon">ğŸ“</span> Vue Router ä»‹ç»</h2>
        <div class="intro-content">
          <p>Vue Router æ˜¯ Vue.js çš„å®˜æ–¹è·¯ç”±ç®¡ç†å™¨ï¼Œå®ƒä¸ Vue.js æ ¸å¿ƒæ·±åº¦é›†æˆï¼Œä½¿æ„å»ºå•é¡µé¢åº”ç”¨å˜å¾—è½»è€Œæ˜“ä¸¾ã€‚</p>
          <div class="feature-grid">
            <div class="feature-card">
              <div class="feature-icon">ğŸš€</div>
              <h3>æ ¸å¿ƒåŠŸèƒ½</h3>
              <ul>
                <li>åµŒå¥—è·¯ç”±æ˜ å°„</li>
                <li>æ¨¡å—åŒ–çš„è·¯ç”±é…ç½®</li>
                <li>è·¯ç”±å‚æ•°ã€æŸ¥è¯¢ã€é€šé…ç¬¦</li>
                <li>è·¯ç”±å¯¼èˆªå®ˆå«</li>
                <li>HTML5 history æ¨¡å¼</li>
              </ul>
            </div>

            <div class="feature-card">
              <div class="feature-icon">ğŸ’¡</div>
              <h3>ä¸»è¦ä¼˜åŠ¿</h3>
              <ul>
                <li>å£°æ˜å¼è·¯ç”±é…ç½®</li>
                <li>ç»„ä»¶åŒ–è·¯ç”±ç³»ç»Ÿ</li>
                <li>åŠ¨æ€è·¯ç”±åŒ¹é…</li>
                <li>ç»†ç²’åº¦çš„å¯¼èˆªæ§åˆ¶</li>
                <li>ä¸ Vue å“åº”å¼ç³»ç»Ÿé›†æˆ</li>
              </ul>
            </div>
          </div>
        </div>
      </section>

      <section class="installation-section">
        <h2><span class="icon">ğŸ“¦</span> å®‰è£…ä¸é…ç½®</h2>
        <div class="code-container">
          <div class="code-header">
            <div class="code-title">å®‰è£… Vue Router</div>
          </div>
          <pre class="code-block">npm install vue-router@4</pre>
        </div>

        <div class="code-container">
          <div class="code-header">
            <div class="code-title">è·¯ç”±é…ç½® (router/index.ts)</div>
          </div>
          <pre class="code-block">import { createRouter, createWebHistory } from 'vue-router'

const routes = [
  {
    path: '/',
    name: 'Home',
    component: () => import('@/views/Home.vue')
  },
  {
    path: '/about',
    name: 'About',
    component: () => import('@/views/About.vue'),
    meta: { requiresAuth: true }
  },
  {
    path: '/user/:id',
    name: 'UserProfile',
    component: () => import('@/views/UserProfile.vue'),
    props: true
  },
  {
    path: '/:pathMatch(.*)*',
    name: 'NotFound',
    component: () => import('@/views/NotFound.vue')
  }
]

const router = createRouter({
  history: createWebHistory(process.env.BASE_URL),
  routes
})

export default router</pre>
        </div>

        <div class="code-container">
          <div class="code-header">
            <div class="code-title">åœ¨ main.ts ä¸­æŒ‚è½½è·¯ç”±</div>
          </div>
          <pre class="code-block">import { createApp } from 'vue'
import App from './App.vue'
import router from './router'

const app = createApp(App)
app.use(router)
app.mount('#app')</pre>
        </div>
      </section>

      <section class="api-section">
        <h2><span class="icon">ğŸ”§</span> æ ¸å¿ƒ API ä¸ä½¿ç”¨</h2>

        <div class="api-grid">
          <div class="api-card">
            <h3>router-link</h3>
            <p>å£°æ˜å¼å¯¼èˆªç»„ä»¶ï¼Œç”¨äºåœ¨åº”ç”¨å†…å¯¼èˆª</p>
            <pre class="inline-code">&lt;router-link to="/home"&gt;é¦–é¡µ&lt;/router-link&gt;</pre>
            <pre class="inline-code">&lt;router-link :to="{ name: 'user', params: { id: 123 }}"&gt;
  ç”¨æˆ·èµ„æ–™
&lt;/router-link&gt;</pre>
          </div>

          <div class="api-card">
            <h3>router-view</h3>
            <p>è·¯ç”±å‡ºå£ç»„ä»¶ï¼Œç”¨äºæ¸²æŸ“åŒ¹é…çš„ç»„ä»¶</p>
            <pre class="inline-code">&lt;router-view&gt;&lt;/router-view&gt;</pre>
            <pre class="inline-code">&lt;router-view v-slot="{ Component }"&gt;
  &lt;transition name="fade"&gt;
    &lt;component :is="Component" /&gt;
  &lt;/transition&gt;
&lt;/router-view&gt;</pre>
          </div>

          <div class="api-card">
            <h3>useRouter()</h3>
            <p>æä¾›å¯¹è·¯ç”±å™¨å®ä¾‹çš„è®¿é—®</p>
            <pre class="inline-code">import { useRouter } from 'vue-router'

const router = useRouter()

// å¯¼èˆªåˆ°æŒ‡å®šè·¯å¾„
router.push('/about')

// æ›¿æ¢å½“å‰è·¯ç”±
router.replace('/profile')

// å¯¼èˆªå‰è¿›/åé€€
router.go(1)  // å‰è¿›
router.go(-1) // åé€€</pre>
          </div>

          <div class="api-card">
            <h3>useRoute()</h3>
            <p>æä¾›å¯¹å½“å‰è·¯ç”±å¯¹è±¡çš„è®¿é—®</p>
            <pre class="inline-code">import { useRoute } from 'vue-router'

const route = useRoute()

// è®¿é—®è·¯ç”±å‚æ•°
console.log(route.params.id)

// è®¿é—®æŸ¥è¯¢å‚æ•°
console.log(route.query.search)

// è®¿é—®è·¯ç”±å…ƒä¿¡æ¯
if (route.meta.requiresAuth) {
  // éœ€è¦è®¤è¯
}</pre>
          </div>

          <div class="api-card">
            <h3>è·¯ç”±é…ç½®å¯¹è±¡</h3>
            <p>å®šä¹‰è·¯ç”±çš„æ ¸å¿ƒé…ç½®é€‰é¡¹</p>
            <pre class="inline-code">{
  path: '/user/:id',        // è·¯ç”±è·¯å¾„
  name: 'user',             // è·¯ç”±åç§°
  component: UserProfile,   // è·¯ç”±ç»„ä»¶
  props: true,              // å°†paramsä½œä¸ºpropsä¼ é€’
  meta: { requiresAuth: true }, // è·¯ç”±å…ƒä¿¡æ¯
  children: [ /* åµŒå¥—è·¯ç”± */ ]
}</pre>
          </div>

          <div class="api-card">
            <h3>è·¯ç”±æ‡’åŠ è½½</h3>
            <p>ä¼˜åŒ–åº”ç”¨åŠ è½½æ€§èƒ½çš„æŠ€æœ¯</p>
            <pre class="inline-code">// ä½¿ç”¨åŠ¨æ€å¯¼å…¥å®ç°æ‡’åŠ è½½
component: () => import('./views/UserProfile.vue')

// å¸¦æ³¨é‡Šçš„æ‡’åŠ è½½ (webpack)
component: () => import(/* webpackChunkName: "user" */ './User.vue')</pre>
          </div>
        </div>
      </section>

      <section class="navigation-section">
        <h2><span class="icon">ğŸ§­</span> å¯¼èˆªå®ˆå«</h2>
        <div class="guard-grid">
          <div class="guard-card">
            <h3>å…¨å±€å‰ç½®å®ˆå«</h3>
            <pre class="inline-code">router.beforeEach((to, from, next) => {
  if (to.meta.requiresAuth && !isAuthenticated) {
    next('/login')
  } else {
    next()
  }
})</pre>
          </div>

          <div class="guard-card">
            <h3>å…¨å±€è§£æå®ˆå«</h3>
            <pre class="inline-code">router.beforeResolve(to => {
  // ç¡®ä¿æ‰€æœ‰å¼‚æ­¥ç»„ä»¶éƒ½å·²è§£æ
})</pre>
          </div>

          <div class="guard-card">
            <h3>å…¨å±€åç½®é’©å­</h3>
            <pre class="inline-code">router.afterEach((to, from) => {
  // é¡µé¢æ ‡é¢˜è®¾ç½®
  document.title = to.meta.title || 'é»˜è®¤æ ‡é¢˜'
})</pre>
          </div>

          <div class="guard-card">
            <h3>è·¯ç”±ç‹¬äº«å®ˆå«</h3>
            <pre class="inline-code">{
  path: '/admin',
  component: AdminPanel,
  beforeEnter: (to, from, next) => {
    if (!isAdmin()) next('/unauthorized')
    else next()
  }
}</pre>
          </div>

          <div class="guard-card">
            <h3>ç»„ä»¶å†…å®ˆå«</h3>
            <pre class="inline-code">export default {
  beforeRouteEnter(to, from, next) {
    // åœ¨æ¸²æŸ“è¯¥ç»„ä»¶çš„å¯¹åº”è·¯ç”±è¢«éªŒè¯å‰è°ƒç”¨
    // ä¸èƒ½è®¿é—®ç»„ä»¶å®ä¾‹ `this`
    next(vm => {
      // é€šè¿‡ `vm` è®¿é—®ç»„ä»¶å®ä¾‹
    })
  },
  beforeRouteUpdate(to, from) {
    // åœ¨å½“å‰è·¯ç”±æ”¹å˜ï¼Œä½†æ˜¯è¯¥ç»„ä»¶è¢«å¤ç”¨æ—¶è°ƒç”¨
    this.userData = fetchUser(to.params.id)
  },
  beforeRouteLeave(to, from) {
    // åœ¨å¯¼èˆªç¦»å¼€æ¸²æŸ“è¯¥ç»„ä»¶çš„å¯¹åº”è·¯ç”±æ—¶è°ƒç”¨
    return confirm('ç¡®å®šè¦ç¦»å¼€å—ï¼Ÿæœªä¿å­˜çš„æ›´æ”¹å°†ä¼šä¸¢å¤±')
  }
}</pre>
          </div>
        </div>
      </section>

      <section class="advanced-section">
        <h2><span class="icon">ğŸš€</span> é«˜çº§è·¯ç”±ç‰¹æ€§</h2>
        <div class="advanced-grid">
          <div class="advanced-card">
            <h3>åµŒå¥—è·¯ç”±</h3>
            <pre class="inline-code">const routes = [
  {
    path: '/user/:id',
    component: UserLayout,
    children: [
      {
        path: '', // é»˜è®¤å­è·¯ç”±
        component: UserProfile
      },
      {
        path: 'posts',
        component: UserPosts
      },
      {
        path: 'settings',
        component: UserSettings
      }
    ]
  }
]</pre>
          </div>

          <div class="advanced-card">
            <h3>å‘½åè§†å›¾</h3>
            <pre class="inline-code">&lt;router-view name="header"&gt;&lt;/router-view&gt;
&lt;router-view&gt;&lt;/router-view&gt;
&lt;router-view name="footer"&gt;&lt;/router-view&gt;

const routes = [
  {
    path: '/',
    components: {
      default: Home,
      header: Header,
      footer: Footer
    }
  }
]</pre>
          </div>

          <div class="advanced-card">
            <h3>é‡å®šå‘å’Œåˆ«å</h3>
            <pre class="inline-code">// é‡å®šå‘
{ path: '/home', redirect: '/' }

// å‘½åè·¯ç”±é‡å®šå‘
{ path: '/old', redirect: { name: 'home' } }

// å‡½æ•°é‡å®šå‘
{
  path: '/search',
  redirect: to => {
    return { path: '/search', query: { q: to.params.searchText } }
  }
}

// åˆ«å
{ path: '/', component: Home, alias: '/home' }</pre>
          </div>

          <div class="advanced-card">
            <h3>è·¯ç”±å…ƒä¿¡æ¯</h3>
            <pre class="inline-code">{
  path: '/admin',
  component: AdminPanel,
  meta: {
    requiresAuth: true,
    roles: ['admin', 'superadmin'],
    title: 'ç®¡ç†é¢æ¿'
  }
}

// åœ¨å¯¼èˆªå®ˆå«ä¸­è®¿é—®
router.beforeEach((to, from) => {
  if (to.meta.requiresAuth) {
    // æ‰§è¡Œè®¤è¯æ£€æŸ¥
  }
})</pre>
          </div>

          <div class="advanced-card">
            <h3>æ»šåŠ¨è¡Œä¸º</h3>
            <pre class="inline-code">const router = createRouter({
  history: createWebHistory(),
  routes,
  scrollBehavior(to, from, savedPosition) {
    if (savedPosition) {
      return savedPosition
    } else if (to.hash) {
      return {
        el: to.hash,
        behavior: 'smooth'
      }
    } else {
      return { top: 0 }
    }
  }
})</pre>
          </div>

          <div class="advanced-card">
            <h3>è·¯ç”±è¿‡æ¸¡åŠ¨ç”»</h3>
            <pre class="inline-code">&lt;router-view v-slot="{ Component }"&gt;
  &lt;transition name="fade" mode="out-in"&gt;
    &lt;component :is="Component" /&gt;
  &lt;/transition&gt;
&lt;/router-view&gt;

.fade-enter-active,
.fade-leave-active {
  transition: opacity 0.3s ease;
}

.fade-enter-from,
.fade-leave-to {
  opacity: 0;
}</pre>
          </div>
        </div>
      </section>
    </div>

    <div class="footer">
      <p>Vue Router 4 å®˜æ–¹æ–‡æ¡£: <a href="https://router.vuejs.org/" target="_blank">https://router.vuejs.org/</a></p>
      <p>ç‰ˆæœ¬: 4.2.0 | æœ€åæ›´æ–°: 2023å¹´10æœˆ</p>
    </div>
  </div>
</template>

<script setup lang="ts">
// æ­¤ç»„ä»¶ä»…ç”¨äºå±•ç¤ºï¼Œæ— é€»è¾‘ä»£ç 
</script>

<style lang="less" scoped>


.router-guide-container {
  font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
  max-width: 1200px;
  margin: 0 auto;
  padding: 2rem 1.5rem;
  color: #2c3e50;
  background: linear-gradient(135deg, #f8f9fa 0%, #f1f3f5 100%);
  border-radius: 14px;
  box-shadow: 0 12px 40px rgba(0, 0, 0, 0.07);
  line-height: 1.6;

  .header {
    text-align: center;
    margin-bottom: 2.5rem;
    padding-bottom: 1.5rem;
    border-bottom: 1px solid #e9ecef;

    h1 {
      font-size: 2.4rem;
      font-weight: 700;
      color: #2c3e50;
      margin-bottom: 0.5rem;
      background: linear-gradient(90deg, #42b983, #35495e);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
    }

    .subtitle {
      font-size: 1.15rem;
      color: #7f8c8d;
      font-weight: 400;
      max-width: 700px;
      margin: 0 auto;
    }
  }

  .content {
    background: white;
    border-radius: 12px;
    padding: 2.5rem;
    box-shadow: 0 8px 25px rgba(0, 0, 0, 0.04);
  }

  section {
    margin-bottom: 3.5rem;

    h2 {
      font-size: 1.7rem;
      color: #42b983;
      margin-bottom: 1.8rem;
      padding-bottom: 0.8rem;
      border-bottom: 2px solid #e0f7fa;
      display: flex;
      align-items: center;

      .icon {
        margin-right: 12px;
        font-size: 1.4rem;
      }
    }
  }

  .intro-section {
    .intro-content {
      p {
        font-size: 1.05rem;
        line-height: 1.7;
        color: #4a5568;
        margin-bottom: 1.5rem;
      }

      .feature-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
        gap: 1.8rem;

        .feature-card {
          background: #f8fafc;
          border-radius: 12px;
          padding: 1.8rem 1.5rem;
          border: 1px solid #e2e8f0;
          transition: all 0.3s ease;

          &:hover {
            transform: translateY(-5px);
            box-shadow: 0 12px 20px rgba(66, 185, 131, 0.12);
            border-color: #42b983;
          }

          .feature-icon {
            font-size: 2.5rem;
            margin-bottom: 1.2rem;
          }

          h3 {
            font-size: 1.25rem;
            color: #2c3e50;
            margin-bottom: 0.8rem;
          }

          ul {
            padding-left: 1.2rem;
            margin: 0;

            li {
              margin-bottom: 0.6rem;
              color: #4a5568;
              font-size: 0.97rem;
              line-height: 1.5;

              &:last-child {
                margin-bottom: 0;
              }
            }
          }
        }
      }
    }
  }

  .installation-section,
  .api-section,
  .navigation-section,
  .advanced-section {
    .code-container {
      background: #2d3748;
      border-radius: 10px;
      overflow: hidden;
      box-shadow: 0 15px 30px rgba(0, 0, 0, 0.1);
      margin-bottom: 1.5rem;

      .code-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 0.9rem 1.5rem;
        background: #1a202c;
        border-bottom: 1px solid #2d3748;

        .code-title {
          color: #cbd5e0;
          font-size: 0.95rem;
          font-weight: 500;
        }
      }

      .code-block {
        margin: 0;
        padding: 1.8rem;
        color: #e2e8f0;
        font-family: 'Fira Code', monospace;
        font-size: 0.95rem;
        line-height: 1.7;
        overflow-x: auto;
        background: #2d3748;
      }
    }
  }

  .api-section,
  .navigation-section,
  .advanced-section {

    .api-grid,
    .guard-grid,
    .advanced-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
      gap: 1.8rem;

      .api-card,
      .guard-card,
      .advanced-card {
        background: #f8fafc;
        border-radius: 10px;
        padding: 1.5rem;
        border: 1px solid #e2e8f0;
        transition: all 0.3s ease;

        &:hover {
          transform: translateY(-3px);
          box-shadow: 0 8px 15px rgba(0, 0, 0, 0.05);
          border-color: #42b983;
        }

        h3 {
          font-size: 1.2rem;
          color: #2c3e50;
          margin-top: 0;
          margin-bottom: 0.8rem;
          padding-bottom: 0.5rem;
          border-bottom: 1px solid #e2e8f0;
        }

        p {
          color: #4a5568;
          font-size: 0.95rem;
          margin-bottom: 0.8rem;
        }

        .inline-code {
          background: #2d3748;
          color: #e2e8f0;
          border-radius: 6px;
          padding: 1rem;
          font-family: 'Fira Code', monospace;
          font-size: 0.85rem;
          overflow-x: auto;
          display: block;
          margin-bottom: 0.8rem;
          line-height: 1.5;
        }
      }
    }
  }

  .footer {
    text-align: center;
    margin-top: 3rem;
    padding-top: 1.5rem;
    border-top: 1px solid #e9ecef;
    color: #718096;
    font-size: 0.95rem;

    a {
      color: #42b983;
      text-decoration: none;

      &:hover {
        text-decoration: underline;
      }
    }
  }

  @media (max-width: 768px) {
    padding: 1.2rem;

    .header {
      h1 {
        font-size: 1.9rem;
      }
    }

    .content {
      padding: 1.8rem;
    }

    section {
      margin-bottom: 2.5rem;
    }

    .api-grid,
    .guard-grid,
    .advanced-grid {
      grid-template-columns: 1fr;
      gap: 1.2rem;
    }
  }
}
</style>
