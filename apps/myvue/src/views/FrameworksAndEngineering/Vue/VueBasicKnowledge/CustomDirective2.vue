<template>
  <div class="custom-directives-container">
    <header class="header">
      <div class="title-wrapper">
        <h1>Vueè‡ªå®šä¹‰æŒ‡ä»¤å®ç”¨æŒ‡å—</h1>
        <p class="subtitle">æå‡å¤§å‹é¡¹ç›®çš„å¼€å‘æ•ˆç‡ä¸ä»£ç å¤ç”¨æ€§</p>
      </div>
    </header>

    <div class="content">
      <section class="intro-section">
        <div class="intro-card">
          <h2>ä»€ä¹ˆæ˜¯è‡ªå®šä¹‰æŒ‡ä»¤ï¼Ÿ</h2>
          <p>
            è‡ªå®šä¹‰æŒ‡ä»¤æ˜¯Vueæä¾›çš„ä¸€ç§å¼ºå¤§æœºåˆ¶ï¼Œå…è®¸å¼€å‘è€…å°è£…DOMæ“ä½œé€»è¾‘ï¼Œåœ¨å¤§å‹é¡¹ç›®ä¸­å®ç°ä»£ç å¤ç”¨ã€å…³æ³¨ç‚¹åˆ†ç¦»å’ŒåŠŸèƒ½æŠ½è±¡ã€‚
            é€šè¿‡è‡ªå®šä¹‰æŒ‡ä»¤ï¼Œæˆ‘ä»¬å¯ä»¥åˆ›å»ºå¯é‡ç”¨çš„è¡Œä¸ºï¼Œè¿™äº›è¡Œä¸ºå¯ä»¥é™„åŠ åˆ°ä»»ä½•å…ƒç´ ä¸Šï¼Œä»è€Œå‡å°‘é‡å¤ä»£ç å¹¶æé«˜å¼€å‘æ•ˆç‡ã€‚
          </p>
          <div class="directive-flow">
            <div class="flow-step">
              <div class="step-icon">1</div>
              <div class="step-content">
                <h3>æŒ‡ä»¤æ³¨å†Œ</h3>
                <p>å…¨å±€æˆ–å±€éƒ¨æ³¨å†Œè‡ªå®šä¹‰æŒ‡ä»¤</p>
              </div>
            </div>
            <div class="flow-arrow">â†’</div>
            <div class="flow-step">
              <div class="step-icon">2</div>
              <div class="step-content">
                <h3>æŒ‡ä»¤ç»‘å®š</h3>
                <p>åœ¨æ¨¡æ¿ä¸­ä½¿ç”¨v-æŒ‡ä»¤å</p>
              </div>
            </div>
            <div class="flow-arrow">â†’</div>
            <div class="flow-step">
              <div class="step-icon">3</div>
              <div class="step-content">
                <h3>æŒ‡ä»¤æ‰§è¡Œ</h3>
                <p>åœ¨ç”Ÿå‘½å‘¨æœŸé’©å­ä¸­å®ç°é€»è¾‘</p>
              </div>
            </div>
          </div>
        </div>
      </section>

      <section class="directives-section">
        <h2 class="section-title">å¤§å‹é¡¹ç›®å®ç”¨æŒ‡ä»¤é›†</h2>

        <div class="directive-grid">
          <div
            v-for="(directive, index) in directives"
            :key="index"
            class="directive-card"
            :class="{ featured: directive.featured }"
          >
            <div class="card-header">
              <div class="directive-name">v-{{ directive.name }}</div>
              <div class="directive-tags">
                <span v-for="(tag, tagIndex) in directive.tags" :key="tagIndex" class="tag">
                  {{ tag }}
                </span>
              </div>
            </div>

            <div class="card-body">
              <div class="description">
                {{ directive.description }}
              </div>

              <div class="details">
                <div class="detail-item">
                  <div class="detail-icon">ğŸ¯</div>
                  <h4>é€‚ç”¨åœºæ™¯</h4>
                  <ul>
                    <li v-for="(scenario, sIndex) in directive.scenarios" :key="sIndex">
                      {{ scenario }}
                    </li>
                  </ul>
                </div>

                <div class="code-example">
                  <h4>å®ç°ä»£ç </h4>
                  <pre><code>{{ directive.code }}</code></pre>
                </div>
              </div>

              <div class="usage-example">
                <h4>ä½¿ç”¨ç¤ºä¾‹</h4>
                <pre><code>{{ directive.usage }}</code></pre>
              </div>
            </div>
          </div>
        </div>
      </section>

      <section class="best-practices">
        <h2 class="section-title">è‡ªå®šä¹‰æŒ‡ä»¤æœ€ä½³å®è·µ</h2>
        <div class="practices-grid">
          <div class="practice-card" v-for="(practice, index) in bestPractices" :key="index">
            <div class="practice-number">{{ index + 1 }}</div>
            <div class="practice-content">
              <h3>{{ practice.title }}</h3>
              <p>{{ practice.description }}</p>
            </div>
          </div>
        </div>
      </section>

      <section class="comparison-section">
        <h2 class="section-title">æŒ‡ä»¤ vs ç»„ä»¶ vs Mixins</h2>
        <div class="comparison-table">
          <div class="table-header">
            <div class="col-criteria">ç‰¹æ€§</div>
            <div class="col-type">è‡ªå®šä¹‰æŒ‡ä»¤</div>
            <div class="col-type">ç»„ä»¶</div>
            <div class="col-type">Mixins</div>
          </div>
          <div class="table-row" v-for="(row, index) in comparisonData" :key="index">
            <div class="col-criteria">{{ row.criteria }}</div>
            <div class="col-type">{{ row.directive }}</div>
            <div class="col-type">{{ row.component }}</div>
            <div class="col-type">{{ row.mixin }}</div>
          </div>
        </div>
      </section>

      <section class="advanced-section">
        <h2 class="section-title">é«˜çº§æŒ‡ä»¤æ¨¡å¼</h2>
        <div class="advanced-grid">
          <div class="pattern-card" v-for="(pattern, index) in advancedPatterns" :key="index">
            <div class="pattern-icon">{{ pattern.icon }}</div>
            <div class="pattern-content">
              <h3>{{ pattern.title }}</h3>
              <p>{{ pattern.description }}</p>
              <div class="pattern-example">
                <pre><code>{{ pattern.example }}</code></pre>
              </div>
            </div>
          </div>
        </div>
      </section>
    </div>

    <footer class="footer">
      <p>è‡ªå®šä¹‰æŒ‡ä»¤æ˜¯Vueç”Ÿæ€ä¸­å¼ºå¤§çš„æŠ½è±¡å·¥å…·ï¼Œåœ¨å¤§å‹é¡¹ç›®ä¸­åˆç†ä½¿ç”¨å¯ä»¥æ˜¾è‘—æå‡å¼€å‘æ•ˆç‡å’Œä»£ç è´¨é‡</p>
      <div class="resources">
        <h3>æ¨èèµ„æºï¼š</h3>
        <ul>
          <li>
            <a href="https://vuejs.org/guide/reusability/custom-directives.html" target="_blank"
              >Vueå®˜æ–¹è‡ªå®šä¹‰æŒ‡ä»¤æ–‡æ¡£</a
            >
          </li>
          <li>
            <a href="https://github.com/vuejs/awesome-vue#custom-directives" target="_blank"
              >Awesome VueæŒ‡ä»¤é›†åˆ</a
            >
          </li>
          <li>
            <a
              href="https://dev.to/raha198/vue-custom-directives-with-examples-1d8m"
              target="_blank"
              >å®ç”¨æŒ‡ä»¤æ¡ˆä¾‹</a
            >
          </li>
        </ul>
      </div>
    </footer>
  </div>
</template>

<script setup lang="ts">
import { ref } from 'vue'

const directives = ref([
  {
    name: 'debounce',
    featured: true,
    tags: ['æ€§èƒ½ä¼˜åŒ–', 'è¡¨å•å¤„ç†'],
    description: 'ä¸ºäº‹ä»¶å¤„ç†å‡½æ•°æ·»åŠ é˜²æŠ–åŠŸèƒ½ï¼Œé˜²æ­¢é«˜é¢‘è§¦å‘å¯¼è‡´çš„æ€§èƒ½é—®é¢˜',
    scenarios: ['æœç´¢æ¡†è¾“å…¥è”æƒ³', 'çª—å£å¤§å°è°ƒæ•´äº‹ä»¶', 'æŒ‰é’®é˜²é‡å¤ç‚¹å‡»', 'æ»šåŠ¨äº‹ä»¶å¤„ç†'],
    code: `// é˜²æŠ–æŒ‡ä»¤å®ç°
const debounce = {
  mounted(el, binding) {
    let delay = binding.value?.delay || 300;
    let immediate = binding.value?.immediate || false;

    let timeout;
    el.addEventListener('input', () => {
      if (immediate && !timeout) {
        binding.value.fn();
      }

      clearTimeout(timeout);
      timeout = setTimeout(() => {
        if (!immediate) {
          binding.value.fn();
        }
        timeout = null;
      }, delay);
    });
  }
};

// å…¨å±€æ³¨å†Œ
app.directive('debounce', debounce);`,
    usage: `<template>
  <input
    v-debounce="{
      fn: search,
      delay: 500
    }"
    placeholder="è¾“å…¥æœç´¢å…³é”®è¯..."
  >
</template>`,
  },
  {
    name: 'permission',
    featured: true,
    tags: ['æƒé™æ§åˆ¶', 'å®‰å…¨æ€§'],
    description: 'åŸºäºç”¨æˆ·è§’è‰²æˆ–æƒé™åŠ¨æ€æ˜¾ç¤º/éšè—UIå…ƒç´ ',
    scenarios: ['ç®¡ç†åå°æƒé™æ§åˆ¶', 'åŠŸèƒ½æ¨¡å—å¯è§æ€§ç®¡ç†', 'æŒ‰é’®çº§æƒé™æ§åˆ¶', 'å†…å®¹è®¿é—®é™åˆ¶'],
    code: `// æƒé™æŒ‡ä»¤å®ç°
const permission = {
  mounted(el, binding) {
    const { value } = binding;
    const roles = store.getters.roles; // ä»Vuexè·å–ç”¨æˆ·è§’è‰²

    if (value && Array.isArray(value)) {
      const hasPermission = roles.some(role => value.includes(role));

      if (!hasPermission) {
        el.parentNode && el.parentNode.removeChild(el);
      }
    } else {
      throw new Error('éœ€è¦ä¼ å…¥æƒé™æ•°ç»„ï¼Œå¦‚ v-permission="[\'admin\']"');
    }
  }
};

// å…¨å±€æ³¨å†Œ
app.directive('permission', permission);`,
    usage: `<template>
  <button v-permission="['admin', 'editor']">
    ç¼–è¾‘å†…å®¹
  </button>
</template>`,
  },
  {
    name: 'click-outside',
    featured: true,
    tags: ['UIäº¤äº’', 'ç”¨æˆ·ä½“éªŒ'],
    description: 'æ£€æµ‹ç‚¹å‡»å…ƒç´ å¤–éƒ¨åŒºåŸŸæ—¶è§¦å‘å›è°ƒï¼Œå¸¸ç”¨äºä¸‹æ‹‰èœå•ã€æ¨¡æ€æ¡†ç­‰ç»„ä»¶',
    scenarios: ['ä¸‹æ‹‰èœå•å…³é—­', 'æ¨¡æ€æ¡†ç‚¹å‡»å¤–éƒ¨å…³é—­', 'å¼¹å‡ºå±‚å…³é—­', 'ä¸Šä¸‹æ–‡èœå•éšè—'],
    code: `// ç‚¹å‡»å¤–éƒ¨æŒ‡ä»¤å®ç°
const clickOutside = {
  beforeMount(el, binding) {
    el.clickOutsideEvent = event => {
      if (!(el === event.target || el.contains(event.target))) {
        binding.value(event);
      }
    };
    document.addEventListener('click', el.clickOutsideEvent);
  },
  unmounted(el) {
    document.removeEventListener('click', el.clickOutsideEvent);
  }
};

// å…¨å±€æ³¨å†Œ
app.directive('click-outside', clickOutside);`,
    usage: `<template>
  <div v-click-outside="closeDropdown">
    <!-- ä¸‹æ‹‰èœå•å†…å®¹ -->
  </div>
</template>

<script setup>
const closeDropdown = () => {
  // å…³é—­ä¸‹æ‹‰èœå•é€»è¾‘
};
\</script\>`,
  },
  {
    name: 'tooltip',
    featured: true,
    tags: ['UIç»„ä»¶', 'ç”¨æˆ·ä½“éªŒ'],
    description: 'ä¸ºå…ƒç´ æ·»åŠ å·¥å…·æç¤ºï¼Œæ”¯æŒè‡ªå®šä¹‰å†…å®¹ã€ä½ç½®å’Œæ ·å¼',
    scenarios: ['è¡¨å•å­—æ®µè¯´æ˜', 'å›¾æ ‡åŠŸèƒ½æç¤º', 'æŒ‰é’®åŠŸèƒ½è§£é‡Š', 'æ•°æ®é¡¹è¯¦ç»†ä¿¡æ¯'],
    code: `// å·¥å…·æç¤ºæŒ‡ä»¤å®ç°
const tooltip = {
  mounted(el, binding) {
    const tooltipText = binding.value || 'æç¤ºä¿¡æ¯';
    const position = binding.arg || 'top';

    // åˆ›å»ºå·¥å…·æç¤ºå…ƒç´ 
    const tooltipEl = document.createElement('div');
    tooltipEl.className = 'v-tooltip';
    tooltipEl.textContent = tooltipText;

    // è®¾ç½®ä½ç½®
    tooltipEl.classList.add(\`tooltip-\${position}\`);

    // æ·»åŠ åˆ°DOM
    document.body.appendChild(tooltipEl);

    // äº‹ä»¶ç›‘å¬
    el.addEventListener('mouseenter', () => {
      const rect = el.getBoundingClientRect();
      // å®šä½è®¡ç®—é€»è¾‘...
      tooltipEl.style.display = 'block';
    });

    el.addEventListener('mouseleave', () => {
      tooltipEl.style.display = 'none';
    });

    // ä¿å­˜å¼•ç”¨
    el._tooltip = tooltipEl;
  },
  unmounted(el) {
    if (el._tooltip) {
      document.body.removeChild(el._tooltip);
      delete el._tooltip;
    }
  }
};

// å…¨å±€æ³¨å†Œ
app.directive('tooltip', tooltip);`,
    usage: `<template>
  <button
    v-tooltip.top="'ä¿å­˜å½“å‰å†…å®¹'"
    class="save-btn"
  >
    ä¿å­˜
  </button>
</template>`,
  },
  {
    name: 'copy',
    tags: ['å·¥å…·ç±»', 'ç”¨æˆ·äº¤äº’'],
    description: 'ä¸€é”®å¤åˆ¶æ–‡æœ¬å†…å®¹åˆ°å‰ªè´´æ¿ï¼Œæå‡ç”¨æˆ·æ“ä½œæ•ˆç‡',
    scenarios: ['å¤åˆ¶é“¾æ¥', 'å¤åˆ¶ä»£ç ç‰‡æ®µ', 'å¤åˆ¶é…ç½®ä¿¡æ¯', 'åˆ†äº«å†…å®¹å¤åˆ¶'],
    code: `// å¤åˆ¶æŒ‡ä»¤å®ç°
const copy = {
  mounted(el, binding) {
    el.copyHandler = () => {
      const text = binding.value || el.innerText;

      // ä½¿ç”¨ç°ä»£å‰ªè´´æ¿API
      navigator.clipboard.writeText(text).then(() => {
        // æ˜¾ç¤ºæˆåŠŸåé¦ˆ
        if (binding.arg === 'feedback') {
          showSuccessFeedback('å¤åˆ¶æˆåŠŸ!');
        }
      }).catch(err => {
        console.error('å¤åˆ¶å¤±è´¥:', err);
      });
    };

    el.addEventListener('click', el.copyHandler);
  },
  unmounted(el) {
    el.removeEventListener('click', el.copyHandler);
  }
};

// å…¨å±€æ³¨å†Œ
app.directive('copy', copy);`,
    usage: `<template>
  <div v-copy.feedback="'https://example.com'">
    ç‚¹å‡»å¤åˆ¶é“¾æ¥
  </div>
</template>`,
  },
  {
    name: 'lazy-load',
    tags: ['æ€§èƒ½ä¼˜åŒ–', 'åª’ä½“å¤„ç†'],
    description: 'å»¶è¿ŸåŠ è½½å›¾ç‰‡æˆ–å…¶ä»–èµ„æºï¼Œæå‡é¡µé¢åŠ è½½æ€§èƒ½',
    scenarios: ['é•¿åˆ—è¡¨å›¾ç‰‡åŠ è½½', 'å›¾åº“åº”ç”¨', 'å†…å®¹å¯†é›†å‹é¡µé¢', 'ç§»åŠ¨ç«¯ä¼˜åŒ–'],
    code: `// æ‡’åŠ è½½æŒ‡ä»¤å®ç°
const lazyLoad = {
  mounted(el, binding) {
    const options = {
      root: null,
      rootMargin: '0px',
      threshold: 0.1
    };

    const observer = new IntersectionObserver((entries) => {
      entries.forEach(entry => {
        if (entry.isIntersecting) {
          const img = el;
          img.src = binding.value;
          observer.unobserve(el);
        }
      });
    }, options);

    observer.observe(el);
  }
};

// å…¨å±€æ³¨å†Œ
app.directive('lazy-load', lazyLoad);`,
    usage: `<template>
  <img
    v-lazy-load="imageUrl"
    alt="ç¤ºä¾‹å›¾ç‰‡"
  >
</template>`,
  },
  {
    name: 'focus',
    tags: ['è¡¨å•å¤„ç†', 'ç”¨æˆ·ä½“éªŒ'],
    description: 'è‡ªåŠ¨èšç„¦å…ƒç´ ï¼Œå¸¸ç”¨äºè¡¨å•è¾“å…¥æ¡†å’Œæœç´¢æ¡†',
    scenarios: [
      'æ¨¡æ€æ¡†æ‰“å¼€æ—¶èšç„¦è¾“å…¥æ¡†',
      'æœç´¢é¡µé¢è‡ªåŠ¨èšç„¦æœç´¢æ¡†',
      'è¡¨å•é”™è¯¯åé‡æ–°èšç„¦',
      'äº¤äº’æµç¨‹ä¸­éœ€è¦èšç„¦çš„åœºæ™¯',
    ],
    code: `// èšç„¦æŒ‡ä»¤å®ç°
const focus = {
  mounted(el) {
    el.focus();
  },
  updated(el) {
    if (el.dataset.focus === 'true') {
      el.focus();
    }
  }
};

// å…¨å±€æ³¨å†Œ
app.directive('focus', focus);`,
    usage: `<template>
  <input
    v-focus
    placeholder="è‡ªåŠ¨èšç„¦çš„è¾“å…¥æ¡†"
  >

  <!-- æ¡ä»¶èšç„¦ -->
  <input
    v-focus
    :data-focus="shouldFocus"
  >
</template>`,
  },
  {
    name: 'longpress',
    tags: ['ç§»åŠ¨ç«¯', 'äº¤äº’å¢å¼º'],
    description: 'æ£€æµ‹é•¿æŒ‰äº‹ä»¶ï¼Œæ”¯æŒç§»åŠ¨ç«¯å’Œæ¡Œé¢ç«¯çš„é•¿æ—¶é—´æŒ‰å‹äº¤äº’',
    scenarios: ['ç§»åŠ¨ç«¯é•¿æŒ‰èœå•', 'å›¾ç‰‡é•¿æŒ‰ä¿å­˜', 'æ¶ˆæ¯é•¿æŒ‰åˆ é™¤', 'ç‰¹æ®Šäº¤äº’åŠŸèƒ½'],
    code: `// é•¿æŒ‰æŒ‡ä»¤å®ç°
const longpress = {
  mounted(el, binding) {
    const duration = binding.value?.duration || 700;

    let pressTimer;

    const start = (e) => {
      if (e.button !== 0) return;

      pressTimer = setTimeout(() => {
        binding.value.fn();
      }, duration);
    };

    const cancel = () => {
      clearTimeout(pressTimer);
    };

    el.addEventListener('mousedown', start);
    el.addEventListener('touchstart', start);
    el.addEventListener('mouseup', cancel);
    el.addEventListener('touchend', cancel);
    el.addEventListener('mouseleave', cancel);
  }
};

// å…¨å±€æ³¨å†Œ
app.directive('longpress', longpress);`,
    usage: `<template>
  <button
    v-longpress="{
      fn: deleteItem,
      duration: 1000
    }"
  >
    é•¿æŒ‰åˆ é™¤
  </button>
</template>`,
  },
])

const bestPractices = ref([
  {
    title: 'å…¨å±€æ³¨å†Œå¸¸ç”¨æŒ‡ä»¤',
    description: 'åœ¨å¤§å‹é¡¹ç›®ä¸­ï¼Œå°†å¸¸ç”¨æŒ‡ä»¤å…¨å±€æ³¨å†Œå¯æé«˜å¤ç”¨æ€§å’Œä¸€è‡´æ€§',
  },
  {
    title: 'å°è£…å¤æ‚DOMæ“ä½œ',
    description: 'å°†å¤æ‚çš„DOMæ“ä½œå°è£…åœ¨æŒ‡ä»¤ä¸­ï¼Œä¿æŒç»„ä»¶é€»è¾‘ç®€æ´',
  },
  {
    title: 'æä¾›çµæ´»çš„å‚æ•°é€‰é¡¹',
    description: 'è®¾è®¡æŒ‡ä»¤æ—¶æ”¯æŒå¤šç§å‚æ•°é…ç½®ï¼Œå¢å¼ºæŒ‡ä»¤çš„çµæ´»æ€§',
  },
  {
    title: 'æ³¨æ„å†…å­˜ç®¡ç†',
    description: 'åœ¨unmountedç”Ÿå‘½å‘¨æœŸä¸­æ¸…ç†äº‹ä»¶ç›‘å¬å™¨å’ŒDOMå¼•ç”¨ï¼Œé˜²æ­¢å†…å­˜æ³„æ¼',
  },
  {
    title: 'ç»Ÿä¸€æŒ‡ä»¤å‘½åè§„èŒƒ',
    description: 'é¡¹ç›®ä¸­ä½¿ç”¨ä¸€è‡´çš„æŒ‡ä»¤å‘½åè§„èŒƒï¼ˆå¦‚v-permissionè€Œä¸æ˜¯v-authï¼‰',
  },
  {
    title: 'ç¼–å†™æŒ‡ä»¤æ–‡æ¡£',
    description: 'ä¸ºè‡ªå®šä¹‰æŒ‡ä»¤ç¼–å†™ä½¿ç”¨æ–‡æ¡£ï¼Œä¾¿äºå›¢é˜Ÿåä½œå’ŒçŸ¥è¯†å…±äº«',
  },
])

const comparisonData = ref([
  { criteria: 'ä¸»è¦ç”¨é€”', directive: 'DOMæ“ä½œ', component: 'UIå¤ç”¨', mixin: 'é€»è¾‘å¤ç”¨' },
  { criteria: 'ä½œç”¨èŒƒå›´', directive: 'å•ä¸ªå…ƒç´ ', component: 'æ¨¡æ¿ç‰‡æ®µ', mixin: 'ç»„ä»¶é€‰é¡¹' },
  { criteria: 'å¤ç”¨æ€§', directive: 'é«˜', component: 'é«˜', mixin: 'ä¸­' },
  { criteria: 'å°è£…æ€§', directive: 'é«˜', component: 'é«˜', mixin: 'ä½' },
  { criteria: 'ä¾µå…¥æ€§', directive: 'ä½', component: 'ä½', mixin: 'é«˜' },
  {
    criteria: 'é€‚ç”¨åœºæ™¯',
    directive: 'é€šç”¨DOMè¡Œä¸º',
    component: 'å¯é‡ç”¨UIéƒ¨ä»¶',
    mixin: 'è·¨ç»„ä»¶å…±äº«é€»è¾‘',
  },
])

const advancedPatterns = ref([
  {
    icon: 'ğŸ”„',
    title: 'åŠ¨æ€å‚æ•°æŒ‡ä»¤',
    description: 'æ ¹æ®å‚æ•°åŠ¨æ€æ”¹å˜æŒ‡ä»¤è¡Œä¸ºï¼Œæ”¯æŒå¤šç§é…ç½®é€‰é¡¹',
    example: `// ä½¿ç”¨ç¤ºä¾‹
<button
  v-tooltip="{
    content: 'åŠ¨æ€æç¤º',
    position: 'right',
    theme: 'dark'
  }"
>
  æŒ‰é’®
</button>`,
  },
  {
    icon: 'ğŸšï¸',
    title: 'ä¿®é¥°ç¬¦æ¨¡å¼',
    description: 'ä½¿ç”¨ä¿®é¥°ç¬¦æ”¹å˜æŒ‡ä»¤è¡Œä¸ºï¼Œæä¾›æ›´ç®€æ´çš„API',
    example: `// ä½¿ç”¨ç¤ºä¾‹
<input
  v-debounce.500.immediate="search"
  placeholder="å¸¦ä¿®é¥°ç¬¦çš„é˜²æŠ–"
>`,
  },
  {
    icon: 'ğŸ§©',
    title: 'æŒ‡ä»¤ç»„åˆ',
    description: 'ç»„åˆå¤šä¸ªæŒ‡ä»¤å®ç°å¤æ‚äº¤äº’ï¼ŒåŒæ—¶ä¿æŒä»£ç æ¸…æ™°',
    example: `// ä½¿ç”¨ç¤ºä¾‹
<div
  v-permission="['admin']"
  v-tooltip="'ç®¡ç†å‘˜ä¸“å±åŠŸèƒ½'"
>
  ç®¡ç†å‘˜é¢æ¿
</div>`,
  },
  {
    icon: 'ğŸ“¦',
    title: 'æŒ‡ä»¤åº“å°è£…',
    description: 'å°†æŒ‡ä»¤ç»„ç»‡ä¸ºç‹¬ç«‹åº“ï¼Œæ”¯æŒæŒ‰éœ€åŠ è½½å’Œç‰ˆæœ¬ç®¡ç†',
    example: `// ä½¿ç”¨ç¤ºä¾‹
import { debounce, tooltip } from '@company/vue-directives';

app.directive('debounce', debounce);
app.directive('tooltip', tooltip);`,
  },
])
</script>

<style lang="less" scoped>
@import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap');

// é¢œè‰²å˜é‡
@primary-color: #4a6cf7;
@primary-light: #e6eeff;
@secondary-color: #3a56d4;
@accent-color: #ff9800;
@text-color: #2c3e50;
@light-gray: #f8f9fc;
@border-color: #e0e6ed;
@card-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
@success-color: #4caf50;
@warning-color: #ffc107;

// åŸºç¡€æ ·å¼
.custom-directives-container {
  font-family: 'Inter', sans-serif;
  max-width: 1200px;
  margin: 0 auto;
  padding: 2rem 1.5rem;
  color: @text-color;
  background: #fff;
  line-height: 1.6;
}

.header {
  text-align: center;
  margin-bottom: 3rem;
  padding-bottom: 2rem;
  border-bottom: 1px solid @border-color;

  .title-wrapper {
    margin-bottom: 2rem;

    h1 {
      font-size: 2.5rem;
      font-weight: 700;
      color: @secondary-color;
      margin-bottom: 0.5rem;
    }

    .subtitle {
      font-size: 1.3rem;
      color: #666;
      font-weight: 300;
    }
  }
}

.demo-area {
  max-width: 600px;
  margin: 0 auto;
  padding: 1.5rem;

  .demo-box {
    background: @primary-light;
    border: 2px dashed @primary-color;
    border-radius: 12px;
    padding: 2rem;
    text-align: center;
    cursor: pointer;
    transition: all 0.3s ease;

    &:hover {
      background: lighten(@primary-light, 2%);
      box-shadow: 0 6px 20px rgba(@primary-color, 0.1);
    }

    .demo-icon {
      font-size: 3rem;
      margin-bottom: 1rem;
    }

    .demo-text {
      font-size: 1.1rem;
      color: @primary-color;
      font-weight: 500;
    }
  }
}

.content {
  display: grid;
  gap: 3rem;
}

.section-title {
  font-size: 1.8rem;
  color: @secondary-color;
  text-align: center;
  margin-bottom: 2rem;
  padding-bottom: 0.8rem;
  position: relative;

  &::after {
    content: '';
    position: absolute;
    bottom: 0;
    left: 50%;
    transform: translateX(-50%);
    width: 80px;
    height: 4px;
    background: linear-gradient(to right, @primary-color, @accent-color);
    border-radius: 2px;
  }
}

.intro-section {
  .intro-card {
    background: @light-gray;
    border-radius: 16px;
    padding: 2.5rem;
    box-shadow: @card-shadow;

    h2 {
      color: @secondary-color;
      margin-top: 0;
      margin-bottom: 1.5rem;
      font-size: 1.8rem;
    }

    p {
      margin-bottom: 2rem;
      font-size: 1.1rem;
      line-height: 1.8;
    }
  }

  .directive-flow {
    display: flex;
    justify-content: space-between;
    margin-top: 2rem;
    flex-wrap: wrap;
    gap: 1.5rem;

    .flow-step {
      flex: 1;
      min-width: 200px;
      background: white;
      border-radius: 12px;
      padding: 1.5rem;
      text-align: center;
      box-shadow: @card-shadow;

      .step-icon {
        width: 50px;
        height: 50px;
        background: @primary-color;
        color: white;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 1.5rem;
        font-weight: 700;
        margin: 0 auto 1rem;
      }

      h3 {
        color: @primary-color;
        margin: 0.5rem 0;
        font-size: 1.3rem;
      }

      p {
        margin: 0;
        font-size: 0.95rem;
        color: #666;
      }
    }

    .flow-arrow {
      display: flex;
      align-items: center;
      color: #777;
      font-weight: 700;
      min-width: 50px;
      text-align: center;
      font-size: 1.5rem;

      @media (max-width: 768px) {
        transform: rotate(90deg);
        margin: 1rem 0;
      }
    }
  }
}

.directives-section {
  .directive-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(500px, 1fr));
    gap: 1.8rem;

    @media (max-width: 600px) {
      grid-template-columns: 1fr;
    }
  }

  .directive-card {
    background: white;
    border-radius: 12px;
    overflow: hidden;
    box-shadow: @card-shadow;
    border: 1px solid @border-color;
    transition:
      transform 0.3s ease,
      box-shadow 0.3s ease;

    &:hover {
      transform: translateY(-5px);
      box-shadow: 0 10px 25px rgba(0, 0, 0, 0.08);
    }

    &.featured {
      border-top: 4px solid @accent-color;
    }

    .card-header {
      padding: 1.2rem 1.5rem;
      background: @primary-light;
      display: flex;
      justify-content: space-between;
      align-items: center;
      flex-wrap: wrap;

      .directive-name {
        font-size: 1.4rem;
        font-weight: 700;
        color: @primary-color;
      }
    }

    .directive-tags {
      display: flex;
      gap: 0.5rem;
      flex-wrap: wrap;

      .tag {
        background: white;
        color: @primary-color;
        padding: 0.3rem 0.8rem;
        border-radius: 20px;
        font-size: 0.8rem;
        font-weight: 500;
        border: 1px solid fade(@primary-color, 30%);
      }
    }

    .card-body {
      padding: 1.5rem;

      .description {
        margin-bottom: 1.5rem;
        font-size: 1rem;
        line-height: 1.7;
        color: #555;
      }

      .details {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 1.5rem;
        margin-bottom: 1.5rem;

        @media (max-width: 900px) {
          grid-template-columns: 1fr;
        }

        .detail-item {
          h4 {
            color: @secondary-color;
            margin-top: 0;
            margin-bottom: 0.8rem;
            font-size: 1.1rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;

            .detail-icon {
              font-size: 1.2rem;
            }
          }

          ul {
            padding-left: 1.5rem;
            margin: 0;

            li {
              margin-bottom: 0.5rem;
              font-size: 0.95rem;
              line-height: 1.6;

              &:last-child {
                margin-bottom: 0;
              }
            }
          }
        }
      }

      .code-example,
      .usage-example {
        margin-bottom: 1.5rem;

        h4 {
          color: @secondary-color;
          margin-top: 0;
          margin-bottom: 0.8rem;
          font-size: 1.1rem;
        }

        pre {
          background: #2d2d2d;
          border-radius: 8px;
          padding: 1.2rem;
          overflow-x: auto;

          code {
            font-family: 'Courier New', monospace;
            color: #f8f8f2;
            font-size: 0.95rem;
            line-height: 1.6;

            .comment {
              color: #6a9955;
            }
            .keyword {
              color: #c586c0;
            }
            .function {
              color: #dcdcaa;
            }
            .string {
              color: #ce9178;
            }
          }
        }
      }
    }
  }
}

.best-practices {
  .practices-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
    gap: 1.5rem;
  }

  .practice-card {
    display: flex;
    background: white;
    border-radius: 12px;
    overflow: hidden;
    box-shadow: @card-shadow;
    transition: transform 0.3s ease;

    &:hover {
      transform: translateY(-5px);
    }

    .practice-number {
      width: 60px;
      min-height: 100%;
      background: @primary-color;
      color: white;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1.8rem;
      font-weight: 700;
      flex-shrink: 0;
    }

    .practice-content {
      padding: 1.5rem;

      h3 {
        color: @secondary-color;
        margin-top: 0;
        margin-bottom: 0.8rem;
        font-size: 1.25rem;
      }

      p {
        margin: 0;
        font-size: 0.95rem;
        color: #555;
        line-height: 1.7;
      }
    }
  }
}

.comparison-section {
  .comparison-table {
    background: white;
    border-radius: 12px;
    overflow: hidden;
    box-shadow: @card-shadow;
    border: 1px solid @border-color;

    .table-header {
      display: flex;
      background: @primary-color;
      color: white;
      font-weight: 500;

      > div {
        padding: 1.2rem 1.5rem;
        flex: 1;
        text-align: center;
      }

      .col-criteria {
        flex: 1.5;
        text-align: left;
      }
    }

    .table-row {
      display: flex;
      border-bottom: 1px solid @border-color;

      &:nth-child(even) {
        background: @light-gray;
      }

      &:last-child {
        border-bottom: none;
      }

      > div {
        padding: 1.2rem 1.5rem;
        flex: 1;
        display: flex;
        align-items: center;
      }

      .col-criteria {
        flex: 1.5;
        font-weight: 500;
      }

      .col-type {
        text-align: center;
        justify-content: center;
      }
    }
  }
}

.advanced-section {
  .advanced-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
    gap: 1.5rem;
  }

  .pattern-card {
    display: flex;
    background: white;
    border-radius: 12px;
    padding: 1.5rem;
    box-shadow: @card-shadow;
    gap: 1.2rem;
    border-top: 3px solid @primary-color;

    .pattern-icon {
      width: 50px;
      height: 50px;
      background: @primary-light;
      color: @primary-color;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1.5rem;
      flex-shrink: 0;
    }

    .pattern-content {
      flex: 1;

      h3 {
        color: @secondary-color;
        margin-top: 0;
        margin-bottom: 0.5rem;
        font-size: 1.2rem;
      }

      p {
        margin: 0 0 1rem;
        font-size: 0.95rem;
        color: #555;
        line-height: 1.7;
      }
    }

    .pattern-example {
      background: #2d2d2d;
      border-radius: 6px;
      padding: 0.8rem;
      margin-top: 0.5rem;

      pre {
        margin: 0;

        code {
          font-family: 'Courier New', monospace;
          color: #f8f8f2;
          font-size: 0.9rem;
          line-height: 1.5;
        }
      }
    }
  }
}

.footer {
  margin-top: 4rem;
  padding: 2rem;
  text-align: center;
  background: @light-gray;
  border-radius: 16px;
  font-size: 1.1rem;
  font-weight: 500;
  color: @secondary-color;
  box-shadow: @card-shadow;
  border-top: 2px solid fade(@primary-color, 30%);

  p {
    margin-bottom: 1.5rem;
  }

  .resources {
    margin-top: 1.5rem;

    h3 {
      font-size: 1.1rem;
      margin-bottom: 0.8rem;
    }

    ul {
      list-style: none;
      padding: 0;
      display: flex;
      justify-content: center;
      gap: 1.5rem;
      flex-wrap: wrap;

      li a {
        color: @primary-color;
        text-decoration: none;
        font-weight: 500;

        &:hover {
          text-decoration: underline;
        }
      }
    }
  }
}

@media (max-width: 768px) {
  .custom-directives-container {
    padding: 1.5rem 1rem;
  }

  .header h1 {
    font-size: 2rem;
  }

  .section-title {
    font-size: 1.6rem;
  }

  .intro-card {
    padding: 1.5rem !important;
  }

  .directive-grid {
    grid-template-columns: 1fr !important;
  }

  .details {
    grid-template-columns: 1fr !important;
  }
}
</style>
