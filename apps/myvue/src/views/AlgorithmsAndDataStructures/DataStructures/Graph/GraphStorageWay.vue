<template>
  <div class="graph-storage-container">
    <header class="page-header">
      <h1>å›¾çš„å­˜å‚¨ç»“æ„è¯¦è§£</h1>
      <p class="subtitle">å››ç§ç»å…¸å­˜å‚¨æ–¹å¼å¯¹æ¯”åˆ†æ</p>
    </header>

    <div class="intro-section">
      <p>å›¾æ˜¯ä¸€ç§é‡è¦çš„éçº¿æ€§æ•°æ®ç»“æ„ï¼Œç”±é¡¶ç‚¹çš„æœ‰ç©·éç©ºé›†åˆå’Œé¡¶ç‚¹ä¹‹é—´è¾¹çš„é›†åˆç»„æˆã€‚é€‰æ‹©åˆé€‚çš„å­˜å‚¨ç»“æ„å¯¹å›¾ç®—æ³•çš„æ•ˆç‡è‡³å…³é‡è¦ã€‚æœ¬æ–‡å°†è¯¦ç»†ä»‹ç»å››ç§ç»å…¸çš„å›¾å­˜å‚¨æ–¹å¼ã€‚</p>
    </div>

    <div class="navigation-tabs">
      <button
        v-for="tab in tabs"
        :key="tab.id"
        :class="['nav-tab', { active: activeTab === tab.id }]"
        @click="activeTab = tab.id"
      >
        <span class="tab-icon">{{ tab.icon }}</span>
        {{ tab.label }}
      </button>
    </div>

    <div class="content-area">
      <!-- é‚»æ¥çŸ©é˜µ -->
      <section v-if="activeTab === 'matrix'" class="storage-section">
        <div class="section-header">
          <h2>é‚»æ¥çŸ©é˜µ</h2>
          <div class="complexity-tag">
            <span>ç©ºé—´: O(VÂ²)</span>
            <span>æŸ¥è¯¢: O(1)</span>
          </div>
        </div>

        <div class="content-grid">
          <div class="description-content">
            <div class="concept-box">
              <h3>åŸºæœ¬æ¦‚å¿µ</h3>
              <p>ä½¿ç”¨äºŒç»´æ•°ç»„è¡¨ç¤ºå›¾ä¸­é¡¶ç‚¹ä¹‹é—´çš„ç›¸é‚»å…³ç³»ã€‚å¯¹äºå…·æœ‰nä¸ªé¡¶ç‚¹çš„å›¾ï¼Œä½¿ç”¨nÃ—nçš„çŸ©é˜µï¼Œå…¶ä¸­matrix[i][j]è¡¨ç¤ºé¡¶ç‚¹iåˆ°é¡¶ç‚¹jçš„è¾¹ä¿¡æ¯ã€‚</p>
            </div>

            <div class="features-list">
              <h3>æ ¸å¿ƒç‰¹æ€§</h3>
              <div class="features-grid">
                <div class="feature-item">
                  <div class="feature-icon">âš¡</div>
                  <h4>å¿«é€ŸæŸ¥è¯¢</h4>
                  <p>å¯ä»¥åœ¨O(1)æ—¶é—´å†…åˆ¤æ–­ä»»æ„ä¸¤ä¸ªé¡¶ç‚¹æ˜¯å¦ç›¸é‚»</p>
                </div>
                <div class="feature-item">
                  <div class="feature-icon">ğŸ’¾</div>
                  <h4>ç©ºé—´æ•ˆç‡</h4>
                  <p>ç©ºé—´å¤æ‚åº¦ä¸ºO(VÂ²)ï¼Œé€‚åˆç¨ å¯†å›¾å­˜å‚¨</p>
                </div>
                <div class="feature-item">
                  <div class="feature-icon">ğŸ”„</div>
                  <h4>å¯¹ç§°æ€§</h4>
                  <p>æ— å‘å›¾çš„é‚»æ¥çŸ©é˜µæ˜¯å¯¹ç§°çŸ©é˜µ</p>
                </div>
                <div class="feature-item">
                  <div class="feature-icon">ğŸ¯</div>
                  <h4>é€‚ç”¨åœºæ™¯</h4>
                  <p>ç¨ å¯†å›¾ã€éœ€è¦é¢‘ç¹æŸ¥è¯¢è¾¹å­˜åœ¨æ€§çš„åœºæ™¯</p>
                </div>
              </div>
            </div>

            <div class="implementation-example">
              <h3>å®ç°ç¤ºä¾‹</h3>
              <div class="example-visualization">
                <div class="graph-display">
                  <div class="vertices">
                    <div v-for="v in matrixExample.vertices" :key="v" class="vertex">
                      V{{ v }}
                    </div>
                  </div>
                  <div class="matrix-table">
                    <div class="matrix-header">
                      <div class="corner-cell"></div>
                      <div v-for="v in matrixExample.vertices" :key="v" class="header-cell">
                        V{{ v }}
                      </div>
                    </div>
                    <div v-for="(row, i) in matrixExample.matrix" :key="i" class="matrix-row">
                      <div class="header-cell">V{{ i }}</div>
                      <div
                        v-for="(cell, j) in row"
                        :key="j"
                        :class="['matrix-cell', { active: cell === 1, diagonal: i === j }]"
                      >
                        {{ cell }}
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <div class="code-content">
            <h3>ä»£ç å®ç°</h3>
            <div class="code-block">
              <pre><code>class AdjacencyMatrix {
  private matrix: number[][];
  private size: number;

  constructor(vertexCount: number) {
    this.size = vertexCount;
    this.matrix = Array(vertexCount)
      .fill(0)
      .map(() => Array(vertexCount).fill(0));
  }

  addEdge(i: number, j: number, weight: number = 1): void {
    if (i >= this.size || j >= this.size) return;
    this.matrix[i][j] = weight;
    // æ— å‘å›¾éœ€è¦å¯¹ç§°è®¾ç½®
    this.matrix[j][i] = weight;
  }

  removeEdge(i: number, j: number): void {
    this.matrix[i][j] = 0;
    this.matrix[j][i] = 0;
  }

  hasEdge(i: number, j: number): boolean {
    return this.matrix[i][j] !== 0;
  }

  getNeighbors(vertex: number): number[] {
    return this.matrix[vertex]
      .map((weight, index) => weight !== 0 ? index : -1)
      .filter(index => index !== -1);
  }

  printMatrix(): void {
    console.log('é‚»æ¥çŸ©é˜µ:');
    for (let i = 0; i < this.size; i++) {
      console.log(this.matrix[i].join(' '));
    }
  }
}

// ä½¿ç”¨ç¤ºä¾‹
const graph = new AdjacencyMatrix(4);
graph.addEdge(0, 1);
graph.addEdge(0, 2);
graph.addEdge(1, 3);
graph.addEdge(2, 3);
graph.printMatrix();</code></pre>
            </div>
          </div>
        </div>
      </section>

      <!-- é‚»æ¥é“¾è¡¨ -->
      <section v-if="activeTab === 'list'" class="storage-section">
        <div class="section-header">
          <h2>é‚»æ¥é“¾è¡¨</h2>
          <div class="complexity-tag">
            <span>ç©ºé—´: O(V+E)</span>
            <span>æŸ¥è¯¢: O(degree)</span>
          </div>
        </div>

        <div class="content-grid">
          <div class="description-content">
            <div class="concept-box">
              <h3>åŸºæœ¬æ¦‚å¿µ</h3>
              <p>ä¸ºæ¯ä¸ªé¡¶ç‚¹ç»´æŠ¤ä¸€ä¸ªé“¾è¡¨ï¼Œå­˜å‚¨æ‰€æœ‰ä¸è¯¥é¡¶ç‚¹ç›¸é‚»çš„é¡¶ç‚¹ã€‚é€šå¸¸ä½¿ç”¨æ•°ç»„æˆ–å“ˆå¸Œè¡¨æ¥å­˜å‚¨è¿™äº›é“¾è¡¨ã€‚</p>
            </div>

            <div class="features-list">
              <h3>æ ¸å¿ƒç‰¹æ€§</h3>
              <div class="features-grid">
                <div class="feature-item">
                  <div class="feature-icon">ğŸ’¾</div>
                  <h4>ç©ºé—´é«˜æ•ˆ</h4>
                  <p>ç©ºé—´å¤æ‚åº¦ä¸ºO(V+E)ï¼Œé€‚åˆç¨€ç–å›¾å­˜å‚¨</p>
                </div>
                <div class="feature-item">
                  <div class="feature-icon">ğŸš€</div>
                  <h4>éå†ä¼˜åŒ–</h4>
                  <p>éå†æŸä¸ªé¡¶ç‚¹çš„æ‰€æœ‰é‚»å±…éå¸¸é«˜æ•ˆ</p>
                </div>
                <div class="feature-item">
                  <div class="feature-icon">âš¡</div>
                  <h4>åŠ¨æ€æ‰©å±•</h4>
                  <p>æ·»åŠ æ–°é¡¶ç‚¹å’Œè¾¹ç›¸å¯¹å®¹æ˜“</p>
                </div>
                <div class="feature-item">
                  <div class="feature-icon">ğŸ¯</div>
                  <h4>é€‚ç”¨åœºæ™¯</h4>
                  <p>ç¨€ç–å›¾ã€éœ€è¦é¢‘ç¹éå†é‚»å±…çš„åœºæ™¯</p>
                </div>
              </div>
            </div>

            <div class="implementation-example">
              <h3>å®ç°ç¤ºä¾‹</h3>
              <div class="example-visualization">
                <div class="adjacency-list-visual">
                  <div v-for="(list, vertex) in listExample" :key="vertex" class="list-row">
                    <div class="vertex-label">V{{ vertex }} â†’</div>
                    <div class="neighbors-list">
                      <span v-for="neighbor in list" :key="neighbor" class="neighbor-item">
                        V{{ neighbor }}
                      </span>
                      <span class="list-end">null</span>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <div class="code-content">
            <h3>ä»£ç å®ç°</h3>
            <div class="code-block">
              <pre><code>class GraphNode {
  constructor(public vertex: number, public next: GraphNode | null = null) {}
}

class AdjacencyList {
  private lists: GraphNode[];
  private size: number;

  constructor(vertexCount: number) {
    this.size = vertexCount;
    this.lists = Array(vertexCount).fill(null);
  }

  addEdge(src: number, dest: number): void {
    // æ·»åŠ åˆ°æºé¡¶ç‚¹çš„é“¾è¡¨å¤´éƒ¨
    const newNode = new GraphNode(dest, this.lists[src]);
    this.lists[src] = newNode;

    // æ— å‘å›¾éœ€è¦åŒå‘æ·»åŠ 
    const reverseNode = new GraphNode(src, this.lists[dest]);
    this.lists[dest] = reverseNode;
  }

  hasEdge(src: number, dest: number): boolean {
    let current = this.lists[src];
    while (current) {
      if (current.vertex === dest) return true;
      current = current.next;
    }
    return false;
  }

  getNeighbors(vertex: number): number[] {
    const neighbors: number[] = [];
    let current = this.lists[vertex];
    while (current) {
      neighbors.push(current.vertex);
      current = current.next;
    }
    return neighbors;
  }

  printList(): void {
    console.log('é‚»æ¥è¡¨:');
    for (let i = 0; i < this.size; i++) {
      let listStr = `V${i}: `;
      let current = this.lists[i];
      while (current) {
        listStr += `V${current.vertex} -> `;
        current = current.next;
      }
      listStr += 'null';
      console.log(listStr);
    }
  }
}

// ä½¿ç”¨ç¤ºä¾‹
const listGraph = new AdjacencyList(4);
listGraph.addEdge(0, 1);
listGraph.addEdge(0, 2);
listGraph.addEdge(1, 3);
listGraph.addEdge(2, 3);
listGraph.printList();</code></pre>
            </div>
          </div>
        </div>
      </section>

      <!-- åå­—é“¾è¡¨ -->
      <section v-if="activeTab === 'orthogonal'" class="storage-section">
        <div class="section-header">
          <h2>åå­—é“¾è¡¨</h2>
          <div class="complexity-tag">
            <span>ç©ºé—´: O(V+E)</span>
            <span>æŸ¥è¯¢: O(degree)</span>
          </div>
        </div>

        <div class="content-grid">
          <div class="description-content">
            <div class="concept-box">
              <h3>åŸºæœ¬æ¦‚å¿µ</h3>
              <p>é’ˆå¯¹æœ‰å‘å›¾çš„ä¼˜åŒ–å­˜å‚¨ç»“æ„ï¼Œç»“åˆäº†é‚»æ¥è¡¨å’Œé€†é‚»æ¥è¡¨çš„ä¼˜ç‚¹ã€‚æ¯ä¸ªè¾¹èŠ‚ç‚¹åŒæ—¶å‡ºç°åœ¨å‡ºè¾¹é“¾è¡¨å’Œå…¥è¾¹é“¾è¡¨ä¸­ã€‚</p>
            </div>

            <div class="features-list">
              <h3>æ ¸å¿ƒç‰¹æ€§</h3>
              <div class="features-grid">
                <div class="feature-item">
                  <div class="feature-icon">ğŸ¯</div>
                  <h4>æœ‰å‘å›¾ä¼˜åŒ–</h4>
                  <p>ä¸“é—¨ä¸ºæœ‰å‘å›¾è®¾è®¡çš„é«˜æ•ˆå­˜å‚¨ç»“æ„</p>
                </div>
                <div class="feature-item">
                  <div class="feature-icon">ğŸ”„</div>
                  <h4>åŒå‘é“¾æ¥</h4>
                  <p>åŒæ—¶ç»´æŠ¤é¡¶ç‚¹çš„å‡ºè¾¹å’Œå…¥è¾¹ä¿¡æ¯</p>
                </div>
                <div class="feature-item">
                  <div class="feature-icon">âš¡</div>
                  <h4>é«˜æ•ˆéå†</h4>
                  <p>æ–¹ä¾¿æŸ¥æ‰¾é¡¶ç‚¹çš„å‰é©±å’Œåç»§</p>
                </div>
                <div class="feature-item">
                  <div class="feature-icon">ğŸ’¡</div>
                  <h4>é€‚ç”¨åœºæ™¯</h4>
                  <p>æœ‰å‘å›¾ã€éœ€è¦é¢‘ç¹æŸ¥è¯¢å…¥è¾¹å’Œå‡ºè¾¹çš„åœºæ™¯</p>
                </div>
              </div>
            </div>

            <div class="implementation-example">
              <h3>ç»“æ„ç¤ºæ„</h3>
              <div class="example-visualization">
                <div class="orthogonal-visual">
                  <div class="vertex-section">
                    <h4>é¡¶ç‚¹æ•°ç»„</h4>
                    <div class="vertices">
                      <div v-for="v in orthogonalExample.vertices" :key="v.id" class="vertex-node">
                        <div class="vertex-header">V{{ v.id }}</div>
                        <div class="edge-pointers">
                          <div>å‡ºè¾¹: {{ v.firstOut }}</div>
                          <div>å…¥è¾¹: {{ v.firstIn }}</div>
                        </div>
                      </div>
                    </div>
                  </div>
                  <div class="edge-section">
                    <h4>è¾¹èŠ‚ç‚¹</h4>
                    <div class="edges">
                      <div v-for="edge in orthogonalExample.edges" :key="edge.id" class="edge-node">
                        <div class="edge-info">
                          <div>å°¾: V{{ edge.tail }}</div>
                          <div>å¤´: V{{ edge.head }}</div>
                        </div>
                        <div class="edge-pointers">
                          <div>åŒå°¾: {{ edge.tlink }}</div>
                          <div>åŒå¤´: {{ edge.hlink }}</div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <div class="code-content">
            <h3>ä»£ç å®ç°</h3>
            <div class="code-block">
              <pre><code>// è¾¹èŠ‚ç‚¹å®šä¹‰
class OrthogonalEdge {
  constructor(
    public tail: number,
    public head: number,
    public tlink: OrthogonalEdge | null = null, // åŒå°¾æŒ‡é’ˆ
    public hlink: OrthogonalEdge | null = null  // åŒå¤´æŒ‡é’ˆ
  ) {}
}

// é¡¶ç‚¹èŠ‚ç‚¹å®šä¹‰
class OrthogonalVertex {
  constructor(
    public data: any,
    public firstIn: OrthogonalEdge | null = null,  // å…¥è¾¹è¡¨å¤´æŒ‡é’ˆ
    public firstOut: OrthogonalEdge | null = null  // å‡ºè¾¹è¡¨å¤´æŒ‡é’ˆ
  ) {}
}

class OrthogonalList {
  private vertices: OrthogonalVertex[];

  constructor(vertexCount: number) {
    this.vertices = Array(vertexCount)
      .fill(null)
      .map((_, i) => new OrthogonalVertex(`V${i}`));
  }

  addEdge(tail: number, head: number): void {
    const newEdge = new OrthogonalEdge(tail, head);

    // æ·»åŠ åˆ°å°¾é¡¶ç‚¹çš„å‡ºè¾¹é“¾è¡¨
    newEdge.tlink = this.vertices[tail].firstOut;
    this.vertices[tail].firstOut = newEdge;

    // æ·»åŠ åˆ°å¤´é¡¶ç‚¹çš„å…¥è¾¹é“¾è¡¨
    newEdge.hlink = this.vertices[head].firstIn;
    this.vertices[head].firstIn = newEdge;
  }

  // è·å–é¡¶ç‚¹çš„æ‰€æœ‰å‡ºè¾¹ï¼ˆåç»§ï¼‰
  getOutEdges(vertex: number): number[] {
    const outEdges: number[] = [];
    let current = this.vertices[vertex].firstOut;
    while (current) {
      outEdges.push(current.head);
      current = current.tlink;
    }
    return outEdges;
  }

  // è·å–é¡¶ç‚¹çš„æ‰€æœ‰å…¥è¾¹ï¼ˆå‰é©±ï¼‰
  getInEdges(vertex: number): number[] {
    const inEdges: number[] = [];
    let current = this.vertices[vertex].firstIn;
    while (current) {
      inEdges.push(current.tail);
      current = current.hlink;
    }
    return inEdges;
  }

  printStructure(): void {
    console.log('åå­—é“¾è¡¨ç»“æ„:');
    for (let i = 0; i < this.vertices.length; i++) {
      console.log(`é¡¶ç‚¹ V${i}:`);

      let outStr = 'å‡ºè¾¹: ';
      let currentOut = this.vertices[i].firstOut;
      while (currentOut) {
        outStr += `â†’ V${currentOut.head} `;
        currentOut = currentOut.tlink;
      }
      console.log(outStr);

      let inStr = 'å…¥è¾¹: ';
      let currentIn = this.vertices[i].firstIn;
      while (currentIn) {
        inStr += `â† V${currentIn.tail} `;
        currentIn = currentIn.hlink;
      }
      console.log(inStr);
    }
  }
}

// ä½¿ç”¨ç¤ºä¾‹
const orthGraph = new OrthogonalList(4);
orthGraph.addEdge(0, 1);
orthGraph.addEdge(0, 2);
orthGraph.addEdge(1, 3);
orthGraph.addEdge(2, 3);
orthGraph.printStructure();</code></pre>
            </div>
          </div>
        </div>
      </section>

      <!-- é‚»æ¥å¤šé‡è¡¨ -->
      <section v-if="activeTab === 'multilist'" class="storage-section">
        <div class="section-header">
          <h2>é‚»æ¥å¤šé‡è¡¨</h2>
          <div class="complexity-tag">
            <span>ç©ºé—´: O(V+E)</span>
            <span>æŸ¥è¯¢: O(degree)</span>
          </div>
        </div>

        <div class="content-grid">
          <div class="description-content">
            <div class="concept-box">
              <h3>åŸºæœ¬æ¦‚å¿µ</h3>
              <p>ä¸»è¦ç”¨äºæ— å‘å›¾çš„å­˜å‚¨ï¼Œæ¯æ¡è¾¹åªç”¨ä¸€ä¸ªè¾¹èŠ‚ç‚¹è¡¨ç¤ºï¼Œé¿å…é‚»æ¥è¡¨ä¸­è¾¹è¢«å­˜å‚¨ä¸¤æ¬¡çš„é—®é¢˜ã€‚</p>
            </div>

            <div class="features-list">
              <h3>æ ¸å¿ƒç‰¹æ€§</h3>
              <div class="features-grid">
                <div class="feature-item">
                  <div class="feature-icon">ğŸ”„</div>
                  <h4>è¾¹å…±äº«</h4>
                  <p>æ¯æ¡è¾¹åªå­˜å‚¨ä¸€æ¬¡ï¼ŒèŠ‚çœç©ºé—´</p>
                </div>
                <div class="feature-item">
                  <div class="feature-icon">ğŸ¯</div>
                  <h4>æ— å‘å›¾ä¼˜åŒ–</h4>
                  <p>ä¸“é—¨ä¸ºæ— å‘å›¾è®¾è®¡çš„å­˜å‚¨ç»“æ„</p>
                </div>
                <div class="feature-item">
                  <div class="feature-icon">âš¡</div>
                  <h4>åˆ é™¤é«˜æ•ˆ</h4>
                  <p>åˆ é™¤è¾¹æ“ä½œæ¯”é‚»æ¥è¡¨æ›´é«˜æ•ˆ</p>
                </div>
                <div class="feature-item">
                  <div class="feature-icon">ğŸ’¡</div>
                  <h4>é€‚ç”¨åœºæ™¯</h4>
                  <p>æ— å‘å›¾ã€éœ€è¦é¢‘ç¹åˆ é™¤è¾¹çš„åœºæ™¯</p>
                </div>
              </div>
            </div>

            <div class="implementation-example">
              <h3>ç»“æ„ç¤ºæ„</h3>
              <div class="example-visualization">
                <div class="multilist-visual">
                  <div class="vertex-section">
                    <h4>é¡¶ç‚¹æ•°ç»„</h4>
                    <div class="vertices">
                      <div v-for="v in multilistExample.vertices" :key="v.id" class="vertex-node">
                        <div class="vertex-header">V{{ v.id }}</div>
                        <div class="edge-pointer">ç¬¬ä¸€æ¡è¾¹: {{ v.firstEdge }}</div>
                      </div>
                    </div>
                  </div>
                  <div class="edge-section">
                    <h4>è¾¹èŠ‚ç‚¹</h4>
                    <div class="edges">
                      <div v-for="edge in multilistExample.edges" :key="edge.id" class="edge-node">
                        <div class="edge-vertices">
                          <div>é¡¶ç‚¹: V{{ edge.vertexA }}, V{{ edge.vertexB }}</div>
                        </div>
                        <div class="edge-links">
                          <div>é“¾æ¥A: {{ edge.linkA }}</div>
                          <div>é“¾æ¥B: {{ edge.linkB }}</div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <div class="code-content">
            <h3>ä»£ç å®ç°</h3>
            <div class="code-block">
              <pre><code>// è¾¹èŠ‚ç‚¹å®šä¹‰
class MultiListEdge {
  constructor(
    public vertexA: number,
    public vertexB: number,
    public linkA: MultiListEdge | null = null, // é“¾æ¥é¡¶ç‚¹Açš„ä¸‹ä¸€æ¡è¾¹
    public linkB: MultiListEdge | null = null  // é“¾æ¥é¡¶ç‚¹Bçš„ä¸‹ä¸€æ¡è¾¹
  ) {}
}

class AdjacencyMultiList {
  private vertices: MultiListEdge[];

  constructor(vertexCount: number) {
    this.vertices = Array(vertexCount).fill(null);
  }

  addEdge(vertexA: number, vertexB: number): void {
    const newEdge = new MultiListEdge(vertexA, vertexB);

    // é“¾æ¥åˆ°é¡¶ç‚¹Açš„è¾¹é“¾è¡¨
    newEdge.linkA = this.vertices[vertexA];
    this.vertices[vertexA] = newEdge;

    // é“¾æ¥åˆ°é¡¶ç‚¹Bçš„è¾¹é“¾è¡¨
    newEdge.linkB = this.vertices[vertexB];
    this.vertices[vertexB] = newEdge;
  }

  // åˆ é™¤è¾¹
  removeEdge(vertexA: number, vertexB: number): void {
    // ä»é¡¶ç‚¹Açš„é“¾è¡¨ä¸­ç§»é™¤
    let prevA: MultiListEdge | null = null;
    let currentA = this.vertices[vertexA];
    while (currentA) {
      if ((currentA.vertexA === vertexA && currentA.vertexB === vertexB) ||
          (currentA.vertexA === vertexB && currentA.vertexB === vertexA)) {
        if (prevA === null) {
          this.vertices[vertexA] = currentA.linkA;
        } else {
          prevA.linkA = currentA.linkA;
        }
        break;
      }
      prevA = currentA;
      currentA = currentA.linkA;
    }

    // ä»é¡¶ç‚¹Bçš„é“¾è¡¨ä¸­ç§»é™¤
    let prevB: MultiListEdge | null = null;
    let currentB = this.vertices[vertexB];
    while (currentB) {
      if ((currentB.vertexA === vertexA && currentB.vertexB === vertexB) ||
          (currentB.vertexA === vertexB && currentB.vertexB === vertexA)) {
        if (prevB === null) {
          this.vertices[vertexB] = currentB.linkB;
        } else {
          prevB.linkB = currentB.linkB;
        }
        break;
      }
      prevB = currentB;
      currentB = currentB.linkB;
    }
  }

  getEdges(vertex: number): number[] {
    const edges: number[] = [];
    let current = this.vertices[vertex];
    while (current) {
      const otherVertex = current.vertexA === vertex ? current.vertexB : current.vertexA;
      edges.push(otherVertex);
      current = current.vertexA === vertex ? current.linkA : current.linkB;
    }
    return edges;
  }

  printStructure(): void {
    console.log('é‚»æ¥å¤šé‡è¡¨ç»“æ„:');
    for (let i = 0; i < this.vertices.length; i++) {
      let edgeStr = `é¡¶ç‚¹ V${i} çš„è¾¹: `;
      let current = this.vertices[i];
      while (current) {
        const otherVertex = current.vertexA === i ? current.vertexB : current.vertexA;
        edgeStr += `(V${i}-V${otherVertex}) â†’ `;
        current = current.vertexA === i ? current.linkA : current.linkB;
      }
      edgeStr += 'null';
      console.log(edgeStr);
    }
  }
}

// ä½¿ç”¨ç¤ºä¾‹
const multiGraph = new AdjacencyMultiList(4);
multiGraph.addEdge(0, 1);
multiGraph.addEdge(0, 2);
multiGraph.addEdge(1, 3);
multiGraph.addEdge(2, 3);
multiGraph.printStructure();</code></pre>
            </div>
          </div>
        </div>
      </section>
    </div>

    <!-- å¯¹æ¯”æ€»ç»“ -->
    <section class="comparison-section">
      <div class="section-header">
        <h2>å­˜å‚¨æ–¹å¼å¯¹æ¯”æ€»ç»“</h2>
      </div>

      <div class="comparison-table">
        <table>
          <thead>
            <tr>
              <th>å­˜å‚¨æ–¹å¼</th>
              <th>ç©ºé—´å¤æ‚åº¦</th>
              <th>æŸ¥è¯¢è¾¹</th>
              <th>æ·»åŠ è¾¹</th>
              <th>åˆ é™¤è¾¹</th>
              <th>é€‚ç”¨åœºæ™¯</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td><strong>é‚»æ¥çŸ©é˜µ</strong></td>
              <td>O(VÂ²)</td>
              <td>O(1)</td>
              <td>O(1)</td>
              <td>O(1)</td>
              <td>ç¨ å¯†å›¾ã€é¢‘ç¹æŸ¥è¯¢</td>
            </tr>
            <tr>
              <td><strong>é‚»æ¥é“¾è¡¨</strong></td>
              <td>O(V+E)</td>
              <td>O(degree)</td>
              <td>O(1)</td>
              <td>O(degree)</td>
              <td>ç¨€ç–å›¾ã€éå†é‚»å±…</td>
            </tr>
            <tr>
              <td><strong>åå­—é“¾è¡¨</strong></td>
              <td>O(V+E)</td>
              <td>O(degree)</td>
              <td>O(1)</td>
              <td>O(degree)</td>
              <td>æœ‰å‘å›¾ã€åŒå‘æŸ¥è¯¢</td>
            </tr>
            <tr>
              <td><strong>é‚»æ¥å¤šé‡è¡¨</strong></td>
              <td>O(V+E)</td>
              <td>O(degree)</td>
              <td>O(1)</td>
              <td>O(degree)</td>
              <td>æ— å‘å›¾ã€åˆ é™¤æ“ä½œ</td>
            </tr>
          </tbody>
        </table>
      </div>
    </section>
  </div>
</template>

<script setup lang="ts">
import { ref } from 'vue';

const activeTab = ref('matrix');

const tabs = [
  { id: 'matrix', label: 'é‚»æ¥çŸ©é˜µ', icon: 'ğŸ“Š' },
  { id: 'list', label: 'é‚»æ¥é“¾è¡¨', icon: 'ğŸ”—' },
  { id: 'orthogonal', label: 'åå­—é“¾è¡¨', icon: 'â•' },
  { id: 'multilist', label: 'é‚»æ¥å¤šé‡è¡¨', icon: 'ğŸ”„' }
];

// ç¤ºä¾‹æ•°æ®
const matrixExample = {
  vertices: [0, 1, 2, 3],
  matrix: [
    [0, 1, 1, 0],
    [1, 0, 0, 1],
    [1, 0, 0, 1],
    [0, 1, 1, 0]
  ]
};

const listExample = {
  0: [1, 2],
  1: [0, 3],
  2: [0, 3],
  3: [1, 2]
};

const orthogonalExample = {
  vertices: [
    { id: 0, firstOut: 1, firstIn: null },
    { id: 1, firstOut: 3, firstIn: 1 },
    { id: 2, firstOut: 3, firstIn: 2 },
    { id: 3, firstOut: null, firstIn: 3 }
  ],
  edges: [
    { id: 1, tail: 0, head: 1, tlink: 2, hlink: null },
    { id: 2, tail: 0, head: 2, tlink: null, hlink: null },
    { id: 3, tail: 1, head: 3, tlink: null, hlink: null }
  ]
};

const multilistExample = {
  vertices: [
    { id: 0, firstEdge: 1 },
    { id: 1, firstEdge: 1 },
    { id: 2, firstEdge: 2 },
    { id: 3, firstEdge: 3 }
  ],
  edges: [
    { id: 1, vertexA: 0, vertexB: 1, linkA: 2, linkB: null },
    { id: 2, vertexA: 0, vertexB: 2, linkA: null, linkB: null },
    { id: 3, vertexA: 1, vertexB: 3, linkA: null, linkB: null }
  ]
};
</script>

<style lang="less" scoped>

.graph-storage-container {
  max-width: 1400px;
  margin: 0 auto;
  padding: 2rem;
  font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
  color: #2c3e50;
  background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
  min-height: 100vh;
}

.page-header {
  text-align: center;
  margin-bottom: 3rem;

  h1 {
    font-size: 3rem;
    font-weight: 700;
    background: linear-gradient(135deg, #2c3e50 0%, #6c757d 100%);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    margin-bottom: 0.5rem;
  }

  .subtitle {
    font-size: 1.3rem;
    color: #6c757d;
    font-weight: 400;
  }
}

.intro-section {
  background: rgba(255, 255, 255, 0.95);
  backdrop-filter: blur(10px);
  padding: 2rem;
  border-radius: 16px;
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
  margin-bottom: 2.5rem;
  font-size: 1.1rem;
  color: #495057;
  line-height: 1.7;
  border: 1px solid rgba(255, 255, 255, 0.3);
}

.navigation-tabs {
  display: grid;
  grid-template-columns: repeat(4, 1fr);
  gap: 1rem;
  margin-bottom: 2.5rem;

  @media (max-width: 768px) {
    grid-template-columns: 1fr;
  }
}

.nav-tab {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 0.8rem;
  padding: 1.2rem 1.5rem;
  background: rgba(255, 255, 255, 0.9);
  border: 2px solid #e9ecef;
  border-radius: 12px;
  font-size: 1.1rem;
  font-weight: 600;
  color: #6c757d;
  cursor: pointer;
  transition: all 0.3s ease;

  &:hover {
    background: white;
    border-color: #adb5bd;
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
  }

  &.active {
    background: white;
    border-color: #495057;
    color: #495057;
    box-shadow: 0 6px 16px rgba(0, 0, 0, 0.12);
    transform: translateY(-2px);
  }

  .tab-icon {
    font-size: 1.4rem;
  }
}

.storage-section {
  background: rgba(255, 255, 255, 0.95);
  backdrop-filter: blur(10px);
  border-radius: 16px;
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
  margin-bottom: 2.5rem;
  border: 1px solid rgba(255, 255, 255, 0.3);
  overflow: hidden;
}

.section-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 2rem 2rem 1rem;
  background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);

  h2 {
    font-size: 2.2rem;
    font-weight: 700;
    color: #495057;
    margin: 0;
  }

  .complexity-tag {
    display: flex;
    gap: 1rem;

    span {
      background: rgba(255, 255, 255, 0.9);
      padding: 0.5rem 1rem;
      border-radius: 20px;
      font-size: 0.9rem;
      font-weight: 500;
      color: #495057;
      border: 1px solid #dee2e6;
    }
  }
}

.content-grid {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 2rem;
  padding: 2rem;

  @media (max-width: 1024px) {
    grid-template-columns: 1fr;
  }
}

.description-content {
  h3 {
    font-size: 1.4rem;
    font-weight: 600;
    color: #495057;
    margin-bottom: 1rem;
    padding-bottom: 0.5rem;
    border-bottom: 2px solid #e9ecef;
  }
}

.concept-box {
  background: #f8f9fa;
  padding: 1.5rem;
  border-radius: 12px;
  border-left: 4px solid #6c757d;
  margin-bottom: 2rem;

  p {
    color: #495057;
    line-height: 1.6;
    margin: 0;
  }
}

.features-grid {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 1.5rem;
  margin-bottom: 2rem;

  @media (max-width: 768px) {
    grid-template-columns: 1fr;
  }
}

.feature-item {
  background: white;
  padding: 1.5rem;
  border-radius: 12px;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
  border: 1px solid #e9ecef;

  .feature-icon {
    font-size: 2rem;
    margin-bottom: 1rem;
  }

  h4 {
    font-size: 1.1rem;
    font-weight: 600;
    color: #495057;
    margin-bottom: 0.5rem;
  }

  p {
    color: #6c757d;
    line-height: 1.5;
    margin: 0;
    font-size: 0.95rem;
  }
}

.implementation-example {
  margin-top: 2rem;

  .example-visualization {
    background: #f8f9fa;
    padding: 1.5rem;
    border-radius: 12px;
    border: 1px solid #e9ecef;
  }
}

// é‚»æ¥çŸ©é˜µå¯è§†åŒ–
.matrix-table {
  display: grid;
  grid-template-columns: auto repeat(4, 1fr);
  gap: 1px;
  background: #dee2e6;
  border: 1px solid #dee2e6;

  .matrix-header, .matrix-row {
    display: contents;
  }

  .header-cell, .matrix-cell {
    background: white;
    padding: 1rem;
    text-align: center;
    font-weight: 500;
  }

  .header-cell {
    background: #e9ecef;
    font-weight: 600;
  }

  .corner-cell {
    background: #e9ecef;
  }

  .matrix-cell.active {
    background: #d1e7dd;
    color: #0f5132;
    font-weight: 600;
  }

  .matrix-cell.diagonal {
    background: #f8d7da;
    color: #721c24;
  }
}

// é‚»æ¥è¡¨å¯è§†åŒ–
.adjacency-list-visual {
  .list-row {
    display: flex;
    align-items: center;
    padding: 0.8rem;
    border-bottom: 1px solid #e9ecef;

    &:last-child {
      border-bottom: none;
    }
  }

  .vertex-label {
    font-weight: 600;
    color: #495057;
    min-width: 60px;
  }

  .neighbors-list {
    display: flex;
    align-items: center;
    gap: 0.5rem;
  }

  .neighbor-item {
    background: #d1e7dd;
    color: #0f5132;
    padding: 0.3rem 0.8rem;
    border-radius: 6px;
    font-size: 0.9rem;
    font-weight: 500;
  }

  .list-end {
    color: #6c757d;
    font-style: italic;
  }
}

// åå­—é“¾è¡¨å’Œå¤šé‡è¡¨å¯è§†åŒ–
.orthogonal-visual,
.multilist-visual {
  .vertex-section,
  .edge-section {
    margin-bottom: 1.5rem;

    h4 {
      font-size: 1.1rem;
      color: #495057;
      margin-bottom: 1rem;
    }
  }

  .vertices,
  .edges {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
    gap: 1rem;
  }

  .vertex-node,
  .edge-node {
    background: white;
    border: 2px solid #e9ecef;
    border-radius: 8px;
    padding: 1rem;

    .vertex-header,
    .edge-vertices {
      font-weight: 600;
      color: #495057;
      margin-bottom: 0.5rem;
    }

    .edge-pointers,
    .edge-links {
      font-size: 0.9rem;
      color: #6c757d;
    }
  }
}

.code-content {
  h3 {
    font-size: 1.4rem;
    font-weight: 600;
    color: #495057;
    margin-bottom: 1rem;
    padding-bottom: 0.5rem;
    border-bottom: 2px solid #e9ecef;
  }
}

.code-block {
  background: #1e1e1e;
  border-radius: 12px;
  overflow: hidden;

  pre {
    margin: 0;
    padding: 1.5rem;
    overflow-x: auto;

    code {
      font-family: 'Fira Code', 'Courier New', monospace;
      font-size: 0.9rem;
      color: #d4d4d4;
      line-height: 1.5;
    }
  }
}

.comparison-section {
  background: rgba(255, 255, 255, 0.95);
  backdrop-filter: blur(10px);
  border-radius: 16px;
  padding: 2rem;
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.3);

  .section-header {
    background: none;
    padding: 0 0 1.5rem;

    h2 {
      font-size: 2rem;
      color: #495057;
    }
  }
}

.comparison-table {
  overflow-x: auto;

  table {
    width: 100%;
    border-collapse: collapse;
    background: white;
    border-radius: 12px;
    overflow: hidden;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);

    th, td {
      padding: 1.2rem 1.5rem;
      text-align: left;
      border-bottom: 1px solid #e9ecef;
    }

    th {
      background: #495057;
      color: white;
      font-weight: 600;
      font-size: 1rem;
    }

    tr:hover {
      background: #f8f9fa;
    }

    td:first-child {
      font-weight: 600;
      color: #495057;
    }
  }
}

// å“åº”å¼è®¾è®¡
@media (max-width: 768px) {
  .graph-storage-container {
    padding: 1rem;
  }

  .page-header h1 {
    font-size: 2.2rem;
  }

  .content-grid {
    padding: 1.5rem;
    gap: 1.5rem;
  }

  .section-header {
    flex-direction: column;
    gap: 1rem;
    align-items: flex-start;

    .complexity-tag {
      width: 100%;
      justify-content: flex-start;
    }
  }

  .features-grid {
    grid-template-columns: 1fr;
  }

  .comparison-table {
    font-size: 0.9rem;

    th, td {
      padding: 0.8rem 1rem;
    }
  }
}
</style>
