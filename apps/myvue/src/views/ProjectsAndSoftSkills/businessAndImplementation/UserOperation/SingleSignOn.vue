<template>
  <div class="sso-guide">
    <header>
      <h1>å•ç‚¹ç™»å½• (SSO) å®ç°æŒ‡å—</h1>
      <p>æ¢ç´¢è·¨ç³»ç»Ÿæ— ç¼ç™»å½•çš„æ ¸å¿ƒæŠ€æœ¯ä¸å®ç°æ–¹æ¡ˆ</p>
      <div class="stats">
        <div class="stat-card">
          <div class="stat-value">4</div>
          <div class="stat-label">æ ¸å¿ƒæµç¨‹</div>
        </div>
        <div class="stat-card">
          <div class="stat-value">3</div>
          <div class="stat-label">ä¸»è¦åè®®</div>
        </div>
      </div>
    </header>

    <div class="content-wrapper">
      <!-- æ¦‚è¿°éƒ¨åˆ† -->
      <div class="section">
        <h2>ğŸ“Œ å•ç‚¹ç™»å½•æ¦‚è¿°</h2>
        <div class="overview-grid">
          <div class="overview-card">
            <h3>ä»€ä¹ˆæ˜¯å•ç‚¹ç™»å½•ï¼Ÿ</h3>
            <p>å•ç‚¹ç™»å½•ï¼ˆSingle Sign-On, SSOï¼‰æ˜¯ä¸€ç§èº«ä»½è®¤è¯æ–¹æ¡ˆï¼Œå…è®¸ç”¨æˆ·ä½¿ç”¨ä¸€ç»„å‡­è¯ï¼ˆå¦‚ç”¨æˆ·åå’Œå¯†ç ï¼‰ç™»å½•å¤šä¸ªç›¸å…³ä½†ç‹¬ç«‹çš„ç³»ç»Ÿã€‚</p>
          </div>
          <div class="overview-card">
            <h3>SSOçš„æ ¸å¿ƒä»·å€¼</h3>
            <ul>
              <li>æå‡ç”¨æˆ·ä½“éªŒï¼šå‡å°‘é‡å¤ç™»å½•</li>
              <li>å¢å¼ºå®‰å…¨æ€§ï¼šå‡å°‘å¯†ç æš´éœ²é£é™©</li>
              <li>ç®€åŒ–ç®¡ç†ï¼šé›†ä¸­ç”¨æˆ·èº«ä»½ç®¡ç†</li>
              <li>æé«˜ç”Ÿäº§åŠ›ï¼šå‡å°‘ç™»å½•æ—¶é—´æ¶ˆè€—</li>
            </ul>
          </div>
          <div class="overview-card">
            <h3>å…¸å‹åº”ç”¨åœºæ™¯</h3>
            <div class="scenarios">
              <div class="scenario">ä¼ä¸šå†…ç½‘ç³»ç»Ÿç¾¤</div>
              <div class="scenario">SaaSåº”ç”¨ç”Ÿæ€ç³»ç»Ÿ</div>
              <div class="scenario">å¤šæœåŠ¡ç”µå•†å¹³å°</div>
              <div class="scenario">æ ¡å›­ç®¡ç†ç³»ç»Ÿ</div>
            </div>
          </div>
        </div>
      </div>

      <!-- æ ¸å¿ƒæµç¨‹ -->
      <div class="section">
        <h2>ğŸ”„ SSO æ ¸å¿ƒæµç¨‹</h2>
        <div class="sso-flow">
          <div class="flow-step">
            <div class="step-header">
              <div class="step-number">1</div>
              <h3>ç”¨æˆ·è®¿é—®åº”ç”¨A</h3>
            </div>
            <div class="step-content">
              <div class="step-desc">
                <p>ç”¨æˆ·å°è¯•è®¿é—®å—ä¿æŠ¤çš„èµ„æºï¼š</p>
                <pre class="code-block">https://app-a.example.com/dashboard</pre>
                <p>å‰ç«¯æ£€æŸ¥æœ¬åœ°æ— æœ‰æ•ˆTokenï¼Œé‡å®šå‘åˆ°è®¤è¯ä¸­å¿ƒï¼š</p>
                <pre class="code-block">// é‡å®šå‘åˆ°è®¤è¯ä¸­å¿ƒ
window.location.href = `https://sso-auth-center.com/login?
  redirect_uri=${encodeURIComponent('https://app-a.example.com/callback')}
  &client_id=app_a_id`;</pre>
              </div>
              <div class="step-visual">
                <div class="user-flow">
                  <div class="user-icon">ğŸ‘¤</div>
                  <div class="arrow">â†’</div>
                  <div class="app-icon">ğŸ…°ï¸</div>
                  <div class="arrow">â†’</div>
                  <div class="sso-icon">ğŸ”‘</div>
                </div>
              </div>
            </div>
          </div>

          <div class="flow-step">
            <div class="step-header">
              <div class="step-number">2</div>
              <h3>è®¤è¯ä¸­å¿ƒéªŒè¯èº«ä»½</h3>
            </div>
            <div class="step-content">
              <div class="step-desc">
                <p>è®¤è¯ä¸­å¿ƒæ£€æŸ¥ç”¨æˆ·ç™»å½•çŠ¶æ€ï¼š</p>
                <ul>
                  <li>è‹¥å·²ç™»å½•ï¼šç›´æ¥ç”Ÿæˆæˆæƒç </li>
                  <li>è‹¥æœªç™»å½•ï¼šå±•ç¤ºç™»å½•è¡¨å•</li>
                </ul>
                <p>ç”¨æˆ·æäº¤å‡­è¯åï¼Œè®¤è¯ä¸­å¿ƒï¼š</p>
                <pre class="code-block">// éªŒè¯å‡­è¯
if (validateCredentials(username, password)) {
  // åˆ›å»ºå…¨å±€ä¼šè¯
  createSession(userId);
  // ç”Ÿæˆæˆæƒç 
  const authCode = generateAuthCode(clientId);
  // é‡å®šå‘å›åº”ç”¨
  redirectTo(redirect_uri, { code: authCode });
}</pre>
              </div>
              <div class="step-visual">
                <div class="login-form">
                  <div class="form-header">SSO ç™»å½•</div>
                  <div class="form-field">
                    <label>ç”¨æˆ·å</label>
                    <input type="text" placeholder="user@example.com">
                  </div>
                  <div class="form-field">
                    <label>å¯†ç </label>
                    <input type="password" placeholder="â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢">
                  </div>
                  <button class="login-btn">ç™»å½•</button>
                </div>
              </div>
            </div>
          </div>

          <div class="flow-step">
            <div class="step-header">
              <div class="step-number">3</div>
              <h3>åº”ç”¨Aè·å–Token</h3>
            </div>
            <div class="step-content">
              <div class="step-desc">
                <p>åº”ç”¨Aé€šè¿‡å›è°ƒURLæ¥æ”¶æˆæƒç ï¼š</p>
                <pre class="code-block">https://app-a.example.com/callback?code=AUTH_CODE_123</pre>
                <p>åº”ç”¨Aåç«¯ä½¿ç”¨æˆæƒç å‘è®¤è¯ä¸­å¿ƒè¯·æ±‚Tokenï¼š</p>
                <pre class="code-block">POST /oauth/token
{
  grant_type: "authorization_code",
  client_id: "app_a_id",
  client_secret: "app_a_secret",
  redirect_uri: "https://app-a.example.com/callback",
  code: "AUTH_CODE_123"
}</pre>
                <p>è®¤è¯ä¸­å¿ƒè¿”å›è®¿é—®ä»¤ç‰Œå’ŒIDä»¤ç‰Œï¼š</p>
                <pre class="code-block">{
  access_token: "ACCESS_TOKEN_XYZ",
  token_type: "Bearer",
  expires_in: 3600,
  id_token: "JWT_ID_TOKEN"
}</pre>
              </div>
              <div class="step-visual">
                <div class="token-flow">
                  <div class="app-icon">ğŸ…°ï¸</div>
                  <div class="arrow">â‡„</div>
                  <div class="sso-icon">ğŸ”‘</div>
                  <div class="token">ğŸ”</div>
                </div>
              </div>
            </div>
          </div>

          <div class="flow-step">
            <div class="step-header">
              <div class="step-number">4</div>
              <h3>è®¿é—®å…¶ä»–åº”ç”¨</h3>
            </div>
            <div class="step-content">
              <div class="step-desc">
                <p>ç”¨æˆ·è®¿é—®åº”ç”¨Bï¼š</p>
                <pre class="code-block">https://app-b.example.com/profile</pre>
                <p>åº”ç”¨Bæ£€æŸ¥æ— æœ¬åœ°ä¼šè¯ï¼Œé‡å®šå‘åˆ°è®¤è¯ä¸­å¿ƒï¼š</p>
                <pre class="code-block">window.location.href = `https://sso-auth-center.com/login?
  redirect_uri=${encodeURIComponent('https://app-b.example.com/callback')}
  &client_id=app_b_id`;</pre>
                <p>è®¤è¯ä¸­å¿ƒæ£€æµ‹åˆ°å…¨å±€ä¼šè¯å­˜åœ¨ï¼š</p>
                <pre class="code-block">// è·³è¿‡ç™»å½•é¡µé¢
const authCode = generateAuthCode('app_b_id');
redirectTo(redirect_uri, { code: authCode });</pre>
                <p>åº”ç”¨Bä½¿ç”¨æˆæƒç è·å–Tokenï¼Œç”¨æˆ·è‡ªåŠ¨ç™»å½•</p>
              </div>
              <div class="step-visual">
                <div class="multi-app-flow">
                  <div class="user-icon">ğŸ‘¤</div>
                  <div class="arrow">â†’</div>
                  <div class="app-icon">ğŸ…±ï¸</div>
                  <div class="arrow">â†’</div>
                  <div class="sso-icon">ğŸ”‘</div>
                  <div class="arrow">âœ“</div>
                  <div class="app-icon">ğŸ…±ï¸</div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- å‰ç«¯å®ç° -->
      <div class="section">
        <h2>ğŸ’» å‰ç«¯å…³é”®å®ç°</h2>
        <div class="implementation-grid">
          <div class="impl-card">
            <h3>æ£€æŸ¥ç™»å½•çŠ¶æ€</h3>
            <pre class="code-block">// æ£€æŸ¥æœ¬åœ°Tokenæœ‰æ•ˆæ€§
function checkAuth() {
  const token = localStorage.getItem('access_token');
  if (!token) return false;

  // éªŒè¯Tokenæ˜¯å¦è¿‡æœŸ
  const { exp } = parseJwt(token);
  if (exp * 1000 < Date.now()) {
    return false;
  }
  return true;
}

// è§£æJWT
function parseJwt(token) {
  try {
    return JSON.parse(atob(token.split('.')[1]));
  } catch (e) {
    return null;
  }
}</pre>
          </div>
          <div class="impl-card">
            <h3>å¤„ç†è®¤è¯å›è°ƒ</h3>
            <pre class="code-block">// åœ¨å›è°ƒé¡µé¢å¤„ç†è®¤è¯ç 
onMounted(() => {
  const urlParams = new URLSearchParams(window.location.search);
  const code = urlParams.get('code');

  if (code) {
    // ä½¿ç”¨codeäº¤æ¢Token
    exchangeCodeForToken(code);
  } else if (urlParams.get('error')) {
    // å¤„ç†é”™è¯¯
    showError(urlParams.get('error_description'));
  }
});

async function exchangeCodeForToken(code) {
  try {
    const response = await fetch('/api/sso/token', {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({ code })
    });

    const data = await response.json();
    // å­˜å‚¨Token
    localStorage.setItem('access_token', data.access_token);
    localStorage.setItem('id_token', data.id_token);

    // é‡å®šå‘åˆ°åŸå§‹è¯·æ±‚é¡µé¢
    const redirect = sessionStorage.getItem('sso_redirect') || '/';
    router.push(redirect);
  } catch (error) {
    console.error('Tokenäº¤æ¢å¤±è´¥:', error);
  }
}</pre>
          </div>
          <div class="impl-card">
            <h3>Tokenç®¡ç†</h3>
            <pre class="code-block">// å°è£…APIè¯·æ±‚æ‹¦æˆªå™¨
api.interceptors.request.use(config => {
  const token = localStorage.getItem('access_token');
  if (token) {
    config.headers.Authorization = `Bearer ${token}`;
  }
  return config;
});

// å¤„ç†Tokenè¿‡æœŸ
api.interceptors.response.use(
  response => response,
  error => {
    if (error.response?.status === 401) {
      // Tokenè¿‡æœŸï¼Œé‡æ–°è®¤è¯
      initiateSSOFlow();
    }
    return Promise.reject(error);
  }
);

// å­˜å‚¨åŸå§‹è¯·æ±‚URL
function initiateSSOFlow() {
  sessionStorage.setItem('sso_redirect', router.currentRoute.value.fullPath);
  redirectToAuthCenter();
}</pre>
          </div>
          <div class="impl-card">
            <h3>å•ç‚¹æ³¨é”€</h3>
            <pre class="code-block">// å‰ç«¯æ³¨é”€
function logout() {
  // æ¸…é™¤æœ¬åœ°Token
  localStorage.removeItem('access_token');
  localStorage.removeItem('id_token');

  // é‡å®šå‘åˆ°è®¤è¯ä¸­å¿ƒæ³¨é”€ç«¯ç‚¹
  window.location.href = `https://sso-auth-center.com/logout?
    post_logout_redirect_uri=${encodeURIComponent(window.location.origin)}
    &id_token_hint=${localStorage.getItem('id_token')}`;
}

// ç›‘å¬å…¨å±€æ³¨é”€äº‹ä»¶
function setupGlobalLogoutListener() {
  window.addEventListener('storage', (event) => {
    if (event.key === 'sso_logout' && event.newValue === 'true') {
      // æ¸…é™¤æœ¬åœ°Token
      localStorage.removeItem('access_token');
      localStorage.removeItem('id_token');
      // è·³è½¬åˆ°ç™»å½•é¡µ
      router.push('/login');
    }
  });

  // å¹¿æ’­æ³¨é”€äº‹ä»¶
  function broadcastLogout() {
    localStorage.setItem('sso_logout', 'true');
    // ç«‹å³æ¸…é™¤ï¼Œé¿å…å¾ªç¯è§¦å‘
    setTimeout(() => {
      localStorage.removeItem('sso_logout');
    }, 100);
  }
}</pre>
          </div>
        </div>
      </div>

      <!-- å®‰å…¨æœºåˆ¶ -->
      <div class="section">
        <h2>ğŸ”’ SSO å®‰å…¨æœºåˆ¶</h2>
        <div class="security-grid">
          <div class="security-card">
            <div class="security-icon">https</div>
            <h3>HTTPS å…¨ç¨‹åŠ å¯†</h3>
            <p>æ‰€æœ‰é€šä¿¡å¿…é¡»ä½¿ç”¨HTTPSï¼Œé˜²æ­¢å‡­è¯æ³„éœ²</p>
          </div>
          <div class="security-card">
            <div class="security-icon">â±ï¸</div>
            <h3>Token çŸ­æœŸæœ‰æ•ˆ</h3>
            <p>è®¿é—®ä»¤ç‰Œè®¾ç½®çŸ­æœ‰æ•ˆæœŸï¼ˆé€šå¸¸1å°æ—¶ï¼‰</p>
          </div>
          <div class="security-card">
            <div class="security-icon">ğŸ”„</div>
            <h3>åˆ·æ–°ä»¤ç‰Œæœºåˆ¶</h3>
            <p>ä½¿ç”¨é•¿æœŸæœ‰æ•ˆçš„åˆ·æ–°ä»¤ç‰Œè·å–æ–°è®¿é—®ä»¤ç‰Œ</p>
          </div>
          <div class="security-card">
            <div class="security-icon">ğŸ¯</div>
            <h3>PKCE å¢å¼ºä¿æŠ¤</h3>
            <p>OAuth 2.0 PKCEé˜²æ­¢æˆæƒç æˆªè·æ”»å‡»</p>
          </div>
          <div class="security-card">
            <div class="security-icon">ğŸ”</div>
            <h3>JWT ç­¾åéªŒè¯</h3>
            <p>ä¸¥æ ¼éªŒè¯IDä»¤ç‰Œç­¾åï¼Œé˜²æ­¢ç¯¡æ”¹</p>
          </div>
          <div class="security-card">
            <div class="security-icon">ğŸš«</div>
            <h3>åŒæºç­–ç•¥é™åˆ¶</h3>
            <p>ä½¿ç”¨CSPå’ŒSameSite Cookieé˜²æ­¢CSRFæ”»å‡»</p>
          </div>
        </div>
      </div>

      <!-- åè®®å¯¹æ¯” -->
      <div class="section">
        <h2>âš–ï¸ SSO åè®®å¯¹æ¯”</h2>
        <div class="protocol-comparison">
          <table>
            <thead>
              <tr>
                <th>åè®®</th>
                <th>OAuth 2.0</th>
                <th>OpenID Connect</th>
                <th>SAML 2.0</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>ç±»å‹</td>
                <td>æˆæƒæ¡†æ¶</td>
                <td>èº«ä»½è®¤è¯å±‚</td>
                <td>èº«ä»½è®¤è¯åè®®</td>
              </tr>
              <tr>
                <td>æ•°æ®æ ¼å¼</td>
                <td>JSON</td>
                <td>JSON (JWT)</td>
                <td>XML</td>
              </tr>
              <tr>
                <td>ä¸»è¦ç”¨é€”</td>
                <td>APIè®¿é—®æˆæƒ</td>
                <td>ç”¨æˆ·èº«ä»½è®¤è¯</td>
                <td>ä¼ä¸šçº§SSO</td>
              </tr>
              <tr>
                <td>å‰ç«¯å‹å¥½åº¦</td>
                <td>é«˜</td>
                <td>é«˜</td>
                <td>ä½</td>
              </tr>
              <tr>
                <td>ç§»åŠ¨ç«¯æ”¯æŒ</td>
                <td>ä¼˜ç§€</td>
                <td>ä¼˜ç§€</td>
                <td>ä¸€èˆ¬</td>
              </tr>
              <tr>
                <td>å…¸å‹åœºæ™¯</td>
                <td>ç¬¬ä¸‰æ–¹APIè®¿é—®</td>
                <td>æ¶ˆè´¹è€…åº”ç”¨SSO</td>
                <td>ä¼ä¸šå†…ç½‘SSO</td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>

      <!-- æœ€ä½³å®è·µ -->
      <div class="section">
        <h2>ğŸ† SSO æœ€ä½³å®è·µ</h2>
        <div class="best-practices">
          <div class="practice-card">
            <div class="practice-icon">1</div>
            <div class="practice-content">
              <h3>é›†ä¸­å¼ä¼šè¯ç®¡ç†</h3>
              <p>åœ¨è®¤è¯ä¸­å¿ƒç»Ÿä¸€ç®¡ç†ç”¨æˆ·ä¼šè¯ï¼Œå„åº”ç”¨ä¸å­˜å‚¨ä¼šè¯çŠ¶æ€</p>
            </div>
          </div>
          <div class="practice-card">
            <div class="practice-icon">2</div>
            <div class="practice-content">
              <h3>å®ç°å…¨å±€æ³¨é”€</h3>
              <p>ç”¨æˆ·ä¸€å¤„æ³¨é”€ï¼Œæ‰€æœ‰åº”ç”¨ä¼šè¯ç«‹å³ç»ˆæ­¢</p>
            </div>
          </div>
          <div class="practice-card">
            <div class="practice-icon">3</div>
            <div class="practice-content">
              <h3>ä½¿ç”¨æ ‡å‡†åè®®</h3>
              <p>ä¼˜å…ˆé‡‡ç”¨OpenID Connectç­‰æ ‡å‡†åè®®ï¼Œé¿å…è‡ªå®šä¹‰å®ç°</p>
            </div>
          </div>
          <div class="practice-card">
            <div class="practice-icon">4</div>
            <div class="practice-content">
              <h3>å®æ–½å¤šå› ç´ è®¤è¯</h3>
              <p>åœ¨è®¤è¯ä¸­å¿ƒå®æ–½MFAï¼Œæå‡æ•´ä½“å®‰å…¨æ€§</p>
            </div>
          </div>
        </div>
      </div>
    </div>

    <footer>
      <p>å•ç‚¹ç™»å½•å®ç°æŒ‡å— Â© 2023 | ä½¿ç”¨Vue3 + TypeScriptå®ç°</p>
    </footer>
  </div>
</template>

<script setup lang="ts">
import { onMounted } from 'vue';

// æ¨¡æ‹ŸSSOåŠŸèƒ½
onMounted(() => {
  // è¿™é‡Œå¯ä»¥æ·»åŠ ä¸€äº›äº¤äº’é€»è¾‘çš„æ¨¡æ‹Ÿ
});
</script>

<style lang="less" scoped>
@import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap');

.sso-guide {
  font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
  max-width: 1200px;
  margin: 0 auto;
  padding: 20px;
  color: #2c3e50;
  background-color: #f8fafc;
  min-height: 100vh;
  line-height: 1.6;

  header {
    text-align: center;
    margin-bottom: 30px;
    padding: 30px 20px;
    background: linear-gradient(135deg, #4361ee 0%, #3a0ca3 100%);
    border-radius: 12px;
    color: white;
    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);

    h1 {
      font-size: 2.4rem;
      font-weight: 700;
      margin-bottom: 10px;
    }

    p {
      font-size: 1.2rem;
      opacity: 0.9;
      max-width: 700px;
      margin: 0 auto 25px;
    }

    .stats {
      display: flex;
      justify-content: center;
      gap: 30px;
      margin-top: 20px;

      .stat-card {
        background: rgba(255, 255, 255, 0.15);
        border-radius: 10px;
        padding: 15px 25px;
        min-width: 120px;

        .stat-value {
          font-size: 2.2rem;
          font-weight: 700;
          margin-bottom: 5px;
        }

        .stat-label {
          font-size: 0.95rem;
          opacity: 0.85;
        }
      }
    }
  }

  .content-wrapper {
    background: white;
    border-radius: 12px;
    box-shadow: 0 5px 25px rgba(0, 0, 0, 0.05);
    overflow: hidden;
    padding: 30px;
  }

  .section {
    margin-bottom: 40px;

    h2 {
      font-size: 1.8rem;
      color: #4361ee;
      margin-bottom: 25px;
      padding-bottom: 12px;
      border-bottom: 2px solid #eef2ff;
      position: relative;

      &::after {
        content: '';
        position: absolute;
        bottom: -2px;
        left: 0;
        width: 80px;
        height: 3px;
        background: #4361ee;
        border-radius: 3px;
      }
    }
  }

  .overview-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
    gap: 20px;
    margin-bottom: 20px;

    .overview-card {
      background: white;
      border-radius: 10px;
      padding: 20px;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
      border: 1px solid #e2e8f0;

      h3 {
        font-size: 1.3rem;
        color: #3a0ca3;
        margin-top: 0;
        margin-bottom: 15px;
      }

      p,
      ul {
        font-size: 0.95rem;
        color: #475569;
        margin: 0;
        line-height: 1.6;
      }

      ul {
        padding-left: 20px;

        li {
          margin-bottom: 8px;
          position: relative;

          &::before {
            content: 'â€¢';
            color: #4361ee;
            font-weight: bold;
            display: inline-block;
            width: 1em;
            margin-left: -1em;
          }
        }
      }

      .scenarios {
        display: flex;
        flex-wrap: wrap;
        gap: 10px;
        margin-top: 15px;

        .scenario {
          background: #eef2ff;
          color: #4361ee;
          padding: 6px 12px;
          border-radius: 20px;
          font-size: 0.85rem;
          font-weight: 500;
        }
      }
    }
  }

  .sso-flow {
    display: flex;
    flex-direction: column;
    gap: 30px;
  }

  .flow-step {
    background: white;
    border-radius: 12px;
    overflow: hidden;
    box-shadow: 0 4px 15px rgba(0, 0, 0, 0.07);
    border-left: 4px solid #4361ee;

    .step-header {
      display: flex;
      align-items: center;
      padding: 18px 25px;
      background: #f8f9fe;
      border-bottom: 1px solid #eef0f9;

      .step-number {
        background: #4361ee;
        color: white;
        width: 36px;
        height: 36px;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 1.2rem;
        font-weight: bold;
        margin-right: 15px;
      }

      h3 {
        margin: 0;
        font-size: 1.4rem;
        color: #3a0ca3;
      }
    }

    .step-content {
      display: flex;
      padding: 25px;

      @media (max-width: 768px) {
        flex-direction: column;
      }

      .step-desc {
        flex: 3;
        padding-right: 25px;

        p,
        ul {
          font-size: 0.95rem;
          color: #475569;
          line-height: 1.6;
        }

        ul {
          padding-left: 20px;
          margin: 15px 0;

          li {
            margin-bottom: 8px;
            position: relative;

            &::before {
              content: 'â€¢';
              color: #4361ee;
              font-weight: bold;
              display: inline-block;
              width: 1em;
              margin-left: -1em;
            }
          }
        }
      }

      .step-visual {
        flex: 1;
        display: flex;
        align-items: center;
        justify-content: center;
        min-width: 250px;
      }
    }
  }

  .user-flow,
  .token-flow,
  .multi-app-flow {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 20px;
    font-size: 2rem;

    .user-icon,
    .app-icon,
    .sso-icon,
    .token {
      width: 60px;
      height: 60px;
      border-radius: 10px;
      display: flex;
      align-items: center;
      justify-content: center;
      background: #eef2ff;
      box-shadow: 0 4px 10px rgba(0, 0, 0, 0.05);
    }

    .arrow {
      color: #4361ee;
      font-weight: bold;
    }
  }

  .login-form {
    width: 100%;
    max-width: 280px;
    background: white;
    border-radius: 10px;
    padding: 20px;
    box-shadow: 0 5px 15px rgba(0, 0, 0, 0.08);
    border: 1px solid #e2e8f0;

    .form-header {
      font-size: 1.2rem;
      font-weight: 600;
      color: #3a0ca3;
      margin-bottom: 20px;
      text-align: center;
    }

    .form-field {
      margin-bottom: 15px;

      label {
        display: block;
        margin-bottom: 5px;
        font-size: 0.9rem;
        color: #475569;
        font-weight: 500;
      }

      input {
        width: 100%;
        padding: 10px 12px;
        border: 1px solid #cbd5e1;
        border-radius: 6px;
        font-size: 0.95rem;

        &:focus {
          outline: none;
          border-color: #4361ee;
          box-shadow: 0 0 0 3px rgba(67, 97, 238, 0.1);
        }
      }
    }

    .login-btn {
      width: 100%;
      padding: 12px;
      background: linear-gradient(to right, #4361ee, #3a0ca3);
      color: white;
      border: none;
      border-radius: 6px;
      font-size: 1rem;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.2s ease;

      &:hover {
        transform: translateY(-2px);
        box-shadow: 0 4px 10px rgba(67, 97, 238, 0.3);
      }
    }
  }

  .implementation-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
    gap: 20px;

    .impl-card {
      background: white;
      border-radius: 10px;
      padding: 20px;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
      border: 1px solid #e2e8f0;
      transition: transform 0.2s ease;

      &:hover {
        transform: translateY(-3px);
        box-shadow: 0 6px 15px rgba(0, 0, 0, 0.08);
      }

      h3 {
        font-size: 1.2rem;
        color: #3a0ca3;
        margin-top: 0;
        margin-bottom: 15px;
      }
    }
  }

  .security-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
    gap: 20px;

    .security-card {
      background: white;
      border-radius: 10px;
      padding: 25px 20px;
      text-align: center;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
      border-top: 3px solid #4361ee;

      .security-icon {
        font-size: 2rem;
        margin-bottom: 15px;
        background: #eef2ff;
        width: 60px;
        height: 60px;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        margin: 0 auto 15px;
        color: #4361ee;
      }

      h3 {
        font-size: 1.2rem;
        color: #3a0ca3;
        margin-top: 0;
        margin-bottom: 15px;
      }

      p {
        font-size: 0.95rem;
        color: #475569;
        margin: 0;
        line-height: 1.5;
      }
    }
  }

  .protocol-comparison {
    overflow-x: auto;

    table {
      width: 100%;
      border-collapse: collapse;
      box-shadow: 0 4px 15px rgba(0, 0, 0, 0.05);
      border-radius: 10px;
      overflow: hidden;

      th,
      td {
        padding: 16px 20px;
        text-align: left;
        border-bottom: 1px solid #eee;
        font-size: 0.95rem;
      }

      thead {
        background: linear-gradient(to right, #4361ee, #3a0ca3);
        color: white;

        th {
          font-weight: 600;
          text-align: center;
        }
      }

      tbody {
        tr {
          &:nth-child(even) {
            background-color: #f9f9f9;
          }

          &:hover {
            background-color: #f0f4ff;
          }

          td:first-child {
            font-weight: 500;
          }
        }
      }
    }
  }

  .best-practices {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
    gap: 20px;

    .practice-card {
      display: flex;
      background: white;
      border-radius: 10px;
      padding: 20px;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
      border: 1px solid #e2e8f0;
      transition: transform 0.3s ease;

      &:hover {
        transform: translateY(-5px);
      }

      .practice-icon {
        background: #4361ee;
        color: white;
        min-width: 40px;
        height: 40px;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 1.2rem;
        font-weight: bold;
        margin-right: 15px;
      }

      .practice-content {
        h3 {
          font-size: 1.2rem;
          color: #3a0ca3;
          margin-top: 0;
          margin-bottom: 8px;
        }

        p {
          font-size: 0.95rem;
          color: #64748b;
          margin: 0;
          line-height: 1.5;
        }
      }
    }
  }

  .code-block {
    background: #2d2d2d;
    color: #f8f8f2;
    padding: 15px;
    border-radius: 8px;
    font-family: 'Fira Code', monospace;
    font-size: 0.9rem;
    overflow-x: auto;
    line-height: 1.5;
    margin: 15px 0;
  }

  footer {
    text-align: center;
    margin-top: 40px;
    padding: 20px;
    color: #64748b;
    font-size: 0.9rem;
    border-top: 1px solid #e2e8f0;
  }

  @media (max-width: 768px) {
    header {
      h1 {
        font-size: 1.8rem;
      }

      p {
        font-size: 1rem;
      }

      .stats {
        flex-direction: column;
        align-items: center;
        gap: 15px;
      }
    }

    .flow-step .step-content {
      flex-direction: column;
      gap: 20px;

      .step-desc {
        padding-right: 0;
      }
    }
  }
}
</style>
