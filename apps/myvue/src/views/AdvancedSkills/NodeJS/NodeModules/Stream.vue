<template>
  <div class="stream-container">
    <header class="header">
      <h1>Node.js Stream æ¨¡å—åŸºç¡€ä»‹ç»</h1>
      <p class="subtitle">é«˜æ•ˆå¤„ç†æµå¼æ•°æ®çš„æ ¸å¿ƒå·¥å…·</p>
    </header>

    <div class="content-wrapper">
      <div class="intro-section">
        <div class="intro-card">
          <div class="definition">
            <div class="stream-icon">ğŸŒŠ</div>
            <div>
              <h2>ä»€ä¹ˆæ˜¯ Streamï¼Ÿ</h2>
              <p>Stream æ˜¯ Node.js ä¸­å¤„ç†æµå¼æ•°æ®çš„æŠ½è±¡æ¥å£ï¼Œç”¨äºé«˜æ•ˆå¤„ç†å¤§å‹æ•°æ®è€Œä¸æ¶ˆè€—å¤§é‡å†…å­˜ã€‚Stream ä¸æ˜¯ä¸€æ¬¡æ€§å°†æ•°æ®åŠ è½½åˆ°å†…å­˜ï¼Œè€Œæ˜¯åˆ†å—å¤„ç†æ•°æ®ã€‚</p>
              <div class="feature">
                <span class="feature-tag">å†…å­˜é«˜æ•ˆ</span>
                <span class="feature-tag">å®æ—¶å¤„ç†</span>
                <span class="feature-tag">ç»„åˆç®¡é“</span>
                <span class="feature-tag">é”™è¯¯å¤„ç†</span>
              </div>
            </div>
          </div>

          <div class="installation">
            <h3>æ ¸å¿ƒæ¦‚å¿µ</h3>
            <div class="concepts">
              <div class="concept">
                <div class="concept-icon">ğŸ”¢</div>
                <div>
                  <h4>åˆ†å—å¤„ç†</h4>
                  <p>æ•°æ®è¢«åˆ†å‰²æˆå°å—(chunks)ä¾æ¬¡å¤„ç†</p>
                </div>
              </div>
              <div class="concept">
                <div class="concept-icon">ğŸ”„</div>
                <div>
                  <h4>èƒŒå‹æœºåˆ¶</h4>
                  <p>é˜²æ­¢è¯»å†™é€Ÿåº¦ä¸åŒ¹é…å¯¼è‡´å†…å­˜æº¢å‡º</p>
                </div>
              </div>
              <div class="concept">
                <div class="concept-icon">ğŸ§©</div>
                <div>
                  <h4>ç®¡é“è¿æ¥</h4>
                  <p>å¤šä¸ªæµé€šè¿‡ç®¡é“ç»„åˆæˆå¤„ç†é“¾</p>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <div class="stream-types-section">
        <h2 class="section-title">æµç±»å‹</h2>

        <div class="types-grid">
          <div class="type-card readable">
            <div class="type-header">
              <h3>å¯è¯»æµ (Readable)</h3>
              <div class="type-icon">ğŸ“–</div>
            </div>
            <div class="type-content">
              <p>æ•°æ®æ¥æºï¼Œå¯ä»ä¸­è¯»å–æ•°æ®</p>
              <ul>
                <li><strong>æ¨¡å¼</strong>ï¼šæµåŠ¨æ¨¡å¼(flowing) vs æš‚åœæ¨¡å¼(paused)</li>
                <li><strong>äº‹ä»¶</strong>ï¼š'data', 'end', 'error'</li>
                <li><strong>æ–¹æ³•</strong>ï¼špipe(), read(), pause(), resume()</li>
              </ul>
              <div class="example">
                <pre class="code-block">const fs = require('fs');
const readable = fs.createReadStream('file.txt');

readable.on('data', (chunk) => {
  console.log(`æ¥æ”¶åˆ° ${chunk.length} å­—èŠ‚æ•°æ®`);
});

readable.on('end', () => {
  console.log('æ²¡æœ‰æ›´å¤šæ•°æ®');
});</pre>
              </div>
            </div>
          </div>

          <div class="type-card writable">
            <div class="type-header">
              <h3>å¯å†™æµ (Writable)</h3>
              <div class="type-icon">âœï¸</div>
            </div>
            <div class="type-content">
              <p>æ•°æ®ç›®æ ‡ï¼Œå¯å‘å…¶ä¸­å†™å…¥æ•°æ®</p>
              <ul>
                <li><strong>æ–¹æ³•</strong>ï¼šwrite(), end(), cork(), uncork()</li>
                <li><strong>äº‹ä»¶</strong>ï¼š'drain', 'finish', 'error'</li>
                <li><strong>èƒŒå‹</strong>ï¼šå¤„ç†å†™å…¥é€Ÿåº¦å·®å¼‚</li>
              </ul>
              <div class="example">
                <pre class="code-block">const fs = require('fs');
const writable = fs.createWriteStream('output.txt');

writable.write('å†™å…¥ä¸€äº›æ•°æ®\n');
writable.write('å†å†™å…¥ä¸€äº›æ•°æ®\n');
writable.end('å®Œæˆå†™å…¥');</pre>
              </div>
            </div>
          </div>

          <div class="type-card duplex">
            <div class="type-header">
              <h3>åŒå·¥æµ (Duplex)</h3>
              <div class="type-icon">â†”ï¸</div>
            </div>
            <div class="type-content">
              <p>åŒæ—¶å®ç°å¯è¯»å’Œå¯å†™æ¥å£</p>
              <ul>
                <li><strong>ç‰¹ç‚¹</strong>ï¼šåŒå‘æ•°æ®æµ</li>
                <li><strong>ç¤ºä¾‹</strong>ï¼šTCP sockets</li>
                <li><strong>ä½¿ç”¨</strong>ï¼šç‹¬ç«‹è¯»å†™é€šé“</li>
              </ul>
              <div class="example">
                <pre class="code-block">const { Duplex } = require('stream');

const myDuplex = new Duplex({
  write(chunk, encoding, callback) {
    console.log('å†™å…¥:', chunk.toString());
    callback();
  },

  read(size) {
    // æ¨é€æ•°æ®åˆ°å¯è¯»ç«¯
    this.push('ä»åŒå·¥æµè¯»å–çš„æ•°æ®');
    this.push(null); // ç»“æŸæµ
  }
});</pre>
              </div>
            </div>
          </div>

          <div class="type-card transform">
            <div class="type-header">
              <h3>è½¬æ¢æµ (Transform)</h3>
              <div class="type-icon">ğŸ”„</div>
            </div>
            <div class="type-content">
              <p>åœ¨è¯»å†™è¿‡ç¨‹ä¸­ä¿®æ”¹æˆ–è½¬æ¢æ•°æ®</p>
              <ul>
                <li><strong>ç‰¹ç‚¹</strong>ï¼šè¾“å‡ºæ˜¯è¾“å…¥çš„è½¬æ¢ç»“æœ</li>
                <li><strong>æ ¸å¿ƒæ–¹æ³•</strong>ï¼š_transform()</li>
                <li><strong>å¸¸è§ç”¨é€”</strong>ï¼šå‹ç¼©ã€åŠ å¯†ã€æ•°æ®è½¬æ¢</li>
              </ul>
              <div class="example">
                <pre class="code-block">const { Transform } = require('stream');

const upperCaseTransform = new Transform({
  transform(chunk, encoding, callback) {
    // è½¬æ¢ä¸ºå¤§å†™å¹¶æ¨é€ç»“æœ
    this.push(chunk.toString().toUpperCase());
    callback();
  }
});

process.stdin.pipe(upperCaseTransform).pipe(process.stdout);</pre>
              </div>
            </div>
          </div>
        </div>
      </div>


      <section class="write-stream-section">
        <h2 class="section-title">fs.createWriteStream ç”¨æ³•åŸºç¡€ä»‹ç»</h2>
        <div class="write-stream-content">
          <div class="write-stream-intro">
            <div class="write-stream-icon">ğŸ“</div>
            <div>
              <h3>ä½œç”¨</h3>
              <p>
                <code>fs.createWriteStream()</code> æ˜¯ Node.js <code>fs</code>
                æ¨¡å—ä¸­ç”¨äºåˆ›å»ºå¯å†™æµçš„æ ¸å¿ƒæ–¹æ³•ã€‚å®ƒå…è®¸ä½ ä»¥æµçš„æ–¹å¼é«˜æ•ˆå†™å…¥å¤§å‹æ–‡ä»¶ï¼Œé€‚åˆå¤„ç†å¤§é‡æ•°æ®æˆ–éœ€è¦åˆ†å—å†™å…¥çš„åœºæ™¯ã€‚
              </p>
            </div>
          </div>
          <div class="write-stream-details">
            <h3>å¸¸ç”¨å‚æ•°</h3>
            <ul>
              <li><strong>path</strong>ï¼šè¦å†™å…¥çš„æ–‡ä»¶è·¯å¾„ï¼ˆå¿…å¡«ï¼‰</li>
              <li><strong>options</strong>ï¼šå¯é€‰é…ç½®å¯¹è±¡ï¼Œå¦‚
                <code>flags</code>ï¼ˆå†™å…¥æ–¹å¼ï¼‰ã€<code>encoding</code>ï¼ˆç¼–ç ï¼‰ã€<code>highWaterMark</code>ï¼ˆç¼“å†²åŒºå¤§å°ï¼‰ã€<code>mode</code>ï¼ˆæƒé™ï¼‰ç­‰
              </li>
            </ul>
          </div>
          <div class="write-stream-example">
            <h3>ç¤ºä¾‹ä»£ç </h3>
            <pre class="code-block">const fs = require('fs');

// åˆ›å»ºä¸€ä¸ªå†™å…¥æµï¼Œå†™å…¥åˆ° output.txt
const ws = fs.createWriteStream('output.txt', {
  flags: 'w',           // å†™å…¥æ–¹å¼ï¼Œ'w'ä¸ºå†™å…¥ï¼ˆè¦†ç›–ï¼‰ï¼Œ'a'ä¸ºè¿½åŠ 
  encoding: 'utf8',     // å†™å…¥ç¼–ç 
  highWaterMark: 16 * 1024, // ç¼“å†²åŒºå¤§å°ï¼ˆå¯é€‰ï¼‰
  autoClose: true, // å†™å…¥å®Œæˆåè‡ªåŠ¨å…³é—­æ–‡ä»¶
  emitClose: true, // å†™å…¥å®Œæˆåè§¦å‘'close'äº‹ä»¶
  start: 0, // å†™å…¥å¼€å§‹ä½ç½®
  end: 100, // å†™å…¥ç»“æŸä½ç½®
  autoDestroy: true, // å†™å…¥å®Œæˆåè‡ªåŠ¨é”€æ¯æµ
  error: null, // å†™å…¥é”™è¯¯
});

ws.write('ç¬¬ä¸€è¡Œå†…å®¹\n');
ws.write('ç¬¬äºŒè¡Œå†…å®¹\n');
ws.end('å†™å…¥ç»“æŸï¼'); // ç»“æŸå†™å…¥æµ

ws.on('finish', () => {
  console.log('æ–‡ä»¶å†™å…¥å®Œæˆ');
});</pre>
          </div>
          <div class="write-stream-tips">
            <strong>æ€§èƒ½æç¤ºï¼š</strong>
            <ul>
              <li>ä½¿ç”¨æµå†™å…¥å¤§æ–‡ä»¶æ—¶ï¼Œå†…å­˜å ç”¨ä½ï¼Œå†™å…¥è¿‡ç¨‹ä¸ä¼šé˜»å¡ä¸»çº¿ç¨‹ã€‚</li>
              <li>åˆç†è®¾ç½® <code>highWaterMark</code> å¯ä»¥ä¼˜åŒ–å†™å…¥æ€§èƒ½ã€‚</li>
              <li>ç›‘å¬ <code>finish</code> äº‹ä»¶ç¡®ä¿å†™å…¥å®Œæˆåå†è¿›è¡Œåç»­æ“ä½œã€‚</li>
            </ul>
          </div>
        </div>
      </section>

      <section class="write-stream-section">
        <div class="write-stream-content">
          <div class="write-stream-intro">
            <div class="write-stream-icon">ğŸ“–</div>
            <div>
              <h3>ä½œç”¨</h3>
              <p>
                <code>fs.createReadStream()</code> æ˜¯ Node.js <code>fs</code>
                æ¨¡å—ä¸­ç”¨äºåˆ›å»ºå¯è¯»æµçš„æ ¸å¿ƒæ–¹æ³•ã€‚å®ƒå…è®¸ä½ ä»¥æµçš„æ–¹å¼é«˜æ•ˆè¯»å–å¤§å‹æ–‡ä»¶ï¼Œé€‚åˆå¤„ç†å¤§æ–‡ä»¶æˆ–éœ€è¦åˆ†å—è¯»å–çš„åœºæ™¯ï¼Œé¿å…ä¸€æ¬¡æ€§åŠ è½½å…¨éƒ¨å†…å®¹åˆ°å†…å­˜ã€‚
              </p>
            </div>
          </div>
          <div class="write-stream-details">
            <h3>å¸¸ç”¨å‚æ•°</h3>
            <ul>
              <li><strong>path</strong>ï¼šè¦è¯»å–çš„æ–‡ä»¶è·¯å¾„ï¼ˆå¿…å¡«ï¼‰</li>
              <li><strong>options</strong>ï¼šå¯é€‰é…ç½®å¯¹è±¡ï¼Œå¦‚
                <code>flags</code>ï¼ˆè¯»å–æ–¹å¼ï¼‰ã€<code>encoding</code>ï¼ˆç¼–ç ï¼‰ã€<code>highWaterMark</code>ï¼ˆæ¯æ¬¡è¯»å–çš„å­—èŠ‚æ•°ï¼‰ã€<code>start</code>/<code>end</code>ï¼ˆè¯»å–åŒºé—´ï¼‰ç­‰
              </li>
            </ul>
          </div>
          <div class="write-stream-example">
            <h3>ç¤ºä¾‹ä»£ç </h3>
            <pre class="code-block">const fs = require('fs');

// åˆ›å»ºä¸€ä¸ªè¯»å–æµï¼Œè¯»å– input.txt
const rs = fs.createReadStream('input.txt', {
  flags: 'r',           // è¯»å–æ–¹å¼ï¼Œ'r'ä¸ºè¯»å–
  encoding: 'utf8',     // è¯»å–ç¼–ç 
  highWaterMark: 8 * 1024, // æ¯æ¬¡è¯»å–8KBï¼ˆå¯é€‰ï¼‰
  start: 0, // è¯»å–å¼€å§‹ä½ç½®
  end: 100, // è¯»å–ç»“æŸä½ç½®
  autoClose: true, // è¯»å–å®Œæˆåè‡ªåŠ¨å…³é—­æ–‡ä»¶
  emitClose: true, // è¯»å–å®Œæˆåè§¦å‘'close'äº‹ä»¶
  autoDestroy: true, // è¯»å–å®Œæˆåè‡ªåŠ¨é”€æ¯æµ
  error: null, // è¯»å–é”™è¯¯
});

rs.on('data', (chunk) => {
  console.log('è¯»å–åˆ°æ•°æ®å—:', chunk);
});

rs.on('end', () => {
  console.log('æ–‡ä»¶è¯»å–å®Œæˆ');
});

rs.on('error', (err) => {
  console.error('è¯»å–å‡ºé”™:', err);
});</pre>
          </div>
          <div class="write-stream-tips">
            <strong>æ€§èƒ½æç¤ºï¼š</strong>
            <ul>
              <li>ä½¿ç”¨æµè¯»å–å¤§æ–‡ä»¶æ—¶ï¼Œå†…å­˜å ç”¨ä½ï¼Œè¯»å–è¿‡ç¨‹ä¸ä¼šé˜»å¡ä¸»çº¿ç¨‹ã€‚</li>
              <li>åˆç†è®¾ç½® <code>highWaterMark</code> å¯ä»¥ä¼˜åŒ–è¯»å–æ€§èƒ½ã€‚</li>
              <li>ç›‘å¬ <code>data</code> äº‹ä»¶åˆ†å—å¤„ç†æ•°æ®ï¼Œç›‘å¬ <code>end</code> äº‹ä»¶ç¡®ä¿è¯»å–å®Œæˆã€‚</li>
              <li>å¤„ç† <code>error</code> äº‹ä»¶ï¼Œé¿å…è¯»å–è¿‡ç¨‹ä¸­å‡ºç°æœªæ•è·å¼‚å¸¸ã€‚</li>
            </ul>
          </div>
        </div>
      </section>

      <!-- INSERT_YOUR_CODE -->
      <section class="write-stream-section">
        <h2 class="section-title">Duplex æµ</h2>
        <div class="duplex-stream-card">
          <div class="write-stream-intro">
            <div class="duplex-icon">ğŸ”€</div>
            <div>
              <h2>ä»€ä¹ˆæ˜¯ Duplex æµï¼Ÿ</h2>
              <p>
                Duplexï¼ˆåŒå·¥ï¼‰æµæ˜¯ Node.js Stream æ¨¡å—ä¸­æ—¢å¯è¯»åˆå¯å†™çš„æµã€‚å®ƒç»“åˆäº† Readable å’Œ Writable çš„ç‰¹æ€§ï¼Œå¸¸ç”¨äºç½‘ç»œé€šä¿¡ã€åŠ å¯†/è§£å¯†ç­‰åœºæ™¯ã€‚
              </p>
              <div class="feature">
                <span class="feature-tag">å¯è¯»å¯å†™</span>
                <span class="feature-tag">æ•°æ®åŒå‘æµåŠ¨</span>
                <span class="feature-tag">è‡ªå®šä¹‰å®ç°</span>
                <span class="feature-tag">é«˜æ•ˆé€šä¿¡</span>
              </div>
            </div>
          </div>

          <div class="duplex-usage">
            <h3>å¸¸ç”¨å‚æ•°</h3>
            <ul>
              <li><strong>readableHighWaterMark</strong>ï¼šå¯è¯»ç¼“å†²åŒºå¤§å°ï¼ˆå­—èŠ‚ï¼‰</li>
              <li><strong>writableHighWaterMark</strong>ï¼šå¯å†™ç¼“å†²åŒºå¤§å°ï¼ˆå­—èŠ‚ï¼‰</li>
              <li><strong>allowHalfOpen</strong>ï¼šæ˜¯å¦å…è®¸ä¸€ç«¯å…³é—­åå¦ä¸€ç«¯ç»§ç»­æ“ä½œï¼ˆé»˜è®¤ <code>true</code>ï¼‰</li>
              <li><strong>read</strong>ï¼šè‡ªå®šä¹‰è¯»å–é€»è¾‘çš„æ–¹æ³•</li>
              <li><strong>write</strong>ï¼šè‡ªå®šä¹‰å†™å…¥é€»è¾‘çš„æ–¹æ³•</li>
            </ul>
          </div>

          <div class="write-stream-example">
            <h3>ç¤ºä¾‹ä»£ç </h3>
            <pre class="code-block">const { Duplex } = require('stream');

class MyDuplex extends Duplex {
  constructor(options) {
    super(options);
    this.data = ['a', 'b', 'c'];
  }

  // å®ç°å¯è¯»ç«¯
  _read(size) {
    const chunk = this.data.shift() || null;
    this.push(chunk);
  }

  // å®ç°å¯å†™ç«¯
  _write(chunk, encoding, callback) {
    console.log('å†™å…¥æ•°æ®:', chunk.toString());
    callback();
  }
}

const duplex = new MyDuplex();

duplex.on('data', (chunk) => {
  console.log('è¯»å–åˆ°:', chunk.toString());
});

duplex.write('hello');
duplex.write('world');
duplex.end();</pre>
          </div>

          <div class="write-stream-tips">
            <strong>æ€§èƒ½æç¤ºï¼š</strong>
            <ul>
              <li>Duplex æµé€‚åˆéœ€è¦åŒå‘æ•°æ®ä¼ è¾“çš„åœºæ™¯ï¼Œå¦‚ socket é€šä¿¡ã€‚</li>
              <li>åˆç†è®¾ç½® <code>readableHighWaterMark</code> å’Œ <code>writableHighWaterMark</code>ï¼Œå¯ä¼˜åŒ–å†…å­˜å’Œååã€‚</li>
              <li>å®ç° <code>_read</code> å’Œ <code>_write</code> æ–¹æ³•æ—¶ï¼Œé¿å…é˜»å¡æ“ä½œï¼Œç¡®ä¿å¼‚æ­¥å›è°ƒã€‚</li>
              <li>ç›‘å¬ <code>error</code> äº‹ä»¶ï¼ŒåŠæ—¶å¤„ç†å¼‚å¸¸ï¼Œä¿è¯æµçš„å¥å£®æ€§ã€‚</li>
            </ul>
          </div>
        </div>
      </section>
      <div class="core-apis-section">
        <h2 class="section-title">æ ¸å¿ƒ API</h2>

        <div class="api-grid">
          <div class="api-card">
            <div class="api-header">
              <code>stream.pipeline()</code>
            </div>
            <div class="api-content">
              <p>è¿æ¥å¤šä¸ªæµå¹¶å¤„ç†é”™è¯¯å’Œæ¸…ç†</p>
              <div class="return-type">æ¨èæ›¿ä»£ <code>pipe()</code></div>
              <pre class="code-block">const { pipeline } = require('stream');
const fs = require('fs');
const zlib = require('zlib');

pipeline(
  fs.createReadStream('input.txt'),
  zlib.createGzip(),
  fs.createWriteStream('input.txt.gz'),
  (err) => {
    if (err) {
      console.error('ç®¡é“å¤„ç†å¤±è´¥:', err);
    } else {
      console.log('ç®¡é“å¤„ç†æˆåŠŸå®Œæˆ');
    }
  }
);</pre>
            </div>
          </div>

          <div class="api-card">
            <div class="api-header">
              <code>stream.finished()</code>
            </div>
            <div class="api-content">
              <p>å½“æµä¸å†å¯è¯»ã€å¯å†™æˆ–å‘ç”Ÿé”™è¯¯æ—¶è§¦å‘</p>
              <div class="return-type">æ¸…ç†èµ„æºçš„å¯é æ–¹å¼</div>
              <pre class="code-block">const { finished } = require('stream');

const rs = fs.createReadStream('file.txt');

finished(rs, (err) => {
  if (err) {
    console.error('æµå‘ç”Ÿé”™è¯¯:', err);
  } else {
    console.log('æµå·²ç»“æŸ');
  }
});</pre>
            </div>
          </div>

          <div class="api-card">
            <div class="api-header">
              <code>stream.Readable.from()</code>
            </div>
            <div class="api-content">
              <p>ä»è¿­ä»£å™¨åˆ›å»ºå¯è¯»æµ</p>
              <div class="return-type">ç®€åŒ–å¯è¯»æµåˆ›å»º</div>
              <pre class="code-block">const { Readable } = require('stream');

// ä»æ•°ç»„åˆ›å»ºå¯è¯»æµ
const data = ['ä¸€', 'äºŒ', 'ä¸‰'];
const readable = Readable.from(data);

readable.on('data', (chunk) => {
  console.log(chunk); // è¾“å‡º: ä¸€, äºŒ, ä¸‰
});</pre>
            </div>
          </div>

          <div class="api-card">
            <div class="api-header">
              <code>èƒŒå‹å¤„ç†</code>
            </div>
            <div class="api-content">
              <p>ç®¡ç†è¯»å†™é€Ÿåº¦å·®å¼‚çš„æœºåˆ¶</p>
              <div class="return-type">é˜²æ­¢å†…å­˜æº¢å‡º</div>
              <pre class="code-block">function write(data, encoding, callback) {
  // å¦‚æœå†™å…¥é˜Ÿåˆ—å·²æ»¡ï¼Œè¿”å›false
  if (!this.write(data, encoding)) {
    // ç­‰å¾…'drain'äº‹ä»¶å†ç»§ç»­å†™å…¥
    this.once('drain', callback);
  } else {
    process.nextTick(callback);
  }
}

writable.on('drain', () => {
  console.log('ç¼“å­˜å·²æ¸…ç©ºï¼Œå¯ä»¥ç»§ç»­å†™å…¥');
});</pre>
            </div>
          </div>
        </div>
      </div>

      <div class="use-cases-section">
        <h2 class="section-title">åº”ç”¨åœºæ™¯</h2>

        <div class="case-cards">
          <div class="case-card">
            <div class="case-icon">ğŸ“</div>
            <h3>å¤§æ–‡ä»¶å¤„ç†</h3>
            <p>ä½¿ç”¨æµè¯»å–ã€å¤„ç†å¹¶å†™å…¥å¤§æ–‡ä»¶ï¼Œé¿å…å†…å­˜æº¢å‡º</p>
            <pre class="code-block">fs.createReadStream('input.csv')
  .pipe(csvParser())
  .pipe(dataFilter)
  .pipe(fs.createWriteStream('output.csv'));</pre>
          </div>

          <div class="case-card">
            <div class="case-icon">ğŸŒ</div>
            <h3>HTTPè¯·æ±‚/å“åº”</h3>
            <p>é«˜æ•ˆå¤„ç†HTTPè¯·æ±‚ä½“å’Œå“åº”æ•°æ®</p>
            <pre class="code-block">// æœåŠ¡å™¨ç«¯
http.createServer((req, res) => {
  req.pipe(transformStream).pipe(res);
});

// å®¢æˆ·ç«¯
fetch(url)
  .then(response => response.body.pipe(fs.createWriteStream('file')));</pre>
          </div>

          <div class="case-card">
            <div class="case-icon">ğŸ”’</div>
            <h3>æ•°æ®åŠ å¯†/å‹ç¼©</h3>
            <p>æµå¼åŠ å¯†/å‹ç¼©æ•°æ®ï¼Œé™ä½å†…å­˜æ¶ˆè€—</p>
            <pre class="code-block">// å‹ç¼©
readStream.pipe(zlib.createGzip()).pipe(writeStream);

// åŠ å¯†
readStream
  .pipe(crypto.createCipheriv('aes-256-cbc', key, iv))
  .pipe(writeStream);</pre>
          </div>

          <div class="case-card">
            <div class="case-icon">ğŸ“Š</div>
            <h3>å®æ—¶æ•°æ®å¤„ç†</h3>
            <p>å¤„ç†å®æ—¶æ—¥å¿—ã€ä¼ æ„Ÿå™¨æ•°æ®æˆ–æ¶ˆæ¯æµ</p>
            <pre class="code-block">sensorStream
  .pipe(parseData)
  .pipe(filterInvalid)
  .pipe(aggregate)
  .on('data', (data) => {
    updateDashboard(data);
  });</pre>
          </div>
        </div>
      </div>

      <div class="best-practices">
        <h2 class="section-title">æœ€ä½³å®è·µ</h2>
        <div class="practices-grid">
          <div class="practice">
            <div class="number">1</div>
            <p>æ€»æ˜¯å¤„ç†é”™è¯¯äº‹ä»¶ï¼Œé¿å…æœªæ•è·å¼‚å¸¸</p>
          </div>
          <div class="practice">
            <div class="number">2</div>
            <p>ä½¿ç”¨ <code>pipeline()</code> æ›¿ä»£ <code>pipe()</code> å¤„ç†é”™è¯¯å’Œæ¸…ç†</p>
          </div>
          <div class="practice">
            <div class="number">3</div>
            <p>å®ç°èƒŒå‹å¤„ç†ï¼Œé˜²æ­¢å†…å­˜æº¢å‡º</p>
          </div>
          <div class="practice">
            <div class="number">4</div>
            <p>ä½¿ç”¨è½¬æ¢æµå°è£…æ•°æ®å¤„ç†é€»è¾‘</p>
          </div>
          <div class="practice">
            <div class="number">5</div>
            <p>å®Œæˆåé”€æ¯æµé‡Šæ”¾èµ„æº</p>
          </div>
          <div class="practice">
            <div class="number">6</div>
            <p>é¿å…åœ¨æµåŠ¨æ¨¡å¼ä¸‹ä¸¢å¤±æ•°æ®</p>
          </div>
        </div>
      </div>
    </div>

    <footer class="footer">
      <p>Node.js æµæ˜¯å¤„ç†å¤§å‹æ•°æ®é›†çš„å¼ºå¤§å·¥å…·ï¼ŒæŒæ¡æµçš„ä½¿ç”¨å¯ä»¥æ˜¾è‘—æé«˜åº”ç”¨æ€§èƒ½å’Œèµ„æºåˆ©ç”¨ç‡ã€‚</p>
    </footer>
  </div>
</template>

<script setup lang="ts">
import { ref } from 'vue';

// ç¤ºä¾‹æ•°æ®
const streamData = ref({
  types: [
    { name: 'å¯è¯»æµ', usage: 'æ•°æ®æº', examples: 'æ–‡ä»¶è¯»å–ã€HTTPè¯·æ±‚' },
    { name: 'å¯å†™æµ', usage: 'æ•°æ®ç›®æ ‡', examples: 'æ–‡ä»¶å†™å…¥ã€HTTPå“åº”' },
    { name: 'åŒå·¥æµ', usage: 'åŒå‘é€šä¿¡', examples: 'TCPå¥—æ¥å­—' },
    { name: 'è½¬æ¢æµ', usage: 'æ•°æ®è½¬æ¢', examples: 'å‹ç¼©ã€åŠ å¯†' }
  ]
});
</script>

<style lang="less" scoped>
@import url('https://fonts.googleapis.com/css2?family=Noto+Sans+SC:wght@300;400;500;700&family=JetBrains+Mono:wght@400;500&display=swap');

.stream-container {
  max-width: 1200px;
  margin: 0 auto;
  padding: 2rem;
  font-family: 'Noto Sans SC', sans-serif;
  color: #2c3e50;
  background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
  border-radius: 12px;
  box-shadow: 0 10px 30px rgba(0, 0, 0, 0.08);

  .header {
    text-align: center;
    margin-bottom: 2.5rem;
    padding-bottom: 1.5rem;
    border-bottom: 1px solid #eaeaea;

    h1 {
      font-size: 2.5rem;
      font-weight: 700;
      margin-bottom: 0.5rem;
      background: linear-gradient(90deg, #3498db, #2c3e50);
      -webkit-background-clip: text;
      background-clip: text;
      color: transparent;
    }

    .subtitle {
      font-size: 1.2rem;
      color: #7f8c8d;
      margin-top: 0;
    }
  }

  .intro-section {
    margin-bottom: 3rem;

    .intro-card {
      background: white;
      border-radius: 10px;
      padding: 1.8rem;
      box-shadow: 0 8px 20px rgba(0, 0, 0, 0.08);

      .definition {
        display: flex;
        gap: 1.5rem;
        margin-bottom: 2rem;

        .stream-icon {
          font-size: 3rem;
          width: 80px;
          height: 80px;
          background: #e3f2fd;
          border-radius: 50%;
          display: flex;
          align-items: center;
          justify-content: center;
          flex-shrink: 0;
          color: #3498db;
        }

        h2 {
          margin-top: 0;
          color: #2c3e50;
        }

        p {
          font-size: 1.1rem;
          line-height: 1.7;
          margin-bottom: 1rem;
        }

        .feature {
          display: flex;
          flex-wrap: wrap;
          gap: 0.5rem;

          .feature-tag {
            background: #e3f2fd;
            color: #3498db;
            padding: 0.3rem 0.8rem;
            border-radius: 20px;
            font-size: 0.9rem;
            font-weight: 500;
          }
        }
      }

      .installation {
        h3 {
          margin-top: 0;
          color: #3498db;
          padding-bottom: 0.5rem;
          border-bottom: 2px solid #f0f0f0;
          margin-bottom: 1.2rem;
        }

        .concepts {
          display: grid;
          grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
          gap: 1.2rem;

          .concept {
            display: flex;
            gap: 1rem;
            align-items: center;
            background: #f8f9fa;
            border-radius: 8px;
            padding: 1rem;

            .concept-icon {
              font-size: 1.8rem;
              width: 50px;
              height: 50px;
              background: #e3f2fd;
              border-radius: 50%;
              display: flex;
              align-items: center;
              justify-content: center;
              flex-shrink: 0;
            }

            h4 {
              margin: 0 0 0.3rem 0;
              color: #2c3e50;
            }

            p {
              margin: 0;
              font-size: 0.95rem;
              color: #7f8c8d;
            }
          }
        }
      }
    }
  }

  .stream-types-section {
    margin-bottom: 3rem;

    .section-title {
      font-size: 1.8rem;
      color: #3498db;
      margin-top: 0;
      margin-bottom: 1.5rem;
      padding-bottom: 0.5rem;
      border-bottom: 2px solid #f0f0f0;
      text-align: center;
    }

    .types-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
      gap: 1.5rem;

      .type-card {
        background: white;
        border-radius: 10px;
        overflow: hidden;
        box-shadow: 0 8px 20px rgba(0, 0, 0, 0.08);
        transition: transform 0.3s ease;

        &:hover {
          transform: translateY(-5px);
        }

        .type-header {
          display: flex;
          justify-content: space-between;
          align-items: center;
          padding: 1.2rem 1.5rem;
          color: white;

          h3 {
            margin: 0;
            font-size: 1.5rem;
          }

          .type-icon {
            font-size: 2rem;
          }
        }

        .type-content {
          padding: 1.5rem;

          p {
            font-size: 1.05rem;
            line-height: 1.6;
            color: #555;
            margin-top: 0;
            margin-bottom: 1rem;
          }

          ul {
            padding-left: 1.5rem;
            margin: 0 0 1.5rem 0;

            li {
              margin-bottom: 0.5rem;
              line-height: 1.6;

              strong {
                color: #2c3e50;
              }
            }
          }

          .example {
            .code-block {
              background: #2c3e50;
              color: #f8f9fa;
              border-radius: 6px;
              padding: 1rem;
              font-family: 'JetBrains Mono', monospace;
              font-size: 0.85rem;
              overflow-x: auto;
            }
          }
        }
      }

      .readable {
        .type-header {
          background: #3498db;
        }

        border-top: 4px solid #3498db;
      }

      .writable {
        .type-header {
          background: #e67e22;
        }

        border-top: 4px solid #e67e22;
      }

      .duplex {
        .type-header {
          background: #9b59b6;
        }

        border-top: 4px solid #9b59b6;
      }

      .transform {
        .type-header {
          background: #2ecc71;
        }

        border-top: 4px solid #2ecc71;
      }
    }
  }

  .core-apis-section {
    margin-bottom: 3rem;

    .section-title {
      font-size: 1.8rem;
      color: #3498db;
      margin-top: 0;
      margin-bottom: 1.5rem;
      padding-bottom: 0.5rem;
      border-bottom: 2px solid #f0f0f0;
      text-align: center;
    }

    .api-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
      gap: 1.5rem;
    }

    .api-card {
      background: white;
      border-radius: 10px;
      overflow: hidden;
      box-shadow: 0 8px 20px rgba(0, 0, 0, 0.08);
      transition: transform 0.3s ease;
      border-top: 4px solid #3498db;

      &:hover {
        transform: translateY(-5px);
      }

      .api-header {
        background: #f8f9fa;
        padding: 1.2rem;
        font-family: 'JetBrains Mono', monospace;
        font-size: 1.1rem;
        font-weight: 500;
        color: #2c3e50;
        border-bottom: 1px solid #eaeaea;
      }

      .api-content {
        padding: 1.5rem;

        p {
          font-size: 1.05rem;
          line-height: 1.6;
          color: #555;
          margin-top: 0;
          margin-bottom: 0.8rem;
        }

        .return-type {
          font-size: 0.95rem;
          color: #7f8c8d;
          margin-bottom: 1rem;
          font-style: italic;
        }

        .code-block {
          background: #2c3e50;
          color: #f8f9fa;
          border-radius: 6px;
          padding: 1rem;
          font-family: 'JetBrains Mono', monospace;
          font-size: 0.85rem;
          overflow-x: auto;
        }
      }
    }
  }

  .use-cases-section {
    margin-bottom: 3rem;

    .section-title {
      font-size: 1.8rem;
      color: #3498db;
      margin-top: 0;
      margin-bottom: 1.5rem;
      padding-bottom: 0.5rem;
      border-bottom: 2px solid #f0f0f0;
      text-align: center;
    }

    .case-cards {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      gap: 1.5rem;

      .case-card {
        background: white;
        border-radius: 10px;
        padding: 1.8rem;
        box-shadow: 0 8px 20px rgba(0, 0, 0, 0.08);
        transition: transform 0.3s ease;
        border-top: 4px solid #3498db;

        &:hover {
          transform: translateY(-5px);
        }

        .case-icon {
          font-size: 2.5rem;
          margin-bottom: 1.2rem;
          color: #3498db;
        }

        h3 {
          margin-top: 0;
          margin-bottom: 1rem;
          color: #2c3e50;
        }

        p {
          font-size: 1.05rem;
          line-height: 1.6;
          color: #555;
          margin-bottom: 1rem;
        }

        .code-block {
          background: #f8f9fa;
          border: 1px solid #eaeaea;
          border-radius: 6px;
          padding: 0.8rem;
          font-family: 'JetBrains Mono', monospace;
          font-size: 0.85rem;
          overflow-x: auto;
        }
      }
    }
  }

  .best-practices {
    .section-title {
      font-size: 1.8rem;
      color: #3498db;
      margin-top: 0;
      margin-bottom: 1.5rem;
      padding-bottom: 0.5rem;
      border-bottom: 2px solid #f0f0f0;
      text-align: center;
    }

    .practices-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      gap: 1.5rem;

      .practice {
        background: white;
        border-radius: 8px;
        padding: 1.5rem;
        display: flex;
        align-items: center;
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);

        .number {
          width: 36px;
          height: 36px;
          background: #3498db;
          color: white;
          border-radius: 50%;
          display: flex;
          align-items: center;
          justify-content: center;
          font-weight: bold;
          font-size: 1.1rem;
          margin-right: 1.2rem;
          flex-shrink: 0;
        }

        p {
          margin: 0;
          font-size: 1.05rem;
          line-height: 1.5;

          code {
            background: #e3f2fd;
            padding: 0.2rem 0.4rem;
            border-radius: 4px;
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.9rem;
          }
        }
      }
    }
  }

  .footer {
    margin-top: 3rem;
    text-align: center;
    padding: 1.5rem;
    font-size: 1.05rem;
    color: #7f8c8d;
    border-top: 1px solid #eaeaea;
    line-height: 1.7;
    background: white;
    border-radius: 8px;
  }
}

@media (max-width: 768px) {
  .stream-container {
    padding: 1rem;

    .header h1 {
      font-size: 2rem;
    }
  }
}

.write-stream-section {
  background: #f8fafc;
  border-radius: 12px;
  padding: 32px 24px 24px 24px;
  margin: 32px 0 24px 0;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.04);
}

.write-stream-section .section-title {
  font-size: 1.5rem;
  font-weight: bold;
  margin-bottom: 18px;
  color: #1a3a5e;
  letter-spacing: 1px;
}

.write-stream-content {
  display: flex;
  flex-direction: column;
  gap: 18px;
}

.write-stream-intro {
  display: flex;
  align-items: flex-start;
  gap: 16px;
  background: #e6f7ff;
  border-radius: 8px;
  padding: 16px;
}

.write-stream-icon {
  font-size: 2.2rem;
  margin-right: 8px;
  color: #409eff;
}

.write-stream-details ul {
  margin: 0 0 0 18px;
  padding: 0;
  color: #444;
}

.write-stream-details li {
  margin-bottom: 4px;
  font-size: 1rem;
}

.write-stream-example {
  background: #f4f4f4;
  border-radius: 8px;
  padding: 14px 16px;
  margin-top: 6px;
}

.write-stream-example h3 {
  margin-top: 0;
  font-size: 1.1rem;
  color: #2d6a4f;
}

.write-stream-tips {
  background: #fffbe6;
  border-left: 4px solid #ffd666;
  border-radius: 6px;
  padding: 10px 16px;
  font-size: 0.98rem;
  color: #8d6d1a;
}

.write-stream-tips ul {
  margin: 6px 0 0 18px;
  padding: 0;
}
</style>
