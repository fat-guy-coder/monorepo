<template>
  <div class="observer-pattern-page">
    <header class="header">
      <h1>å‘å¸ƒè®¢é˜…æ¨¡å¼åŸºæœ¬ä»‹ç»</h1>
      <p class="subtitle">è§£è€¦ç³»ç»Ÿç»„ä»¶ï¼Œå®ç°é«˜æ•ˆäº‹ä»¶é€šä¿¡</p>
      <div class="pattern-animation">
        <div class="publisher">å‘å¸ƒè€…</div>
        <div class="event-bus">
          <div class="event">äº‹ä»¶æ€»çº¿</div>
          <div class="event-flow">
            <div v-for="n in 5" :key="n" class="event-dot" :style="eventAnimation(n)"></div>
          </div>
        </div>
        <div class="subscribers">
          <div v-for="n in 3" :key="n" class="subscriber" :style="subscriberAnimation(n)">
            è®¢é˜…è€…{{ n }}
          </div>
        </div>
      </div>
    </header>

    <div class="content-container">
      <!-- æ¦‚å¿µè§£é‡Š -->
      <section class="concept-section card">
        <h2 class="section-title">
          <span class="icon">ğŸ“š</span> åŸºæœ¬æ¦‚å¿µ
        </h2>
        <div class="definition">
          <p><strong>å‘å¸ƒè®¢é˜…æ¨¡å¼</strong>æ˜¯ä¸€ç§æ¶ˆæ¯ä¼ é€’èŒƒå¼ï¼Œå…¶ä¸­æ¶ˆæ¯çš„å‘é€è€…ï¼ˆå‘å¸ƒè€…ï¼‰ä¸ç›´æ¥å°†æ¶ˆæ¯å‘é€ç»™ç‰¹å®šçš„æ¥æ”¶è€…ï¼ˆè®¢é˜…è€…ï¼‰ï¼Œè€Œæ˜¯é€šè¿‡ä¸€ä¸ªä¸­é—´ä»¶ï¼ˆé€šå¸¸ç§°ä¸ºäº‹ä»¶æ€»çº¿æˆ–æ¶ˆæ¯ä»£ç†ï¼‰æ¥ä¼ é€’æ¶ˆæ¯ã€‚</p>
        </div>
        <div class="core-principles">
          <h3>æ ¸å¿ƒåŸåˆ™</h3>
          <ul>
            <li>
              <div class="principle-card">
                <div class="principle-icon">ğŸ”Œ</div>
                <div>
                  <strong>è§£è€¦</strong> - å‘å¸ƒè€…å’Œè®¢é˜…è€…ä¸éœ€è¦çŸ¥é“å½¼æ­¤çš„å­˜åœ¨
                </div>
              </div>
            </li>
            <li>
              <div class="principle-card">
                <div class="principle-icon">ğŸ”„</div>
                <div>
                  <strong>å¼‚æ­¥é€šä¿¡</strong> - äº‹ä»¶å¯ä»¥å¼‚æ­¥å¤„ç†
                </div>
              </div>
            </li>
            <li>
              <div class="principle-card">
                <div class="principle-icon">ğŸ“¡</div>
                <div>
                  <strong>ä¸€å¯¹å¤šä¼ æ’­</strong> - ä¸€ä¸ªäº‹ä»¶å¯ä»¥é€šçŸ¥å¤šä¸ªè®¢é˜…è€…
                </div>
              </div>
            </li>
          </ul>
        </div>
      </section>

      <!-- è®¾è®¡æ€è·¯ -->
      <section class="design-section card">
        <h2 class="section-title">
          <span class="icon">ğŸ§©</span> è®¾è®¡æ€è·¯
        </h2>

        <div class="architecture-diagram">
          <div class="diagram-title">å‘å¸ƒè®¢é˜…æ¨¡å¼æ¶æ„å›¾</div>
          <div class="diagram-content">
            <div class="publisher-box">
              <div>å‘å¸ƒè€…</div>
              <div class="publish-action">publish(event, data)</div>
            </div>

            <div class="event-channel">
              <div class="event-bus-core">
                <div class="event-registration">
                  <div class="event-title">äº‹ä»¶æ€»çº¿</div>
                  <div class="event-list">
                    <div v-for="(event, index) in events" :key="index" class="event-item">
                      <span class="event-name">{{ event.name }}</span>
                      <span class="subscriber-count">{{ event.subscribers }} è®¢é˜…è€…</span>
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <div class="subscriber-boxes">
              <div class="subscriber-box" v-for="n in 3" :key="n">
                <div>è®¢é˜…è€…{{ n }}</div>
                <div class="subscribe-action">subscribe(event, callback)</div>
              </div>
            </div>
          </div>

          <div class="data-flow">
            <div class="arrow publish-arrow">å‘å¸ƒäº‹ä»¶ â†’</div>
            <div class="arrow subscribe-arrow">â† è®¢é˜…äº‹ä»¶</div>
          </div>
        </div>

        <div class="implementation-steps">
          <h3>å®ç°æ­¥éª¤</h3>
          <ol>
            <li v-for="(step, index) in implementationSteps" :key="index">
              <div class="step-card">
                <div class="step-number">{{ index + 1 }}</div>
                <div class="step-content">
                  <strong>{{ step.title }}</strong> - {{ step.description }}
                </div>
              </div>
            </li>
          </ol>
        </div>
      </section>

      <!-- ä½¿ç”¨åœºæ™¯ -->
      <section class="use-cases-section card">
        <h2 class="section-title">
          <span class="icon">ğŸš€</span> ä½¿ç”¨åœºæ™¯
        </h2>

        <div class="use-cases-grid">
          <div v-for="(useCase, index) in useCases" :key="index" class="use-case-card">
            <div class="use-case-icon">{{ useCase.icon }}</div>
            <div class="use-case-content">
              <h3>{{ useCase.title }}</h3>
              <p>{{ useCase.description }}</p>
              <div class="example">{{ useCase.example }}</div>
            </div>
          </div>
        </div>
      </section>

      <!-- ä¼˜ç¼ºç‚¹åˆ†æ -->
      <section class="pros-cons-section card">
        <h2 class="section-title">
          <span class="icon">âš–ï¸</span> ä¼˜ç¼ºç‚¹åˆ†æ
        </h2>

        <div class="comparison-container">
          <div class="pros-section">
            <h3 class="pros-header">âœ… ä¼˜ç‚¹</h3>
            <ul>
              <li v-for="(pro, index) in pros" :key="index" class="pro">
                <div class="pro-content">{{ pro }}</div>
              </li>
            </ul>
          </div>

          <div class="cons-section">
            <h3 class="cons-header">âŒ ç¼ºç‚¹</h3>
            <ul>
              <li v-for="(con, index) in cons" :key="index" class="con">
                <div class="con-content">{{ con }}</div>
              </li>
            </ul>
          </div>
        </div>
      </section>

      <!-- ä»£ç ç¤ºä¾‹ -->
      <section class="code-section card">
        <h2 class="section-title">
          <span class="icon">ğŸ’»</span> ä»£ç å®ç°ç¤ºä¾‹
        </h2>

        <div class="code-example">
          <pre class="code-block">// ç®€å•äº‹ä»¶æ€»çº¿å®ç°
class EventBus {
  constructor() {
    this.events = {};
  }

  // è®¢é˜…äº‹ä»¶
  subscribe(event, callback) {
    if (!this.events[event]) {
      this.events[event] = [];
    }
    this.events[event].push(callback);
  }

  // å‘å¸ƒäº‹ä»¶
  publish(event, data) {
    if (!this.events[event]) return;
    this.events[event].forEach(callback => callback(data));
  }

  // å–æ¶ˆè®¢é˜…
  unsubscribe(event, callback) {
    if (!this.events[event]) return;
    this.events[event] = this.events[event].filter(cb => cb !== callback);
  }
}

// ä½¿ç”¨ç¤ºä¾‹
const bus = new EventBus();

// è®¢é˜…è€…
bus.subscribe('message', (data) => {
  console.log(`æ”¶åˆ°æ¶ˆæ¯: ${data}`);
});

// å‘å¸ƒè€…
bus.publish('message', 'ä½ å¥½ï¼Œå‘å¸ƒè®¢é˜…æ¨¡å¼ï¼');</pre>
        </div>
      </section>

      <!-- INSERT_YOUR_CODE -->
      <!-- å‘å¸ƒè®¢é˜…æ¨¡å¼ vs è§‚å¯Ÿè€…æ¨¡å¼ åŒºåˆ«ä»‹ç» -->
      <section class="compare-section card">
        <h2 class="section-title">
          <span class="icon">ğŸ”</span> å‘å¸ƒè®¢é˜…æ¨¡å¼ vs è§‚å¯Ÿè€…æ¨¡å¼
        </h2>
        <div class="compare-content">
          <div class="compare-table">
            <table>
              <thead>
                <tr>
                  <th>å¯¹æ¯”é¡¹</th>
                  <th>å‘å¸ƒè®¢é˜…æ¨¡å¼</th>
                  <th>è§‚å¯Ÿè€…æ¨¡å¼</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td>ä¸­ä»‹è€…</td>
                  <td>æœ‰ç‹¬ç«‹çš„äº‹ä»¶ä¸­å¿ƒï¼ˆäº‹ä»¶æ€»çº¿ï¼‰ä½œä¸ºä¸­ä»‹</td>
                  <td>æ— ä¸­ä»‹ï¼Œä¸»é¢˜ä¸è§‚å¯Ÿè€…ç›´æ¥å…³è”</td>
                </tr>
                <tr>
                  <td>è€¦åˆåº¦</td>
                  <td>å‘å¸ƒè€…ä¸è®¢é˜…è€…å®Œå…¨è§£è€¦</td>
                  <td>ä¸»é¢˜ä¸è§‚å¯Ÿè€…ä¹‹é—´å­˜åœ¨ä¾èµ–</td>
                </tr>
                <tr>
                  <td>é€šä¿¡æ–¹å¼</td>
                  <td>é€šè¿‡äº‹ä»¶åè¿›è¡Œå¹¿æ’­ï¼Œè®¢é˜…è€…è‡ªè¡Œé€‰æ‹©æ„Ÿå…´è¶£çš„äº‹ä»¶</td>
                  <td>ä¸»é¢˜ä¸»åŠ¨é€šçŸ¥æ‰€æœ‰æ³¨å†Œçš„è§‚å¯Ÿè€…</td>
                </tr>
                <tr>
                  <td>åº”ç”¨åœºæ™¯</td>
                  <td>å¤æ‚ç³»ç»Ÿã€è·¨æ¨¡å—/è·¨æœåŠ¡é€šä¿¡</td>
                  <td>å¯¹è±¡é—´ä¸€å¯¹å¤šä¾èµ–ã€çŠ¶æ€åŒæ­¥</td>
                </tr>
                <tr>
                  <td>å…¸å‹å®ç°</td>
                  <td>EventBusã€æ¶ˆæ¯é˜Ÿåˆ—ã€Vueäº‹ä»¶æœºåˆ¶</td>
                  <td>Vueå“åº”å¼ã€DOMäº‹ä»¶ç›‘å¬</td>
                </tr>
              </tbody>
            </table>
          </div>
          <div class="compare-summary">
            <p>
              <strong>æ€»ç»“ï¼š</strong>å‘å¸ƒè®¢é˜…æ¨¡å¼é€šè¿‡å¼•å…¥äº‹ä»¶ä¸­å¿ƒå®ç°äº†æ›´å½»åº•çš„è§£è€¦ï¼Œé€‚ç”¨äºæ›´å¤æ‚çš„åœºæ™¯ï¼›è€Œè§‚å¯Ÿè€…æ¨¡å¼ç»“æ„æ›´ç®€å•ï¼Œé€‚åˆå¯¹è±¡é—´ç›´æ¥ä¾èµ–çš„åœºæ™¯ã€‚
            </p>
          </div>
        </div>
      </section>
    </div>

    <footer class="footer">
      <p>Â© 2023 è®¾è®¡æ¨¡å¼åŸºæœ¬ä»‹ç» | å‘å¸ƒè®¢é˜…æ¨¡å¼æ˜¯æ„å»ºæ¾æ•£è€¦åˆã€å¯æ‰©å±•ç³»ç»Ÿçš„å¼ºå¤§å·¥å…·</p>
    </footer>
  </div>
</template>

<script setup lang="ts">
import { ref, onMounted, onUnmounted } from 'vue';

// æ¨¡æ‹Ÿæ•°æ®
const events = ref([
  { name: 'user_created', subscribers: 3 },
  { name: 'order_updated', subscribers: 2 },
  { name: 'payment_received', subscribers: 4 },
]);

const implementationSteps = ref([
  { title: 'åˆ›å»ºäº‹ä»¶æ€»çº¿', description: 'å®ç°ä¸€ä¸ªé›†ä¸­å¤„ç†äº‹ä»¶æ³¨å†Œå’Œåˆ†å‘çš„ä¸­å¿ƒ' },
  { title: 'è®¢é˜…äº‹ä»¶', description: 'ç»„ä»¶å‘äº‹ä»¶æ€»çº¿æ³¨å†Œå¯¹ç‰¹å®šäº‹ä»¶çš„å…´è¶£' },
  { title: 'å‘å¸ƒäº‹ä»¶', description: 'å½“ä¸šåŠ¡åŠ¨ä½œå‘ç”Ÿæ—¶å‘å¸ƒäº‹ä»¶åˆ°äº‹ä»¶æ€»çº¿' },
  { title: 'äº‹ä»¶åˆ†å‘', description: 'äº‹ä»¶æ€»çº¿å°†äº‹ä»¶åˆ†å‘ç»™æ‰€æœ‰è®¢é˜…è¯¥äº‹ä»¶çš„ç»„ä»¶' },
]);

const useCases = ref([
  {
    icon: 'ğŸŒ',
    title: 'å¾®æœåŠ¡é€šä¿¡',
    description: 'åœ¨åˆ†å¸ƒå¼ç³»ç»Ÿä¸­å®ç°æœåŠ¡é—´çš„è§£è€¦é€šä¿¡',
    example: 'è®¢å•æœåŠ¡å‘å¸ƒè®¢å•åˆ›å»ºäº‹ä»¶ï¼Œåº“å­˜æœåŠ¡å’Œé€šçŸ¥æœåŠ¡è®¢é˜…è¯¥äº‹ä»¶'
  },
  {
    icon: 'ğŸ–¥ï¸',
    title: 'å‰ç«¯ç»„ä»¶é€šä¿¡',
    description: 'è·¨ç»„ä»¶é€šä¿¡ï¼Œå°¤å…¶æ˜¯éçˆ¶å­å…³ç³»çš„ç»„ä»¶',
    example: 'Vue Event Busï¼ŒReact Context + useReducer'
  },
  {
    icon: 'ğŸ“±',
    title: 'å®æ—¶åº”ç”¨',
    description: 'éœ€è¦å®æ—¶æ›´æ–°çš„åº”ç”¨å¦‚èŠå¤©ã€æ¨é€é€šçŸ¥',
    example: 'æ¶ˆæ¯å‘å¸ƒåå®æ—¶æ¨é€ç»™æ‰€æœ‰åœ¨çº¿ç”¨æˆ·'
  },
  {
    icon: 'ğŸ”„',
    title: 'çŠ¶æ€ç®¡ç†',
    description: 'çŠ¶æ€å˜åŒ–æ—¶é€šçŸ¥æ‰€æœ‰ä¾èµ–ç»„ä»¶',
    example: 'Vuex, Reduxçš„æ ¸å¿ƒé€šä¿¡æœºåˆ¶'
  },
]);

const pros = ref([
  'ç»„ä»¶é—´é«˜åº¦è§£è€¦ï¼Œå¢å¼ºç³»ç»Ÿå¯ç»´æŠ¤æ€§',
  'æ”¯æŒä¸€å¯¹å¤šé€šä¿¡ï¼Œç®€åŒ–å¤æ‚äº¤äº’åœºæ™¯',
  'å‘å¸ƒè€…å’Œè®¢é˜…è€…ç”Ÿå‘½å‘¨æœŸå¯ä»¥ç‹¬ç«‹ç®¡ç†',
  'æ˜“äºæ‰©å±•ï¼Œæ–°è®¢é˜…è€…æ— éœ€ä¿®æ”¹å‘å¸ƒè€…ä»£ç ',
  'æ”¯æŒå¼‚æ­¥å¤„ç†ï¼Œæé«˜ç³»ç»Ÿå“åº”æ€§èƒ½'
]);

const cons = ref([
  'è¿‡åº¦ä½¿ç”¨å¯èƒ½å¯¼è‡´äº‹ä»¶æµéš¾ä»¥è¿½è¸ª',
  'è°ƒè¯•ç›¸å¯¹å›°éš¾ï¼Œäº‹ä»¶è§¦å‘æºä¸æ˜“å®šä½',
  'è®¢é˜…è€…æ‰§è¡Œé¡ºåºä¸å¯æ§å¯èƒ½å¯¼è‡´ç«æ€æ¡ä»¶',
  'ä¸å½“ä½¿ç”¨å¯èƒ½é€ æˆå†…å­˜æ³„æ¼ï¼ˆæœªå–æ¶ˆè®¢é˜…ï¼‰',
  'äº‹ä»¶å‘½åå†²çªå¯èƒ½å¯¼è‡´æ„å¤–è¡Œä¸º'
]);

// åŠ¨ç”»é€»è¾‘
let animationFrame: number;
const eventDots = ref([0, 0, 0, 0, 0]);

onMounted(() => {
  animateEvents();
});

onUnmounted(() => {
  cancelAnimationFrame(animationFrame);
});

function animateEvents() {
  eventDots.value = eventDots.value.map((position, index) => {
    return (position + 0.005 + index * 0.001) % 1;
  });
  animationFrame = requestAnimationFrame(animateEvents);
}

function eventAnimation(index: number) {
  const position = eventDots.value[index - 1];
  return {
    left: `${position * 100}%`,
    opacity: `${1 - Math.abs(position - 0.5) * 2}`,
    animationDelay: `${index * 0.2}s`
  };
}

function subscriberAnimation(index: number) {
  return {
    animationDelay: `${index * 0.3}s`
  };
}
</script>

<style lang="less" scoped>
@primary-color: #3498db;
@secondary-color: #2ecc71;
@accent-color: #e74c3c;
@background-color: #f8f9fa;
@card-bg: #ffffff;
@text-color: #2c3e50;
@border-color: #e0e0e0;
@shadow-color: rgba(0, 0, 0, 0.1);
@success-color: #27ae60;
@warning-color: #f39c12;

.observer-pattern-page {
  font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
  max-width: 1200px;
  margin: 0 auto;
  padding: 20px;
  color: @text-color;
  background-color: @background-color;
  min-height: 100vh;
}

.header {
  text-align: center;
  margin-bottom: 40px;
  padding: 30px 0;
  border-bottom: 1px solid @border-color;

  h1 {
    font-size: 2.8rem;
    margin: 0;
    color: @primary-color;
    position: relative;
    padding-bottom: 15px;

    &::after {
      content: '';
      position: absolute;
      bottom: 0;
      left: 50%;
      transform: translateX(-50%);
      width: 100px;
      height: 5px;
      background: linear-gradient(90deg, @primary-color, @secondary-color);
      border-radius: 3px;
    }
  }

  .subtitle {
    font-size: 1.4rem;
    color: lighten(@text-color, 20%);
    margin-top: 15px;
    font-weight: 300;
  }
}

.pattern-animation {
  display: flex;
  justify-content: center;
  align-items: center;
  margin: 40px auto;
  max-width: 800px;
  height: 200px;
  position: relative;

  .publisher,
  .subscriber,
  .event {
    padding: 15px 25px;
    border-radius: 8px;
    font-weight: bold;
    box-shadow: 0 4px 15px @shadow-color;
    position: relative;
    z-index: 2;
  }

  .publisher {
    background: linear-gradient(135deg, @primary-color, #2980b9);
    color: white;
    animation: pulse 2s infinite;
  }

  .event-bus {
    margin: 0 50px;
    position: relative;

    .event {
      background: linear-gradient(135deg, @secondary-color, #27ae60);
      color: white;
    }

    .event-flow {
      position: absolute;
      top: 60px;
      width: 100%;
      height: 5px;
      background: @border-color;
      border-radius: 5px;
      overflow: hidden;

      .event-dot {
        position: absolute;
        top: -8px;
        width: 20px;
        height: 20px;
        background: @accent-color;
        border-radius: 50%;
        animation: event-flow 3s infinite linear;
      }
    }
  }

  .subscribers {
    display: flex;
    flex-direction: column;
    gap: 20px;

    .subscriber {
      background: linear-gradient(135deg, #9b59b6, #8e44ad);
      color: white;
      animation: bounce 1.5s infinite;
    }
  }
}

.content-container {
  display: grid;
  gap: 30px;
}

.card {
  background: @card-bg;
  border-radius: 12px;
  box-shadow: 0 6px 25px rgba(0, 0, 0, 0.08);
  padding: 30px;
  transition: transform 0.3s ease, box-shadow 0.3s ease;
  overflow: hidden;
  position: relative;

  &:hover {
    transform: translateY(-5px);
    box-shadow: 0 10px 30px rgba(0, 0, 0, 0.12);
  }

  &::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    width: 5px;
    height: 100%;
    background: linear-gradient(to bottom, @primary-color, @secondary-color);
  }
}

.section-title {
  font-size: 1.8rem;
  color: @primary-color;
  margin-top: 0;
  margin-bottom: 25px;
  padding-bottom: 15px;
  border-bottom: 2px solid lighten(@primary-color, 40%);
  display: flex;
  align-items: center;

  .icon {
    margin-right: 15px;
    font-size: 1.5em;
  }
}

// æ¦‚å¿µéƒ¨åˆ†æ ·å¼
.concept-section {
  .definition {
    background: lighten(@primary-color, 48%);
    padding: 20px;
    border-radius: 8px;
    margin-bottom: 25px;
    border-left: 4px solid @primary-color;

    p {
      margin: 0;
      line-height: 1.7;
      font-size: 1.1rem;

      strong {
        color: @primary-color;
      }
    }
  }

  .core-principles {
    h3 {
      color: @secondary-color;
      margin-top: 0;
    }

    ul {
      list-style: none;
      padding: 0;
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      gap: 20px;
    }

    .principle-card {
      display: flex;
      align-items: center;
      padding: 15px;
      background: white;
      border-radius: 8px;
      box-shadow: 0 3px 10px rgba(0, 0, 0, 0.05);
      transition: all 0.3s;

      &:hover {
        transform: translateY(-3px);
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
      }

      .principle-icon {
        font-size: 1.8rem;
        margin-right: 15px;
        width: 50px;
        height: 50px;
        display: flex;
        align-items: center;
        justify-content: center;
        background: lighten(@primary-color, 40%);
        border-radius: 50%;
      }
    }
  }
}

// è®¾è®¡æ€è·¯éƒ¨åˆ†æ ·å¼
.design-section {
  .architecture-diagram {
    background: #f8fafc;
    border: 1px solid @border-color;
    border-radius: 10px;
    padding: 25px;
    margin-bottom: 30px;
    position: relative;

    .diagram-title {
      text-align: center;
      font-weight: bold;
      margin-bottom: 20px;
      color: @primary-color;
    }

    .diagram-content {
      display: flex;
      justify-content: space-between;
      align-items: center;
      min-height: 200px;
    }

    .publisher-box,
    .subscriber-box {
      background: @card-bg;
      border: 2px solid @primary-color;
      border-radius: 8px;
      padding: 15px;
      text-align: center;
      width: 150px;
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
      z-index: 2;
    }

    .publisher-box {
      background: lighten(@primary-color, 40%);
    }

    .subscriber-boxes {
      display: flex;
      flex-direction: column;
      gap: 20px;

      .subscriber-box {
        background: lighten(#9b59b6, 40%);
        border-color: #9b59b6;
      }
    }

    .event-channel {
      flex: 1;
      margin: 0 20px;
      position: relative;
      z-index: 1;

      &::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: linear-gradient(135deg, lighten(@secondary-color, 40%), lighten(@primary-color, 45%));
        border-radius: 10px;
        z-index: -1;
      }
    }

    .event-bus-core {
      padding: 20px;

      .event-title {
        font-weight: bold;
        color: @secondary-color;
        margin-bottom: 15px;
        text-align: center;
      }
    }

    .event-list {
      .event-item {
        background: white;
        padding: 10px 15px;
        margin-bottom: 10px;
        border-radius: 6px;
        display: flex;
        justify-content: space-between;
        border-left: 3px solid @primary-color;

        .event-name {
          font-weight: 500;
        }

        .subscriber-count {
          color: @success-color;
          font-weight: bold;
        }
      }
    }

    .data-flow {
      position: absolute;
      width: 100%;
      top: 50%;
      left: 0;
      display: flex;
      justify-content: space-between;
      padding: 0 20px;

      .arrow {
        background: @accent-color;
        color: white;
        padding: 5px 15px;
        border-radius: 20px;
        font-weight: bold;
        font-size: 0.9rem;
      }
    }
  }

  .implementation-steps {
    ol {
      list-style: none;
      padding: 0;
      counter-reset: step-counter;
    }

    .step-card {
      display: flex;
      align-items: flex-start;
      margin-bottom: 20px;
      background: lighten(@primary-color, 48%);
      border-radius: 8px;
      padding: 20px;
      transition: all 0.3s;

      &:hover {
        background: lighten(@primary-color, 44%);
        transform: translateX(5px);
      }
    }

    .step-number {
      background: @primary-color;
      color: white;
      width: 40px;
      height: 40px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: bold;
      font-size: 1.2rem;
      margin-right: 20px;
      flex-shrink: 0;
    }

    .step-content {
      strong {
        color: darken(@primary-color, 10%);
      }
    }
  }
}

// ä½¿ç”¨åœºæ™¯éƒ¨åˆ†æ ·å¼
.use-cases-section {
  .use-cases-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
    gap: 25px;
  }

  .use-case-card {
    background: white;
    border-radius: 10px;
    overflow: hidden;
    box-shadow: 0 5px 20px rgba(0, 0, 0, 0.08);
    display: flex;
    transition: all 0.3s;

    &:hover {
      transform: translateY(-7px);
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.15);
    }
  }

  .use-case-icon {
    font-size: 2.5rem;
    width: 80px;
    display: flex;
    align-items: center;
    justify-content: center;
    background: linear-gradient(135deg, @primary-color, @secondary-color);
    color: white;
  }

  .use-case-content {
    padding: 20px;
    flex: 1;

    h3 {
      margin-top: 0;
      margin-bottom: 10px;
      color: @primary-color;
    }

    p {
      margin-top: 0;
      color: lighten(@text-color, 15%);
    }

    .example {
      margin-top: 10px;
      padding: 10px;
      background: lighten(@secondary-color, 50%);
      border-radius: 6px;
      font-size: 0.9rem;
      font-style: italic;
    }
  }
}

// ä¼˜ç¼ºç‚¹éƒ¨åˆ†æ ·å¼
.pros-cons-section {
  .comparison-container {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 30px;

    @media (max-width: 768px) {
      grid-template-columns: 1fr;
    }
  }

  .pros-header,
  .cons-header {
    padding: 15px;
    text-align: center;
    border-radius: 8px 8px 0 0;
    margin: 0;
  }

  .pros-header {
    background: linear-gradient(135deg, @secondary-color, darken(@secondary-color, 10%));
    color: white;
  }

  .cons-header {
    background: linear-gradient(135deg, #e74c3c, darken(#e74c3c, 10%));
    color: white;
  }

  ul {
    list-style: none;
    padding: 0;
    margin: 0;
  }

  .pro,
  .con {
    padding: 15px;
    margin-bottom: 15px;
    border-radius: 6px;
    position: relative;
    padding-left: 55px;

    &::before {
      position: absolute;
      left: 15px;
      top: 50%;
      transform: translateY(-50%);
      font-size: 1.5rem;
    }
  }

  .pro {
    background: lighten(@secondary-color, 50%);
    border-left: 4px solid @secondary-color;

    &::before {
      content: 'âœ“';
      color: @secondary-color;
    }
  }

  .con {
    background: lighten(#e74c3c, 43%);
    border-left: 4px solid #e74c3c;

    &::before {
      content: 'âœ—';
      color: #e74c3c;
    }
  }
}

// ä»£ç ç¤ºä¾‹éƒ¨åˆ†æ ·å¼
.code-section {
  .code-example {
    background: #2d2d2d;
    border-radius: 8px;
    overflow: hidden;
  }

  .code-block {
    padding: 25px;
    color: #f8f8f2;
    background: #2d2d2d;
    font-family: 'Fira Code', monospace;
    font-size: 0.95rem;
    line-height: 1.6;
    overflow-x: auto;
    margin: 0;

    // æ¨¡æ‹Ÿä»£ç é«˜äº®
    :first-child {
      color: #f92672; // ç±»å
    }

    :nth-child(2) {
      color: #a6e22e; // æ–¹æ³•å
    }

    :nth-child(3) {
      color: #fd971f; // å­—ç¬¦ä¸²
    }

    :nth-child(4) {
      color: #ae81ff; // å…³é”®å­—
    }
  }
}

// é¡µè„šæ ·å¼
.footer {
  text-align: center;
  margin-top: 50px;
  padding: 30px;
  color: lighten(@text-color, 30%);
  font-size: 0.95rem;
  border-top: 1px solid @border-color;
}

// åŠ¨ç”»å®šä¹‰
@keyframes pulse {
  0% {
    box-shadow: 0 0 0 0 rgba(52, 152, 219, 0.7);
  }

  70% {
    box-shadow: 0 0 0 15px rgba(52, 152, 219, 0);
  }

  100% {
    box-shadow: 0 0 0 0 rgba(52, 152, 219, 0);
  }
}

@keyframes bounce {

  0%,
  100% {
    transform: translateY(0);
  }

  50% {
    transform: translateY(-15px);
  }
}

@keyframes event-flow {
  0% {
    transform: translateX(-20px);
    opacity: 0;
  }

  10% {
    opacity: 1;
  }

  90% {
    opacity: 1;
  }

  100% {
    transform: translateX(420px);
    opacity: 0;
  }
}

// å“åº”å¼è°ƒæ•´
@media (max-width: 768px) {
  .header h1 {
    font-size: 2.2rem;
  }

  .pattern-animation {
    flex-direction: column;
    height: auto;
    gap: 40px;

    .event-bus {
      margin: 20px 0;
      width: 100%;

      .event-flow {
        top: 50px;
        width: 100%;
      }
    }
  }

  .section-title {
    font-size: 1.6rem;
  }

  .architecture-diagram {
    .diagram-content {
      flex-direction: column;
      gap: 40px;
    }

    .data-flow {
      flex-direction: column;
      gap: 60px;
      top: 30%;

      .publish-arrow {
        top: 60px;
        left: -50px;
        transform: rotate(90deg);
      }

      .subscribe-arrow {
        top: 230px;
        right: -50px;
        transform: rotate(90deg);
      }
    }
  }
}

.compare-section {
  margin-top: 2.5rem;
  margin-bottom: 2.5rem;
  background: #f7fafc;
  border-radius: 12px;
  box-shadow: 0 4px 18px rgba(0, 0, 0, 0.06);
  padding: 2rem 1.5rem;
}

.compare-content {
  display: flex;
  flex-wrap: wrap;
  gap: 2rem;
  align-items: flex-start;
}

.compare-table {
  flex: 2 1 400px;
  overflow-x: auto;
}

.compare-table table {
  width: 100%;
  border-collapse: collapse;
  background: white;
  border-radius: 8px;
  overflow: hidden;
  font-size: 1rem;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.04);
}

.compare-table th,
.compare-table td {
  padding: 0.9rem 1.2rem;
  border-bottom: 1px solid #e3e8ee;
  text-align: left;
}

.compare-table th {
  background: #42b983;
  color: #fff;
  font-weight: 600;
  font-size: 1.05rem;
}

.compare-table tr:last-child td {
  border-bottom: none;
}

.compare-summary {
  flex: 1 1 220px;
  background: #e3f6f5;
  border-radius: 8px;
  padding: 1.2rem 1rem;
  color: #2c3e50;
  font-size: 1.05rem;
  box-shadow: 0 1px 4px rgba(66, 185, 131, 0.08);
  margin-top: 0.5rem;
  min-width: 200px;
  max-width: 350px;
}

.compare-summary strong {
  color: #42b983;
}

@media (max-width: 900px) {
  .compare-content {
    flex-direction: column;
    gap: 1.2rem;
  }

  .compare-summary {
    max-width: 100%;
  }
}
</style>
