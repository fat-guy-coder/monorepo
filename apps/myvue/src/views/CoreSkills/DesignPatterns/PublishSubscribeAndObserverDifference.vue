<template>
  <div class="pattern-container">
    <header class="header">
      <h1>å‘å¸ƒè®¢é˜… vs è§‚å¯Ÿè€…æ¨¡å¼</h1>
      <p class="subtitle">ä¸¤ç§å¸¸ç”¨äº‹ä»¶å¤„ç†æ¨¡å¼çš„æ·±åº¦å¯¹æ¯”</p>
    </header>

    <div class="content">
      <section class="card intro">
        <div class="intro-content">
          <div class="intro-text">
            <h2>äº‹ä»¶é©±åŠ¨æ¨¡å¼çš„æ ¸å¿ƒæ¦‚å¿µ</h2>
            <p>åœ¨è½¯ä»¶è®¾è®¡ä¸­ï¼Œå‘å¸ƒè®¢é˜…æ¨¡å¼å’Œè§‚å¯Ÿè€…æ¨¡å¼éƒ½ç”¨äºå®ç°å¯¹è±¡é—´çš„äº‹ä»¶é€šä¿¡ï¼Œä½†å®ƒä»¬åœ¨å®ç°æ–¹å¼å’Œåº”ç”¨åœºæ™¯ä¸Šæœ‰ç€æœ¬è´¨åŒºåˆ«ã€‚</p>
            <div class="key-points">
              <div class="point">
                <div class="point-icon">ğŸ”„</div>
                <h3>è§‚å¯Ÿè€…æ¨¡å¼</h3>
                <p>ç›´æ¥çš„å¯¹è±¡é—´é€šä¿¡ï¼Œè§‚å¯Ÿè€…ç›´æ¥è®¢é˜…ç›®æ ‡å¯¹è±¡</p>
              </div>
              <div class="point">
                <div class="point-icon">ğŸ“¡</div>
                <h3>å‘å¸ƒè®¢é˜…æ¨¡å¼</h3>
                <p>é€šè¿‡äº‹ä»¶ä¸­å¿ƒé—´æ¥é€šä¿¡ï¼Œå‘å¸ƒè€…å’Œè®¢é˜…è€…è§£è€¦</p>
              </div>
            </div>
          </div>
          <div class="intro-image">
            <div class="pattern-diagram">
              <div class="observer-diagram">
                <div class="subject">Subject</div>
                <div class="observers">
                  <div class="observer">Observer 1</div>
                  <div class="observer">Observer 2</div>
                  <div class="observer">Observer 3</div>
                </div>
                <div class="connections">
                  <div class="connection"></div>
                  <div class="connection"></div>
                  <div class="connection"></div>
                </div>
              </div>
              <div class="divider"></div>
              <div class="pubsub-diagram">
                <div class="publisher">Publisher</div>
                <div class="event-bus">Event Bus</div>
                <div class="subscribers">
                  <div class="subscriber">Subscriber 1</div>
                  <div class="subscriber">Subscriber 2</div>
                  <div class="subscriber">Subscriber 3</div>
                </div>
                <div class="pub-connections">
                  <div class="pub-connection"></div>
                  <div class="sub-connection"></div>
                  <div class="sub-connection"></div>
                  <div class="sub-connection"></div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </section>

      <section class="card observer-pattern">
        <h2>è§‚å¯Ÿè€…æ¨¡å¼ (Observer Pattern)</h2>
        <div class="pattern-content">
          <div class="pattern-desc">
            <h3>æ ¸å¿ƒæ¦‚å¿µ</h3>
            <p>è§‚å¯Ÿè€…æ¨¡å¼å®šä¹‰äº†ä¸€ç§ä¸€å¯¹å¤šçš„ä¾èµ–å…³ç³»ï¼Œå½“ä¸€ä¸ªå¯¹è±¡ï¼ˆSubjectï¼‰çš„çŠ¶æ€å‘ç”Ÿæ”¹å˜æ—¶ï¼Œæ‰€æœ‰ä¾èµ–å®ƒçš„å¯¹è±¡ï¼ˆObserversï¼‰éƒ½ä¼šå¾—åˆ°é€šçŸ¥å¹¶è‡ªåŠ¨æ›´æ–°ã€‚</p>

            <h3>å…³é”®ç‰¹å¾</h3>
            <ul>
              <li>Subject ç»´æŠ¤ä¸€ä¸ªè§‚å¯Ÿè€…åˆ—è¡¨</li>
              <li>è§‚å¯Ÿè€…ç›´æ¥è®¢é˜…/å–æ¶ˆè®¢é˜… Subject</li>
              <li>Subject çŠ¶æ€å˜åŒ–æ—¶ç›´æ¥é€šçŸ¥æ‰€æœ‰è§‚å¯Ÿè€…</li>
              <li>è§‚å¯Ÿè€…å’Œ Subject ä¹‹é—´å­˜åœ¨ç›´æ¥ä¾èµ–å…³ç³»</li>
            </ul>

            <h3>å…¸å‹åº”ç”¨åœºæ™¯</h3>
            <div class="scenarios">
              <div class="scenario">GUIäº‹ä»¶å¤„ç†</div>
              <div class="scenario">å®æ—¶æ•°æ®ç›‘æ§</div>
              <div class="scenario">MVCæ¶æ„ä¸­çš„æ¨¡å‹-è§†å›¾æ›´æ–°</div>
            </div>
          </div>
          <div class="pattern-code">
            <h3>ä»£ç å®ç°</h3>
            <pre class="code-block">// ä¸»é¢˜æ¥å£
interface Subject {
  addObserver(observer: Observer): void;
  removeObserver(observer: Observer): void;
  notifyObservers(): void;
}

// è§‚å¯Ÿè€…æ¥å£
interface Observer {
  update(data: any): void;
}

// å…·ä½“ä¸»é¢˜
class ConcreteSubject implements Subject {
  private observers: Observer[] = [];
  private state: any;

  addObserver(observer: Observer) {
    this.observers.push(observer);
  }

  removeObserver(observer: Observer) {
    const index = this.observers.indexOf(observer);
    if (index > -1) {
      this.observers.splice(index, 1);
    }
  }

  notifyObservers() {
    this.observers.forEach(observer =>
      observer.update(this.state)
    );
  }

  setState(state: any) {
    this.state = state;
    this.notifyObservers();
  }
}

// å…·ä½“è§‚å¯Ÿè€…
class ConcreteObserver implements Observer {
  update(data: any) {
    console.log('æ”¶åˆ°æ›´æ–°:', data);
  }
}</pre>
          </div>
        </div>
      </section>

      <section class="card pubsub-pattern">
        <h2>å‘å¸ƒè®¢é˜…æ¨¡å¼ (Pub/Sub Pattern)</h2>
        <div class="pattern-content">
          <div class="pattern-desc">
            <h3>æ ¸å¿ƒæ¦‚å¿µ</h3>
            <p>å‘å¸ƒè®¢é˜…æ¨¡å¼ä½¿ç”¨ä¸€ä¸ªäº‹ä»¶é€šé“ï¼ˆEvent Busï¼‰ä½œä¸ºä¸­ä»‹ï¼Œå‘å¸ƒè€…ï¼ˆPublisherï¼‰è§¦å‘äº‹ä»¶ï¼Œè®¢é˜…è€…ï¼ˆSubscriberï¼‰ç›‘å¬ç‰¹å®šäº‹ä»¶ã€‚ä¸¤è€…ä¸ç›´æ¥é€šä¿¡ã€‚</p>

            <h3>å…³é”®ç‰¹å¾</h3>
            <ul>
              <li>é€šè¿‡äº‹ä»¶ä¸­å¿ƒè§£è€¦å‘å¸ƒè€…å’Œè®¢é˜…è€…</li>
              <li>è®¢é˜…è€…ç›‘å¬ç‰¹å®šäº‹ä»¶ç±»å‹</li>
              <li>å‘å¸ƒè€…è§¦å‘äº‹ä»¶æ—¶ä¸å…³å¿ƒè®¢é˜…è€…</li>
              <li>æ”¯æŒå¤šå¯¹å¤šé€šä¿¡å…³ç³»</li>
            </ul>

            <h3>å…¸å‹åº”ç”¨åœºæ™¯</h3>
            <div class="scenarios">
              <div class="scenario">æ¶ˆæ¯é˜Ÿåˆ—ç³»ç»Ÿ</div>
              <div class="scenario">äº‹ä»¶æ€»çº¿å®ç°</div>
              <div class="scenario">è·¨ç»„ä»¶é€šä¿¡</div>
              <div class="scenario">å¾®æœåŠ¡é—´é€šä¿¡</div>
            </div>
          </div>
          <div class="pattern-code">
            <h3>ä»£ç å®ç°</h3>
            <pre class="code-block">// äº‹ä»¶ä¸­å¿ƒ
class EventBus {
  private events: { [key: string]: Function[] } = {};

  // è®¢é˜…äº‹ä»¶
  subscribe(event: string, callback: Function) {
    if (!this.events[event]) {
      this.events[event] = [];
    }
    this.events[event].push(callback);
  }

  // å–æ¶ˆè®¢é˜…
  unsubscribe(event: string, callback: Function) {
    if (this.events[event]) {
      this.events[event] = this.events[event].filter(
        cb => cb !== callback
      );
    }
  }

  // å‘å¸ƒäº‹ä»¶
  publish(event: string, data?: any) {
    if (this.events[event]) {
      this.events[event].forEach(callback =>
        callback(data)
      );
    }
  }
}

// ä½¿ç”¨ç¤ºä¾‹
const bus = new EventBus();

// è®¢é˜…è€…
bus.subscribe('message', (data: string) => {
  console.log('æ”¶åˆ°æ¶ˆæ¯:', data);
});

// å‘å¸ƒè€…
bus.publish('message', 'Hello Pub/Sub!');</pre>
          </div>
        </div>
      </section>

      <section class="card comparison">
        <h2>æ ¸å¿ƒåŒºåˆ«å¯¹æ¯”</h2>
        <div class="comparison-content">
          <div class="comparison-table">
            <table>
              <thead>
                <tr>
                  <th>å¯¹æ¯”ç»´åº¦</th>
                  <th>è§‚å¯Ÿè€…æ¨¡å¼</th>
                  <th>å‘å¸ƒè®¢é˜…æ¨¡å¼</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td>è€¦åˆåº¦</td>
                  <td>é«˜ï¼ˆç›´æ¥ä¾èµ–ï¼‰</td>
                  <td>ä½ï¼ˆé€šè¿‡äº‹ä»¶ä¸­å¿ƒè§£è€¦ï¼‰</td>
                </tr>
                <tr>
                  <td>é€šä¿¡æ–¹å¼</td>
                  <td>ç›´æ¥é€šçŸ¥</td>
                  <td>é—´æ¥é€šè¿‡äº‹ä»¶é€šé“</td>
                </tr>
                <tr>
                  <td>å…³ç³»ç±»å‹</td>
                  <td>ä¸€å¯¹å¤š</td>
                  <td>å¤šå¯¹å¤š</td>
                </tr>
                <tr>
                  <td>å®ç°å¤æ‚åº¦</td>
                  <td>ç®€å•</td>
                  <td>è¾ƒå¤æ‚ï¼ˆéœ€è¦äº‹ä»¶ä¸­å¿ƒï¼‰</td>
                </tr>
                <tr>
                  <td>çµæ´»æ€§</td>
                  <td>è¾ƒä½ï¼ˆç´§å¯†ç»‘å®šï¼‰</td>
                  <td>é«˜ï¼ˆåŠ¨æ€è®¢é˜…/å‘å¸ƒï¼‰</td>
                </tr>
                <tr>
                  <td>å…¸å‹åº”ç”¨</td>
                  <td>GUIäº‹ä»¶ã€çŠ¶æ€ç›‘æ§</td>
                  <td>æ¶ˆæ¯ç³»ç»Ÿã€äº‹ä»¶æ€»çº¿</td>
                </tr>
                <tr>
                  <td>æ€§èƒ½</td>
                  <td>é«˜æ•ˆï¼ˆç›´æ¥è°ƒç”¨ï¼‰</td>
                  <td>ç¨ä½ï¼ˆä¸­é—´å±‚å¼€é”€ï¼‰</td>
                </tr>
              </tbody>
            </table>
          </div>

          <div class="relationship-diagram">
            <h3>å…³ç³»å›¾</h3>
            <div class="diagram-content">
              <div class="observer-relation">
                <div class="subject-node">Subject</div>
                <div class="observer-node">Observer 1</div>
                <div class="observer-node">Observer 2</div>
                <div class="observer-node">Observer 3</div>
                <div class="connection-line"></div>
                <div class="connection-line"></div>
                <div class="connection-line"></div>
              </div>
              <div class="vs">vs</div>
              <div class="pubsub-relation">
                <div class="publisher-node">Publisher</div>
                <div class="eventbus-node">Event Bus</div>
                <div class="subscriber-node">Subscriber 1</div>
                <div class="subscriber-node">Subscriber 2</div>
                <div class="pub-connection"></div>
                <div class="sub-connection"></div>
                <div class="sub-connection"></div>
              </div>
            </div>
          </div>
        </div>
      </section>

      <section class="card conclusion">
        <h2>å¦‚ä½•é€‰æ‹©ï¼Ÿ</h2>
        <div class="conclusion-content">
          <div class="choice">
            <h3>âœ… é€‰æ‹©è§‚å¯Ÿè€…æ¨¡å¼å½“ï¼š</h3>
            <ul>
              <li>å¯¹è±¡é—´å…³ç³»ç®€å•ç›´æ¥ï¼Œä¸€å¯¹å¤šå…³ç³»æ˜ç¡®</li>
              <li>éœ€è¦é«˜æ•ˆç›´æ¥çš„äº‹ä»¶é€šçŸ¥æœºåˆ¶</li>
              <li>ä¸éœ€è¦å¤æ‚çš„ä¸­é—´å±‚ç®¡ç†</li>
              <li>ç»„ä»¶ç”Ÿå‘½å‘¨æœŸç´§å¯†å…³è”</li>
            </ul>
          </div>

          <div class="choice">
            <h3>âœ… é€‰æ‹©å‘å¸ƒè®¢é˜…æ¨¡å¼å½“ï¼š</h3>
            <ul>
              <li>ç³»ç»Ÿéœ€è¦è§£è€¦ï¼Œé¿å…ç›´æ¥ä¾èµ–</li>
              <li>éœ€è¦å¤šå¯¹å¤šçš„äº‹ä»¶é€šä¿¡å…³ç³»</li>
              <li>éœ€è¦åŠ¨æ€æ·»åŠ /ç§»é™¤è®¢é˜…è€…</li>
              <li>è·¨æ¨¡å—/è·¨ç³»ç»Ÿé€šä¿¡</li>
              <li>éœ€è¦ä¸­é—´ä»¶è¿›è¡Œäº‹ä»¶è¿‡æ»¤æˆ–å¤„ç†</li>
            </ul>
          </div>
        </div>

        <div class="hybrid-approach">
          <h3>å®é™…åº”ç”¨ä¸­çš„æ··åˆæ¨¡å¼</h3>
          <p>åœ¨å®é™…å¼€å‘ä¸­ï¼Œä¸¤ç§æ¨¡å¼ç»å¸¸ç»“åˆä½¿ç”¨ï¼š</p>
          <pre class="code-block">// Vue3ä¸­çš„Event Buså®ç°
import mitt from 'mitt';

// åˆ›å»ºäº‹ä»¶ä¸­å¿ƒ
const emitter = mitt();

// ç»„ä»¶A - å‘å¸ƒäº‹ä»¶
emitter.emit('user-login', { user: 'admin' });

// ç»„ä»¶B - è®¢é˜…äº‹ä»¶
emitter.on('user-login', (user) => {
  console.log('ç”¨æˆ·ç™»å½•:', user);
});

// ç»„ä»¶C - å–æ¶ˆè®¢é˜…
onUnmounted(() => {
  emitter.off('user-login');
});</pre>
          <p>ç°ä»£å‰ç«¯æ¡†æ¶ï¼ˆå¦‚Vueã€Reactï¼‰ä¸­çš„çŠ¶æ€ç®¡ç†åº“ï¼ˆVuexã€Reduxï¼‰é€šå¸¸ç»“åˆäº†ä¸¤ç§æ¨¡å¼çš„ä¼˜ç‚¹ã€‚</p>
        </div>
      </section>
    </div>

    <footer class="footer">
      <p>è®¾è®¡æ¨¡å¼ | æå‡ä»£ç å¯ç»´æŠ¤æ€§ä¸æ‰©å±•æ€§</p>
      <div class="links">
        <a href="https://refactoring.guru/design-patterns" target="_blank">è®¾è®¡æ¨¡å¼å‚è€ƒ</a>
        <a href="https://github.com/developit/mitt" target="_blank">Mitt äº‹ä»¶åº“</a>
        <a href="https://rxjs.dev/" target="_blank">RxJS å“åº”å¼ç¼–ç¨‹</a>
      </div>
    </footer>
  </div>
</template>

<script lang="ts" setup>
import { ref, onMounted } from 'vue';

// ç¤ºä¾‹å“åº”å¼æ•°æ®
const activePattern = ref('observer');

onMounted(() => {
  console.log('æ¨¡å¼å¯¹æ¯”ç»„ä»¶å·²æŒ‚è½½');
});
</script>

<style lang="less" scoped>
@import url('https://fonts.googleapis.com/css2?family=Noto+Sans+SC:wght@300;400;500;700&display=swap');

* {
  box-sizing: border-box;
  margin: 0;
  padding: 0;
}

.pattern-container {
  font-family: 'Noto Sans SC', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
  max-width: 1200px;
  margin: 0 auto;
  padding: 20px;
  background-color: #f8fafc;
  color: #334155;
  min-height: 100vh;
  line-height: 1.6;
}

.header {
  text-align: center;
  margin-bottom: 40px;
  padding: 30px 0;
  border-bottom: 1px solid #e2e8f0;

  h1 {
    font-size: 2.8rem;
    margin-bottom: 12px;
    font-weight: 700;
    color: #1e293b;
    background: linear-gradient(135deg, #3b82f6, #8b5cf6);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
    text-fill-color: transparent;
  }

  .subtitle {
    font-size: 1.2rem;
    color: #64748b;
    max-width: 600px;
    margin: 0 auto;
  }
}

.content {
  display: grid;
  grid-template-columns: 1fr;
  gap: 25px;
}

.card {
  background: white;
  border-radius: 12px;
  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.05);
  padding: 30px;
  transition: transform 0.3s ease, box-shadow 0.3s ease;

  &:hover {
    transform: translateY(-5px);
    box-shadow: 0 6px 25px rgba(0, 0, 0, 0.08);
  }

  h2 {
    font-size: 1.8rem;
    margin-bottom: 25px;
    padding-bottom: 15px;
    border-bottom: 2px solid #e2e8f0;
    color: #1e293b;
    position: relative;

    &::after {
      content: '';
      position: absolute;
      bottom: -2px;
      left: 0;
      width: 80px;
      height: 2px;
      background: #3b82f6;
    }
  }
}

.intro {
  .intro-content {
    display: flex;
    gap: 30px;
    align-items: center;

    @media (max-width: 768px) {
      flex-direction: column;
    }
  }

  .intro-text {
    flex: 1;

    p {
      margin-bottom: 20px;
      font-size: 1.1rem;
      color: #475569;
    }

    .key-points {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
      gap: 20px;
      margin-top: 30px;

      .point {
        background: #f0f7ff;
        padding: 25px 20px;
        border-radius: 10px;
        text-align: center;
        border: 1px solid #dbeafe;
        transition: all 0.3s ease;

        &:hover {
          background: #dbeafe;
          transform: translateY(-5px);
        }

        .point-icon {
          font-size: 2.5rem;
          margin-bottom: 15px;
        }

        h3 {
          font-size: 1.3rem;
          margin-bottom: 10px;
          color: #3b82f6;
        }

        p {
          font-size: 0.95rem;
          color: #64748b;
          margin-bottom: 0;
        }
      }
    }
  }

  .intro-image {
    flex: 1;
    display: flex;
    justify-content: center;
  }

  .pattern-diagram {
    width: 100%;
    max-width: 600px;
    display: flex;
    flex-direction: column;
    gap: 40px;
    padding: 20px;

    .observer-diagram,
    .pubsub-diagram {
      position: relative;
      height: 200px;
      background: #f8fafc;
      border-radius: 10px;
      padding: 15px;
      border: 1px solid #e2e8f0;
    }

    .divider {
      text-align: center;
      font-weight: bold;
      color: #64748b;
      position: relative;

      &::before,
      &::after {
        content: '';
        position: absolute;
        top: 50%;
        width: 40%;
        height: 1px;
        background: #e2e8f0;
      }

      &::before {
        left: 0;
      }

      &::after {
        right: 0;
      }
    }

    .subject {
      position: absolute;
      top: 20px;
      left: 50%;
      transform: translateX(-50%);
      background: #3b82f6;
      color: white;
      padding: 15px 30px;
      border-radius: 8px;
      font-weight: 600;
    }

    .observers {
      position: absolute;
      bottom: 20px;
      display: flex;
      justify-content: space-around;
      width: 100%;
      padding: 0 20px;
    }

    .observer {
      background: #8b5cf6;
      color: white;
      padding: 10px 20px;
      border-radius: 6px;
      font-size: 0.9rem;
    }

    .connections {
      position: absolute;
      top: 60px;
      left: 50%;
      transform: translateX(-50%);
      display: flex;
      gap: 40px;
    }

    .connection {
      width: 3px;
      height: 80px;
      background: #94a3b8;
      position: relative;

      &::after {
        content: '';
        position: absolute;
        bottom: -8px;
        left: -6px;
        width: 0;
        height: 0;
        border-left: 8px solid transparent;
        border-right: 8px solid transparent;
        border-top: 10px solid #94a3b8;
      }
    }

    .publisher {
      position: absolute;
      top: 20px;
      left: 20%;
      background: #3b82f6;
      color: white;
      padding: 15px 30px;
      border-radius: 8px;
      font-weight: 600;
    }

    .event-bus {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      background: #8b5cf6;
      color: white;
      padding: 20px;
      border-radius: 10px;
      font-weight: 600;
      width: 150px;
      text-align: center;
    }

    .subscribers {
      position: absolute;
      bottom: 20px;
      display: flex;
      justify-content: space-around;
      width: 100%;
      padding: 0 20px;
    }

    .subscriber {
      background: #ec4899;
      color: white;
      padding: 10px 20px;
      border-radius: 6px;
      font-size: 0.9rem;
    }

    .pub-connections {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
    }

    .pub-connection {
      position: absolute;
      top: 60px;
      left: 20%;
      width: 30%;
      height: 3px;
      background: #94a3b8;

      &::after {
        content: '';
        position: absolute;
        right: -8px;
        top: -6px;
        width: 0;
        height: 0;
        border-top: 8px solid transparent;
        border-bottom: 8px solid transparent;
        border-left: 10px solid #94a3b8;
      }
    }

    .sub-connection {
      position: absolute;
      top: 50%;
      left: 50%;
      width: 20%;
      height: 3px;
      background: #94a3b8;

      &:nth-child(2) {
        transform: rotate(30deg);
        transform-origin: left;
      }

      &:nth-child(3) {
        transform: rotate(-30deg);
        transform-origin: left;
      }

      &:nth-child(4) {
        transform: rotate(0);
        transform-origin: left;
      }

      &::after {
        content: '';
        position: absolute;
        right: -8px;
        top: -6px;
        width: 0;
        height: 0;
        border-top: 8px solid transparent;
        border-bottom: 8px solid transparent;
        border-left: 10px solid #94a3b8;
      }
    }
  }
}

.observer-pattern,
.pubsub-pattern {
  .pattern-content {
    display: flex;
    gap: 30px;

    @media (max-width: 900px) {
      flex-direction: column;
    }
  }

  .pattern-desc {
    flex: 1;

    h3 {
      font-size: 1.4rem;
      margin: 20px 0 15px;
      color: #1e293b;
      position: relative;
      padding-left: 15px;

      &::before {
        content: '';
        position: absolute;
        left: 0;
        top: 50%;
        transform: translateY(-50%);
        width: 6px;
        height: 6px;
        border-radius: 50%;
        background: #3b82f6;
      }
    }

    ul {
      padding-left: 25px;
      margin-bottom: 25px;

      li {
        margin-bottom: 10px;
        line-height: 1.7;
      }
    }
  }

  .scenarios {
    display: flex;
    flex-wrap: wrap;
    gap: 12px;
    margin-top: 15px;

    .scenario {
      background: #dbeafe;
      color: #1d4ed8;
      padding: 8px 15px;
      border-radius: 20px;
      font-size: 0.9rem;
      font-weight: 500;
    }
  }

  .pattern-code {
    flex: 1;
    min-width: 300px;
  }
}

.pubsub-pattern {
  .scenarios .scenario {
    background: #ede9fe;
    color: #7c3aed;
  }
}

.comparison {
  .comparison-content {
    display: flex;
    gap: 30px;

    @media (max-width: 900px) {
      flex-direction: column;
    }
  }

  .comparison-table {
    flex: 1;
    overflow-x: auto;

    table {
      width: 100%;
      border-collapse: collapse;
      border-spacing: 0;
      margin-bottom: 25px;

      th,
      td {
        padding: 15px;
        text-align: left;
        border-bottom: 1px solid #e2e8f0;
      }

      th {
        background: #f1f5f9;
        font-weight: 600;
        color: #1e293b;
        position: sticky;
        top: 0;
      }

      tr:hover {
        background: #f8fafc;
      }

      tr:nth-child(even) {
        background: #f8fafc;
      }
    }
  }

  .relationship-diagram {
    flex: 1;
    min-width: 300px;

    .diagram-content {
      display: flex;
      justify-content: space-around;
      align-items: center;
      margin-top: 20px;

      @media (max-width: 600px) {
        flex-direction: column;
        gap: 40px;
      }
    }

    .observer-relation,
    .pubsub-relation {
      position: relative;
      width: 180px;
      height: 250px;
    }

    .subject-node,
    .publisher-node {
      position: absolute;
      top: 20px;
      left: 50%;
      transform: translateX(-50%);
      background: #3b82f6;
      color: white;
      padding: 12px 24px;
      border-radius: 8px;
      font-weight: 600;
      text-align: center;
      width: 100px;
    }

    .eventbus-node {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      background: #8b5cf6;
      color: white;
      padding: 12px;
      border-radius: 8px;
      font-weight: 600;
      text-align: center;
      width: 90px;
    }

    .observer-node,
    .subscriber-node {
      position: absolute;
      background: #8b5cf6;
      color: white;
      padding: 10px 15px;
      border-radius: 6px;
      font-size: 0.9rem;
      width: 100px;
      text-align: center;
    }

    .observer-node:nth-child(2) {
      top: 120px;
      left: 0;
    }

    .observer-node:nth-child(3) {
      top: 120px;
      left: 50%;
      transform: translateX(-50%);
    }

    .observer-node:nth-child(4) {
      top: 120px;
      right: 0;
    }

    .subscriber-node:nth-child(3) {
      top: 150px;
      left: 0;
    }

    .subscriber-node:nth-child(4) {
      top: 150px;
      right: 0;
    }

    .connection-line {
      position: absolute;
      top: 70px;
      left: 50px;
      width: 3px;
      height: 70px;
      background: #94a3b8;

      &:nth-child(5) {
        left: 50%;
        transform: translateX(-50%);
      }

      &:nth-child(6) {
        left: auto;
        right: 50px;
      }

      &::after {
        content: '';
        position: absolute;
        bottom: -8px;
        left: -6px;
        width: 0;
        height: 0;
        border-left: 8px solid transparent;
        border-right: 8px solid transparent;
        border-top: 10px solid #94a3b8;
      }
    }

    .pub-connection {
      position: absolute;
      top: 60px;
      left: 45px;
      width: 80px;
      height: 3px;
      background: #94a3b8;

      &::after {
        content: '';
        position: absolute;
        right: -8px;
        top: -6px;
        width: 0;
        height: 0;
        border-top: 8px solid transparent;
        border-bottom: 8px solid transparent;
        border-left: 10px solid #94a3b8;
      }
    }

    .sub-connection {
      position: absolute;
      top: 120px;
      left: 45px;
      width: 80px;
      height: 3px;
      background: #94a3b8;

      &:nth-child(6) {
        left: auto;
        right: 45px;
      }

      &::after {
        content: '';
        position: absolute;
        right: -8px;
        top: -6px;
        width: 0;
        height: 0;
        border-top: 8px solid transparent;
        border-bottom: 8px solid transparent;
        border-left: 10px solid #94a3b8;
      }
    }

    .vs {
      font-weight: bold;
      color: #64748b;
      font-size: 1.2rem;
    }
  }
}

.conclusion {
  .conclusion-content {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
    gap: 30px;
    margin-bottom: 30px;
  }

  .choice {
    background: #f8fafc;
    padding: 25px;
    border-radius: 10px;
    border-left: 4px solid #3b82f6;

    h3 {
      font-size: 1.3rem;
      margin-bottom: 15px;
      color: #1e293b;
    }

    ul {
      padding-left: 25px;

      li {
        margin-bottom: 10px;
        line-height: 1.6;
      }
    }
  }

  .hybrid-approach {
    background: #f0f7ff;
    border-radius: 10px;
    padding: 25px;
    margin-top: 20px;

    h3 {
      font-size: 1.4rem;
      margin-bottom: 15px;
      color: #1e293b;
    }

    p {
      margin-bottom: 15px;
      color: #475569;
    }
  }
}

.code-block {
  background: #1e293b;
  color: #e2e8f0;
  padding: 18px;
  border-radius: 8px;
  font-family: 'Fira Code', monospace;
  font-size: 0.9rem;
  overflow-x: auto;
  margin: 15px 0;
  line-height: 1.5;
  border: 1px solid #334155;
  position: relative;

  &::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 40px;
    background: rgba(255, 255, 255, 0.05);
    border-bottom: 1px solid rgba(255, 255, 255, 0.1);
    border-radius: 8px 8px 0 0;
  }
}

.footer {
  text-align: center;
  margin-top: 50px;
  padding: 30px 0;
  border-top: 1px solid #e2e8f0;
  color: #64748b;

  .links {
    margin-top: 15px;

    a {
      color: #3b82f6;
      text-decoration: none;
      margin: 0 15px;
      font-weight: 500;
      position: relative;

      &::after {
        content: '';
        position: absolute;
        bottom: -3px;
        left: 0;
        width: 0;
        height: 2px;
        background: #3b82f6;
        transition: width 0.3s ease;
      }

      &:hover::after {
        width: 100%;
      }
    }
  }
}

@media (max-width: 768px) {
  .header h1 {
    font-size: 2.2rem;
  }
}
</style>
