<template>
  <div class="abstract-factory-container">
    <header class="header">
      <h1>æŠ½è±¡å·¥å‚æ¨¡å¼åŸºæœ¬ä»‹ç»</h1>
      <p class="subtitle">åˆ›å»ºç›¸å…³å¯¹è±¡å®¶æ—çš„ä¼˜é›…è§£å†³æ–¹æ¡ˆ</p>
    </header>

    <div class="content-wrapper">
      <div class="pattern-overview">
        <div class="overview-card">
          <h2 class="section-title">æ¦‚å¿µè§£æ</h2>
          <div class="concept">
            <div class="concept-icon">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
                <path
                  d="M4 5C3.44772 5 3 5.44772 3 6V18C3 18.5523 3.44772 19 4 19H20C20.5523 19 21 18.5523 21 18V6C21 5.44772 20.5523 5 20 5H4ZM1 6C1 4.34315 2.34315 3 4 3H20C21.6569 3 23 4.34315 23 6V18C23 19.6569 21.6569 21 20 21H4C2.34315 21 1 19.6569 1 18V6ZM7 7C6.44772 7 6 7.44772 6 8C6 8.55228 6.44772 9 7 9H17C17.5523 9 18 8.55228 18 8C18 7.44772 17.5523 7 17 7H7ZM6 12C6 11.4477 6.44772 11 7 11H17C17.5523 11 18 11.4477 18 12C18 12.5523 17.5523 13 17 13H7C6.44772 13 6 12.5523 6 12ZM7 15C6.44772 15 6 15.4477 6 16C6 16.5523 6.44772 17 7 17H13C13.5523 17 14 16.5523 14 16C14 15.4477 13.5523 15 13 15H7Z" />
              </svg>
            </div>
            <div class="concept-text">
              <p><strong>æŠ½è±¡å·¥å‚æ¨¡å¼</strong>æ˜¯ä¸€ç§åˆ›å»ºå‹è®¾è®¡æ¨¡å¼ï¼Œå®ƒèƒ½åˆ›å»ºä¸€ç³»åˆ—<strong>ç›¸å…³æˆ–ç›¸äº’ä¾èµ–çš„å¯¹è±¡</strong>ï¼Œè€Œæ— éœ€æŒ‡å®šå…¶å…·ä½“ç±»ã€‚</p>
              <p>è¯¥æ¨¡å¼æä¾›äº†ä¸€ä¸ªæ¥å£ç”¨äºåˆ›å»ºç›¸å…³å¯¹è±¡çš„å®¶æ—ï¼Œè€Œä¸éœ€è¦æ˜ç¡®æŒ‡å®šå…·ä½“ç±»ã€‚</p>
            </div>
          </div>

          <div class="analogy">
            <h3>ç°å®ä¸–ç•Œç±»æ¯”</h3>
            <p>æƒ³è±¡ä¸€å®¶å®¶å…·å·¥å‚ï¼Œå®ƒç”Ÿäº§<strong>æˆå¥—çš„ç°ä»£é£æ ¼æˆ–å¤å…¸é£æ ¼å®¶å…·</strong>ã€‚å·¥å‚æä¾›ç»Ÿä¸€çš„æ¥å£ç”Ÿäº§æ¤…å­ã€æ²™å‘å’ŒèŒ¶å‡ ï¼Œä½†æ ¹æ®é€‰æ‹©çš„é£æ ¼ç³»åˆ—ï¼Œä¼šç”Ÿäº§å‡ºé£æ ¼ä¸€è‡´ä½†å…·ä½“å®ç°ä¸åŒçš„äº§å“ã€‚</p>
          </div>
        </div>

        <div class="diagram-card">
          <h2 class="section-title">æ¨¡å¼ç»“æ„</h2>
          <div class="uml-diagram">
            <div class="uml-class abstract-factory">
              <div class="class-name">AbstractFactory</div>
              <div class="methods">
                +createProductA(): AbstractProductA<br>
                +createProductB(): AbstractProductB
              </div>
            </div>

            <div class="uml-arrow">â–²<br>ç»§æ‰¿</div>

            <div class="factory-row">
              <div class="uml-class concrete-factory">
                <div class="class-name">ConcreteFactory1</div>
                <div class="methods">
                  +createProductA(): ProductA1<br>
                  +createProductB(): ProductB1
                </div>
              </div>

              <div class="uml-class concrete-factory">
                <div class="class-name">ConcreteFactory2</div>
                <div class="methods">
                  +createProductA(): ProductA2<br>
                  +createProductB(): ProductB2
                </div>
              </div>
            </div>

            <div class="product-row">
              <div class="uml-class abstract-product">
                <div class="class-name">AbstractProductA</div>
              </div>

              <div class="uml-class abstract-product">
                <div class="class-name">AbstractProductB</div>
              </div>
            </div>

            <div class="uml-arrow">â–²<br>ç»§æ‰¿</div>

            <div class="product-row">
              <div class="uml-class concrete-product">
                <div class="class-name">ProductA1</div>
              </div>

              <div class="uml-class concrete-product">
                <div class="class-name">ProductB1</div>
              </div>
            </div>

            <div class="product-row">
              <div class="uml-class concrete-product">
                <div class="class-name">ProductA2</div>
              </div>

              <div class="uml-class concrete-product">
                <div class="class-name">ProductB2</div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <div class="pattern-details">
        <div class="design-principles">
          <h2 class="section-title">è®¾è®¡æ€æƒ³</h2>
          <ul class="principles-list">
            <li>
              <div class="principle-icon">ğŸ”’</div>
              <div>
                <h3>å°è£…å¯¹è±¡åˆ›å»º</h3>
                <p>å°†å¯¹è±¡åˆ›å»ºè¿‡ç¨‹å°è£…åœ¨å·¥å‚ä¸­ï¼Œå®¢æˆ·ç«¯ä»£ç åªéœ€ä¸æŠ½è±¡æ¥å£äº¤äº’</p>
              </div>
            </li>
            <li>
              <div class="principle-icon">ğŸŒ</div>
              <div>
                <h3>ç¡®ä¿äº§å“å…¼å®¹æ€§</h3>
                <p>ä¸€ä¸ªå…·ä½“å·¥å‚ç”Ÿäº§çš„æ‰€æœ‰å¯¹è±¡å±äºåŒä¸€å®¶æ—ï¼Œä¿è¯å®ƒä»¬èƒ½ååŒå·¥ä½œ</p>
              </div>
            </li>
            <li>
              <div class="principle-icon">ğŸ§©</div>
              <div>
                <h3>å¯æ‰©å±•æ€§</h3>
                <p>æ·»åŠ æ–°çš„äº§å“å®¶æ—æ—¶ï¼Œåªéœ€æ·»åŠ æ–°çš„å…·ä½“å·¥å‚ï¼Œæ— éœ€ä¿®æ”¹ç°æœ‰ä»£ç </p>
              </div>
            </li>
            <li>
              <div class="principle-icon">ğŸ’¡</div>
              <div>
                <h3>å•ä¸€èŒè´£åŸåˆ™</h3>
                <p>äº§å“åˆ›å»ºä»£ç é›†ä¸­åœ¨å•ä¸€ä½ç½®ï¼Œä½¿ä»£ç æ›´æ˜“ç»´æŠ¤</p>
              </div>
            </li>
          </ul>
        </div>

        <div class="code-example">
          <h2 class="section-title">ä»£ç ç¤ºä¾‹</h2>
          <div class="example-description">
            <p>ä»¥ä¸‹æ˜¯ä¸€ä¸ªUIç»„ä»¶åº“çš„ä¾‹å­ï¼Œå±•ç¤ºå¦‚ä½•ä¸ºä¸åŒä¸»é¢˜ï¼ˆäº®è‰²/æš—è‰²ï¼‰åˆ›å»ºé£æ ¼ä¸€è‡´çš„UIç»„ä»¶</p>
          </div>
          <pre class="code-block"><code>// æŠ½è±¡å·¥å‚æ¥å£
interface UIComponentFactory {
  createButton(): Button;
  createDialog(): Dialog;
}

// äº®è‰²ä¸»é¢˜å·¥å‚
class LightThemeFactory implements UIComponentFactory {
  createButton(): Button {
    return new LightButton();
  }

  createDialog(): Dialog {
    return new LightDialog();
  }
}

// æš—è‰²ä¸»é¢˜å·¥å‚
class DarkThemeFactory implements UIComponentFactory {
  createButton(): Button {
    return new DarkButton();
  }

  createDialog(): Dialog {
    return new DarkDialog();
  }
}

// å®¢æˆ·ç«¯ä»£ç 
function renderUI(factory: UIComponentFactory) {
  const button = factory.createButton();
  const dialog = factory.createDialog();

  button.render();
  dialog.render();
}

// æ ¹æ®ç”¨æˆ·è®¾ç½®é€‰æ‹©ä¸»é¢˜
const theme = userPrefersDark ? new DarkThemeFactory() : new LightThemeFactory();
renderUI(theme);</code></pre>
        </div>
      </div>

      <div class="pattern-scenarios">
        <div class="use-cases">
          <h2 class="section-title">é€‚ç”¨åœºæ™¯</h2>
          <div class="case-grid">
            <div class="case-card">
              <div class="case-icon">ğŸ¨</div>
              <h3>ä¸»é¢˜åŒ–UIç³»ç»Ÿ</h3>
              <p>åˆ›å»ºä¸åŒä¸»é¢˜ï¼ˆå¦‚äº®è‰²/æš—è‰²æ¨¡å¼ï¼‰çš„UIç»„ä»¶å®¶æ—ï¼Œç¡®ä¿ç»„ä»¶é£æ ¼ä¸€è‡´</p>
            </div>
            <div class="case-card">
              <div class="case-icon">ğŸŒ</div>
              <h3>å¤šå¹³å°é€‚é…</h3>
              <p>ä¸ºä¸åŒå¹³å°ï¼ˆWebã€ç§»åŠ¨ç«¯ï¼‰åˆ›å»ºé€‚é…çš„ç»„ä»¶å®ç°ï¼Œä¿æŒç›¸åŒæ¥å£</p>
            </div>
            <div class="case-card">
              <div class="case-icon">ğŸ§ª</div>
              <h3>æµ‹è¯•ç¯å¢ƒéš”ç¦»</h3>
              <p>ç”Ÿäº§ç¯å¢ƒä½¿ç”¨çœŸå®æœåŠ¡ï¼Œæµ‹è¯•ç¯å¢ƒä½¿ç”¨MockæœåŠ¡ï¼Œé€šè¿‡å·¥å‚åˆ‡æ¢</p>
            </div>
            <div class="case-card">
              <div class="case-icon">ğŸ§©</div>
              <h3>æ’ä»¶ç³»ç»Ÿ</h3>
              <p>ä¸ºä¸åŒæ’ä»¶æä¾›å…¼å®¹çš„ç»„ä»¶å®ç°ï¼Œé€šè¿‡æŠ½è±¡å·¥å‚ç®¡ç†æ’ä»¶ç»„ä»¶</p>
            </div>
          </div>
        </div>

        <div class="pros-cons">
          <div class="pros">
            <h2 class="section-title">ä¼˜ç‚¹</h2>
            <ul>
              <li>ç¡®ä¿åŒä¸€å·¥å‚ç”Ÿæˆçš„äº§å“ç›¸äº’å…¼å®¹</li>
              <li>é¿å…å®¢æˆ·ç«¯ä»£ç ä¸å…·ä½“äº§å“ç±»è€¦åˆ</li>
              <li>å•ä¸€èŒè´£åŸåˆ™ï¼šäº§å“åˆ›å»ºä»£ç é›†ä¸­ä¸€å¤„</li>
              <li>å¼€é—­åŸåˆ™ï¼šå¼•å…¥æ–°äº§å“å®¶æ—æ— éœ€ä¿®æ”¹å·²æœ‰ä»£ç </li>
            </ul>
          </div>
          <div class="cons">
            <h2 class="section-title">ç¼ºç‚¹</h2>
            <ul>
              <li>å¢åŠ æ–°"äº§å“ç§ç±»"éœ€è¦ä¿®æ”¹æ‰€æœ‰å·¥å‚æ¥å£</li>
              <li>ä»£ç å¤æ‚åº¦å¢åŠ ï¼Œéœ€è¦åˆ›å»ºå¤šä¸ªç±»å’Œæ¥å£</li>
              <li>å¯èƒ½å¼•å…¥ä¸å¿…è¦çš„æŠ½è±¡å±‚ï¼Œå¯¹äºç®€å•åœºæ™¯å¯èƒ½è¿‡åº¦è®¾è®¡</li>
            </ul>
          </div>
        </div>
      </div>
    </div>

    <footer class="footer">
      <p>æŠ½è±¡å·¥å‚æ¨¡å¼ç‰¹åˆ«é€‚åˆéœ€è¦åˆ›å»º<strong>å¤šç³»åˆ—ç›¸å…³äº§å“</strong>çš„åœºæ™¯ï¼Œå®ƒèƒ½ç¡®ä¿åŒä¸€ç³»åˆ—ä¸­çš„äº§å“ç›¸äº’å…¼å®¹</p>
    </footer>
  </div>
</template>

<script setup lang="ts">
import { ref } from 'vue';

// ç¤ºä¾‹æ•°æ®
const userPrefersDark = ref(false);
</script>

<style lang="less" scoped>
@import url('https://fonts.googleapis.com/css2?family=Noto+Sans+SC:wght@300;400;500;700&display=swap');

.abstract-factory-container {
  max-width: 1200px;
  margin: 0 auto;
  padding: 2rem;
  font-family: 'Noto Sans SC', sans-serif;
  color: #2c3e50;
  background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
  border-radius: 12px;
  box-shadow: 0 10px 30px rgba(0, 0, 0, 0.08);

  .header {
    text-align: center;
    margin-bottom: 2.5rem;
    padding-bottom: 1.5rem;
    border-bottom: 1px solid #eaeaea;

    h1 {
      font-size: 2.5rem;
      font-weight: 700;
      margin-bottom: 0.5rem;
      color: #2c3e50;
      background: linear-gradient(90deg, #3498db, #2c3e50);
      -webkit-background-clip: text;
      background-clip: text;
      color: transparent;
    }

    .subtitle {
      font-size: 1.2rem;
      color: #7f8c8d;
      margin-top: 0;
    }
  }

  .content-wrapper {
    display: grid;
    grid-template-columns: 1fr;
    gap: 2rem;
  }

  .pattern-overview {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 1.5rem;

    @media (max-width: 900px) {
      grid-template-columns: 1fr;
    }
  }

  .overview-card,
  .diagram-card {
    background: white;
    border-radius: 10px;
    padding: 1.5rem;
    box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
    transition: transform 0.3s ease;

    &:hover {
      transform: translateY(-5px);
      box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1);
    }
  }

  .section-title {
    font-size: 1.6rem;
    color: #3498db;
    margin-top: 0;
    margin-bottom: 1.5rem;
    padding-bottom: 0.5rem;
    border-bottom: 2px solid #f0f0f0;
  }

  .concept {
    display: flex;
    gap: 1.5rem;
    margin-bottom: 1.5rem;

    .concept-icon {
      flex-shrink: 0;
      width: 60px;
      height: 60px;
      background: #e3f2fd;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;

      svg {
        width: 32px;
        height: 32px;
        color: #3498db;
      }
    }

    .concept-text {
      p {
        font-size: 1.1rem;
        line-height: 1.7;
        margin: 0 0 1rem 0;

        strong {
          color: #e74c3c;
        }
      }
    }
  }

  .analogy {
    background: #f9f9ff;
    border-left: 4px solid #3498db;
    padding: 1rem 1.5rem;
    border-radius: 0 8px 8px 0;

    h3 {
      margin-top: 0;
      color: #3498db;
    }

    p {
      line-height: 1.6;
      margin-bottom: 0;

      strong {
        color: #e74c3c;
      }
    }
  }

  .uml-diagram {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 1.5rem;

    .uml-class {
      border: 2px solid #ddd;
      border-radius: 6px;
      min-width: 200px;
      overflow: hidden;
      box-shadow: 0 3px 8px rgba(0, 0, 0, 0.1);

      .class-name {
        background: #3498db;
        color: white;
        padding: 0.8rem;
        font-weight: bold;
        text-align: center;
      }

      .methods {
        padding: 1rem;
        background: white;
        font-size: 0.9rem;
        line-height: 1.6;
      }
    }

    .abstract-factory .class-name {
      background: #2c3e50;
    }

    .concrete-factory .class-name {
      background: #3498db;
    }

    .abstract-product .class-name {
      background: #27ae60;
    }

    .concrete-product .class-name {
      background: #e67e22;
    }

    .uml-arrow {
      text-align: center;
      font-size: 1.2rem;
      color: #7f8c8d;
      line-height: 1.2;
    }

    .factory-row,
    .product-row {
      display: flex;
      gap: 2rem;
      justify-content: center;

      @media (max-width: 600px) {
        flex-direction: column;
        align-items: center;
        gap: 1.5rem;
      }
    }
  }

  .pattern-details {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 1.5rem;

    @media (max-width: 900px) {
      grid-template-columns: 1fr;
    }
  }

  .design-principles {
    background: white;
    border-radius: 10px;
    padding: 1.5rem;
    box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);

    .principles-list {
      list-style: none;
      padding: 0;
      margin: 0;

      li {
        display: flex;
        gap: 1rem;
        padding: 1.2rem 0;
        border-bottom: 1px solid #f0f0f0;

        &:last-child {
          border-bottom: none;
        }
      }

      .principle-icon {
        font-size: 1.8rem;
        width: 50px;
        height: 50px;
        background: #f8f9fa;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        flex-shrink: 0;
      }

      h3 {
        margin: 0 0 0.5rem 0;
        color: #2c3e50;
      }

      p {
        margin: 0;
        color: #7f8c8d;
        line-height: 1.6;
      }
    }
  }

  .code-example {
    background: #2c3e50;
    border-radius: 10px;
    padding: 1.5rem;
    color: white;
    box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);

    .example-description {
      margin-bottom: 1.2rem;
      font-size: 1.05rem;
      line-height: 1.6;
    }

    .code-block {
      background: #1e2a38;
      border-radius: 8px;
      padding: 1.2rem;
      overflow-x: auto;
      font-family: 'Fira Code', monospace;
      font-size: 0.95rem;
      line-height: 1.5;
      box-shadow: inset 0 0 10px rgba(0, 0, 0, 0.3);

      code {
        color: #f8f8f2;
        display: block;

        .comment {
          color: #6272a4;
        }

        .keyword {
          color: #ff79c6;
          font-weight: bold;
        }

        .class {
          color: #50fa7b;
        }

        .function {
          color: #f1fa8c;
        }

        .string {
          color: #f1fa8c;
        }

        .number {
          color: #bd93f9;
        }

        .operator {
          color: #ff79c6;
        }
      }
    }
  }

  .pattern-scenarios {
    .use-cases {
      margin-bottom: 1.5rem;
    }

    .case-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
      gap: 1.2rem;
    }

    .case-card {
      background: white;
      border-radius: 8px;
      padding: 1.5rem;
      text-align: center;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
      transition: all 0.3s ease;

      &:hover {
        transform: translateY(-5px);
        box-shadow: 0 8px 20px rgba(0, 0, 0, 0.1);
      }

      .case-icon {
        font-size: 2.5rem;
        margin-bottom: 1rem;
      }

      h3 {
        margin: 0 0 0.8rem 0;
        color: #3498db;
      }

      p {
        margin: 0;
        color: #7f8c8d;
        line-height: 1.6;
      }
    }

    .pros-cons {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 1.5rem;

      @media (max-width: 600px) {
        grid-template-columns: 1fr;
      }

      .pros,
      .cons {
        background: white;
        border-radius: 8px;
        padding: 1.5rem;
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
      }

      .pros {
        border-top: 4px solid #27ae60;
      }

      .cons {
        border-top: 4px solid #e74c3c;
      }

      ul {
        padding-left: 1.2rem;
        margin: 0;

        li {
          margin-bottom: 0.8rem;
          line-height: 1.6;

          &:last-child {
            margin-bottom: 0;
          }
        }
      }
    }
  }

  .footer {
    margin-top: 2.5rem;
    text-align: center;
    padding: 1.5rem;
    font-size: 1.05rem;
    color: #7f8c8d;
    border-top: 1px solid #eaeaea;
    line-height: 1.7;

    strong {
      color: #e74c3c;
    }
  }
}

@media (max-width: 768px) {
  .abstract-factory-container {
    padding: 1rem;

    .header h1 {
      font-size: 2rem;
    }
  }
}
</style>
