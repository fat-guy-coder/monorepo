<template>
  <div class="intercepting-filter-container">
    <header class="pattern-header">
      <div class="header-content">
        <h1>æ‹¦æˆªè¿‡æ»¤å™¨æ¨¡å¼</h1>
        <p class="subtitle">åœ¨è¯·æ±‚å¤„ç†å‰åæ‰§è¡Œé¢„å¤„ç†å’Œåå¤„ç†çš„å¼ºå¤§è®¾è®¡æ¨¡å¼</p>
        <div class="pattern-tags">
          <span class="tag">é¢„å¤„ç†</span>
          <span class="tag">è¿‡æ»¤å™¨é“¾</span>
          <span class="tag">è¯·æ±‚æ‹¦æˆª</span>
          <span class="tag">å“åº”å¤„ç†</span>
        </div>
      </div>
      <div class="pattern-icon">âš¡</div>
    </header>

    <div class="content-navigation">
      <div v-for="(item, index) in navItems" :key="index" class="nav-item" :class="{ active: activeNav === item.id }"
        @click="activeNav = item.id">
        <div class="nav-icon">{{ item.icon }}</div>
        <div class="nav-text">{{ item.title }}</div>
      </div>
    </div>

    <div class="content-section">
      <!-- æ¦‚å¿µéƒ¨åˆ† -->
      <section v-if="activeNav === 'concept'" class="concept-section">
        <div class="pattern-definition">
          <h2>æ‹¦æˆªè¿‡æ»¤å™¨æ¨¡å¼æ¦‚å¿µ</h2>
          <div class="definition-card">
            <p>
              <strong>æ‹¦æˆªè¿‡æ»¤å™¨æ¨¡å¼(Intercepting Filter Pattern)</strong>æ˜¯ä¸€ç§ç»“æ„è®¾è®¡æ¨¡å¼ï¼Œ
              ç”¨äºåœ¨è¯·æ±‚å¤„ç†ä¹‹å‰æˆ–ä¹‹åæ‰§è¡Œé¢„å¤„ç†å’Œåå¤„ç†æ“ä½œã€‚å®ƒå…è®¸å¼€å‘äººå‘˜é€šè¿‡å¯æ’æ‹”çš„è¿‡æ»¤å™¨é“¾æ¥å¤„ç†è¯·æ±‚ï¼Œ
              è€Œæ— éœ€ä¿®æ”¹æ ¸å¿ƒä¸šåŠ¡é€»è¾‘ã€‚
            </p>
            <div class="analogy">
              <h3>ç°å®ä¸–ç•Œç±»æ¯”</h3>
              <div class="analogy-content">
                <div class="analogy-icon">ğŸ›‚</div>
                <p>
                  æƒ³è±¡æœºåœºçš„å®‰æ£€æµç¨‹ï¼šæ—…å®¢ï¼ˆè¯·æ±‚ï¼‰åœ¨ç™»æœºï¼ˆå¤„ç†ï¼‰å‰éœ€è¦ç»è¿‡å¤šä¸ªæ£€æŸ¥ç‚¹ï¼ˆè¿‡æ»¤å™¨ï¼‰ï¼š
                  è¯ä»¶æ£€æŸ¥ã€è¡Œææ‰«æã€èº«ä½“å®‰æ£€ç­‰ã€‚æ¯ä¸ªæ£€æŸ¥ç‚¹ç‹¬ç«‹å·¥ä½œï¼Œå¯éšæ—¶æ·»åŠ æˆ–ç§»é™¤ï¼Œè€Œä¸å½±å“å…¶ä»–ç¯èŠ‚ã€‚
                </p>
              </div>
            </div>
          </div>
        </div>

        <div class="pattern-structure">
          <h2>æ¨¡å¼ç»“æ„</h2>
          <div class="structure-diagram">
            <div class="component">
              <div class="component-header">è¿‡æ»¤å™¨(Filter)</div>
              <div class="component-body">æ‰§è¡Œç‰¹å®šä»»åŠ¡çš„ç‹¬ç«‹ç»„ä»¶</div>
            </div>
            <div class="arrow">â†’</div>
            <div class="component">
              <div class="component-header">è¿‡æ»¤å™¨é“¾(Filter Chain)</div>
              <div class="component-body">ç®¡ç†è¿‡æ»¤å™¨çš„æœ‰åºé›†åˆ</div>
            </div>
            <div class="arrow">â†’</div>
            <div class="component">
              <div class="component-header">è¿‡æ»¤å™¨ç®¡ç†å™¨(Filter Manager)</div>
              <div class="component-body">åˆ›å»ºè¿‡æ»¤å™¨é“¾å¹¶é…ç½®æ‰§è¡Œé¡ºåº</div>
            </div>
            <div class="arrow">â†’</div>
            <div class="component">
              <div class="component-header">ç›®æ ‡(Target)</div>
              <div class="component-body">å®é™…å¤„ç†è¯·æ±‚çš„ä¸šåŠ¡å¯¹è±¡</div>
            </div>
          </div>
        </div>

        <div class="execution-flow">
          <h2>æ‰§è¡Œæµç¨‹</h2>
          <div class="flow-steps">
            <div class="step">
              <div class="step-number">1</div>
              <div class="step-content">
                <h4>å®¢æˆ·ç«¯å‘é€è¯·æ±‚</h4>
                <p>å®¢æˆ·ç«¯å‘è¿‡æ»¤å™¨ç®¡ç†å™¨å‘èµ·è¯·æ±‚</p>
              </div>
            </div>
            <div class="step">
              <div class="step-number">2</div>
              <div class="step-content">
                <h4>é¢„å¤„ç†è¿‡æ»¤å™¨</h4>
                <p>è¿‡æ»¤å™¨é“¾æŒ‰é¡ºåºæ‰§è¡Œé¢„å¤„ç†æ“ä½œ</p>
              </div>
            </div>
            <div class="step">
              <div class="step-number">3</div>
              <div class="step-content">
                <h4>ç›®æ ‡å¤„ç†</h4>
                <p>è¯·æ±‚è¢«ä¼ é€’åˆ°ç›®æ ‡å¯¹è±¡è¿›è¡Œå¤„ç†</p>
              </div>
            </div>
            <div class="step">
              <div class="step-number">4</div>
              <div class="step-content">
                <h4>åå¤„ç†è¿‡æ»¤å™¨</h4>
                <p>è¿‡æ»¤å™¨é“¾æŒ‰é¡ºåºæ‰§è¡Œåå¤„ç†æ“ä½œ</p>
              </div>
            </div>
            <div class="step">
              <div class="step-number">5</div>
              <div class="step-content">
                <h4>è¿”å›å“åº”</h4>
                <p>å¤„ç†åçš„å“åº”è¿”å›ç»™å®¢æˆ·ç«¯</p>
              </div>
            </div>
          </div>
        </div>
      </section>

      <!-- ç¤ºä¾‹ä»£ç éƒ¨åˆ† -->
      <section v-if="activeNav === 'code'" class="code-section">
        <h2>æ‹¦æˆªè¿‡æ»¤å™¨æ¨¡å¼å®ç°</h2>

        <div class="code-tabs">
          <div v-for="(tab, index) in codeTabs" :key="index" class="code-tab"
            :class="{ active: activeCodeTab === tab.id }" @click="activeCodeTab = tab.id">
            {{ tab.title }}
          </div>
        </div>

        <div class="code-content">
          <!-- æ¥å£å®šä¹‰ -->
          <div v-if="activeCodeTab === 'interface'" class="code-example">
            <pre><code>// è¿‡æ»¤å™¨æ¥å£
interface Filter {
  execute(request: string): void;
}

// è¿‡æ»¤å™¨é“¾æ¥å£
interface FilterChain {
  addFilter(filter: Filter): void;
  execute(request: string): void;
}

// ç›®æ ‡æ¥å£
interface Target {
  execute(request: string): void;
}</code></pre>
          </div>

          <!-- å…·ä½“è¿‡æ»¤å™¨ -->
          <div v-if="activeCodeTab === 'filters'" class="code-example">
            <pre><code>// è®¤è¯è¿‡æ»¤å™¨
class AuthenticationFilter implements Filter {
  execute(request: string): void {
    console.log(`Authenticating request: ${request}`);
    // å®é™…è®¤è¯é€»è¾‘...
  }
}

// æ—¥å¿—è®°å½•è¿‡æ»¤å™¨
class LoggingFilter implements Filter {
  execute(request: string): void {
    console.log(`Logging request: ${request}`);
    // å®é™…æ—¥å¿—è®°å½•é€»è¾‘...
  }
}

// æ•°æ®éªŒè¯è¿‡æ»¤å™¨
class ValidationFilter implements Filter {
  execute(request: string): void {
    console.log(`Validating request: ${request}`);
    // å®é™…éªŒè¯é€»è¾‘...
  }
}

// å“åº”å‹ç¼©è¿‡æ»¤å™¨
class CompressionFilter implements Filter {
  execute(request: string): void {
    console.log(`Compressing response for: ${request}`);
    // å®é™…å‹ç¼©é€»è¾‘...
  }
}</code></pre>
          </div>

          <!-- è¿‡æ»¤å™¨é“¾ -->
          <div v-if="activeCodeTab === 'chain'" class="code-example">
            <pre><code>// è¿‡æ»¤å™¨é“¾å®ç°
class AppFilterChain implements FilterChain {
  private filters: Filter[] = [];
  private target: Target;

  constructor(target: Target) {
    this.target = target;
  }

  addFilter(filter: Filter): void {
    this.filters.push(filter);
  }

  execute(request: string): void {
    // æ‰§è¡Œé¢„å¤„ç†è¿‡æ»¤å™¨
    for (const filter of this.filters) {
      filter.execute(request);
    }

    // æ‰§è¡Œç›®æ ‡å¤„ç†
    this.target.execute(request);

    // æ‰§è¡Œåå¤„ç†è¿‡æ»¤å™¨
    for (const filter of this.filters.reverse()) {
      filter.execute(request);
    }
  }
}

// ç›®æ ‡å®ç°
class AppTarget implements Target {
  execute(request: string): void {
    console.log(`Processing request: ${request}`);
    // å®é™…ä¸šåŠ¡é€»è¾‘...
  }
}</code></pre>
          </div>

          <!-- å®¢æˆ·ç«¯ä½¿ç”¨ -->
          <div v-if="activeCodeTab === 'client'" class="code-example">
            <pre><code>// å®¢æˆ·ç«¯ä½¿ç”¨
const target = new AppTarget();
const filterChain = new AppFilterChain(target);

// æ·»åŠ è¿‡æ»¤å™¨
filterChain.addFilter(new AuthenticationFilter());
filterChain.addFilter(new LoggingFilter());
filterChain.addFilter(new ValidationFilter());
filterChain.addFilter(new CompressionFilter());

// æ‰§è¡Œè¯·æ±‚
filterChain.execute("GET /api/data");

// è¾“å‡º:
// Authenticating request: GET /api/data
// Logging request: GET /api/data
// Validating request: GET /api/data
// Processing request: GET /api/data
// Compressing response for: GET /api/data
// Validating request: GET /api/data
// Logging request: GET /api/data
// Authenticating request: GET /api/data</code></pre>
          </div>
        </div>

        <div class="code-explanation">
          <h3>ä»£ç è¯´æ˜</h3>
          <ul>
            <li>
              <strong>è¿‡æ»¤å™¨(Filter)</strong>: ç‹¬ç«‹çš„å¤„ç†å•å…ƒï¼Œæ¯ä¸ªè¿‡æ»¤å™¨è´Ÿè´£å•ä¸€èŒè´£ï¼ˆå¦‚è®¤è¯ã€æ—¥å¿—è®°å½•ï¼‰
            </li>
            <li>
              <strong>è¿‡æ»¤å™¨é“¾(FilterChain)</strong>: ç®¡ç†è¿‡æ»¤å™¨çš„æ‰§è¡Œé¡ºåºï¼Œå¯åŠ¨æ€æ·»åŠ æˆ–ç§»é™¤è¿‡æ»¤å™¨
            </li>
            <li>
              <strong>ç›®æ ‡(Target)</strong>: æ ¸å¿ƒä¸šåŠ¡é€»è¾‘å¤„ç†å™¨ï¼Œåœ¨è¿‡æ»¤å™¨æ‰§è¡Œå‰åè¢«è°ƒç”¨
            </li>
            <li>
              <strong>æ‰§è¡Œæµç¨‹</strong>: è¯·æ±‚ä¾æ¬¡é€šè¿‡é¢„å¤„ç†è¿‡æ»¤å™¨ â†’ ç›®æ ‡å¤„ç† â†’ åå¤„ç†è¿‡æ»¤å™¨
            </li>
          </ul>
        </div>
      </section>

      <!-- ä½¿ç”¨åœºæ™¯éƒ¨åˆ† -->
      <section v-if="activeNav === 'scenarios'" class="scenarios-section">
        <h2>æ‹¦æˆªè¿‡æ»¤å™¨æ¨¡å¼ä½¿ç”¨åœºæ™¯</h2>

        <div class="scenario-cards">
          <div class="scenario-card">
            <div class="scenario-icon">ğŸŒ</div>
            <h3>Webåº”ç”¨ç¨‹åº</h3>
            <p>å¤„ç†HTTPè¯·æ±‚çš„è®¤è¯ã€æ—¥å¿—è®°å½•ã€è¾“å…¥éªŒè¯ç­‰</p>
          </div>

          <div class="scenario-card">
            <div class="scenario-icon">ğŸ”’</div>
            <h3>å®‰å…¨ç³»ç»Ÿ</h3>
            <p>å®ç°å¤šå±‚æ¬¡å®‰å…¨æ£€æŸ¥ï¼ˆIPè¿‡æ»¤ã€æƒé™éªŒè¯ç­‰ï¼‰</p>
          </div>

          <div class="scenario-card">
            <div class="scenario-icon">ğŸ“Š</div>
            <h3>æ•°æ®å¤„ç†ç®¡é“</h3>
            <p>æ•°æ®æ¸…æ´—ã€è½¬æ¢å’ŒéªŒè¯çš„å¤šé˜¶æ®µå¤„ç†</p>
          </div>

          <div class="scenario-card">
            <div class="scenario-icon">ğŸ“±</div>
            <h3>ç§»åŠ¨åº”ç”¨ä¸­é—´ä»¶</h3>
            <p>APIè¯·æ±‚çš„é€šç”¨å¤„ç†ï¼ˆç¼“å­˜ã€é”™è¯¯å¤„ç†ç­‰ï¼‰</p>
          </div>

          <div class="scenario-card">
            <div class="scenario-icon">ğŸ§ª</div>
            <h3>æµ‹è¯•æ¡†æ¶</h3>
            <p>æµ‹è¯•ç”¨ä¾‹çš„å‰ç½®æ¡ä»¶è®¾ç½®å’Œåç½®æ¸…ç†</p>
          </div>

          <div class="scenario-card">
            <div class="scenario-icon">ğŸ›¡ï¸</div>
            <h3>é˜²æ¬ºè¯ˆç³»ç»Ÿ</h3>
            <p>å¤šçº§é£é™©æ£€æŸ¥ï¼ˆè¡Œä¸ºåˆ†æã€é»‘åå•éªŒè¯ç­‰ï¼‰</p>
          </div>
        </div>

        <div class="framework-implementations">
          <h3>æ¡†æ¶ä¸­çš„å®ç°</h3>
          <div class="framework-grid">
            <div class="framework">
              <div class="framework-logo">Spring</div>
              <div class="framework-name">Spring Security Filters</div>
              <p>Servletè¿‡æ»¤å™¨é“¾å¤„ç†HTTPè¯·æ±‚å®‰å…¨</p>
            </div>
            <div class="framework">
              <div class="framework-logo">Express</div>
              <div class="framework-name">Express Middleware</div>
              <p>ä¸­é—´ä»¶é“¾å¤„ç†è¯·æ±‚å’Œå“åº”</p>
            </div>
            <div class="framework">
              <div class="framework-logo">ASP.NET</div>
              <div class="framework-name">Action Filters</div>
              <p>æ§åˆ¶å™¨åŠ¨ä½œçš„é¢„å¤„ç†å’Œåå¤„ç†</p>
            </div>
            <div class="framework">
              <div class="framework-logo">JAX-RS</div>
              <div class="framework-name">Container Filters</div>
              <p>JAX-RSåº”ç”¨çš„è¯·æ±‚/å“åº”æ‹¦æˆªå™¨</p>
            </div>
          </div>
        </div>
      </section>

      <!-- ä¼˜ç¼ºç‚¹éƒ¨åˆ† -->
      <section v-if="activeNav === 'pros-cons'" class="pros-cons-section">
        <h2>æ‹¦æˆªè¿‡æ»¤å™¨æ¨¡å¼ä¼˜ç¼ºç‚¹</h2>

        <div class="comparison">
          <div class="pros">
            <h3>ä¼˜ç‚¹</h3>
            <ul>
              <li>
                <div class="icon">âœ…</div>
                <div>
                  <strong>å…³æ³¨ç‚¹åˆ†ç¦»</strong>
                  <p>æ¯ä¸ªè¿‡æ»¤å™¨åªå¤„ç†å•ä¸€èŒè´£ï¼Œæé«˜ä»£ç å¯ç»´æŠ¤æ€§</p>
                </div>
              </li>
              <li>
                <div class="icon">âœ…</div>
                <div>
                  <strong>çµæ´»æ€§å’Œå¯æ‰©å±•æ€§</strong>
                  <p>å¯åŠ¨æ€æ·»åŠ ã€ç§»é™¤æˆ–é‡æ–°æ’åºè¿‡æ»¤å™¨</p>
                </div>
              </li>
              <li>
                <div class="icon">âœ…</div>
                <div>
                  <strong>å¯é‡ç”¨æ€§</strong>
                  <p>è¿‡æ»¤å™¨å¯åœ¨ä¸åŒåº”ç”¨ä¸­å¤ç”¨</p>
                </div>
              </li>
              <li>
                <div class="icon">âœ…</div>
                <div>
                  <strong>é›†ä¸­ç®¡ç†</strong>
                  <p>ç»Ÿä¸€ç®¡ç†æ¨ªåˆ‡å…³æ³¨ç‚¹ï¼ˆæ—¥å¿—ã€å®‰å…¨ç­‰ï¼‰</p>
                </div>
              </li>
              <li>
                <div class="icon">âœ…</div>
                <div>
                  <strong>éä¾µå…¥å¼è®¾è®¡</strong>
                  <p>æ ¸å¿ƒä¸šåŠ¡é€»è¾‘ä¸å—è¿‡æ»¤å™¨å½±å“</p>
                </div>
              </li>
            </ul>
          </div>

          <div class="cons">
            <h3>ç¼ºç‚¹</h3>
            <ul>
              <li>
                <div class="icon">âš ï¸</div>
                <div>
                  <strong>æ€§èƒ½å¼€é”€</strong>
                  <p>æ¯ä¸ªè¯·æ±‚ç»è¿‡å¤šä¸ªè¿‡æ»¤å™¨å¯èƒ½å¢åŠ å»¶è¿Ÿ</p>
                </div>
              </li>
              <li>
                <div class="icon">âš ï¸</div>
                <div>
                  <strong>è°ƒè¯•å¤æ‚æ€§</strong>
                  <p>è¯·æ±‚ç»è¿‡å¤šä¸ªè¿‡æ»¤å™¨å¢åŠ è°ƒè¯•éš¾åº¦</p>
                </div>
              </li>
              <li>
                <div class="icon">âš ï¸</div>
                <div>
                  <strong>è¿‡åº¦è®¾è®¡é£é™©</strong>
                  <p>ç®€å•åº”ç”¨ä¸­ä½¿ç”¨å¯èƒ½å¢åŠ ä¸å¿…è¦çš„å¤æ‚æ€§</p>
                </div>
              </li>
              <li>
                <div class="icon">âš ï¸</div>
                <div>
                  <strong>ä¾èµ–é¡ºåº</strong>
                  <p>è¿‡æ»¤å™¨æ‰§è¡Œé¡ºåºå¯èƒ½å½±å“ç»“æœ</p>
                </div>
              </li>
              <li>
                <div class="icon">âš ï¸</div>
                <div>
                  <strong>é”™è¯¯å¤„ç†æŒ‘æˆ˜</strong>
                  <p>éœ€è¦ç»Ÿä¸€å¤„ç†è¿‡æ»¤å™¨é“¾ä¸­çš„å¼‚å¸¸</p>
                </div>
              </li>
            </ul>
          </div>
        </div>

        <div class="best-practices">
          <h3>æœ€ä½³å®è·µ</h3>
          <div class="practices-grid">
            <div class="practice">
              <div class="practice-icon">ğŸ“</div>
              <h4>ä¿æŒè¿‡æ»¤å™¨ç®€å•</h4>
              <p>æ¯ä¸ªè¿‡æ»¤å™¨åº”åªè´Ÿè´£å•ä¸€åŠŸèƒ½</p>
            </div>
            <div class="practice">
              <div class="practice-icon">â±ï¸</div>
              <h4>æ€§èƒ½ä¼˜åŒ–</h4>
              <p>é¿å…åœ¨è¿‡æ»¤å™¨ä¸­æ‰§è¡Œè€—æ—¶æ“ä½œ</p>
            </div>
            <div class="practice">
              <div class="practice-icon">ğŸ§ª</div>
              <h4>å•å…ƒæµ‹è¯•</h4>
              <p>ä¸ºæ¯ä¸ªè¿‡æ»¤å™¨ç¼–å†™ç‹¬ç«‹çš„å•å…ƒæµ‹è¯•</p>
            </div>
            <div class="practice">
              <div class="practice-icon">ğŸ“</div>
              <h4>æ–‡æ¡£åŒ–</h4>
              <p>æ˜ç¡®è®°å½•è¿‡æ»¤å™¨çš„åŠŸèƒ½å’Œæ‰§è¡Œé¡ºåº</p>
            </div>
          </div>
        </div>
      </section>
    </div>

    <footer class="pattern-footer">
      <p>æ‹¦æˆªè¿‡æ»¤å™¨æ¨¡å¼æ˜¯å¤„ç†æ¨ªåˆ‡å…³æ³¨ç‚¹çš„å¼ºå¤§å·¥å…·ï¼Œç‰¹åˆ«é€‚ç”¨äºéœ€è¦çµæ´»å¤„ç†æµç¨‹çš„åº”ç”¨åœºæ™¯</p>
      <div class="footer-links">
        <a href="#">æ¨¡å¼è¯¦ç»†æ–‡æ¡£</a>
        <a href="#">Springæ¡†æ¶å®ç°</a>
        <a href="#">Expressä¸­é—´ä»¶æŒ‡å—</a>
        <a href="#">è®¾è®¡æ¨¡å¼å‚è€ƒ</a>
      </div>
    </footer>
  </div>
</template>

<script setup lang="ts">
import { ref } from 'vue';

// å¯¼èˆªé¡¹
const navItems = ref([
  { id: 'concept', title: 'æ¦‚å¿µ', icon: 'ğŸ“š' },
  { id: 'code', title: 'ç¤ºä¾‹ä»£ç ', icon: 'ğŸ’»' },
  { id: 'scenarios', title: 'ä½¿ç”¨åœºæ™¯', icon: 'ğŸ“' },
  { id: 'pros-cons', title: 'ä¼˜ç¼ºç‚¹', icon: 'âš–ï¸' }
]);

// å½“å‰æ¿€æ´»çš„å¯¼èˆªé¡¹
const activeNav = ref('concept');

// ä»£ç æ ‡ç­¾é¡µ
const codeTabs = ref([
  { id: 'interface', title: 'æ¥å£å®šä¹‰' },
  { id: 'filters', title: 'å…·ä½“è¿‡æ»¤å™¨' },
  { id: 'chain', title: 'è¿‡æ»¤å™¨é“¾' },
  { id: 'client', title: 'å®¢æˆ·ç«¯ä½¿ç”¨' }
]);

// å½“å‰æ¿€æ´»çš„ä»£ç æ ‡ç­¾é¡µ
const activeCodeTab = ref('interface');
</script>

<style lang="less" scoped>


// é¢œè‰²å˜é‡
@primary-color: #3498db;
@secondary-color: #2ecc71;
@accent-color: #9b59b6;
@dark-bg: #2c3e50;
@light-bg: #f8f9fa;
@card-bg: #ffffff;
@text-color: #2c3e50;
@border-color: #e0e0e0;
@success-color: #2ecc71;
@warning-color: #f39c12;
@error-color: #e74c3c;

* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

.intercepting-filter-container {
  font-family: 'Roboto', 'Noto Sans SC', sans-serif;
  max-width: 1200px;
  margin: 0 auto;
  padding: 20px;
  color: @text-color;
  background-color: #f8fafc;
  min-height: 100vh;
  line-height: 1.6;

  .pattern-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    background: linear-gradient(135deg, @dark-bg, lighten(@dark-bg, 10%));
    color: white;
    padding: 30px 40px;
    border-radius: 15px;
    margin-bottom: 30px;
    box-shadow: 0 6px 18px rgba(0, 0, 0, 0.15);

    .header-content {
      h1 {
        font-size: 2.8rem;
        margin-bottom: 10px;
        letter-spacing: 0.5px;
      }

      .subtitle {
        font-size: 1.4rem;
        opacity: 0.9;
        margin-bottom: 20px;
        max-width: 700px;
      }

      .pattern-tags {
        display: flex;
        gap: 12px;

        .tag {
          background: fade(white, 15%);
          padding: 6px 15px;
          border-radius: 20px;
          font-size: 0.95rem;
          font-weight: 500;
        }
      }
    }

    .pattern-icon {
      font-size: 5rem;
      opacity: 0.9;
    }
  }

  .content-navigation {
    display: flex;
    justify-content: space-between;
    background: @card-bg;
    border-radius: 15px;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
    margin-bottom: 30px;
    padding: 15px;

    .nav-item {
      flex: 1;
      text-align: center;
      padding: 15px 10px;
      border-radius: 12px;
      cursor: pointer;
      transition: all 0.3s ease;

      &:hover {
        background: fade(@primary-color, 10%);
      }

      &.active {
        background: fade(@primary-color, 15%);
        box-shadow: 0 4px 8px fade(@primary-color, 20%);

        .nav-icon {
          transform: scale(1.2);
          color: @primary-color;
        }

        .nav-text {
          color: @primary-color;
          font-weight: 500;
        }
      }

      .nav-icon {
        font-size: 2rem;
        margin-bottom: 8px;
        transition: all 0.3s ease;
      }

      .nav-text {
        font-size: 1.05rem;
        font-weight: 400;
      }
    }
  }

  .content-section {
    background: @card-bg;
    border-radius: 15px;
    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
    padding: 30px;
    margin-bottom: 30px;

    h2 {
      font-size: 1.8rem;
      color: @dark-bg;
      margin-bottom: 25px;
      padding-bottom: 15px;
      border-bottom: 2px solid @border-color;
    }

    // æ¦‚å¿µéƒ¨åˆ†æ ·å¼
    .concept-section {
      .pattern-definition {
        margin-bottom: 40px;

        .definition-card {
          background: @light-bg;
          padding: 25px;
          border-radius: 10px;
          line-height: 1.7;
          font-size: 1.1rem;

          p {
            margin-bottom: 20px;
          }
        }

        .analogy {
          background: fade(@accent-color, 8%);
          border-radius: 10px;
          padding: 20px;
          margin-top: 25px;
          border-left: 4px solid @accent-color;

          h3 {
            color: @accent-color;
            margin-bottom: 15px;
            font-size: 1.3rem;
          }

          .analogy-content {
            display: flex;
            gap: 20px;
            align-items: center;

            .analogy-icon {
              font-size: 2.5rem;
              flex-shrink: 0;
            }

            p {
              line-height: 1.8;
            }
          }
        }
      }

      .pattern-structure {
        margin-bottom: 40px;

        .structure-diagram {
          display: flex;
          justify-content: space-between;
          align-items: center;
          flex-wrap: wrap;
          gap: 15px;
          margin-top: 20px;

          .component {
            flex: 1;
            min-width: 200px;
            background: fade(@primary-color, 10%);
            border: 1px solid fade(@primary-color, 30%);
            border-radius: 8px;
            padding: 20px;
            text-align: center;

            .component-header {
              font-weight: bold;
              margin-bottom: 10px;
              color: @primary-color;
              font-size: 1.2rem;
            }

            .component-body {
              font-size: 1rem;
              color: lighten(@text-color, 20%);
            }
          }

          .arrow {
            font-size: 1.8rem;
            color: @primary-color;
            padding: 0 10px;
            flex-shrink: 0;
          }
        }
      }

      .execution-flow {
        .flow-steps {
          display: grid;
          grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
          gap: 20px;

          .step {
            display: flex;
            gap: 15px;
            background: @light-bg;
            border-radius: 12px;
            padding: 20px;
            align-items: flex-start;
            border-left: 4px solid @primary-color;

            .step-number {
              width: 32px;
              height: 32px;
              background: @primary-color;
              color: white;
              border-radius: 50%;
              display: flex;
              align-items: center;
              justify-content: center;
              font-weight: bold;
              flex-shrink: 0;
              margin-top: 3px;
            }

            .step-content {
              flex: 1;

              h4 {
                font-size: 1.2rem;
                margin-bottom: 8px;
                color: @dark-bg;
              }

              p {
                color: lighten(@text-color, 15%);
              }
            }
          }
        }
      }
    }

    // ä»£ç ç¤ºä¾‹éƒ¨åˆ†æ ·å¼
    .code-section {
      .code-tabs {
        display: flex;
        background: @dark-bg;
        border-radius: 8px 8px 0 0;
        overflow: hidden;
        margin-bottom: -1px;

        .code-tab {
          padding: 15px 25px;
          color: #aaa;
          cursor: pointer;
          transition: all 0.3s ease;
          font-weight: 500;

          &:hover {
            color: white;
            background: lighten(@dark-bg, 10%);
          }

          &.active {
            color: white;
            background: @primary-color;
          }
        }
      }

      .code-content {
        background: #2d2d2d;
        color: #f8f8f2;
        border-radius: 0 0 8px 8px;
        padding: 20px;
        overflow-x: auto;

        .code-example {
          pre {
            margin: 0;
            font-family: 'Fira Code', 'Consolas', monospace;
            font-size: 0.95rem;
            line-height: 1.5;

            code {
              display: block;

              // ç®€å•çš„è¯­æ³•é«˜äº®
              .comment {
                color: #6a9955;
              }

              .keyword {
                color: #c586c0;
              }

              .class {
                color: #4ec9b0;
              }

              .function {
                color: #dcdcaa;
              }

              .string {
                color: #ce9178;
              }
            }
          }
        }
      }

      .code-explanation {
        margin-top: 30px;
        background: fade(@primary-color, 8%);
        border-radius: 10px;
        padding: 25px;
        border-left: 4px solid @primary-color;

        h3 {
          margin-bottom: 15px;
          color: @primary-color;
        }

        ul {
          list-style: none;

          li {
            margin-bottom: 15px;
            padding-bottom: 15px;
            border-bottom: 1px solid fade(@border-color, 30%);

            strong {
              color: @primary-color;
              display: inline-block;
              margin-bottom: 5px;
            }
          }
        }
      }
    }

    // ä½¿ç”¨åœºæ™¯éƒ¨åˆ†æ ·å¼
    .scenarios-section {
      .scenario-cards {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
        gap: 25px;
        margin-bottom: 40px;

        .scenario-card {
          background: @light-bg;
          border-radius: 12px;
          padding: 25px;
          text-align: center;
          transition: transform 0.3s ease;
          border-top: 4px solid @primary-color;

          &:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.1);
          }

          .scenario-icon {
            font-size: 3rem;
            margin-bottom: 15px;
          }

          h3 {
            font-size: 1.3rem;
            margin-bottom: 12px;
            color: @dark-bg;
          }

          p {
            color: lighten(@text-color, 20%);
            line-height: 1.6;
          }
        }
      }

      .framework-implementations {
        .framework-grid {
          display: grid;
          grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
          gap: 25px;

          .framework {
            background: @light-bg;
            border-radius: 12px;
            padding: 25px;
            text-align: center;
            border-top: 4px solid @secondary-color;

            .framework-logo {
              font-size: 2rem;
              font-weight: bold;
              margin-bottom: 15px;
              color: @primary-color;
            }

            .framework-name {
              font-size: 1.2rem;
              margin-bottom: 10px;
              color: @dark-bg;
            }

            p {
              color: lighten(@text-color, 20%);
              line-height: 1.6;
            }
          }
        }
      }
    }

    // ä¼˜ç¼ºç‚¹éƒ¨åˆ†æ ·å¼
    .pros-cons-section {
      .comparison {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
        gap: 30px;
        margin-bottom: 40px;

        .pros,
        .cons {
          padding: 20px;
          border-radius: 12px;
        }

        .pros {
          background: fade(@success-color, 10%);
          border-left: 4px solid @success-color;
        }

        .cons {
          background: fade(@warning-color, 10%);
          border-left: 4px solid @warning-color;
        }

        h3 {
          font-size: 1.4rem;
          margin-bottom: 20px;
          padding-bottom: 10px;
          border-bottom: 1px solid fade(@border-color, 50%);
        }

        ul {
          list-style: none;

          li {
            display: flex;
            gap: 15px;
            margin-bottom: 20px;
            padding-bottom: 20px;
            border-bottom: 1px solid fade(@border-color, 30%);

            .icon {
              font-size: 1.5rem;
              flex-shrink: 0;
              margin-top: 3px;
            }

            div {
              flex: 1;

              strong {
                display: block;
                margin-bottom: 5px;
                font-size: 1.1rem;
              }

              p {
                color: lighten(@text-color, 20%);
                line-height: 1.6;
              }
            }
          }
        }
      }

      .best-practices {
        .practices-grid {
          display: grid;
          grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
          gap: 25px;

          .practice {
            background: @light-bg;
            border-radius: 12px;
            padding: 25px;
            text-align: center;
            border-top: 4px solid @accent-color;

            .practice-icon {
              font-size: 2.5rem;
              margin-bottom: 15px;
            }

            h4 {
              font-size: 1.2rem;
              margin-bottom: 10px;
              color: @dark-bg;
            }

            p {
              color: lighten(@text-color, 20%);
              line-height: 1.6;
            }
          }
        }
      }
    }
  }

  .pattern-footer {
    text-align: center;
    padding: 30px;
    background: @light-bg;
    border-radius: 15px;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);

    p {
      font-size: 1.2rem;
      margin-bottom: 20px;
      color: @dark-bg;
    }

    .footer-links {
      display: flex;
      justify-content: center;
      gap: 25px;
      flex-wrap: wrap;

      a {
        color: @primary-color;
        text-decoration: none;
        font-weight: 500;
        transition: color 0.3s ease;

        &:hover {
          color: darken(@primary-color, 15%);
          text-decoration: underline;
        }
      }
    }
  }
}

// å“åº”å¼è®¾è®¡
@media (max-width: 768px) {
  .pattern-header {
    flex-direction: column;
    text-align: center;
    padding: 20px !important;

    .header-content {
      margin-bottom: 20px;
    }
  }

  .content-navigation {
    flex-wrap: wrap;

    .nav-item {
      flex: 1 0 120px;
      margin-bottom: 10px;
    }
  }

  .structure-diagram {
    flex-direction: column;

    .arrow {
      transform: rotate(90deg);
      padding: 15px 0 !important;
    }
  }
}
</style>
