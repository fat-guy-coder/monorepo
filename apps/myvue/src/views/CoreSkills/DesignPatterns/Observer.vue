<template>
  <div class="observer-pattern-container">
    <div class="pattern-header">
      <div class="header-content">
        <h1>è§‚å¯Ÿè€…æ¨¡å¼ (Observer Pattern)</h1>
        <p class="subtitle">å¯¹è±¡é—´çš„ä¸€å¯¹å¤šä¾èµ–å…³ç³»è®¾è®¡æ¨¡å¼</p>
        <div class="pattern-icon">
          <div class="subject-icon">ğŸ“¡</div>
          <div class="connection">
            <div class="connection-line"></div>
            <div class="connection-line"></div>
            <div class="connection-line"></div>
          </div>
          <div class="observer-icon">ğŸ‘ï¸</div>
        </div>
      </div>
    </div>

    <div class="pattern-tabs">
      <button v-for="tab in tabs" :key="tab.id" :class="{ active: activeTab === tab.id }" @click="activeTab = tab.id"
        class="tab-button">
        <span class="tab-icon">{{ tab.icon }}</span>
        {{ tab.title }}
      </button>
    </div>

    <div class="pattern-content">
      <!-- æ¦‚å¿µä»‹ç» -->
      <section v-if="activeTab === 'concept'" class="content-section">
        <div class="concept-card">
          <div class="concept-icon">ğŸ’¡</div>
          <div class="concept-text">
            <h2>è§‚å¯Ÿè€…æ¨¡å¼æ¦‚å¿µ</h2>
            <p>
              <strong>è§‚å¯Ÿè€…æ¨¡å¼</strong>æ˜¯ä¸€ç§è¡Œä¸ºè®¾è®¡æ¨¡å¼ï¼Œå®ƒå®šä¹‰å¯¹è±¡é—´çš„ä¸€ç§ä¸€å¯¹å¤šçš„ä¾èµ–å…³ç³»ï¼Œ
              å½“ä¸€ä¸ªå¯¹è±¡çš„çŠ¶æ€å‘ç”Ÿæ”¹å˜æ—¶ï¼Œæ‰€æœ‰ä¾èµ–äºå®ƒçš„å¯¹è±¡éƒ½å¾—åˆ°é€šçŸ¥å¹¶è¢«è‡ªåŠ¨æ›´æ–°ã€‚
            </p>
          </div>
        </div>

        <div class="analogy">
          <h3>ç°å®ç”Ÿæ´»ä¸­çš„ç±»æ¯”</h3>
          <div class="analogy-content">
            <div class="analogy-example">
              <div class="analogy-icon">ğŸ“°</div>
              <h4>æŠ¥çº¸è®¢é˜…</h4>
              <p>æŠ¥ç¤¾ï¼ˆä¸»é¢˜ï¼‰å‘è®¢é˜…è€…ï¼ˆè§‚å¯Ÿè€…ï¼‰å‘é€æŠ¥çº¸ï¼Œå½“æœ‰æ–°æŠ¥çº¸å‡ºç‰ˆæ—¶ï¼Œæ‰€æœ‰è®¢é˜…è€…éƒ½ä¼šæ”¶åˆ°é€šçŸ¥</p>
            </div>
            <div class="analogy-example">
              <div class="analogy-icon">ğŸ””</div>
              <h4>ç¤¾äº¤åª’ä½“é€šçŸ¥</h4>
              <p>ä½ å…³æ³¨çš„äººï¼ˆä¸»é¢˜ï¼‰å‘å¸ƒæ–°å†…å®¹æ—¶ï¼Œæ‰€æœ‰å…³æ³¨è€…ï¼ˆè§‚å¯Ÿè€…ï¼‰éƒ½ä¼šæ”¶åˆ°é€šçŸ¥</p>
            </div>
          </div>
        </div>

        <div class="pattern-structure">
          <h3>æ¨¡å¼ç»“æ„</h3>
          <div class="structure-diagram">
            <div class="subject">
              <div class="class-header">Subject</div>
              <div class="class-methods">
                <div>+ attach(observer)</div>
                <div>+ detach(observer)</div>
                <div>+ notify()</div>
              </div>
            </div>

            <div class="observer">
              <div class="class-header">Observer</div>
              <div class="class-methods">
                <div>+ update()</div>
              </div>
            </div>

            <div class="concrete-subject">
              <div class="class-header">ConcreteSubject</div>
              <div class="class-methods">
                <div>+ state</div>
                <div>+ getState()</div>
                <div>+ setState()</div>
              </div>
            </div>

            <div class="concrete-observer">
              <div class="class-header">ConcreteObserver</div>
              <div class="class-methods">
                <div>+ update()</div>
              </div>
            </div>

            <div class="relation-arrow subject-to-observer"></div>
            <div class="relation-arrow concrete-to-subject"></div>
            <div class="relation-arrow concrete-to-observer"></div>
          </div>
        </div>
      </section>

      <!-- è®¾è®¡æ€è·¯ -->
      <section v-if="activeTab === 'design'" class="content-section">
        <h2>è®¾è®¡æ€è·¯ä¸å®ç°</h2>

        <div class="implementation-steps">
          <div class="step">
            <div class="step-number">1</div>
            <div class="step-content">
              <h3>å®šä¹‰ä¸»é¢˜æ¥å£</h3>
              <p>åˆ›å»ºSubjectæ¥å£ï¼Œå£°æ˜æ·»åŠ ã€åˆ é™¤å’Œé€šçŸ¥è§‚å¯Ÿè€…çš„æ–¹æ³•</p>
              <div class="code-block">
                <pre><code>interface Subject {
  attach(observer: Observer): void;
  detach(observer: Observer): void;
  notify(): void;
}</code></pre>
              </div>
            </div>
          </div>

          <div class="step">
            <div class="step-number">2</div>
            <div class="step-content">
              <h3>å®šä¹‰è§‚å¯Ÿè€…æ¥å£</h3>
              <p>åˆ›å»ºObserveræ¥å£ï¼Œå£°æ˜æ¥æ”¶æ›´æ–°çš„æ–¹æ³•</p>
              <div class="code-block">
                <pre><code>interface Observer {
  update(subject: Subject): void;
}</code></pre>
              </div>
            </div>
          </div>

          <div class="step">
            <div class="step-number">3</div>
            <div class="step-content">
              <h3>å®ç°å…·ä½“ä¸»é¢˜</h3>
              <p>åˆ›å»ºå…·ä½“ä¸»é¢˜ç±»ï¼Œç»´æŠ¤è§‚å¯Ÿè€…åˆ—è¡¨å’ŒçŠ¶æ€</p>
              <div class="code-block">
                <pre><code>class ConcreteSubject implements Subject {
  private observers: Observer[] = [];
  private state: number = 0;

  attach(observer: Observer): void {
    if (!this.observers.includes(observer)) {
      this.observers.push(observer);
    }
  }

  detach(observer: Observer): void {
    const index = this.observers.indexOf(observer);
    if (index !== -1) {
      this.observers.splice(index, 1);
    }
  }

  notify(): void {
    for (const observer of this.observers) {
      observer.update(this);
    }
  }

  setState(state: number): void {
    this.state = state;
    this.notify();
  }

  getState(): number {
    return this.state;
  }
}</code></pre>
              </div>
            </div>
          </div>

          <div class="step">
            <div class="step-number">4</div>
            <div class="step-content">
              <h3>å®ç°å…·ä½“è§‚å¯Ÿè€…</h3>
              <p>åˆ›å»ºå…·ä½“è§‚å¯Ÿè€…ç±»ï¼Œå®ç°æ›´æ–°é€»è¾‘</p>
              <div class="code-block">
                <pre><code>class ConcreteObserver implements Observer {
  private name: string;

  constructor(name: string) {
    this.name = name;
  }

  update(subject: Subject): void {
    if (subject instanceof ConcreteSubject) {
      console.log(`è§‚å¯Ÿè€…${this.name}: ä¸»é¢˜çŠ¶æ€å·²æ›´æ–°ä¸º ${subject.getState()}`);
    }
  }
}</code></pre>
              </div>
            </div>
          </div>

          <div class="step">
            <div class="step-number">5</div>
            <div class="step-content">
              <h3>ä½¿ç”¨æ¨¡å¼</h3>
              <p>å®¢æˆ·ç«¯ä»£ç åˆ›å»ºä¸»é¢˜å’Œè§‚å¯Ÿè€…ï¼Œå¹¶å»ºç«‹è®¢é˜…å…³ç³»</p>
              <div class="code-block">
                <pre><code>// åˆ›å»ºä¸»é¢˜
const subject = new ConcreteSubject();

// åˆ›å»ºè§‚å¯Ÿè€…
const observer1 = new ConcreteObserver("A");
const observer2 = new ConcreteObserver("B");

// è®¢é˜…ä¸»é¢˜
subject.attach(observer1);
subject.attach(observer2);

// æ›´æ–°ä¸»é¢˜çŠ¶æ€
subject.setState(10);
// è¾“å‡º:
// è§‚å¯Ÿè€…A: ä¸»é¢˜çŠ¶æ€å·²æ›´æ–°ä¸º 10
// è§‚å¯Ÿè€…B: ä¸»é¢˜çŠ¶æ€å·²æ›´æ–°ä¸º 10

// å–æ¶ˆè®¢é˜…
subject.detach(observer2);

subject.setState(20);
// è¾“å‡º:
// è§‚å¯Ÿè€…A: ä¸»é¢˜çŠ¶æ€å·²æ›´æ–°ä¸º 20</code></pre>
              </div>
            </div>
          </div>
        </div>
      </section>

      <!-- ä½¿ç”¨åœºæ™¯ -->
      <section v-if="activeTab === 'usage'" class="content-section">
        <h2>ä½¿ç”¨åœºæ™¯</h2>

        <div class="usage-scenarios">
          <div class="scenario-card">
            <div class="scenario-icon">ğŸ“±</div>
            <h3>GUI äº‹ä»¶å¤„ç†</h3>
            <p>UIç»„ä»¶ä½œä¸ºä¸»é¢˜ï¼Œäº‹ä»¶ç›‘å¬å™¨ä½œä¸ºè§‚å¯Ÿè€…</p>
            <div class="example">
              <pre><code>button.addEventListener('click', () => {
  console.log('æŒ‰é’®è¢«ç‚¹å‡»');
});</code></pre>
            </div>
          </div>

          <div class="scenario-card">
            <div class="scenario-icon">ğŸ“Š</div>
            <h3>æ•°æ®ç›‘æ§ç³»ç»Ÿ</h3>
            <p>æ•°æ®æºä½œä¸ºä¸»é¢˜ï¼Œç›‘æ§é¢æ¿ä½œä¸ºè§‚å¯Ÿè€…</p>
            <div class="example">
              <pre><code>stockPrice.attach(stockChart);
stockPrice.attach(priceAlert);
stockPrice.setPrice(150.25);</code></pre>
            </div>
          </div>

          <div class="scenario-card">
            <div class="scenario-icon">ğŸ“¡</div>
            <h3>å‘å¸ƒ-è®¢é˜…ç³»ç»Ÿ</h3>
            <p>æ¶ˆæ¯ä»£ç†ä½œä¸ºä¸»é¢˜ï¼Œè®¢é˜…è€…ä½œä¸ºè§‚å¯Ÿè€…</p>
            <div class="example">
              <pre><code>messageBroker.subscribe('news', emailService);
messageBroker.subscribe('news', smsService);
messageBroker.publish('news', 'é‡å¤§æ–°é—»...');</code></pre>
            </div>
          </div>

          <div class="scenario-card">
            <div class="scenario-icon">ğŸ”„</div>
            <h3>çŠ¶æ€ç®¡ç†</h3>
            <p>åº”ç”¨çŠ¶æ€ä½œä¸ºä¸»é¢˜ï¼ŒUIç»„ä»¶ä½œä¸ºè§‚å¯Ÿè€…</p>
            <div class="example">
              <pre><code>// Vueå“åº”å¼ç³»ç»Ÿ
const state = reactive({ count: 0 });
watchEffect(() => {
  console.log('countå˜åŒ–:', state.count);
});
state.count++;</code></pre>
            </div>
          </div>

          <div class="scenario-card">
            <div class="scenario-icon">ğŸ®</div>
            <h3>æ¸¸æˆå¼€å‘</h3>
            <p>æ¸¸æˆå®ä½“ä½œä¸ºä¸»é¢˜ï¼ŒAIç³»ç»Ÿä½œä¸ºè§‚å¯Ÿè€…</p>
            <div class="example">
              <pre><code>player.attach(achievementSystem);
player.attach(enemyAI);
player.setPosition(newPosition);</code></pre>
            </div>
          </div>

          <div class="scenario-card">
            <div class="scenario-icon">ğŸ›’</div>
            <h3>ç”µå­å•†åŠ¡</h3>
            <p>å•†å“åº“å­˜ä½œä¸ºä¸»é¢˜ï¼Œç”¨æˆ·é€šçŸ¥ä½œä¸ºè§‚å¯Ÿè€…</p>
            <div class="example">
              <pre><code>product.attach(user1);
product.attach(user2);
product.setInStock(true);</code></pre>
            </div>
          </div>
        </div>
      </section>

      <!-- ä¼˜ç¼ºç‚¹ -->
      <section v-if="activeTab === 'pros-cons'" class="content-section">
        <h2>ä¼˜ç‚¹ä¸ç¼ºç‚¹</h2>

        <div class="pros-cons-container">
          <div class="pros">
            <h3><span class="icon">âœ…</span> ä¼˜ç‚¹</h3>
            <ul>
              <li v-for="(pro, index) in pros" :key="index">
                <div class="pros-icon">âœ“</div>
                <div>
                  <strong>{{ pro.title }}</strong>
                  <p>{{ pro.description }}</p>
                </div>
              </li>
            </ul>
          </div>

          <div class="cons">
            <h3><span class="icon">âš ï¸</span> ç¼ºç‚¹</h3>
            <ul>
              <li v-for="(con, index) in cons" :key="index">
                <div class="cons-icon">âœ—</div>
                <div>
                  <strong>{{ con.title }}</strong>
                  <p>{{ con.description }}</p>
                </div>
              </li>
            </ul>
          </div>
        </div>

        <div class="comparison">
          <h3>ä¸å…¶ä»–æ¨¡å¼çš„å…³ç³»</h3>
          <div class="comparison-table">
            <table>
              <thead>
                <tr>
                  <th>æ¨¡å¼</th>
                  <th>å…³ç³»</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td>å‘å¸ƒ-è®¢é˜…æ¨¡å¼</td>
                  <td>è§‚å¯Ÿè€…æ¨¡å¼çš„å˜ä½“ï¼Œé€šè¿‡æ¶ˆæ¯ä»£ç†è§£è€¦ä¸»é¢˜å’Œè§‚å¯Ÿè€…</td>
                </tr>
                <tr>
                  <td>ä¸­ä»‹è€…æ¨¡å¼</td>
                  <td>ä¸­ä»‹è€…æ¨¡å¼ä½¿ç”¨è§‚å¯Ÿè€…æ¨¡å¼è¿›è¡Œç»„ä»¶é—´é€šä¿¡</td>
                </tr>
                <tr>
                  <td>è´£ä»»é“¾æ¨¡å¼</td>
                  <td>è§‚å¯Ÿè€…æ¨¡å¼å¯ä»¥çœ‹ä½œæ˜¯è´£ä»»é“¾æ¨¡å¼çš„æ›¿ä»£æ–¹æ¡ˆ</td>
                </tr>
                <tr>
                  <td>å‘½ä»¤æ¨¡å¼</td>
                  <td>å‘½ä»¤æ¨¡å¼å¯ä»¥ä½œä¸ºè§‚å¯Ÿè€…æ¨¡å¼ä¸­çš„è§‚å¯Ÿè€…</td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
      </section>

      <!-- å®é™…åº”ç”¨ -->
      <section v-if="activeTab === 'implementation'" class="content-section">
        <h2>åœ¨Vueä¸­çš„å®é™…åº”ç”¨</h2>

        <div class="vue-implementation">
          <div class="vue-example">
            <h3>Vueçš„å“åº”å¼ç³»ç»Ÿ</h3>
            <p>Vueçš„å“åº”å¼ç³»ç»Ÿæœ¬è´¨ä¸Šæ˜¯è§‚å¯Ÿè€…æ¨¡å¼çš„å®ç°</p>
            <div class="code-block">
              <pre><code>// Vue 3 Composition API
import { ref, watchEffect } from 'vue';

// ä¸»é¢˜ - å“åº”å¼æ•°æ®
const count = ref(0);

// è§‚å¯Ÿè€… - å‰¯ä½œç”¨å‡½æ•°
watchEffect(() => {
  console.log(`è®¡æ•°å€¼: ${count.value}`);
});

// æ›´æ–°ä¸»é¢˜çŠ¶æ€
count.value = 10;
// è¾“å‡º: è®¡æ•°å€¼: 10</code></pre>
            </div>
          </div>

          <div class="vue-example">
            <h3>è‡ªå®šä¹‰äº‹ä»¶ç³»ç»Ÿ</h3>
            <p>Vueç»„ä»¶çš„äº‹ä»¶ç³»ç»Ÿä¹Ÿæ˜¯è§‚å¯Ÿè€…æ¨¡å¼çš„åº”ç”¨</p>
            <div class="code-block">
              <pre><code>// çˆ¶ç»„ä»¶
&lt;template&gt;
  &lt;ChildComponent @custom-event="handleEvent" /&gt;
&lt;/template&gt;

&lt;script setup&gt;
const handleEvent = (data) => {
  console.log('æ”¶åˆ°äº‹ä»¶:', data);
};
&lt;/script&gt;

// å­ç»„ä»¶
&lt;script setup&gt;
const emit = defineEmits(['custom-event']);

const triggerEvent = () => {
  emit('custom-event', { message: 'Hello' });
};
&lt;/script&gt;</code></pre>
            </div>
          </div>

          <div class="vue-example">
            <h3>å®ç°è‡ªå®šä¹‰è§‚å¯Ÿè€…æ¨¡å¼</h3>
            <p>åœ¨Vueåº”ç”¨ä¸­å®ç°è‡ªå®šä¹‰è§‚å¯Ÿè€…æ¨¡å¼</p>
            <div class="code-block">
              <pre><code>// ä¸»é¢˜ç±»
class Subject {
  private observers: Function[] = [];

  attach(observer: Function) {
    this.observers.push(observer);
  }

  detach(observer: Function) {
    const index = this.observers.indexOf(observer);
    if (index > -1) {
      this.observers.splice(index, 1);
    }
  }

  notify(data?: any) {
    this.observers.forEach(observer => observer(data));
  }
}

// åœ¨Vueç»„ä»¶ä¸­ä½¿ç”¨
import { ref, onMounted, onUnmounted } from 'vue';

// åˆ›å»ºä¸»é¢˜å®ä¾‹
const notificationSubject = new Subject();

// ç»„ä»¶A - æ·»åŠ è§‚å¯Ÿè€…
onMounted(() => {
  notificationSubject.attach(handleNotification);
});

onUnmounted(() => {
  notificationSubject.detach(handleNotification);
});

const handleNotification = (message) => {
  console.log('æ”¶åˆ°é€šçŸ¥:', message);
};

// ç»„ä»¶B - å‘é€é€šçŸ¥
const sendNotification = () => {
  notificationSubject.notify('æ–°æ¶ˆæ¯!');
};</code></pre>
            </div>
          </div>
        </div>
      </section>
    </div>
  </div>
</template>

<script setup lang="ts">
import { ref } from 'vue';

const tabs: { id: string; title: string; icon: string }[] = [
  { id: 'concept', title: 'æ¦‚å¿µä»‹ç»', icon: 'ğŸ“š' },
  { id: 'design', title: 'è®¾è®¡æ€è·¯', icon: 'ğŸ§©' },
  { id: 'usage', title: 'ä½¿ç”¨åœºæ™¯', icon: 'ğŸš€' },
  { id: 'pros-cons', title: 'ä¼˜ç¼ºç‚¹', icon: 'âš–ï¸' },
  { id: 'implementation', title: 'å®é™…åº”ç”¨', icon: 'ğŸ’»' }
];

const activeTab = ref('concept');

const pros = [
  {
    title: "æ¾è€¦åˆ",
    description: "ä¸»é¢˜å’Œè§‚å¯Ÿè€…ä¹‹é—´æ˜¯æ¾è€¦åˆçš„ï¼Œä¸»é¢˜ä¸éœ€è¦çŸ¥é“è§‚å¯Ÿè€…çš„å…·ä½“å®ç°"
  },
  {
    title: "åŠ¨æ€å…³ç³»",
    description: "å¯ä»¥åœ¨è¿è¡Œæ—¶åŠ¨æ€æ·»åŠ æˆ–åˆ é™¤è§‚å¯Ÿè€…"
  },
  {
    title: "å¹¿æ’­é€šä¿¡",
    description: "æ”¯æŒä¸€å¯¹å¤šçš„å¹¿æ’­é€šä¿¡ï¼Œä¸»é¢˜çŠ¶æ€å˜åŒ–è‡ªåŠ¨é€šçŸ¥æ‰€æœ‰è§‚å¯Ÿè€…"
  },
  {
    title: "å¼€é—­åŸåˆ™",
    description: "å¯ä»¥å¼•å…¥æ–°çš„è§‚å¯Ÿè€…è€Œä¸ä¿®æ”¹ä¸»é¢˜ä»£ç "
  }
];

const cons = [
  {
    title: "æ„å¤–æ›´æ–°",
    description: "è§‚å¯Ÿè€…ä¹‹é—´ä¾èµ–å…³ç³»ä¸æ˜ç¡®ï¼Œå¯èƒ½å¯¼è‡´çº§è”æ›´æ–°"
  },
  {
    title: "æ€§èƒ½é—®é¢˜",
    description: "è§‚å¯Ÿè€…è¿‡å¤šæ—¶ï¼Œé€šçŸ¥æ‰€æœ‰è§‚å¯Ÿè€…å¯èƒ½é€ æˆæ€§èƒ½é—®é¢˜"
  },
  {
    title: "æ›´æ–°é¡ºåº",
    description: "è§‚å¯Ÿè€…æ”¶åˆ°é€šçŸ¥çš„é¡ºåºå¯èƒ½ä¸ç¡®å®š"
  },
  {
    title: "è°ƒè¯•å›°éš¾",
    description: "é—´æ¥é€šä¿¡å¯èƒ½å¯¼è‡´è°ƒè¯•å›°éš¾"
  }
];
</script>

<style lang="less" scoped>


.observer-pattern-container {
  font-family: 'Noto Sans SC', sans-serif;
  max-width: 1200px;
  margin: 0 auto;
  background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
  border-radius: 12px;
  box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
  overflow: hidden;
  color: #2c3e50;
}

.pattern-header {
  background: linear-gradient(135deg, #0d324d 0%, #7f5a83 100%);
  color: white;
  text-align: center;
  padding: 3rem 1rem;
  position: relative;

  &::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100" preserveAspectRatio="none"><path d="M0,0 L100,100 L0,100 Z" fill="rgba(255,255,255,0.1)"/></svg>');
    background-size: cover;
    opacity: 0.2;
  }
}

.header-content {
  position: relative;
  z-index: 1;

  h1 {
    font-size: 2.8rem;
    font-weight: 700;
    margin-bottom: 0.8rem;
    text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
  }

  .subtitle {
    font-size: 1.3rem;
    opacity: 0.9;
    font-weight: 300;
    max-width: 800px;
    margin: 0 auto 1.5rem;
  }
}

.pattern-icon {
  display: flex;
  justify-content: center;
  align-items: center;
  gap: 1.5rem;
  margin-top: 2rem;

  .subject-icon,
  .observer-icon {
    font-size: 3.5rem;
    background: rgba(255, 255, 255, 0.15);
    border-radius: 50%;
    width: 90px;
    height: 90px;
    display: flex;
    align-items: center;
    justify-content: center;
    animation: pulse 2s infinite;
  }

  .connection {
    display: flex;
    flex-direction: column;
    gap: 0.5rem;

    .connection-line {
      width: 120px;
      height: 2px;
      background: rgba(255, 255, 255, 0.6);
      position: relative;

      &::after {
        content: '';
        position: absolute;
        top: -3px;
        right: 0;
        width: 8px;
        height: 8px;
        background: white;
        border-radius: 50%;
        animation: moveDot 2s infinite linear;
      }

      &:nth-child(1)::after {
        animation-delay: 0s;
      }

      &:nth-child(2)::after {
        animation-delay: 0.4s;
      }

      &:nth-child(3)::after {
        animation-delay: 0.8s;
      }
    }
  }
}

.pattern-tabs {
  display: flex;
  justify-content: center;
  background: #2c3e50;
  padding: 0;
}

.tab-button {
  background: transparent;
  border: none;
  color: rgba(255, 255, 255, 0.7);
  font-size: 1.1rem;
  padding: 18px 25px;
  cursor: pointer;
  transition: all 0.3s ease;
  position: relative;
  display: flex;
  align-items: center;
  gap: 10px;

  &:hover {
    color: white;
    background: rgba(255, 255, 255, 0.1);
  }

  &.active {
    color: white;
    font-weight: 600;

    &::after {
      content: '';
      position: absolute;
      bottom: 0;
      left: 0;
      width: 100%;
      height: 4px;
      background: #3498db;
      border-radius: 4px 4px 0 0;
    }
  }
}

.tab-icon {
  font-size: 1.2rem;
}

.pattern-content {
  padding: 2rem;
}

.content-section {
  animation: fadeIn 0.5s ease;
}

.concept-card {
  display: flex;
  align-items: center;
  gap: 2rem;
  background: white;
  border-radius: 12px;
  padding: 2rem;
  box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
  margin-bottom: 2rem;
  border-left: 5px solid #3498db;

  .concept-icon {
    font-size: 4rem;
    color: #3498db;
  }

  h2 {
    font-size: 1.8rem;
    margin-bottom: 1rem;
    color: #2c3e50;
  }

  p {
    font-size: 1.1rem;
    line-height: 1.7;
  }
}

.analogy {
  background: white;
  border-radius: 12px;
  padding: 2rem;
  box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
  margin-bottom: 2rem;

  h3 {
    font-size: 1.5rem;
    margin-bottom: 1.5rem;
    color: #2c3e50;
    text-align: center;
  }
}

.analogy-content {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
  gap: 1.5rem;
}

.analogy-example {
  background: #f8f9fa;
  border-radius: 10px;
  padding: 1.5rem;
  text-align: center;
  transition: transform 0.3s ease;

  &:hover {
    transform: translateY(-5px);
    box-shadow: 0 8px 20px rgba(0, 0, 0, 0.08);
  }

  .analogy-icon {
    font-size: 3rem;
    margin-bottom: 1rem;
    color: #3498db;
  }

  h4 {
    font-size: 1.3rem;
    margin-bottom: 0.8rem;
    color: #2c3e50;
  }

  p {
    font-size: 1rem;
    color: #495057;
  }
}

.pattern-structure {
  background: white;
  border-radius: 12px;
  padding: 2rem;
  box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
  margin-bottom: 2rem;

  h3 {
    font-size: 1.5rem;
    margin-bottom: 1.5rem;
    color: #2c3e50;
    text-align: center;
  }
}

.structure-diagram {
  display: grid;
  grid-template-columns: 1fr 1fr;
  grid-template-rows: auto auto;
  gap: 4rem;
  position: relative;
  justify-items: center;

  .subject,
  .observer,
  .concrete-subject,
  .concrete-observer {
    width: 220px;
    background: #f8f9fa;
    border-radius: 8px;
    box-shadow: 0 3px 10px rgba(0, 0, 0, 0.08);
    overflow: hidden;
    position: relative;
    z-index: 2;
  }

  .subject {
    grid-column: 1;
    grid-row: 1;
  }

  .observer {
    grid-column: 2;
    grid-row: 1;
  }

  .concrete-subject {
    grid-column: 1;
    grid-row: 2;
    border-top: 3px solid #3498db;
  }

  .concrete-observer {
    grid-column: 2;
    grid-row: 2;
    border-top: 3px solid #e74c3c;
  }

  .class-header {
    background: #2c3e50;
    color: white;
    padding: 12px;
    font-weight: bold;
    text-align: center;
  }

  .class-methods {
    padding: 15px;
    font-family: 'Roboto Mono', monospace;
    font-size: 0.9rem;

    div {
      margin-bottom: 8px;
    }
  }

  .relation-arrow {
    position: absolute;
    height: 2px;
    background: #95a5a6;

    &::after {
      content: '';
      position: absolute;
      right: 0;
      top: -5px;
      width: 0;
      height: 0;
      border-top: 6px solid transparent;
      border-bottom: 6px solid transparent;
      border-left: 8px solid #95a5a6;
    }
  }

  .subject-to-observer {
    top: 50px;
    left: 50%;
    width: 50%;
    transform: translateY(-50%);
  }

  .concrete-to-subject {
    top: 180px;
    left: 50%;
    width: 50%;
    transform: translate(-100%, -50%);
  }

  .concrete-to-observer {
    top: 180px;
    left: 50%;
    width: 50%;
    transform: translateY(-50%);
  }
}

.implementation-steps {
  display: flex;
  flex-direction: column;
  gap: 2rem;
}

.step {
  display: flex;
  gap: 1.5rem;

  .step-number {
    background: #3498db;
    color: white;
    width: 40px;
    height: 40px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-weight: bold;
    font-size: 1.2rem;
    flex-shrink: 0;
    margin-top: 0.5rem;
  }

  .step-content {
    background: white;
    border-radius: 12px;
    padding: 1.5rem;
    box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
    flex: 1;
    border-left: 3px solid #3498db;

    h3 {
      font-size: 1.4rem;
      margin-bottom: 1rem;
      color: #2c3e50;
    }

    p {
      margin-bottom: 1rem;
      color: #495057;
    }
  }
}

.code-block {
  background: #2c3e50;
  color: #f8f9fa;
  border-radius: 8px;
  padding: 1.2rem;
  overflow-x: auto;
  font-family: 'Roboto Mono', monospace;
  font-size: 0.95rem;
  line-height: 1.5;
  margin-top: 1rem;

  pre {
    margin: 0;
  }

  code {
    font-family: inherit;
  }
}

.usage-scenarios {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
  gap: 1.5rem;
}

.scenario-card {
  background: white;
  border-radius: 12px;
  overflow: hidden;
  box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
  transition: transform 0.3s ease;

  &:hover {
    transform: translateY(-5px);
    box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
  }

  .scenario-icon {
    background: #3498db;
    color: white;
    font-size: 2.5rem;
    padding: 1.5rem;
    text-align: center;
  }

  h3 {
    font-size: 1.4rem;
    padding: 1.2rem 1.5rem 0.5rem;
    color: #2c3e50;
  }

  p {
    padding: 0 1.5rem;
    color: #495057;
    font-size: 1rem;
    margin-bottom: 1rem;
  }

  .example {
    background: #f8f9fa;
    padding: 1.2rem;
    margin: 0.5rem;
    border-radius: 8px;
    font-family: 'Roboto Mono', monospace;
    font-size: 0.9rem;
  }
}

.pros-cons-container {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 2rem;
  margin-bottom: 2rem;
}

.pros,
.cons {
  background: white;
  border-radius: 12px;
  padding: 1.5rem;
  box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);

  h3 {
    font-size: 1.5rem;
    margin-bottom: 1.5rem;
    display: flex;
    align-items: center;
    gap: 10px;

    .icon {
      font-size: 1.8rem;
    }
  }
}

.pros {
  border-top: 4px solid #2ecc71;
}

.cons {
  border-top: 4px solid #e74c3c;
}

ul {
  list-style: none;
  padding: 0;

  li {
    display: flex;
    gap: 1rem;
    margin-bottom: 1.5rem;
    align-items: flex-start;

    .pros-icon {
      background: #2ecc71;
      color: white;
      width: 30px;
      height: 30px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: bold;
      flex-shrink: 0;
      margin-top: 0.2rem;
    }

    .cons-icon {
      background: #e74c3c;
      color: white;
      width: 30px;
      height: 30px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: bold;
      flex-shrink: 0;
      margin-top: 0.2rem;
    }

    strong {
      display: block;
      font-size: 1.1rem;
      margin-bottom: 0.3rem;
      color: #2c3e50;
    }

    p {
      color: #495057;
      font-size: 0.95rem;
    }
  }
}

.comparison {
  background: white;
  border-radius: 12px;
  padding: 1.5rem;
  box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);

  h3 {
    font-size: 1.5rem;
    margin-bottom: 1.5rem;
    color: #2c3e50;
    text-align: center;
  }
}

.comparison-table {
  overflow-x: auto;

  table {
    width: 100%;
    border-collapse: collapse;

    th,
    td {
      padding: 1rem;
      text-align: left;
      border-bottom: 1px solid #e9ecef;
    }

    th {
      background: #2c3e50;
      color: white;
      font-weight: 500;
    }

    tr:nth-child(even) {
      background: #f8f9fa;
    }

    tr:hover {
      background: #e9f7fe;
    }
  }
}

.vue-implementation {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
  gap: 1.5rem;
}

.vue-example {
  background: white;
  border-radius: 12px;
  overflow: hidden;
  box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);

  h3 {
    background: #42b983;
    color: white;
    padding: 1.2rem;
    font-size: 1.3rem;
    margin: 0;
  }

  p {
    padding: 1rem 1.5rem;
    color: #495057;
    font-size: 1rem;
    margin-bottom: 0;
    border-bottom: 1px solid #e9ecef;
  }
}

.pattern-footer {
  background: #2c3e50;
  color: white;
  padding: 2rem;
  text-align: center;

  p {
    font-size: 1.2rem;
    margin-bottom: 1.2rem;
  }
}

.footer-links {
  display: flex;
  justify-content: center;
  gap: 1.5rem;

  a {
    color: #74c0fc;
    text-decoration: none;
    font-size: 1rem;
    transition: color 0.3s ease;

    &:hover {
      color: white;
      text-decoration: none;
    }
  }
}
</style>
