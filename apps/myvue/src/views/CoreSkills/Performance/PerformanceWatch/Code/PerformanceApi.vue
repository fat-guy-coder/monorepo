<template>
  <div class="performance-container">
    <header class="perf-header">
      <h1>å‰ç«¯ Performance API åŸºç¡€ä»‹ç»</h1>
      <p class="subtitle">å…¨é¢æŒæ¡æµè§ˆå™¨æ€§èƒ½ç›‘æ§ä¸åˆ†æ</p>
      <div class="perf-stats">
        <div class="stat-card">
          <div class="stat-icon">â±ï¸</div>
          <div class="stat-value">20+</div>
          <div class="stat-label">æ€§èƒ½æŒ‡æ ‡</div>
        </div>
        <div class="stat-card">
          <div class="stat-icon">ğŸ“Š</div>
          <div class="stat-value">15+</div>
          <div class="stat-label">APIæ¥å£</div>
        </div>
        <div class="stat-card">
          <div class="stat-icon">ğŸ”</div>
          <div class="stat-value">100%</div>
          <div class="stat-label">æµè§ˆå™¨æ”¯æŒ</div>
        </div>
      </div>
    </header>

    <div class="perf-navigation">
      <button v-for="section in sections" :key="section.id" :class="{ active: activeSection === section.id }"
        @click="activeSection = section.id">
        {{ section.title }}
      </button>
    </div>

    <div class="perf-content">
      <!-- æ¦‚è¿°éƒ¨åˆ† -->
      <section v-show="activeSection === 'overview'" class="perf-section">
        <h2>Performance API æ¦‚è¿°</h2>
        <div class="perf-intro">
          <p>
            <strong>Performance API</strong> æ˜¯ä¸€ç»„ç”¨äºè®¿é—®æµè§ˆå™¨æ€§èƒ½æŒ‡æ ‡çš„æ¥å£é›†åˆï¼Œå®ƒæä¾›äº†ï¼š
          </p>
          <ul>
            <li>é«˜ç²¾åº¦æ—¶é—´æµ‹é‡</li>
            <li>èµ„æºåŠ è½½æ€§èƒ½æ•°æ®</li>
            <li>é¡µé¢å¯¼èˆªå’Œæ¸²æŸ“æŒ‡æ ‡</li>
            <li>ç”¨æˆ·è‡ªå®šä¹‰æ€§èƒ½æ ‡è®°</li>
            <li>å®æ—¶æ€§èƒ½ç›‘æ§èƒ½åŠ›</li>
          </ul>

          <div class="perf-architecture">
            <div class="arch-layer">åº”ç”¨å±‚</div>
            <div class="arch-arrow">â†“</div>
            <div class="arch-layer">Performance API</div>
            <div class="arch-arrow">â†“</div>
            <div class="arch-layer">æµè§ˆå™¨å¼•æ“</div>
            <div class="arch-arrow">â†“</div>
            <div class="arch-layer">ç¡¬ä»¶å±‚</div>
          </div>

          <h3>æ ¸å¿ƒä¼˜åŠ¿</h3>
          <div class="advantages-grid">
            <div class="advantage-card">
              <div class="adv-icon">ğŸ“ˆ</div>
              <h4>é«˜ç²¾åº¦</h4>
              <p>æä¾›å¾®ç§’çº§æ—¶é—´ç²¾åº¦</p>
            </div>
            <div class="advantage-card">
              <div class="adv-icon">ğŸ”„</div>
              <h4>å…¨é¢æ€§</h4>
              <p>è¦†ç›–é¡µé¢ç”Ÿå‘½å‘¨æœŸå…¨é˜¶æ®µ</p>
            </div>
            <div class="advantage-card">
              <div class="adv-icon">ğŸ”§</div>
              <h4>å¯æ‰©å±•</h4>
              <p>æ”¯æŒè‡ªå®šä¹‰æ€§èƒ½æ ‡è®°</p>
            </div>
            <div class="advantage-card">
              <div class="adv-icon">ğŸŒ</div>
              <h4>æ ‡å‡†åŒ–</h4>
              <p>W3Cæ ‡å‡†ï¼Œè·¨æµè§ˆå™¨æ”¯æŒ</p>
            </div>
          </div>
        </div>
      </section>

      <!-- æ—¶é—´æµ‹é‡éƒ¨åˆ† -->
      <section v-show="activeSection === 'timing'" class="perf-section">
        <h2>é«˜ç²¾åº¦æ—¶é—´æµ‹é‡</h2>

        <div class="method-card">
          <h3>performance.now()</h3>
          <p>è¿”å›ä»é¡µé¢å¼€å§‹åŠ è½½åˆ°å½“å‰æ—¶åˆ»çš„é«˜ç²¾åº¦æ—¶é—´æˆ³ï¼ˆæ¯«ç§’ï¼‰</p>

          <div class="code-block">
            <pre><code>// è·å–é«˜ç²¾åº¦æ—¶é—´æˆ³
const start = performance.now();

// æ‰§è¡Œä¸€äº›æ“ä½œ
for (let i = 0; i < 1000000; i++) {
  Math.sqrt(i);
}

const end = performance.now();
console.log(`æ“ä½œè€—æ—¶: ${(end - start).toFixed(4)} æ¯«ç§’`);</code></pre>
          </div>

          <div class="use-case">
            <h4>ä½¿ç”¨åœºæ™¯</h4>
            <ul>
              <li>æµ‹é‡å‡½æ•°æ‰§è¡Œæ—¶é—´</li>
              <li>è®¡ç®—åŠ¨ç”»å¸§ç‡</li>
              <li>æ€§èƒ½åŸºå‡†æµ‹è¯•</li>
            </ul>
          </div>
        </div>

        <div class="method-card">
          <h3>performance.timeOrigin</h3>
          <p>è¿”å›æ€§èƒ½æµ‹é‡å¼€å§‹æ—¶çš„æ—¶é—´æˆ³ï¼ˆUnixæ¯«ç§’ï¼‰</p>

          <div class="code-block">
            <pre><code>// è·å–æ—¶é—´èµ·ç‚¹
const timeOrigin = performance.timeOrigin;

// è®¡ç®—å½“å‰æ—¶é—´
const now = performance.now();
const currentTime = new Date(timeOrigin + now);

console.log('æ€§èƒ½æµ‹é‡å¼€å§‹æ—¶é—´:', new Date(timeOrigin));
console.log('å½“å‰ç²¾ç¡®æ—¶é—´:', currentTime);</code></pre>
          </div>

          <div class="use-case">
            <h4>ä½¿ç”¨åœºæ™¯</h4>
            <ul>
              <li>ç²¾ç¡®æ—¶é—´åŒæ­¥</li>
              <li>æ€§èƒ½æ•°æ®åˆ†æ</li>
              <li>è·¨è®¾å¤‡æ—¶é—´æ ¡å‡†</li>
            </ul>
          </div>
        </div>
      </section>

      <!-- ç”¨æˆ·è®¡æ—¶éƒ¨åˆ† -->
      <section v-show="activeSection === 'user'" class="perf-section">
        <h2>ç”¨æˆ·è‡ªå®šä¹‰æ€§èƒ½æ ‡è®°</h2>

        <div class="method-card">
          <h3>performance.mark()</h3>
          <p>åœ¨æ€§èƒ½æ—¶é—´çº¿ä¸Šåˆ›å»ºè‡ªå®šä¹‰æ—¶é—´æˆ³æ ‡è®°</p>

          <div class="code-block">
            <pre><code>// åˆ›å»ºæ ‡è®°
performance.mark('script-start');

// æ‰§è¡Œä¸€äº›æ“ä½œ
loadData();
renderUI();

// åˆ›å»ºç»“æŸæ ‡è®°
performance.mark('script-end');

// æµ‹é‡ä¸¤ä¸ªæ ‡è®°ä¹‹é—´çš„æ—¶é—´
performance.measure('script-runtime', 'script-start', 'script-end');

// è·å–æµ‹é‡ç»“æœ
const measures = performance.getEntriesByName('script-runtime');
console.log(`è„šæœ¬æ‰§è¡Œè€—æ—¶: ${measures[0].duration.toFixed(2)}ms`);</code></pre>
          </div>
        </div>

        <div class="method-card">
          <h3>performance.measure()</h3>
          <p>æµ‹é‡ä¸¤ä¸ªæ ‡è®°ä¹‹é—´çš„æ—¶é—´é—´éš”</p>

          <div class="code-block">
            <pre><code>// æµ‹é‡é¡µé¢åˆå§‹åŒ–æ—¶é—´
performance.measure('init-time', undefined, 'dom-interactive');

// è·å–æ‰€æœ‰æµ‹é‡ç»“æœ
performance.getEntriesByType('measure').forEach(entry => {
  console.log(`${entry.name}: ${entry.duration.toFixed(2)}ms`);
});</code></pre>
          </div>

          <div class="use-case">
            <h4>ä½¿ç”¨åœºæ™¯</h4>
            <ul>
              <li>æµ‹é‡å…³é”®ä¸šåŠ¡é€»è¾‘æ‰§è¡Œæ—¶é—´</li>
              <li>ç›‘æ§ç»„ä»¶æ¸²æŸ“æ€§èƒ½</li>
              <li>åˆ†æå¼‚æ­¥æ“ä½œè€—æ—¶</li>
              <li>è‡ªå®šä¹‰æ€§èƒ½æŒ‡æ ‡</li>
            </ul>
          </div>
        </div>
      </section>

      <!-- èµ„æºè®¡æ—¶éƒ¨åˆ† -->
      <section v-show="activeSection === 'resource'" class="perf-section">
        <h2>èµ„æºåŠ è½½æ€§èƒ½ç›‘æ§</h2>

        <div class="method-card">
          <h3>performance.getEntriesByType('resource')</h3>
          <p>è·å–æ‰€æœ‰èµ„æºåŠ è½½çš„æ€§èƒ½æ•°æ®</p>

          <div class="code-block">
            <pre><code>// è·å–æ‰€æœ‰èµ„æºåŠ è½½æ€§èƒ½æ•°æ®
const resources = performance.getEntriesByType('resource');

// åˆ†æèµ„æºåŠ è½½æ€§èƒ½
resources.forEach(resource => {
  console.log(`
    ${resource.name}:
      ç±»å‹: ${resource.initiatorType}
      DNSæŸ¥è¯¢: ${resource.domainLookupEnd - resource.domainLookupStart}ms
      TCPè¿æ¥: ${resource.connectEnd - resource.connectStart}ms
      è¯·æ±‚å“åº”: ${resource.responseEnd - resource.requestStart}ms
      æ€»è€—æ—¶: ${resource.duration}ms
  `);
});</code></pre>
          </div>

          <div class="resource-grid">
            <div class="resource-card">
              <div class="res-icon">ğŸ–¼ï¸</div>
              <h4>å›¾ç‰‡èµ„æº</h4>
              <p>ç›‘æ§å›¾ç‰‡åŠ è½½æ—¶é—´</p>
            </div>
            <div class="resource-card">
              <div class="res-icon">ğŸ“œ</div>
              <h4>è„šæœ¬èµ„æº</h4>
              <p>åˆ†æJSæ–‡ä»¶åŠ è½½</p>
            </div>
            <div class="resource-card">
              <div class="res-icon">ğŸ¨</div>
              <h4>æ ·å¼èµ„æº</h4>
              <p>è·Ÿè¸ªCSSåŠ è½½æ€§èƒ½</p>
            </div>
            <div class="resource-card">
              <div class="res-icon">ğŸ”—</div>
              <h4>APIè¯·æ±‚</h4>
              <p>ç›‘æ§XHR/Fetchæ€§èƒ½</p>
            </div>
          </div>
        </div>
      </section>

      <!-- å¯¼èˆªè®¡æ—¶éƒ¨åˆ† -->
      <section v-show="activeSection === 'navigation'" class="perf-section">
        <h2>é¡µé¢å¯¼èˆªæ€§èƒ½ç›‘æ§</h2>

        <div class="method-card">
          <h3>performance.timing</h3>
          <p>æä¾›é¡µé¢åŠ è½½å…¨è¿‡ç¨‹çš„è¯¦ç»†æ—¶é—´ç‚¹</p>

          <div class="timing-diagram">
            <div class="timeline">
              <div class="timeline-event" style="left: 0%;">navigationStart</div>
              <div class="timeline-event" style="left: 20%;">domLoading</div>
              <div class="timeline-event" style="left: 40%;">domInteractive</div>
              <div class="timeline-event" style="left: 60%;">domComplete</div>
              <div class="timeline-event" style="left: 80%;">loadEventEnd</div>
              <div class="timeline-bar"></div>
            </div>
          </div>

          <div class="code-block">
            <pre><code>const timing = performance.timing;

// è®¡ç®—å…³é”®æ€§èƒ½æŒ‡æ ‡
const metrics = {
  DNSæŸ¥è¯¢: timing.domainLookupEnd - timing.domainLookupStart,
  TCPè¿æ¥: timing.connectEnd - timing.connectStart,
  è¯·æ±‚å“åº”: timing.responseEnd - timing.requestStart,
  DOMè§£æ: timing.domComplete - timing.domLoading,
  é¡µé¢å®Œå…¨åŠ è½½: timing.loadEventEnd - timing.navigationStart
};

console.log('é¡µé¢åŠ è½½æ€§èƒ½æŒ‡æ ‡:', metrics);</code></pre>
          </div>
        </div>

        <div class="method-card">
          <h3>performance.getEntriesByType('navigation')</h3>
          <p>è·å–é¡µé¢å¯¼èˆªçš„æ€§èƒ½æ•°æ®ï¼ˆç°ä»£æ›¿ä»£æ–¹æ¡ˆï¼‰</p>

          <div class="code-block">
            <pre><code>// è·å–é¡µé¢å¯¼èˆªæ€§èƒ½æ•°æ®
const [navigation] = performance.getEntriesByType('navigation');

console.log(`
  é‡å®šå‘æ¬¡æ•°: ${navigation.redirectCount}
  é¡µé¢ç±»å‹: ${navigation.type}
  å¸è½½å‰é¡µé¢æ—¶é—´: ${navigation.unloadEventEnd}ms
  DOMè§£ææ—¶é—´: ${navigation.domComplete - navigation.domInteractive}ms
`);</code></pre>
          </div>
        </div>
      </section>

      <!-- æ€§èƒ½è§‚å¯Ÿå™¨éƒ¨åˆ† -->
      <section v-show="activeSection === 'observer'" class="perf-section">
        <h2>å®æ—¶æ€§èƒ½ç›‘æ§</h2>

        <div class="method-card">
          <h3>PerformanceObserver</h3>
          <p>å®æ—¶ç›‘æ§æ€§èƒ½äº‹ä»¶ï¼Œé¿å…è½®è¯¢</p>

          <div class="code-block">
            <pre><code>// åˆ›å»ºæ€§èƒ½è§‚å¯Ÿå™¨
const observer = new PerformanceObserver((list) => {
  const entries = list.getEntries();

  entries.forEach(entry => {
    switch (entry.entryType) {
      case 'paint':
        if (entry.name === 'first-paint') {
          console.log(`é¦–æ¬¡ç»˜åˆ¶(FP): ${entry.startTime}ms`);
        }
        if (entry.name === 'first-contentful-paint') {
          console.log(`é¦–æ¬¡å†…å®¹ç»˜åˆ¶(FCP): ${entry.startTime}ms`);
        }
        break;
      case 'resource':
        console.log(`èµ„æºåŠ è½½: ${entry.name} (${entry.duration}ms)`);
        break;
      case 'longtask':
        console.warn(`é•¿ä»»åŠ¡: ${entry.duration}ms`, entry.attribution);
        break;
    }
  });
});

// ç›‘æ§æ€§èƒ½äº‹ä»¶
observer.observe({
  entryTypes: ['paint', 'resource', 'longtask']
});</code></pre>
          </div>

          <div class="observer-features">
            <div class="feature">
              <div class="feat-icon">ğŸ¯</div>
              <h4>äº‹ä»¶é©±åŠ¨</h4>
              <p>åªåœ¨äº‹ä»¶å‘ç”Ÿæ—¶è§¦å‘</p>
            </div>
            <div class="feature">
              <div class="feat-icon">âš¡</div>
              <h4>é«˜æ•ˆèŠ‚èƒ½</h4>
              <p>é¿å…ä¸å¿…è¦çš„è½®è¯¢</p>
            </div>
            <div class="feature">
              <div class="feat-icon">ğŸ””</div>
              <h4>å®æ—¶é€šçŸ¥</h4>
              <p>ç«‹å³å“åº”æ€§èƒ½äº‹ä»¶</p>
            </div>
          </div>
        </div>
      </section>

      <!-- å†…å­˜ç›‘æ§éƒ¨åˆ† -->
      <section v-show="activeSection === 'memory'" class="perf-section">
        <h2>å†…å­˜ä½¿ç”¨ç›‘æ§</h2>

        <div class="method-card">
          <h3>performance.memory</h3>
          <p>è·å–JavaScriptå†…å­˜ä½¿ç”¨æƒ…å†µï¼ˆChromeä¸“å±ï¼‰</p>

          <div class="code-block">
            <pre><code>// è·å–å†…å­˜ä½¿ç”¨æƒ…å†µ
if (performance.memory) {
  const memory = performance.memory;

  setInterval(() => {
    console.log(`
      å·²ä½¿ç”¨JSå †: ${(memory.usedJSHeapSize / 1048576).toFixed(2)} MB
      æ€»JSå †å¤§å°: ${(memory.totalJSHeapSize / 1048576).toFixed(2)} MB
      å †å¤§å°é™åˆ¶: ${(memory.jsHeapSizeLimit / 1048576).toFixed(2)} MB
    `);
  }, 5000);
}</code></pre>
          </div>

          <div class="memory-visual">
            <div class="memory-bar">
              <div class="memory-used" :style="{ width: memoryUsed }"></div>
            </div>
            <div class="memory-labels">
              <div>å·²ä½¿ç”¨: {{ usedMemory }} MB</div>
              <div>æ€»é‡: {{ totalMemory }} MB</div>
              <div>é™åˆ¶: {{ limitMemory }} MB</div>
            </div>
          </div>
        </div>
      </section>
    </div>

    <footer class="perf-footer">
      <p>Â© 2023 å‰ç«¯æ€§èƒ½ç›‘æ§æŒ‡å— | Performance API v2</p>
      <div class="browser-support">
        æ”¯æŒæµè§ˆå™¨: Chrome, Firefox, Edge, Safari 11+
      </div>
    </footer>
  </div>
</template>

<script setup lang="ts">
import { ref, computed, onMounted } from 'vue';

const activeSection = ref('overview');

// æ¨¡æ‹Ÿå†…å­˜æ•°æ®
const memoryData = ref({
  used: 85,
  total: 180,
  limit: 2048
});

const memoryUsed = computed(() => {
  return `${(memoryData.value.used / memoryData.value.total) * 100}%`;
});

const usedMemory = computed(() => (memoryData.value.used).toFixed(1));
const totalMemory = computed(() => (memoryData.value.total).toFixed(1));
const limitMemory = computed(() => (memoryData.value.limit / 1024).toFixed(1));

const sections = [
  { id: 'overview', title: 'æ¦‚è¿°' },
  { id: 'timing', title: 'æ—¶é—´æµ‹é‡' },
  { id: 'user', title: 'ç”¨æˆ·è®¡æ—¶' },
  { id: 'resource', title: 'èµ„æºè®¡æ—¶' },
  { id: 'navigation', title: 'å¯¼èˆªè®¡æ—¶' },
  { id: 'observer', title: 'æ€§èƒ½è§‚å¯Ÿå™¨' },
  { id: 'memory', title: 'å†…å­˜ç›‘æ§' }
];

// æ¨¡æ‹Ÿå†…å­˜ä½¿ç”¨å˜åŒ–
onMounted(() => {
  setInterval(() => {
    memoryData.value.used = Math.min(
      memoryData.value.total - 10,
      Math.max(50, memoryData.value.used + (Math.random() - 0.5) * 20)
    );
  }, 2000);
});
</script>

<style lang="less" scoped>
@primary-color: #3498db;
@secondary-color: #2c3e50;
@accent-color: #42b983;
@background-light: #f8f9fa;
@text-color: #34495e;
@border-color: #e0e0e0;
@code-bg: #2d2d2d;
@code-color: #f8f8f2;

.performance-container {
  max-width: 1200px;
  margin: 0 auto;
  padding: 2rem;
  font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
  color: @text-color;
  line-height: 1.6;
}

.perf-header {
  text-align: center;
  margin-bottom: 2rem;
  padding: 2rem;
  background: linear-gradient(135deg, @secondary-color, lighten(@secondary-color, 10%));
  border-radius: 12px;
  color: white;
  box-shadow: 0 10px 20px rgba(0, 0, 0, 0.1);

  h1 {
    font-size: 2.5rem;
    margin-bottom: 0.5rem;
    font-weight: 700;
  }

  .subtitle {
    font-size: 1.2rem;
    opacity: 0.9;
    margin-bottom: 1.5rem;
  }
}

.perf-stats {
  display: flex;
  justify-content: center;
  gap: 1.5rem;
  margin-top: 1.5rem;

  .stat-card {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 0.5rem;
    background: rgba(255, 255, 255, 0.15);
    padding: 1rem 1.5rem;
    border-radius: 8px;
    backdrop-filter: blur(5px);
    min-width: 120px;

    .stat-icon {
      font-size: 2rem;
    }

    .stat-value {
      font-size: 1.8rem;
      font-weight: 700;
    }

    .stat-label {
      font-size: 0.9rem;
      opacity: 0.8;
    }
  }
}

.perf-navigation {
  display: flex;
  overflow-x: auto;
  margin-bottom: 1.5rem;
  background: white;
  border-radius: 12px;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);

  button {
    flex: 1;
    min-width: 120px;
    padding: 1rem;
    border: none;
    background: none;
    font-size: 1rem;
    font-weight: 600;
    color: lighten(@text-color, 20%);
    cursor: pointer;
    transition: all 0.3s ease;
    white-space: nowrap;

    &:hover {
      background: @background-light;
      color: @text-color;
    }

    &.active {
      background: @accent-color;
      color: white;
      box-shadow: 0 4px 8px rgba(66, 185, 131, 0.3);
    }
  }
}

.perf-section {
  background: white;
  border-radius: 12px;
  padding: 2rem;
  margin-bottom: 1.5rem;
  box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);

  h2 {
    font-size: 1.8rem;
    margin-top: 0;
    margin-bottom: 1.5rem;
    color: @secondary-color;
    position: relative;
    padding-bottom: 0.8rem;

    &::after {
      content: '';
      position: absolute;
      bottom: 0;
      left: 0;
      width: 60px;
      height: 3px;
      background: @accent-color;
      border-radius: 3px;
    }
  }
}

.perf-intro {
  p {
    font-size: 1.1rem;
    line-height: 1.8;
    margin-bottom: 1.5rem;
  }

  ul {
    padding-left: 1.5rem;
    margin-bottom: 2rem;

    li {
      margin-bottom: 0.8rem;
      font-size: 1.1rem;
    }
  }
}

.perf-architecture {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 1rem;
  background: lighten(@accent-color, 45%);
  padding: 1.5rem;
  border-radius: 8px;
  margin: 2rem 0;

  .arch-layer {
    background: white;
    padding: 1rem 2rem;
    border-radius: 8px;
    font-weight: 600;
    box-shadow: 0 2px 5px rgba(0, 0, 0, 0.05);
    width: 100%;
    text-align: center;
  }

  .arch-arrow {
    font-size: 1.5rem;
    color: @accent-color;
  }
}

.advantages-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
  gap: 1.5rem;
  margin-top: 2rem;
}

.advantage-card {
  background: white;
  border-radius: 8px;
  padding: 1.5rem;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.05);
  text-align: center;
  transition: transform 0.3s ease;

  &:hover {
    transform: translateY(-5px);
  }

  .adv-icon {
    font-size: 2.5rem;
    margin-bottom: 1rem;
  }

  h4 {
    margin: 0.5rem 0;
    color: @secondary-color;
  }

  p {
    margin: 0;
    color: lighten(@text-color, 20%);
    font-size: 0.95rem;
  }
}

.method-card {
  background: white;
  border-radius: 12px;
  padding: 1.5rem;
  margin-bottom: 1.5rem;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.05);

  h3 {
    font-size: 1.4rem;
    color: @primary-color;
    margin-top: 0;
    margin-bottom: 0.5rem;
  }

  p {
    margin-top: 0;
    margin-bottom: 1.5rem;
    font-size: 1.1rem;
  }
}

.code-block {
  background: @code-bg;
  color: @code-color;
  border-radius: 8px;
  overflow: hidden;
  margin: 1.5rem 0;

  pre {
    margin: 0;
    padding: 1.5rem;
    overflow-x: auto;

    code {
      font-family: 'Fira Code', 'Courier New', monospace;
      font-size: 0.95rem;
      line-height: 1.5;

      .comment {
        color: #75715e;
      }

      .keyword {
        color: #f92672;
      }

      .string {
        color: #a6e22e;
      }

      .function {
        color: #66d9ef;
      }

      .variable {
        color: #fd971f;
      }
    }
  }
}

.use-case {
  background: lighten(@accent-color, 45%);
  padding: 1.2rem;
  border-radius: 8px;
  margin-top: 1.5rem;

  h4 {
    margin-top: 0;
    margin-bottom: 0.8rem;
    color: darken(@accent-color, 15%);
  }

  ul {
    padding-left: 1.2rem;
    margin-bottom: 0;

    li {
      margin-bottom: 0.5rem;
    }
  }
}

.resource-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
  gap: 1rem;
  margin-top: 1.5rem;
}

.resource-card {
  background: white;
  border-radius: 8px;
  padding: 1.2rem;
  text-align: center;
  box-shadow: 0 2px 5px rgba(0, 0, 0, 0.05);

  .res-icon {
    font-size: 2rem;
    margin-bottom: 0.5rem;
  }

  h4 {
    margin: 0.5rem 0;
    color: @secondary-color;
  }

  p {
    margin: 0;
    font-size: 0.9rem;
    color: lighten(@text-color, 20%);
  }
}

.timing-diagram {
  background: @background-light;
  padding: 1.5rem;
  border-radius: 8px;
  margin: 1.5rem 0;
}

.timeline {
  position: relative;
  height: 80px;
  margin: 20px 0;
}

.timeline-bar {
  position: absolute;
  top: 40px;
  left: 5%;
  width: 90%;
  height: 6px;
  background: @primary-color;
  border-radius: 3px;
}

.timeline-event {
  position: absolute;
  top: 20px;
  transform: translateX(-50%);
  width: 160px;
  text-align: center;
  font-size: 0.9rem;
  font-weight: 600;

  &::after {
    content: '';
    position: absolute;
    bottom: -25px;
    left: 50%;
    transform: translateX(-50%);
    width: 2px;
    height: 20px;
    background: @accent-color;
  }
}

.observer-features {
  display: flex;
  justify-content: space-around;
  margin-top: 1.5rem;

  .feature {
    text-align: center;

    .feat-icon {
      font-size: 2rem;
      margin-bottom: 0.5rem;
    }

    h4 {
      margin: 0.5rem 0;
      color: @secondary-color;
    }

    p {
      margin: 0;
      font-size: 0.9rem;
      color: lighten(@text-color, 20%);
    }
  }
}

.memory-visual {
  margin-top: 1.5rem;

  .memory-bar {
    height: 30px;
    background: @background-light;
    border-radius: 15px;
    overflow: hidden;
    margin-bottom: 1rem;
  }

  .memory-used {
    height: 100%;
    background: linear-gradient(90deg, #42b983, #3498db);
    border-radius: 15px;
    transition: width 1s ease;
  }

  .memory-labels {
    display: flex;
    justify-content: space-between;
    font-size: 0.9rem;
    color: lighten(@text-color, 20%);
  }
}

.perf-footer {
  text-align: center;
  padding: 1.5rem;
  color: lighten(@text-color, 30%);
  font-size: 0.9rem;
  margin-top: 2rem;

  .browser-support {
    margin-top: 0.5rem;
    font-size: 0.85rem;
    color: lighten(@text-color, 40%);
  }
}

@media (max-width: 768px) {
  .perf-header {
    padding: 1.5rem;

    h1 {
      font-size: 2rem;
    }
  }

  .perf-stats {
    flex-direction: column;
    align-items: center;
  }

  .perf-navigation {
    overflow-x: auto;
    flex-wrap: nowrap;
    justify-content: flex-start;

    button {
      min-width: 100px;
    }
  }

  .advantages-grid {
    grid-template-columns: 1fr;
  }
}
</style>
