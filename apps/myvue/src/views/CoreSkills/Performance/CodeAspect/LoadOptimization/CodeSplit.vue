<template>
  <div class="code-splitting-container">
    <!-- å¤´éƒ¨åŒºåŸŸ -->
    <header class="splitting-header">
      <div class="header-content">
        <h1>ä»£ç åˆ†å‰²ä¼˜åŒ–åŠ è½½æ€§èƒ½æŒ‡å—</h1>
        <p class="subtitle">æ‹†åˆ†å¤§å‹åº”ç”¨ï¼Œå®ç°æŒ‰éœ€åŠ è½½ï¼ŒåŠ é€Ÿé¡µé¢æ¸²æŸ“</p>
      </div>
      <div class="performance-stats">
        <div class="stat-card">
          <div class="stat-icon">ğŸš€</div>
          <div class="stat-value">60%+</div>
          <div class="stat-label">é¦–å±åŠ è½½åŠ é€Ÿ</div>
        </div>
        <div class="stat-card">
          <div class="stat-icon">ğŸ“¦</div>
          <div class="stat-value">70%+</div>
          <div class="stat-label">åˆå§‹åŒ…ä½“ç§¯å‡å°‘</div>
        </div>
        <div class="stat-card">
          <div class="stat-icon">â±ï¸</div>
          <div class="stat-value">50%+</div>
          <div class="stat-label">äº¤äº’å“åº”æå‡</div>
        </div>
      </div>
    </header>

    <!-- æ ¸å¿ƒæ¦‚å¿µ -->
    <section class="core-concepts">
      <div class="concept-card">
        <div class="concept-icon">âš™ï¸</div>
        <h2>ä»€ä¹ˆæ˜¯ä»£ç åˆ†å‰²ï¼Ÿ</h2>
        <p>ä»£ç åˆ†å‰²æ˜¯ä¸€ç§å°†åº”ç”¨ä»£ç æ‹†åˆ†ä¸ºå¤šä¸ªè¾ƒå°æ¨¡å—çš„æŠ€æœ¯ï¼Œå…è®¸æŒ‰éœ€æˆ–å¹¶è¡ŒåŠ è½½è¿™äº›æ¨¡å—ï¼Œä»è€Œæ˜¾è‘—å‡å°‘åˆå§‹åŠ è½½æ—¶é—´ã€‚</p>
      </div>
      <div class="concept-card">
        <div class="concept-icon">ğŸ¯</div>
        <h2>ä¸ºä»€ä¹ˆéœ€è¦ä»£ç åˆ†å‰²ï¼Ÿ</h2>
        <p>ç°ä»£Webåº”ç”¨è¶Šæ¥è¶Šå¤æ‚ï¼Œå•ä¸ªJSæ–‡ä»¶å¯è¾¾æ•°MBï¼Œå¯¼è‡´åŠ è½½æ—¶é—´é•¿ã€äº¤äº’å»¶è¿Ÿé«˜ã€‚ä»£ç åˆ†å‰²è§£å†³äº†è¿™ä¸€é—®é¢˜ï¼Œä¼˜åŒ–ç”¨æˆ·ä½“éªŒã€‚</p>
      </div>
      <div class="concept-card">
        <div class="concept-icon">ğŸ“Š</div>
        <h2>æ ¸å¿ƒä¼˜åŠ¿</h2>
        <ul>
          <li>å‡å°‘åˆå§‹åŠ è½½èµ„æºå¤§å°</li>
          <li>æé«˜é¦–å±æ¸²æŸ“é€Ÿåº¦</li>
          <li>ä¼˜åŒ–èµ„æºåˆ©ç”¨ç‡</li>
          <li>æå‡ç”¨æˆ·äº¤äº’å“åº”é€Ÿåº¦</li>
          <li>æ”¹å–„æ ¸å¿ƒç½‘é¡µæŒ‡æ ‡è¯„åˆ†</li>
        </ul>
      </div>
    </section>

    <!-- åˆ†å‰²æ–¹æ³• -->
    <section class="splitting-methods">
      <h2 class="section-title"><span class="icon">ğŸ”§</span> ä»£ç åˆ†å‰²æ–¹æ³•</h2>

      <div class="method-grid">
        <div class="method-card" v-for="(method, index) in splittingMethods" :key="index">
          <div class="method-header">
            <div class="method-icon">{{ method.icon }}</div>
            <h3>{{ method.name }}</h3>
          </div>
          <p class="method-desc">{{ method.description }}</p>

          <div class="implementation-box">
            <div class="impl-title">å®ç°æ–¹å¼:</div>
            <pre><code class="language-javascript">{{ method.implementation }}</code></pre>
          </div>

          <div class="pros-cons">
            <div class="pros">
              <div class="pc-title">âœ… ä¼˜ç‚¹</div>
              <ul>
                <li v-for="(pro, i) in method.pros" :key="'pro' + i">{{ pro }}</li>
              </ul>
            </div>
            <div class="cons">
              <div class="pc-title">âš ï¸ ç¼ºç‚¹</div>
              <ul>
                <li v-for="(con, i) in method.cons" :key="'con' + i">{{ con }}</li>
              </ul>
            </div>
          </div>

          <div class="use-cases">
            <div class="uc-title">é€‚ç”¨åœºæ™¯</div>
            <div class="tag-list">
              <span v-for="(scene, i) in method.useCases" :key="'scene' + i" class="scene-tag">{{ scene }}</span>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- ä¼˜åŒ–æŠ€å·§ -->
    <section class="optimization-tips">
      <h2 class="section-title"><span class="icon">ğŸš€</span> é«˜çº§ä¼˜åŒ–æŠ€å·§</h2>

      <div class="tips-grid">
        <div class="tip-card" v-for="(tip, index) in optimizationTips" :key="index">
          <div class="tip-number">{{ index + 1 }}</div>
          <div class="tip-content">
            <h3>{{ tip.title }}</h3>
            <p>{{ tip.description }}</p>
            <div v-if="tip.code" class="tip-code">
              <pre><code>{{ tip.code }}</code></pre>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- æ€§èƒ½å¯¹æ¯” -->
    <section class="performance-comparison">
      <h2 class="section-title"><span class="icon">ğŸ“ˆ</span> æ€§èƒ½å¯¹æ¯”æ•ˆæœ</h2>

      <div class="comparison-grid">
        <div class="comparison-card">
          <div class="comp-header no-split">
            <h3>æœªä½¿ç”¨ä»£ç åˆ†å‰²</h3>
          </div>
          <div class="comp-sizes">
            <div class="size-bar main" style="width: 100%">
              <div class="size-label">ä¸»åŒ…: 2.8MB</div>
            </div>
          </div>
          <div class="comp-metrics">
            <div class="metric">
              <div class="metric-value">5.2s</div>
              <div class="metric-label">åŠ è½½æ—¶é—´</div>
            </div>
            <div class="metric">
              <div class="metric-value">82</div>
              <div class="metric-label">LCPåˆ†æ•°</div>
            </div>
            <div class="metric">
              <div class="metric-value">380ms</div>
              <div class="metric-label">äº¤äº’å»¶è¿Ÿ</div>
            </div>
          </div>
        </div>

        <div class="comparison-card">
          <div class="comp-header with-split">
            <h3>ä½¿ç”¨ä»£ç åˆ†å‰²</h3>
          </div>
          <div class="comp-sizes">
            <div class="size-bar main" style="width: 35%">
              <div class="size-label">ä¸»åŒ…: 0.9MB</div>
            </div>
            <div class="size-bar vendor" style="width: 25%">
              <div class="size-label">vendor: 0.7MB</div>
            </div>
            <div class="size-bar async" style="width: 18%">
              <div class="size-label">è·¯ç”±æ¨¡å—</div>
            </div>
            <div class="size-bar async" style="width: 12%">
              <div class="size-label">ç»„ä»¶æ¨¡å—</div>
            </div>
          </div>
          <div class="comp-metrics">
            <div class="metric">
              <div class="metric-value">1.8s</div>
              <div class="metric-label">åŠ è½½æ—¶é—´</div>
            </div>
            <div class="metric">
              <div class="metric-value">96</div>
              <div class="metric-label">LCPåˆ†æ•°</div>
            </div>
            <div class="metric">
              <div class="metric-value">120ms</div>
              <div class="metric-label">äº¤äº’å»¶è¿Ÿ</div>
            </div>
          </div>
        </div>
      </div>

      <div class="performance-chart">
        <div class="chart-bar" v-for="(item, index) in performanceData" :key="index">
          <div class="bar-label">{{ item.label }}</div>
          <div class="bar-container">
            <div class="bar before" :style="{ width: item.before + '%' }">
              <div class="bar-value">{{ item.beforeValue }}</div>
            </div>
            <div class="bar after" :style="{ width: item.after + '%' }">
              <div class="bar-value">{{ item.afterValue }}</div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- å·¥å…·æ¨è -->
    <section class="tool-recommendations">
      <h2 class="section-title"><span class="icon">ğŸ› ï¸</span> å·¥å…·ä¸åº“æ¨è</h2>

      <div class="tools-grid">
        <div class="tool-card" v-for="(tool, index) in recommendedTools" :key="index">
          <div class="tool-icon">{{ tool.icon }}</div>
          <h3>{{ tool.name }}</h3>
          <p>{{ tool.description }}</p>
          <div class="tool-category">ç±»åˆ«: {{ tool.category }}</div>
        </div>
      </div>
    </section>

    <!-- æœ€ä½³å®è·µ -->
    <section class="best-practices">
      <h2 class="section-title"><span class="icon">ğŸ†</span> ä»£ç åˆ†å‰²æœ€ä½³å®è·µ</h2>

      <div class="practices-list">
        <div class="practice-item" v-for="(practice, index) in bestPractices" :key="index">
          <div class="practice-number">{{ index + 1 }}</div>
          <div class="practice-content">
            <h3>{{ practice.title }}</h3>
            <p>{{ practice.description }}</p>
          </div>
        </div>
      </div>
    </section>

    <footer class="splitting-footer">
      <p>Â© 2023 å‰ç«¯æ€§èƒ½ä¼˜åŒ–æŒ‡å— | ä»£ç åˆ†å‰²æ˜¯ç°ä»£Webåº”ç”¨æ€§èƒ½ä¼˜åŒ–çš„æ ¸å¿ƒæŠ€æœ¯</p>
      <p>åˆç†ä½¿ç”¨ä»£ç åˆ†å‰²å¯ä»¥å°†åˆå§‹åŠ è½½æ—¶é—´å‡å°‘50%-70%</p>
    </footer>
  </div>
</template>

<script setup lang="ts">
import { ref } from 'vue';

// åˆ†å‰²æ–¹æ³•æ•°æ®
const splittingMethods = ref([
  {
    icon: 'ğŸ§©',
    name: 'è·¯ç”±çº§åˆ†å‰²',
    description: 'æ ¹æ®åº”ç”¨è·¯ç”±è‡ªåŠ¨æ‹†åˆ†ä»£ç ï¼Œæ¯ä¸ªè·¯ç”±å¯¹åº”ä¸€ä¸ªç‹¬ç«‹chunk',
    implementation: `// Vue Router é…ç½®
const routes = [
  {
    path: '/dashboard',
    component: () => import('./views/Dashboard.vue') // åŠ¨æ€å¯¼å…¥
  },
  {
    path: '/settings',
    component: () => import('./views/Settings.vue')
  }
];`,
    pros: [
      'æŒ‰ç”¨æˆ·è®¿é—®è·¯å¾„åŠ è½½èµ„æº',
      'å‡å°‘åˆå§‹åŒ…ä½“ç§¯',
      'å®ç°ç®€å•ï¼Œé…ç½®ç›´è§‚',
      'ä¸è·¯ç”±ç»“æ„é«˜åº¦åŒ¹é…'
    ],
    cons: [
      'é¦–å±è·¯ç”±å¯èƒ½ä»åŒ…å«å¤§é‡ä»£ç ',
      'æ·±å±‚è·¯ç”±å¯èƒ½éœ€è¦é¢å¤–ä¼˜åŒ–',
      'éœ€é…åˆè·¯ç”±å®ˆå«å¤„ç†åŠ è½½çŠ¶æ€'
    ],
    useCases: [
      'å¤šé¡µé¢åº”ç”¨',
      'SPAåº”ç”¨',
      'ä¼ä¸šåå°ç³»ç»Ÿ',
      'å†…å®¹ç®¡ç†ç³»ç»Ÿ'
    ]
  },
  {
    icon: 'ğŸ”„',
    name: 'ç»„ä»¶çº§åˆ†å‰²',
    description: 'æ‹†åˆ†å¤§å‹ç»„ä»¶ä¸ºç‹¬ç«‹æ¨¡å—ï¼ŒæŒ‰éœ€åŠ è½½',
    implementation: `// ä½¿ç”¨Vue defineAsyncComponent
import { defineAsyncComponent } from 'vue';

const HeavyComponent = defineAsyncComponent(() =>
  import('./components/HeavyComponent.vue')
);

export default {
  components: {
    HeavyComponent
  }
};`,
    pros: [
      'ç²¾ç»†æ§åˆ¶ä»£ç æ‹†åˆ†ç²’åº¦',
      'æ˜¾è‘—å‡å°‘æ ¸å¿ƒåŒ…ä½“ç§¯',
      'ä¼˜åŒ–éå…³é”®ç»„ä»¶åŠ è½½',
      'æå‡åˆå§‹æ¸²æŸ“é€Ÿåº¦'
    ],
    cons: [
      'å¢åŠ ç½‘ç»œè¯·æ±‚æ•°é‡',
      'éœ€è¦å¤„ç†åŠ è½½çŠ¶æ€',
      'å¯èƒ½å½±å“ç»„ä»¶äº¤äº’ä½“éªŒ',
      'å¢åŠ ä»£ç å¤æ‚åº¦'
    ],
    useCases: [
      'å¤§å‹å¤æ‚ç»„ä»¶',
      'å¼¹çª—/æ¨¡æ€æ¡†',
      'éé¦–å±å†…å®¹',
      'å¯è§†åŒ–å›¾è¡¨ç»„ä»¶'
    ]
  },
  {
    icon: 'ğŸ“š',
    name: 'ç¬¬ä¸‰æ–¹åº“åˆ†å‰²',
    description: 'å°†node_modulesä¸­çš„ä¾èµ–æ‹†åˆ†ä¸ºç‹¬ç«‹åŒ…',
    implementation: `// vite.config.js
export default {
  build: {
    rollupOptions: {
      output: {
        manualChunks: {
          // æ‹†åˆ†ç¬¬ä¸‰æ–¹åº“
          vendor: ['vue', 'vue-router', 'axios'],
          // æŒ‰åŠŸèƒ½æ‹†åˆ†
          charts: ['echarts', 'd3'],
          utils: ['lodash', 'moment']
        }
      }
    }
  }
};`,
    pros: [
      'å……åˆ†åˆ©ç”¨æµè§ˆå™¨ç¼“å­˜',
      'é¿å…é‡å¤æ‰“åŒ…ç›¸åŒä¾èµ–',
      'å¹¶è¡ŒåŠ è½½ä¼˜åŒ–',
      'æ›´æ–°æ—¶åªéœ€é‡æ–°åŠ è½½å˜æ›´éƒ¨åˆ†'
    ],
    cons: [
      'é…ç½®å¤æ‚',
      'å¯èƒ½å¢åŠ åˆå§‹è¯·æ±‚æ•°',
      'éœ€è¦å¹³è¡¡chunkæ•°é‡å’Œå¤§å°',
      'ä¾èµ–åˆ†æå·¥å…·éœ€æ±‚'
    ],
    useCases: [
      'å¤§å‹ç¬¬ä¸‰æ–¹åº“',
      'ä¸å¸¸æ›´æ–°çš„ä¾èµ–',
      'å…±äº«ä¾èµ–',
      'éœ€è¦é•¿æœŸç¼“å­˜çš„èµ„æº'
    ]
  },
  {
    icon: 'â±ï¸',
    name: 'åŠ¨æ€å¯¼å…¥',
    description: 'åœ¨ä»£ç ä¸­æŒ‰éœ€å¯¼å…¥æ¨¡å—ï¼Œè¿è¡Œæ—¶åŠ¨æ€åŠ è½½',
    implementation: `// åŸºäºç”¨æˆ·äº¤äº’åŠ è½½æ¨¡å—
button.addEventListener('click', async () => {
  // ç‚¹å‡»æ—¶åŠ è½½æ¨¡å—
  const module = await import('./analyticsModule.js');
  module.initAnalytics();

  // Vueä¸­ä½¿ç”¨
  const { showAdvancedFeatures } = await import('./features.js');
  showAdvancedFeatures();
});`,
    pros: [
      'æè‡´æŒ‰éœ€åŠ è½½',
      'å¤§å¹…å‡å°‘åˆå§‹åŠ è½½ä½“ç§¯',
      'ä¼˜åŒ–éæ ¸å¿ƒåŠŸèƒ½åŠ è½½',
      'æé«˜ç”¨æˆ·äº¤äº’å“åº”'
    ],
    cons: [
      'äº¤äº’å»¶è¿Ÿï¼ˆåŠ è½½æ—¶é—´ï¼‰',
      'éœ€è¦å¤„ç†åŠ è½½çŠ¶æ€å’Œé”™è¯¯',
      'ä»£ç æ‹†åˆ†ç‚¹éœ€è°¨æ…é€‰æ‹©',
      'å¯èƒ½è¿‡åº¦ç¢ç‰‡åŒ–'
    ],
    useCases: [
      'ç”¨æˆ·è§¦å‘çš„åŠŸèƒ½',
      'å¤æ‚å·¥å…·å’ŒåŠŸèƒ½',
      'åˆ†æå’ŒæŠ¥å‘Šæ¨¡å—',
      'ä¸å¸¸ç”¨åŠŸèƒ½'
    ]
  }
]);

// ä¼˜åŒ–æŠ€å·§
const optimizationTips = ref([
  {
    title: 'é¢„åŠ è½½å…³é”®èµ„æº',
    description: 'ä½¿ç”¨<link rel="preload">æå‰åŠ è½½å…³é”®è·¯ç”±æˆ–ç»„ä»¶ï¼Œå‡å°‘ç”¨æˆ·å¯¼èˆªç­‰å¾…æ—¶é—´',
    code: `<!-- é¢„åŠ è½½å…³é”®èµ„æº -->
<link rel="preload" href="/src/views/Dashboard.vue" as="script">`
  },
  {
    title: 'é­”æ³•æ³¨é‡Šå‘½å',
    description: 'ä½¿ç”¨webpackChunkNameæ³¨é‡Šä¸ºåˆ†å‰²æ¨¡å—å‘½åï¼Œæé«˜å¯è¯»æ€§å’Œè°ƒè¯•ä½“éªŒ',
    code: `// ä½¿ç”¨é­”æ³•æ³¨é‡Šå‘½åchunk
const Dashboard = () => import(
  /* webpackChunkName: "dashboard-view" */
  './views/Dashboard.vue'
);`
  },
  {
    title: 'åˆ†å‰²é˜ˆå€¼æ§åˆ¶',
    description: 'è®¾ç½®æœ€å°chunkå¤§å°ï¼Œé¿å…è¿‡åº¦åˆ†å‰²å¯¼è‡´è¿‡å¤šå°æ–‡ä»¶è¯·æ±‚',
    code: `// vite.config.js é…ç½®åˆ†å‰²é˜ˆå€¼
export default {
  build: {
    rollupOptions: {
      output: {
        manualChunks: {
          // åˆå¹¶å°äº20kbçš„æ¨¡å—
          vendor: ['vue', 'vue-router', ...]
        },
        minChunkSize: 20000 // 20kb
      }
    }
  }
};`
  },
  {
    title: 'å…±äº«ä¾èµ–æå–',
    description: 'æå–å¤šä¸ªæ¨¡å—å…±äº«çš„å…¬å…±ä¾èµ–ï¼Œé¿å…é‡å¤æ‰“åŒ…',
    code: `// webpacké…ç½®
module.exports = {
  optimization: {
    splitChunks: {
      chunks: 'all',
      cacheGroups: {
        commons: {
          test: /[\\\\/]node_modules[\\\\/]/,
          name: 'vendors',
          chunks: 'all'
        }
      }
    }
  }
};`
  },
  {
    title: 'éª¨æ¶å±åŠ è½½çŠ¶æ€',
    description: 'åœ¨åŠ¨æ€åŠ è½½æœŸé—´æ˜¾ç¤ºéª¨æ¶å±ï¼Œæå‡ç”¨æˆ·ä½“éªŒ',
    code: `// å¸¦åŠ è½½çŠ¶æ€çš„å¼‚æ­¥ç»„ä»¶
const AsyncComponent = defineAsyncComponent({
  loader: () => import('./HeavyComponent.vue'),
  loadingComponent: SkeletonComponent,
  delay: 200, // å»¶è¿Ÿæ˜¾ç¤ºåŠ è½½çŠ¶æ€
  errorComponent: ErrorComponent,
  timeout: 3000 // è¶…æ—¶æ—¶é—´
});`
  },
  {
    title: 'åŸºäºç½‘ç»œæ¡ä»¶åŠ è½½',
    description: 'æ ¹æ®ç”¨æˆ·ç½‘ç»œçŠ¶å†µè°ƒæ•´åŠ è½½ç­–ç•¥ï¼ˆå¦‚æ…¢é€Ÿç½‘ç»œåŠ è½½è½»é‡ç‰ˆï¼‰',
    code: `// æ£€æµ‹ç½‘ç»œçŠ¶å†µåŠ è½½ä¸åŒèµ„æº
const connection = navigator.connection || navigator.mozConnection;
const saveData = connection?.saveData;

if (saveData || connection?.effectiveType === 'slow-2g') {
  loadLiteVersion();
} else {
  loadFullVersion();
}`
  }
]);

// æ€§èƒ½æ•°æ®
const performanceData = ref([
  {
    label: 'åˆå§‹åŠ è½½ä½“ç§¯',
    before: 100,
    beforeValue: '2.8MB',
    after: 35,
    afterValue: '0.9MB'
  },
  {
    label: 'é¦–æ¬¡å†…å®¹ç»˜åˆ¶ (FCP)',
    before: 100,
    beforeValue: '4.2s',
    after: 55,
    afterValue: '1.9s'
  },
  {
    label: 'æœ€å¤§å†…å®¹ç»˜åˆ¶ (LCP)',
    before: 100,
    beforeValue: '5.1s',
    after: 42,
    afterValue: '2.1s'
  },
  {
    label: 'é¦–æ¬¡è¾“å…¥å»¶è¿Ÿ (FID)',
    before: 100,
    beforeValue: '380ms',
    after: 32,
    afterValue: '120ms'
  },
  {
    label: 'JSæ‰§è¡Œæ—¶é—´',
    before: 100,
    beforeValue: '2.1s',
    after: 45,
    afterValue: '0.9s'
  }
]);

// æ¨èå·¥å…·
const recommendedTools = ref([
  {
    icon: 'ğŸ“¦',
    name: 'Webpack Bundle Analyzer',
    description: 'å¯è§†åŒ–åˆ†ææ‰“åŒ…ç»“æœï¼Œè¯†åˆ«ä¼˜åŒ–æœºä¼š',
    category: 'æ‰“åŒ…åˆ†æå·¥å…·'
  },
  {
    icon: 'âš¡',
    name: 'Vite',
    description: 'ä¸‹ä¸€ä»£å‰ç«¯æ„å»ºå·¥å…·ï¼ŒåŸç”Ÿæ”¯æŒESæ¨¡å—å’Œé«˜æ•ˆä»£ç åˆ†å‰²',
    category: 'æ„å»ºå·¥å…·'
  },
  {
    icon: 'ğŸ”',
    name: 'Chrome DevTools Coverage',
    description: 'è¯†åˆ«æœªä½¿ç”¨ä»£ç ï¼ŒæŒ‡å¯¼åˆ†å‰²å†³ç­–',
    category: 'æ€§èƒ½åˆ†æ'
  },
  {
    icon: 'ğŸ“Š',
    name: 'Rollup',
    description: 'é«˜æ•ˆçš„ESæ¨¡å—æ‰“åŒ…å™¨ï¼Œæ”¯æŒé«˜çº§ä»£ç åˆ†å‰²',
    category: 'æ‰“åŒ…å·¥å…·'
  },
  {
    icon: 'ğŸš¦',
    name: 'Loadable Components',
    description: 'Reactä»£ç åˆ†å‰²åº“ï¼ŒVueæœ‰ç±»ä¼¼æ–¹æ¡ˆ',
    category: 'ä»£ç åˆ†å‰²åº“'
  },
  {
    icon: 'ğŸ“ˆ',
    name: 'Lighthouse',
    description: 'è‡ªåŠ¨åŒ–æ€§èƒ½æ£€æµ‹å·¥å…·ï¼Œæä¾›ä»£ç åˆ†å‰²å»ºè®®',
    category: 'æ€§èƒ½å®¡è®¡'
  }
]);

// æœ€ä½³å®è·µ
const bestPractices = ref([
  {
    title: 'æŒ‰è·¯ç”±åˆ†å‰²ä½œä¸ºåŸºç¡€',
    description: 'ä»è·¯ç”±çº§åˆ†å‰²å¼€å§‹ï¼Œä½œä¸ºä»£ç åˆ†å‰²çš„åŸºç¡€ç­–ç•¥'
  },
  {
    title: 'ä¼˜å…ˆåˆ†å‰²å¤§å‹ç¬¬ä¸‰æ–¹åº“',
    description: 'å°†è¶…è¿‡50kbçš„ç¬¬ä¸‰æ–¹åº“æ‹†åˆ†ä¸ºç‹¬ç«‹chunk'
  },
  {
    title: 'ä½¿ç”¨åŠ¨æ€å¯¼å…¥å»¶è¿ŸåŠ è½½éå…³é”®èµ„æº',
    description: 'å¯¹éé¦–å±ç»„ä»¶å’ŒåŠŸèƒ½ä½¿ç”¨åŠ¨æ€å¯¼å…¥'
  },
  {
    title: 'ç›‘æ§chunkæ•°é‡å’Œå¤§å°',
    description: 'ä¿æŒchunkæ•°é‡åˆç†(10-30ä¸ª)ï¼Œé¿å…è¿‡åº¦åˆ†å‰²'
  },
  {
    title: 'ä¸ºå¼‚æ­¥ç»„ä»¶æ·»åŠ åŠ è½½çŠ¶æ€',
    description: 'æ”¹å–„åŠ è½½è¿‡ç¨‹ä¸­çš„ç”¨æˆ·ä½“éªŒ'
  },
  {
    title: 'é¢„åŠ è½½å…³é”®å¯¼èˆªè·¯å¾„èµ„æº',
    description: 'æå‰åŠ è½½ç”¨æˆ·å¯èƒ½è®¿é—®çš„ä¸‹ä¸€è·¯ç”±èµ„æº'
  }
]);
</script>

<style lang="less" scoped>
@primary-color: #4361ee;
@secondary-color: #3a0ca3;
@success-color: #4cc9f0;
@warning-color: #f72585;
@dark-color: #2b2d42;
@light-bg: #f8f9fa;
@card-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
@border-color: #e9ecef;
@text-color: #343a40;

.code-splitting-container {
  max-width: 1200px;
  margin: 0 auto;
  padding: 1rem;
  font-family: 'Segoe UI', 'Microsoft YaHei', sans-serif;
  color: @text-color;
  background: #fff;
  line-height: 1.6;
}

.splitting-header {
  background: linear-gradient(135deg, @primary-color, @secondary-color);
  color: white;
  border-radius: 14px;
  padding: 2.5rem 2rem;
  margin-bottom: 2.5rem;
  text-align: center;
  position: relative;
  overflow: hidden;
  box-shadow: @card-shadow;

  &:before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 4px;
    background: linear-gradient(90deg, @success-color, @warning-color, #7209b7);
  }

  .header-content {
    max-width: 900px;
    margin: 0 auto 1.8rem;

    h1 {
      font-size: 2.8rem;
      margin-bottom: 0.8rem;
      font-weight: 800;
      text-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);
    }

    .subtitle {
      font-size: 1.4rem;
      opacity: 0.9;
      margin-bottom: 1.5rem;
      font-weight: 400;
    }
  }

  .performance-stats {
    display: flex;
    justify-content: center;
    gap: 1.8rem;
    flex-wrap: wrap;

    .stat-card {
      background: rgba(255, 255, 255, 0.15);
      backdrop-filter: blur(6px);
      border-radius: 12px;
      padding: 1.3rem 1.8rem;
      min-width: 160px;
      text-align: center;
      transition: all 0.3s ease;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);

      &:hover {
        transform: translateY(-8px);
        background: rgba(255, 255, 255, 0.25);
        box-shadow: 0 6px 16px rgba(0, 0, 0, 0.15);
      }

      .stat-icon {
        font-size: 2.3rem;
        margin-bottom: 0.7rem;
      }

      .stat-value {
        font-size: 2.1rem;
        font-weight: 800;
        margin-bottom: 0.2rem;
        letter-spacing: -0.5px;
      }

      .stat-label {
        font-size: 1rem;
        opacity: 0.85;
        font-weight: 500;
      }
    }
  }
}

.section-title {
  display: flex;
  align-items: center;
  gap: 12px;
  font-size: 2rem;
  color: @dark-color;
  margin-bottom: 2rem;
  padding-bottom: 0.8rem;
  border-bottom: 2px solid @primary-color;

  .icon {
    background: linear-gradient(135deg, @primary-color, @secondary-color);
    width: 42px;
    height: 42px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    color: white;
    font-size: 1.5rem;
  }
}

.core-concepts {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
  gap: 1.8rem;
  margin-bottom: 3rem;

  .concept-card {
    background: @light-bg;
    border-radius: 14px;
    padding: 2rem;
    box-shadow: @card-shadow;
    transition: transform 0.3s ease;
    border-top: 4px solid @primary-color;

    &:hover {
      transform: translateY(-5px);
      box-shadow: 0 8px 25px rgba(0, 0, 0, 0.12);
    }

    .concept-icon {
      font-size: 2.5rem;
      margin-bottom: 1.2rem;
    }

    h2 {
      font-size: 1.6rem;
      margin-top: 0;
      margin-bottom: 1.2rem;
      color: @dark-color;
    }

    p {
      color: #495057;
      line-height: 1.7;
    }

    ul {
      padding-left: 1.5rem;

      li {
        margin-bottom: 0.7rem;
        position: relative;
        padding-left: 1.2rem;

        &::before {
          content: 'â€¢';
          position: absolute;
          left: 0;
          color: @primary-color;
          font-weight: bold;
        }
      }
    }
  }
}

.splitting-methods {
  margin-bottom: 3.5rem;

  .method-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(500px, 1fr));
    gap: 2rem;

    @media (max-width: 560px) {
      grid-template-columns: 1fr;
    }
  }

  .method-card {
    background: white;
    border-radius: 14px;
    overflow: hidden;
    box-shadow: @card-shadow;
    border: 1px solid @border-color;
    transition: transform 0.3s ease;

    &:hover {
      transform: translateY(-7px);
      box-shadow: 0 8px 30px rgba(0, 0, 0, 0.15);
    }

    .method-header {
      padding: 1.8rem 1.8rem 1.2rem;
      display: flex;
      align-items: center;
      gap: 1rem;
      background: linear-gradient(120deg, @light-bg, white);
      border-bottom: 1px solid @border-color;

      .method-icon {
        font-size: 1.8rem;
        background: @primary-color;
        color: white;
        width: 50px;
        height: 50px;
        border-radius: 12px;
        display: flex;
        align-items: center;
        justify-content: center;
      }

      h3 {
        margin: 0;
        font-size: 1.5rem;
        color: @dark-color;
      }
    }

    .method-desc {
      padding: 1.2rem 1.8rem 0;
      color: #495057;
      font-size: 1.05rem;
      line-height: 1.7;
    }

    .implementation-box {
      padding: 1.2rem 1.8rem 0;

      .impl-title {
        font-weight: 600;
        margin-bottom: 0.8rem;
        color: #495057;
      }

      pre {
        background: #2b2d42;
        border-radius: 8px;
        padding: 1.2rem;
        overflow-x: auto;
        margin: 0;

        code {
          color: #f5f5f5;
          font-family: 'Fira Code', 'Courier New', monospace;
          font-size: 0.95rem;
          line-height: 1.5;
        }
      }
    }

    .pros-cons {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 1.5rem;
      padding: 1.5rem 1.8rem 0;

      @media (max-width: 768px) {
        grid-template-columns: 1fr;
      }

      .pros,
      .cons {
        background: @light-bg;
        border-radius: 8px;
        padding: 1.2rem;
      }

      .pros {
        border-left: 3px solid @success-color;
      }

      .cons {
        border-left: 3px solid @warning-color;
      }

      .pc-title {
        font-weight: 700;
        margin-bottom: 0.8rem;
        font-size: 1.05rem;
      }

      ul {
        padding-left: 1.2rem;
        margin: 0;

        li {
          margin-bottom: 0.5rem;
          font-size: 0.95rem;
        }
      }
    }

    .use-cases {
      padding: 1.5rem 1.8rem;
      background: rgba(@primary-color, 0.03);
      border-top: 1px solid @border-color;

      .uc-title {
        font-weight: 600;
        margin-bottom: 0.8rem;
        color: #495057;
      }

      .tag-list {
        display: flex;
        flex-wrap: wrap;
        gap: 0.6rem;
      }

      .scene-tag {
        background: rgba(@primary-color, 0.1);
        color: @primary-color;
        font-size: 0.85rem;
        padding: 0.4rem 0.9rem;
        border-radius: 100px;
        font-weight: 500;
        border: 1px solid rgba(@primary-color, 0.2);
      }
    }
  }
}

.optimization-tips {
  margin-bottom: 3.5rem;

  .tips-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
    gap: 2rem;

    @media (max-width: 400px) {
      grid-template-columns: 1fr;
    }
  }

  .tip-card {
    background: white;
    border-radius: 14px;
    padding: 1.8rem;
    box-shadow: @card-shadow;
    display: flex;
    gap: 1.5rem;
    border-left: 4px solid @primary-color;
    transition: transform 0.3s ease;

    &:hover {
      transform: translateY(-5px);
      box-shadow: 0 8px 25px rgba(0, 0, 0, 0.12);
    }

    .tip-number {
      background: @primary-color;
      color: white;
      width: 42px;
      height: 42px;
      border-radius: 12px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1.4rem;
      font-weight: 700;
      flex-shrink: 0;
    }

    .tip-content {
      flex: 1;

      h3 {
        margin-top: 0;
        margin-bottom: 0.8rem;
        font-size: 1.3rem;
        color: @dark-color;
      }

      p {
        color: #495057;
        line-height: 1.7;
        margin-bottom: 1.2rem;
      }

      .tip-code {
        background: #2d3748;
        border-radius: 8px;
        padding: 1.2rem;
        overflow-x: auto;

        pre {
          margin: 0;
          white-space: pre-wrap;

          code {
            color: #e2e8f0;
            font-family: 'Fira Code', 'Courier New', monospace;
            font-size: 0.9rem;
            line-height: 1.5;
          }
        }
      }
    }
  }
}

.performance-comparison {
  margin-bottom: 3.5rem;

  .comparison-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(450px, 1fr));
    gap: 2.5rem;
    margin-bottom: 2.5rem;

    @media (max-width: 500px) {
      grid-template-columns: 1fr;
    }

    .comparison-card {
      background: white;
      border-radius: 14px;
      overflow: hidden;
      box-shadow: @card-shadow;

      .comp-header {
        padding: 1.5rem;
        text-align: center;
        font-weight: 600;
        color: white;

        &.no-split {
          background: linear-gradient(135deg, #e76f51, #e63946);
        }

        &.with-split {
          background: linear-gradient(135deg, #2a9d8f, #1d3557);
        }

        h3 {
          margin: 0;
          font-size: 1.4rem;
        }
      }

      .comp-sizes {
        padding: 1.8rem 1.5rem 1rem;
        display: flex;
        gap: 4px;
        align-items: flex-end;
        height: 100px;
        background: #f8f9fa;

        .size-bar {
          border-radius: 8px 8px 0 0;
          position: relative;
          transition: height 0.5s ease;
          box-shadow: 0 -2px 4px rgba(0, 0, 0, 0.1);

          .size-label {
            position: absolute;
            bottom: -30px;
            left: 0;
            right: 0;
            text-align: center;
            font-size: 0.85rem;
            font-weight: 500;
          }

          &.main {
            background: linear-gradient(to top, #4361ee, #3a0ca3);
          }

          &.vendor {
            background: linear-gradient(to top, #4cc9f0, #4895ef);
          }

          &.async {
            background: linear-gradient(to top, #f72585, #b5179e);
          }
        }
      }

      .comp-metrics {
        display: flex;
        padding: 1.5rem;
        border-top: 1px solid @border-color;

        .metric {
          flex: 1;
          text-align: center;
          padding: 0 0.5rem;

          .metric-value {
            font-size: 1.6rem;
            font-weight: 700;
            margin-bottom: 0.3rem;
          }

          .metric-label {
            font-size: 0.9rem;
            color: #6c757d;
          }
        }
      }
    }
  }

  .performance-chart {
    background: white;
    border-radius: 14px;
    padding: 2rem;
    box-shadow: @card-shadow;

    .chart-bar {
      margin-bottom: 1.8rem;

      .bar-label {
        font-weight: 600;
        margin-bottom: 0.8rem;
        display: flex;
        align-items: center;
      }

      .bar-container {
        display: flex;
        height: 40px;
        background: @light-bg;
        border-radius: 8px;
        overflow: hidden;
        position: relative;

        .bar {
          height: 100%;
          display: flex;
          align-items: center;
          padding: 0 1rem;
          font-weight: 600;
          color: white;
          transition: width 1s ease;
          position: relative;

          &.before {
            background: linear-gradient(90deg, #e76f51, #e63946);
            justify-content: flex-end;
          }

          &.after {
            background: linear-gradient(90deg, #2a9d8f, #1d3557);
          }

          .bar-value {
            position: absolute;
            right: 12px;
            text-shadow: 0 1px 2px rgba(0, 0, 0, 0.3);
          }
        }
      }
    }
  }
}

.tool-recommendations {
  margin-bottom: 3.5rem;

  .tools-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
    gap: 1.8rem;
  }

  .tool-card {
    background: white;
    border-radius: 14px;
    padding: 2rem 1.8rem;
    text-align: center;
    box-shadow: @card-shadow;
    transition: all 0.3s ease;
    border: 1px solid @border-color;
    position: relative;
    overflow: hidden;

    &:hover {
      transform: translateY(-8px);
      box-shadow: 0 12px 25px rgba(0, 0, 0, 0.12);

      .tool-icon {
        transform: scale(1.15) rotate(5deg);
      }
    }

    .tool-icon {
      font-size: 2.8rem;
      margin-bottom: 1.3rem;
      transition: all 0.3s ease;
      display: inline-block;
    }

    h3 {
      margin: 0 0 0.8rem;
      font-size: 1.4rem;
      color: @dark-color;
    }

    p {
      color: #495057;
      line-height: 1.7;
      min-height: 70px;
    }

    .tool-category {
      background: rgba(@primary-color, 0.08);
      color: @primary-color;
      font-size: 0.9rem;
      font-weight: 600;
      padding: 0.5rem 1rem;
      border-radius: 100px;
      display: inline-block;
      margin-top: 1.2rem;
    }
  }
}

.best-practices {
  margin-bottom: 3.5rem;

  .practices-list {
    background: white;
    border-radius: 14px;
    overflow: hidden;
    box-shadow: @card-shadow;
  }

  .practice-item {
    display: flex;
    padding: 1.8rem;
    border-bottom: 1px solid @border-color;
    position: relative;
    transition: all 0.3s ease;

    &:last-child {
      border-bottom: none;
    }

    &:hover {
      background: rgba(@primary-color, 0.03);

      .practice-number {
        background: @secondary-color;
        transform: scale(1.05);
      }
    }

    .practice-number {
      background: @primary-color;
      color: white;
      width: 46px;
      height: 46px;
      border-radius: 12px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1.5rem;
      font-weight: 700;
      flex-shrink: 0;
      margin-right: 1.5rem;
      transition: all 0.3s ease;
      position: relative;
      top: 5px;
    }

    .practice-content {
      flex: 1;

      h3 {
        margin: 0 0 0.8rem;
        font-size: 1.4rem;
        color: @dark-color;
        display: flex;
        align-items: center;

        &::after {
          content: '';
          flex: 1;
          height: 1px;
          background: linear-gradient(90deg, @border-color, transparent);
          margin-left: 1rem;
        }
      }

      p {
        color: #495057;
        line-height: 1.7;
        margin: 0;
      }
    }
  }
}

.splitting-footer {
  background: @dark-color;
  color: rgba(255, 255, 255, 0.7);
  text-align: center;
  padding: 2.5rem 1.5rem;
  border-radius: 14px;
  margin-top: 3rem;
  font-size: 1.05rem;

  p {
    margin: 0.5rem 0;

    &:first-child {
      font-weight: 500;
      font-size: 1.1rem;
      color: white;
    }
  }
}

/* å“åº”å¼è°ƒæ•´ */
@media (max-width: 768px) {
  .splitting-header {
    padding: 1.8rem 1.2rem;

    .header-content {
      h1 {
        font-size: 2.2rem;
      }

      .subtitle {
        font-size: 1.1rem;
      }
    }

    .performance-stats {
      gap: 1rem;

      .stat-card {
        padding: 1rem 1.2rem;
        min-width: 130px;

        .stat-icon {
          font-size: 1.8rem;
        }

        .stat-value {
          font-size: 1.8rem;
        }
      }
    }
  }

  .section-title {
    font-size: 1.6rem;

    .icon {
      width: 38px;
      height: 38px;
      font-size: 1.3rem;
    }
  }

  .core-concepts {
    grid-template-columns: 1fr;
    gap: 1.2rem;
  }

  .splitting-methods {
    .method-grid {
      grid-template-columns: 1fr;
    }

    .method-card {
      .pros-cons {
        grid-template-columns: 1fr;
      }
    }
  }

  .optimization-tips {
    .tips-grid {
      grid-template-columns: 1fr;
    }
  }

  .performance-comparison {
    .comparison-grid {
      grid-template-columns: 1fr;
    }
  }
}

@media (max-width: 480px) {
  .splitting-header {
    .performance-stats {
      flex-direction: column;
      align-items: center;

      .stat-card {
        width: 80%;
      }
    }
  }

  .practice-item {
    flex-direction: column;

    .practice-number {
      margin-right: 0;
      margin-bottom: 1.2rem;
    }

    .practice-content {
      h3::after {
        display: none;
      }
    }
  }
}

/* æ·»åŠ åŠ¨ç”»æ•ˆæœ */
@keyframes float {

  0%,
  100% {
    transform: translateY(0);
  }

  50% {
    transform: translateY(-10px);
  }
}

.method-card .method-icon {
  animation: float 4s ease-in-out infinite;
}

.tool-card .tool-icon {
  animation: float 5s ease-in-out infinite;
}
</style>