<template>
  <div class="esm-container">
    <header class="app-header">
      <h1>ES ModuleåŠ è½½åŸç†æ·±åº¦è§£æ</h1>
      <p class="subtitle">æ¢ç´¢ç°ä»£JavaScriptæ¨¡å—ç³»ç»Ÿçš„åº•å±‚å·¥ä½œæœºåˆ¶</p>
    </header>

    <div class="content-wrapper">
      <!-- ä»‹ç»éƒ¨åˆ† -->
      <section class="intro-section">
        <div class="info-card">
          <div class="header-with-icon">
            <div class="icon">ğŸ“¦</div>
            <h2>ä»€ä¹ˆæ˜¯ES Module?</h2>
          </div>
          <p>ES Moduleï¼ˆECMAScript Moduleï¼‰æ˜¯JavaScriptå®˜æ–¹çš„æ¨¡å—ç³»ç»Ÿï¼ŒäºES6(2015)å¼•å…¥ã€‚å®ƒæä¾›äº†æ¨¡å—åŒ–ç¼–ç¨‹çš„æ ‡å‡†åŒ–æ–¹æ¡ˆï¼Œå…·æœ‰é™æ€ç»“æ„ã€å¼‚æ­¥åŠ è½½ã€å¾ªç¯å¼•ç”¨å¤„ç†ç­‰ç‰¹æ€§ã€‚</p>

          <div class="key-features">
            <div class="feature">
              <div class="feature-icon">ğŸ”</div>
              <h3>é™æ€ç»“æ„</h3>
              <p>ä¾èµ–å…³ç³»åœ¨ä»£ç æ‰§è¡Œå‰ç¡®å®š</p>
            </div>
            <div class="feature">
              <div class="feature-icon">âš¡</div>
              <h3>å¼‚æ­¥åŠ è½½</h3>
              <p>æ”¯æŒæŒ‰éœ€åŠ è½½å’Œä»£ç åˆ†å‰²</p>
            </div>
            <div class="feature">
              <div class="feature-icon">ğŸ”„</div>
              <h3>å¾ªç¯å¼•ç”¨</h3>
              <p>å†…ç½®å¾ªç¯ä¾èµ–å¤„ç†æœºåˆ¶</p>
            </div>
          </div>
        </div>
      </section>

      <!-- åŠ è½½è¿‡ç¨‹ -->
      <section class="process-section">
        <h2 class="section-title">æ¨¡å—åŠ è½½å››ä¸ªæ ¸å¿ƒé˜¶æ®µ</h2>

        <div class="process-steps">
          <div class="step-card">
            <div class="step-header">
              <div class="step-number">1</div>
              <h3>è§£æ(Resolution)</h3>
            </div>
            <div class="step-content">
              <p>ç¡®å®šæ¨¡å—ä¾èµ–å…³ç³»ï¼Œæ„å»ºæ¨¡å—ä¾èµ–å›¾</p>
              <div class="technical-details">
                <h4>åº•å±‚åŸç†ï¼š</h4>
                <ul>
                  <li>ä»å…¥å£æ–‡ä»¶å¼€å§‹æ·±åº¦ä¼˜å…ˆéå†</li>
                  <li>è§£æ<code>import</code>è¯­å¥ï¼Œè·å–æ¨¡å—URL</li>
                  <li>å°†æ¨¡å—URLè§£æä¸ºç»å¯¹è·¯å¾„</li>
                  <li>æ£€æŸ¥æ¨¡å—ç¼“å­˜é¿å…é‡å¤åŠ è½½</li>
                </ul>
              </div>
              <pre class="code-block">// è§£æè¿‡ç¨‹ç¤ºä¾‹
import utils from './utils.js';
import { PI } from './math/constants.js';</pre>
            </div>
          </div>

          <div class="step-card">
            <div class="step-header">
              <div class="step-number">2</div>
              <h3>è·å–(Fetching)</h3>
            </div>
            <div class="step-content">
              <p>ä¸‹è½½æ¨¡å—æºä»£ç å¹¶è§£æä¸ºæ¨¡å—è®°å½•</p>
              <div class="technical-details">
                <h4>åº•å±‚åŸç†ï¼š</h4>
                <ul>
                  <li>æµè§ˆå™¨å‘èµ·ç½‘ç»œè¯·æ±‚è·å–æ¨¡å—æ–‡ä»¶</li>
                  <li>Node.jsä»æ–‡ä»¶ç³»ç»Ÿè¯»å–æ¨¡å—</li>
                  <li>è§£ææºä»£ç ä¸ºæŠ½è±¡è¯­æ³•æ ‘(AST)</li>
                  <li>åˆ›å»ºæ¨¡å—è®°å½•(Module Record)</li>
                </ul>
              </div>
              <div class="module-record">
                <div class="record-header">æ¨¡å—è®°å½•ç»“æ„</div>
                <pre class="code-block">ModuleRecord {
  Environment: {...},    // è¯æ³•ç¯å¢ƒ
  RequestedModules: [],  // ä¾èµ–æ¨¡å—
  ImportEntries: [],     // å¯¼å…¥æ¡ç›®
  ExportEntries: []      // å¯¼å‡ºæ¡ç›®
}</pre>
              </div>
            </div>
          </div>

          <div class="step-card">
            <div class="step-header">
              <div class="step-number">3</div>
              <h3>å®ä¾‹åŒ–(Instantiation)</h3>
            </div>
            <div class="step-content">
              <p>ä¸ºæ¨¡å—åˆ›å»ºä½œç”¨åŸŸå¹¶ç»‘å®šå¯¼å…¥å¯¼å‡º</p>
              <div class="technical-details">
                <h4>åº•å±‚åŸç†ï¼š</h4>
                <ul>
                  <li>æ·±åº¦ä¼˜å…ˆéå†ä¾èµ–å›¾</li>
                  <li>ä¸ºæ¯ä¸ªæ¨¡å—åˆ›å»ºæ¨¡å—ç¯å¢ƒè®°å½•(Module Environment Record)</li>
                  <li>åœ¨å†…å­˜ä¸­ä¸ºå¯¼å‡ºåˆ†é…ç©ºé—´ï¼ˆä½†æœªèµ‹å€¼ï¼‰</li>
                  <li>å»ºç«‹å¯¼å…¥ä¸å¯¼å‡ºçš„ç»‘å®šå…³ç³»</li>
                </ul>
              </div>
              <div class="binding-visual">
                <div class="binding-diagram">
                  <div class="module">
                    <div class="module-name">moduleA.js</div>
                    <div class="exports">
                      <div class="export-item">count: <span class="uninitialized">æœªåˆå§‹åŒ–</span></div>
                    </div>
                  </div>
                  <div class="binding-arrow">â‡„</div>
                  <div class="module">
                    <div class="module-name">moduleB.js</div>
                    <div class="imports">
                      <div class="import-item">count: <span class="binding">ç»‘å®šåˆ°moduleA</span></div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <div class="step-card">
            <div class="step-header">
              <div class="step-number">4</div>
              <h3>æ±‚å€¼(Evaluation)</h3>
            </div>
            <div class="step-content">
              <p>æ‰§è¡Œæ¨¡å—ä»£ç å¹¶å¡«å……å¯¼å‡ºå€¼</p>
              <div class="technical-details">
                <h4>åº•å±‚åŸç†ï¼š</h4>
                <ul>
                  <li>æ·±åº¦ä¼˜å…ˆéå†ä¾èµ–å›¾ï¼ˆååºéå†ï¼‰</li>
                  <li>æ‰§è¡Œæ¨¡å—é¡¶å±‚ä»£ç </li>
                  <li>å¡«å……å¯¼å‡ºå˜é‡çš„å€¼</li>
                  <li>å¤„ç†å¾ªç¯ä¾èµ–ï¼ˆé€šè¿‡"æ­»åŒº"æœºåˆ¶ï¼‰</li>
                </ul>
              </div>
              <div class="execution-flow">
                <div class="flow-diagram">
                  <div class="module">dependency1</div>
                  <div class="arrow">â†“</div>
                  <div class="module">dependency2</div>
                  <div class="arrow">â†“</div>
                  <div class="module main">main module</div>
                  <div class="flow-label">æ·±åº¦ä¼˜å…ˆååºéå†</div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </section>

      <!-- å…³é”®æœºåˆ¶ -->
      <section class="mechanisms-section">
        <h2 class="section-title">å…³é”®æœºåˆ¶åŸºç¡€ä»‹ç»</h2>

        <div class="mechanism-grid">
          <div class="mechanism-card">
            <div class="mechanism-header">
              <div class="icon">ğŸ”„</div>
              <h3>å¾ªç¯ä¾èµ–å¤„ç†</h3>
            </div>
            <div class="mechanism-content">
              <p>ES Moduleé€šè¿‡"ç»‘å®š"æœºåˆ¶å¤„ç†å¾ªç¯ä¾èµ–</p>
              <pre class="code-block">// moduleA.js
import { b } from './moduleB.js';
export const a = 'A';
console.log(b); // è¾“å‡º: B

// moduleB.js
import { a } from './moduleA.js';
export const b = 'B';
console.log(a); // è¾“å‡º: undefined (æ­»åŒº)</pre>
              <div class="explanation">
                <h4>å·¥ä½œåŸç†ï¼š</h4>
                <ol>
                  <li>æ¨¡å—Aå’ŒBåœ¨å®ä¾‹åŒ–é˜¶æ®µå»ºç«‹ç»‘å®šå…³ç³»</li>
                  <li>æ‰§è¡Œé˜¶æ®µå…ˆæ‰§è¡ŒmoduleB</li>
                  <li>æ­¤æ—¶moduleAå°šæœªæ‰§è¡Œï¼Œå¯¼å‡ºaå¤„äºæœªåˆå§‹åŒ–çŠ¶æ€</li>
                  <li>moduleBè®¿é—®aæ—¶å¾—åˆ°undefinedï¼ˆTDZï¼‰</li>
                  <li>moduleAæ‰§è¡Œåï¼Œaçš„å€¼è‡ªåŠ¨æ›´æ–°</li>
                </ol>
              </div>
            </div>
          </div>

          <div class="mechanism-card">
            <div class="mechanism-header">
              <div class="icon">ğŸ”—</div>
              <h3>å®æ—¶ç»‘å®š(Live Bindings)</h3>
            </div>
            <div class="mechanism-content">
              <p>å¯¼å…¥å¯¼å‡ºæ˜¯åŠ¨æ€ç»‘å®šå…³ç³»ï¼Œè€Œéå€¼æ‹·è´</p>
              <pre class="code-block">// counter.js
export let count = 0;
export function increment() {
  count++;
}

// main.js
import { count, increment } from './counter.js';
console.log(count); // 0
increment();
console.log(count); // 1 (å®æ—¶æ›´æ–°)</pre>
              <div class="explanation">
                <h4>ç‰¹ç‚¹ï¼š</h4>
                <ul>
                  <li>å¯¼å‡ºæ¨¡å—ä¿®æ”¹å˜é‡ä¼šåæ˜ åœ¨æ‰€æœ‰å¯¼å…¥æ¨¡å—</li>
                  <li>å¯¼å…¥æ¨¡å—ä¸èƒ½ç›´æ¥ä¿®æ”¹ç»‘å®šå˜é‡ï¼ˆåªè¯»ï¼‰</li>
                  <li>ä¸CommonJSçš„å€¼æ‹·è´æœ‰æœ¬è´¨åŒºåˆ«</li>
                </ul>
              </div>
            </div>
          </div>

          <div class="mechanism-card">
            <div class="mechanism-header">
              <div class="icon">ğŸ“</div>
              <h3>é™æ€åˆ†æ</h3>
            </div>
            <div class="mechanism-content">
              <p>ä¾èµ–å…³ç³»åœ¨ä»£ç æ‰§è¡Œå‰ç¡®å®š</p>
              <div class="static-analysis">
                <pre class="code-block">// æœ‰æ•ˆå¯¼å…¥ï¼ˆé™æ€ï¼‰
import { foo } from './module.js';

// æ— æ•ˆå¯¼å…¥ï¼ˆåŠ¨æ€ï¼‰
if (condition) {
  import('./module.js'); // åªèƒ½ç”¨äºåŠ¨æ€å¯¼å…¥
}</pre>
                <div class="analysis-details">
                  <h4>ä¼˜åŠ¿ï¼š</h4>
                  <ul>
                    <li>æ”¯æŒtree-shakingä¼˜åŒ–</li>
                    <li>æé«˜ä»£ç å¯é¢„æµ‹æ€§</li>
                    <li>ä¾¿äºå·¥å…·è¿›è¡Œé™æ€åˆ†æ</li>
                    <li>æ”¯æŒç¼–è¯‘æ—¶ä¼˜åŒ–</li>
                  </ul>
                </div>
              </div>
            </div>
          </div>

          <div class="mechanism-card">
            <div class="mechanism-header">
              <div class="icon">âš™ï¸</div>
              <h3>æ¨¡å—ç¼“å­˜</h3>
            </div>
            <div class="mechanism-content">
              <p>æ¯ä¸ªæ¨¡å—åªåŠ è½½å’Œæ‰§è¡Œä¸€æ¬¡</p>
              <div class="cache-visual">
                <div class="cache-diagram">
                  <div class="module-entry">å…¥å£æ¨¡å—</div>
                  <div class="arrow">â†“</div>
                  <div class="cache-box">
                    <div class="cache-header">æ¨¡å—ç¼“å­˜</div>
                    <div class="cached-module">moduleA.js âœ“</div>
                    <div class="cached-module">moduleB.js âœ“</div>
                    <div class="cached-module">moduleC.js âœ“</div>
                  </div>
                </div>
              </div>
              <div class="explanation">
                <h4>ç¼“å­˜æœºåˆ¶ï¼š</h4>
                <ul>
                  <li>ä»¥æ¨¡å—URLä¸ºé”®ç¼“å­˜æ¨¡å—å®ä¾‹</li>
                  <li>ç›¸åŒURLçš„å¯¼å…¥è¿”å›ç¼“å­˜å®ä¾‹</li>
                  <li>ç¡®ä¿æ¨¡å—çŠ¶æ€ä¸€è‡´æ€§</li>
                  <li>é¿å…é‡å¤åŠ è½½å’Œæ‰§è¡Œ</li>
                </ul>
              </div>
            </div>
          </div>
        </div>
      </section>

      <!-- å¯¹æ¯” -->
      <section class="comparison-section">
        <h2 class="section-title">ES Module vs CommonJS</h2>

        <div class="comparison-table">
          <table>
            <thead>
              <tr>
                <th>ç‰¹æ€§</th>
                <th>ES Module</th>
                <th>CommonJS</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>åŠ è½½æ–¹å¼</td>
                <td>å¼‚æ­¥åŠ è½½</td>
                <td>åŒæ­¥åŠ è½½</td>
              </tr>
              <tr>
                <td>åŠ è½½æ—¶æœº</td>
                <td>ç¼–è¯‘æ—¶</td>
                <td>è¿è¡Œæ—¶</td>
              </tr>
              <tr>
                <td>å¯¼å‡ºç±»å‹</td>
                <td>å®æ—¶ç»‘å®š</td>
                <td>å€¼æ‹·è´</td>
              </tr>
              <tr>
                <td>å¾ªç¯ä¾èµ–</td>
                <td>æ”¯æŒï¼ˆéƒ¨åˆ†æœªåˆå§‹åŒ–ï¼‰</td>
                <td>æ”¯æŒï¼ˆéƒ¨åˆ†æœªåŠ è½½ï¼‰</td>
              </tr>
              <tr>
                <td>Tree Shaking</td>
                <td>æ”¯æŒ</td>
                <td>ä¸æ”¯æŒ</td>
              </tr>
              <tr>
                <td>åŠ¨æ€å¯¼å…¥</td>
                <td><code>import()</code></td>
                <td><code>require()</code></td>
              </tr>
              <tr>
                <td>é¡¶å±‚ä½œç”¨åŸŸ</td>
                <td>æ¨¡å—ä½œç”¨åŸŸ</td>
                <td>æ–‡ä»¶ä½œç”¨åŸŸ</td>
              </tr>
            </tbody>
          </table>
        </div>

        <div class="key-differences">
          <h3>æ ¸å¿ƒå·®å¼‚æ€»ç»“</h3>
          <ul>
            <li><strong>åŠ è½½æœºåˆ¶</strong>ï¼šESMæ˜¯å¼‚æ­¥çš„ã€é™æ€çš„ï¼›CJSæ˜¯åŒæ­¥çš„ã€åŠ¨æ€çš„</li>
            <li><strong>ç»‘å®šæ–¹å¼</strong>ï¼šESMä½¿ç”¨å®æ—¶ç»‘å®šï¼›CJSä½¿ç”¨å€¼æ‹·è´</li>
            <li><strong>è®¾è®¡ç›®æ ‡</strong>ï¼šESMä¸ºæµè§ˆå™¨è®¾è®¡ï¼›CJSä¸ºæœåŠ¡å™¨è®¾è®¡</li>
            <li><strong>æ€§èƒ½ä¼˜åŒ–</strong>ï¼šESMæ”¯æŒtree-shakingï¼›CJSä¸æ”¯æŒ</li>
          </ul>
        </div>
      </section>

      <!-- ç°ä»£åº”ç”¨ -->
      <section class="modern-usage">
        <h2 class="section-title">ç°ä»£åº”ç”¨ä¸­çš„ES Module</h2>

        <div class="usage-grid">
          <div class="usage-card">
            <div class="usage-icon">ğŸŒ</div>
            <h3>æµè§ˆå™¨åŸç”Ÿæ”¯æŒ</h3>
            <pre class="code-block">&lt;script type="module" src="app.js"&gt;&lt;/script&gt;</pre>
            <p>ç°ä»£æµè§ˆå™¨ç›´æ¥æ”¯æŒES Module</p>
          </div>

          <div class="usage-card">
            <div class="usage-icon">ğŸ› ï¸</div>
            <h3>Node.jsæ”¯æŒ</h3>
            <pre class="code-block">// package.json
{
  "type": "module"
}</pre>
            <p>Node.js 12+ åŸç”Ÿæ”¯æŒES Module</p>
          </div>

          <div class="usage-card">
            <div class="usage-icon">âš¡</div>
            <h3>æ‰“åŒ…å·¥å…·å¤„ç†</h3>
            <pre class="code-block">// webpack.config.js
module.exports = {
  experiments: {
    outputModule: true
  }
};</pre>
            <p>Webpack/Rollupç­‰å·¥å…·ä¼˜åŒ–ESM</p>
          </div>
        </div>

        <div class="optimization">
          <h3>æ€§èƒ½ä¼˜åŒ–å»ºè®®</h3>
          <ul>
            <li>ä½¿ç”¨é™æ€å¯¼å…¥ä¼˜å…ˆ</li>
            <li>æŒ‰éœ€ä½¿ç”¨åŠ¨æ€å¯¼å…¥ <code>import()</code> è¿›è¡Œä»£ç åˆ†å‰²</li>
            <li>åˆ©ç”¨HTTP/2çš„å¤šè·¯å¤ç”¨ä¼˜åŒ–æ¨¡å—åŠ è½½</li>
            <li>ä½¿ç”¨é¢„åŠ è½½æŒ‡ä»¤ <code>&lt;link rel="modulepreload"&gt;</code></li>
            <li>æ¨¡å—é™æ€åˆ†æå®ç°tree-shaking</li>
          </ul>
        </div>
      </section>
    </div>
  </div>
</template>

<script setup lang="ts">
import { ref } from 'vue';

// ç¤ºä¾‹æ•°æ®
const moduleExamples = ref([
  { name: "é™æ€å¯¼å…¥", code: "import { func } from './module.js';" },
  { name: "åŠ¨æ€å¯¼å…¥", code: "const module = await import('./module.js');" },
  { name: "é»˜è®¤å¯¼å‡º", code: "export default function() {};" },
  { name: "å‘½åå¯¼å‡º", code: "export const value = 42;" }
]);
</script>

<style lang="less" scoped>
@primary-color: #4361ee;
@secondary-color: #3a0ca3;
@accent-color: #4cc9f0;
@light-bg: #f8f9fa;
@card-bg: #ffffff;
@border-color: #e0e0e0;
@code-bg: #2d2d2d;

.esm-container {
  max-width: 1200px;
  margin: 0 auto;
  padding: 20px;
  font-family: 'Segoe UI', 'Helvetica Neue', Arial, sans-serif;
  background-color: @light-bg;
  color: #333;
  min-height: 100vh;
  line-height: 1.6;
}

.app-header {
  text-align: center;
  margin-bottom: 30px;
  padding: 30px 20px;
  background: linear-gradient(135deg, @primary-color, @secondary-color);
  color: white;
  border-radius: 12px;
  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);

  h1 {
    margin: 0;
    font-size: 2.5rem;
    font-weight: 700;
  }

  .subtitle {
    margin: 10px 0 0;
    font-size: 1.2rem;
    opacity: 0.9;
    font-weight: 300;
  }
}

.content-wrapper {
  background-color: white;
  border-radius: 12px;
  padding: 25px;
  box-shadow: 0 4px 15px rgba(0, 0, 0, 0.05);
}

.section-title {
  font-size: 1.8rem;
  color: @secondary-color;
  border-bottom: 2px solid @primary-color;
  padding-bottom: 10px;
  margin-top: 40px;
  margin-bottom: 20px;
}

// ä»‹ç»éƒ¨åˆ†æ ·å¼
.intro-section {
  .info-card {
    background-color: #eef2ff;
    border-left: 4px solid @primary-color;
    padding: 25px;
    border-radius: 8px;
    margin-bottom: 30px;

    .header-with-icon {
      display: flex;
      align-items: center;
      margin-bottom: 20px;

      .icon {
        font-size: 2rem;
        margin-right: 15px;
        color: @primary-color;
      }

      h2 {
        margin: 0;
        color: @secondary-color;
        font-size: 1.6rem;
      }
    }

    p {
      font-size: 1.1rem;
      margin-bottom: 20px;
    }
  }

  .key-features {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
    gap: 20px;
    margin-top: 25px;

    .feature {
      background-color: @card-bg;
      border: 1px solid @border-color;
      border-radius: 8px;
      padding: 20px;
      text-align: center;
      transition: transform 0.3s ease;
      box-shadow: 0 3px 8px rgba(0, 0, 0, 0.05);

      &:hover {
        transform: translateY(-5px);
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
      }

      .feature-icon {
        font-size: 2.5rem;
        margin-bottom: 15px;
      }

      h3 {
        margin: 0 0 10px 0;
        color: @secondary-color;
      }

      p {
        margin: 0;
        color: #555;
        font-size: 0.95rem;
      }
    }
  }
}

// åŠ è½½è¿‡ç¨‹éƒ¨åˆ†
.process-section {
  .process-steps {
    display: grid;
    grid-template-columns: 1fr;
    gap: 30px;
    margin-top: 20px;
  }

  .step-card {
    background-color: @card-bg;
    border: 1px solid @border-color;
    border-radius: 10px;
    overflow: hidden;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);

    .step-header {
      display: flex;
      align-items: center;
      padding: 15px 20px;
      background: linear-gradient(to right, #f0f4ff, #e6f7ff);
      border-bottom: 1px solid @border-color;

      .step-number {
        width: 40px;
        height: 40px;
        background-color: @primary-color;
        color: white;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 1.5rem;
        font-weight: bold;
        margin-right: 15px;
      }

      h3 {
        margin: 0;
        color: @secondary-color;
        font-size: 1.4rem;
      }
    }

    .step-content {
      padding: 25px;

      p {
        font-size: 1.1rem;
        margin-bottom: 20px;
        color: #444;
      }
    }
  }
}

// ä»£ç å—æ ·å¼
.code-block {
  background-color: @code-bg;
  color: #f8f8f2;
  border-radius: 8px;
  padding: 18px;
  font-family: 'Fira Code', monospace;
  font-size: 0.95rem;
  line-height: 1.5;
  overflow: auto;
  margin: 15px 0;
}

.technical-details {
  background-color: #f8f9ff;
  border-radius: 8px;
  padding: 15px;
  margin: 20px 0;

  h4 {
    margin-top: 0;
    color: @primary-color;
    font-size: 1.1rem;
  }

  ul {
    padding-left: 20px;
    margin: 10px 0 0;

    li {
      margin-bottom: 8px;
      position: relative;
      padding-left: 15px;

      &::before {
        content: "â€¢";
        color: @primary-color;
        font-weight: bold;
        position: absolute;
        left: 0;
      }
    }
  }
}

.module-record,
.binding-visual,
.execution-flow {
  background-color: #f0f8ff;
  border-radius: 8px;
  padding: 15px;
  margin: 20px 0;

  .record-header {
    font-weight: bold;
    color: @primary-color;
    margin-bottom: 10px;
  }
}

.binding-diagram {
  display: flex;
  justify-content: center;
  align-items: center;
  gap: 30px;
  padding: 15px;

  .module {
    background-color: white;
    border: 1px solid @border-color;
    border-radius: 8px;
    padding: 15px;
    min-width: 180px;
    box-shadow: 0 3px 8px rgba(0, 0, 0, 0.05);

    .module-name {
      font-weight: bold;
      color: @secondary-color;
      margin-bottom: 10px;
      padding-bottom: 5px;
      border-bottom: 1px solid #eee;
    }

    .export-item,
    .import-item {
      padding: 5px;
      font-size: 0.9rem;

      .uninitialized {
        color: #e74c3c;
        font-style: italic;
      }

      .binding {
        color: #27ae60;
      }
    }
  }

  .binding-arrow {
    font-size: 1.8rem;
    color: @primary-color;
  }
}

.execution-flow {
  .flow-diagram {
    display: flex;
    flex-direction: column;
    align-items: center;

    .module {
      background-color: white;
      border: 1px solid @border-color;
      border-radius: 8px;
      padding: 12px 25px;
      margin: 10px 0;
      text-align: center;
      width: 200px;

      &.main {
        background-color: #e3f2fd;
        border-color: @primary-color;
        font-weight: bold;
      }
    }

    .arrow {
      font-size: 1.5rem;
      color: @primary-color;
    }

    .flow-label {
      margin-top: 10px;
      font-style: italic;
      color: #777;
    }
  }
}

// å…³é”®æœºåˆ¶éƒ¨åˆ†
.mechanisms-section {
  .mechanism-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
    gap: 25px;
    margin-top: 20px;
  }

  .mechanism-card {
    background-color: @card-bg;
    border: 1px solid @border-color;
    border-radius: 10px;
    overflow: hidden;
    box-shadow: 0 3px 10px rgba(0, 0, 0, 0.05);

    .mechanism-header {
      display: flex;
      align-items: center;
      padding: 15px 20px;
      background-color: #f0f4ff;
      border-bottom: 1px solid @border-color;

      .icon {
        font-size: 1.8rem;
        margin-right: 15px;
        color: @primary-color;
      }

      h3 {
        margin: 0;
        color: @secondary-color;
        font-size: 1.3rem;
      }
    }

    .mechanism-content {
      padding: 20px;

      p {
        font-weight: 500;
        color: #444;
        margin-bottom: 15px;
      }
    }
  }
}

.static-analysis,
.cache-visual {
  display: flex;
  gap: 20px;
  margin-top: 15px;

  @media (max-width: 600px) {
    flex-direction: column;
  }

  .code-block {
    flex: 1;
  }

  .analysis-details,
  .explanation {
    flex: 1;

    h4 {
      margin-top: 0;
      color: @primary-color;
    }

    ul {
      padding-left: 20px;
      margin: 10px 0;

      li {
        margin-bottom: 8px;
      }
    }
  }
}

.cache-diagram {
  text-align: center;

  .cache-box {
    background-color: white;
    border: 1px solid @border-color;
    border-radius: 8px;
    padding: 15px;
    margin: 15px auto;
    max-width: 300px;

    .cache-header {
      font-weight: bold;
      color: @primary-color;
      padding-bottom: 8px;
      border-bottom: 1px solid #eee;
      margin-bottom: 10px;
    }

    .cached-module {
      padding: 8px;
      background-color: #e8f5e9;
      margin: 5px 0;
      border-radius: 4px;
      color: #2e7d32;
      font-family: monospace;
    }
  }
}

// å¯¹æ¯”è¡¨æ ¼
.comparison-section {
  .comparison-table {
    overflow-x: auto;
    margin-bottom: 30px;

    table {
      width: 100%;
      border-collapse: collapse;
      min-width: 600px;

      th,
      td {
        border: 1px solid @border-color;
        padding: 12px 15px;
        text-align: left;
      }

      th {
        background-color: #f0f4ff;
        color: @secondary-color;
        font-weight: 600;
      }

      tr:nth-child(even) {
        background-color: #f8f9ff;
      }

      td:nth-child(2) {
        color: #27ae60;
        font-weight: 500;
      }

      td:nth-child(3) {
        color: #e74c3c;
        font-weight: 500;
      }
    }
  }

  .key-differences {
    background-color: #fff8f5;
    border-left: 4px solid @accent-color;
    border-radius: 0 8px 8px 0;
    padding: 20px;

    h3 {
      margin-top: 0;
      color: @accent-color;
      font-size: 1.3rem;
    }

    ul {
      padding-left: 20px;
      margin: 0;

      li {
        margin-bottom: 10px;
        position: relative;
        padding-left: 25px;

        &:before {
          content: "â€¢";
          color: @accent-color;
          font-weight: bold;
          position: absolute;
          left: 0;
          font-size: 1.2rem;
        }

        strong {
          color: @secondary-color;
        }
      }
    }
  }
}

// ç°ä»£åº”ç”¨éƒ¨åˆ†
.modern-usage {
  .usage-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
    gap: 20px;
    margin-top: 20px;
  }

  .usage-card {
    background-color: @card-bg;
    border: 1px solid @border-color;
    border-radius: 10px;
    padding: 25px 20px;
    text-align: center;
    transition: transform 0.3s ease;
    box-shadow: 0 3px 8px rgba(0, 0, 0, 0.05);

    &:hover {
      transform: translateY(-5px);
      box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
      border-color: @primary-color;
    }

    .usage-icon {
      font-size: 2.5rem;
      margin-bottom: 15px;
      color: @primary-color;
    }

    h3 {
      margin: 0 0 15px 0;
      color: @secondary-color;
      font-size: 1.3rem;
    }

    .code-block {
      margin: 15px 0;
      font-size: 0.85rem;
      text-align: left;
    }

    p {
      margin: 15px 0 0;
      color: #555;
      font-size: 0.95rem;
    }
  }

  .optimization {
    background-color: #e8f5e9;
    border-radius: 8px;
    padding: 20px;
    margin-top: 30px;

    h3 {
      margin-top: 0;
      color: #2e7d32;
    }

    ul {
      padding-left: 20px;
      margin: 15px 0 0;

      li {
        margin-bottom: 10px;
        position: relative;
        padding-left: 25px;

        &:before {
          content: "â€¢";
          color: #2e7d32;
          font-weight: bold;
          position: absolute;
          left: 0;
          font-size: 1.2rem;
        }

        code {
          background-color: #d1e7dd;
          padding: 2px 6px;
          border-radius: 4px;
          font-family: monospace;
        }
      }
    }
  }
}

// å“åº”å¼è°ƒæ•´
@media (max-width: 768px) {
  .key-features {
    grid-template-columns: 1fr !important;
  }

  .app-header h1 {
    font-size: 2rem;
  }

  .section-title {
    font-size: 1.6rem;
  }
}
</style>
