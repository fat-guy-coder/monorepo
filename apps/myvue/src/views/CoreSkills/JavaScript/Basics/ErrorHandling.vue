<template>
  <div class="error-handling-intro">
    <header class="page-header">
      <div class="header-content">
        <h1 class="title">JavaScript é”™è¯¯å¤„ç†</h1>
        <p class="subtitle">æ„å»ºå¥å£®åº”ç”¨çš„å…³é”®æŠ€æœ¯</p>
        <div class="error-visualization">
          <div class="error-flow">
            <div class="flow-step" v-for="step in errorFlow" :key="step.id" :class="step.status">
              <div class="step-icon">{{ step.icon }}</div>
              <div class="step-content">
                <h4>{{ step.title }}</h4>
                <p>{{ step.description }}</p>
              </div>
            </div>
          </div>
        </div>
      </div>
    </header>

    <div class="content-wrapper">
      <nav class="nav-sidebar">
        <ul class="nav-list">
          <li
            v-for="section in sections"
            :key="section.id"
            :class="{ active: activeSection === section.id }"
            @click="scrollToSection(section.id)"
          >
            <span class="nav-icon">{{ section.icon }}</span>
            {{ section.title }}
          </li>
        </ul>
      </nav>

      <main class="main-content">
        <!-- é”™è¯¯ç±»å‹ -->
        <section id="error-types" class="content-section">
          <h2>JavaScript é”™è¯¯ç±»å‹</h2>
          <p class="section-description">äº†è§£ä¸åŒç±»å‹çš„é”™è¯¯æœ‰åŠ©äºæ›´ç²¾ç¡®åœ°è¯Šæ–­å’Œè§£å†³é—®é¢˜ã€‚</p>

          <div class="error-types-grid">
            <div class="error-type-card" v-for="errorType in errorTypes" :key="errorType.name">
              <div class="error-header" :class="errorType.severity">
                <h3>{{ errorType.name }}</h3>
                <span class="error-icon">{{ errorType.icon }}</span>
              </div>
              <div class="error-content">
                <p>{{ errorType.description }}</p>
                <div class="error-example">
                  <strong>è§¦å‘åœºæ™¯ï¼š</strong>
                  <pre><code>{{ errorType.example }}</code></pre>
                </div>
                <div class="error-solution" v-if="errorType.solution">
                  <strong>è§£å†³æ–¹æ¡ˆï¼š</strong>
                  <p>{{ errorType.solution }}</p>
                </div>
              </div>
            </div>
          </div>
        </section>

        <!-- é”™è¯¯æ•è· -->
        <section id="error-catching" class="content-section">
          <h2>é”™è¯¯æ•è·æœºåˆ¶</h2>
          <p class="section-description">å¤šç§æ–¹å¼æ•è·å’Œå¤„ç†JavaScriptè¿è¡Œæ—¶é”™è¯¯ã€‚</p>

          <div class="catching-methods">
            <div class="method-card" v-for="method in catchingMethods" :key="method.name">
              <div class="method-header">
                <h3>{{ method.name }}</h3>
                <span class="method-scope">{{ method.scope }}</span>
              </div>
              <div class="method-content">
                <p>{{ method.description }}</p>
                <div class="method-example">
                  <pre><code>{{ method.example }}</code></pre>
                </div>
                <div class="method-pros-cons">
                  <div class="pros">
                    <strong>ä¼˜ç‚¹ï¼š</strong>
                    <ul>
                      <li v-for="pro in method.pros" :key="pro">{{ pro }}</li>
                    </ul>
                  </div>
                  <div class="cons">
                    <strong>ç¼ºç‚¹ï¼š</strong>
                    <ul>
                      <li v-for="con in method.cons" :key="con">{{ con }}</li>
                    </ul>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <div class="error-propagation">
            <h3>é”™è¯¯ä¼ æ’­æœºåˆ¶</h3>
            <div class="propagation-chart">
              <div class="propagation-step" v-for="step in propagationSteps" :key="step.step">
                <div class="step-number">{{ step.step }}</div>
                <div class="step-description">{{ step.description }}</div>
                <div class="step-code" v-if="step.code">
                  <pre><code>{{ step.code }}</code></pre>
                </div>
              </div>
            </div>
          </div>
        </section>

        <!-- è‡ªå®šä¹‰é”™è¯¯ -->
        <section id="custom-errors" class="content-section">
          <h2>è‡ªå®šä¹‰é”™è¯¯</h2>
          <p class="section-description">åˆ›å»ºç‰¹å®šäºåº”ç”¨ç¨‹åºçš„é”™è¯¯ç±»å‹ï¼Œæä¾›æ›´æ¸…æ™°çš„é”™è¯¯ä¿¡æ¯ã€‚</p>

          <div class="custom-error-demo">
            <div class="demo-explanation">
              <h3>è‡ªå®šä¹‰é”™è¯¯ç±»å®ç°</h3>
              <p>é€šè¿‡ç»§æ‰¿Errorç±»åˆ›å»ºè‡ªå®šä¹‰é”™è¯¯ç±»å‹ï¼Œå¯ä»¥æ·»åŠ é¢å¤–çš„å±æ€§å’Œæ–¹æ³•ã€‚</p>

              <div class="code-implementation">
                <pre><code>{{ customErrorCode }}</code></pre>
              </div>
            </div>

            <div class="demo-usage">
              <h3>ä½¿ç”¨ç¤ºä¾‹</h3>
              <div class="usage-examples">
                <div class="usage-example" v-for="example in usageExamples" :key="example.title">
                  <h4>{{ example.title }}</h4>
                  <pre><code>{{ example.code }}</code></pre>
                  <div class="example-output" v-if="example.output">
                    <strong>è¾“å‡ºï¼š</strong>
                    <pre><code>{{ example.output }}</code></pre>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <div class="best-practices">
            <h3>é”™è¯¯å¤„ç†æœ€ä½³å®è·µ</h3>
            <div class="practice-cards">
              <div class="practice-card" v-for="practice in bestPractices" :key="practice.title">
                <div class="practice-icon">{{ practice.icon }}</div>
                <h4>{{ practice.title }}</h4>
                <p>{{ practice.description }}</p>
                <div class="practice-example" v-if="practice.example">
                  <pre><code>{{ practice.example }}</code></pre>
                </div>
              </div>
            </div>
          </div>
        </section>

        <!-- å®æˆ˜æ¡ˆä¾‹ -->
        <section id="practical-cases" class="content-section">
          <h2>å®æˆ˜æ¡ˆä¾‹</h2>
          <p class="section-description">åœ¨å®é™…åº”ç”¨åœºæ™¯ä¸­åº”ç”¨é”™è¯¯å¤„ç†æŠ€æœ¯ã€‚</p>

          <div class="case-studies">
            <div class="case-study" v-for="caseStudy in caseStudies" :key="caseStudy.title">
              <div class="case-header">
                <h3>{{ caseStudy.title }}</h3>
                <span class="case-difficulty" :class="caseStudy.difficulty">{{ caseStudy.difficulty }}</span>
              </div>
              <div class="case-content">
                <p><strong>åœºæ™¯æè¿°ï¼š</strong>{{ caseStudy.scenario }}</p>
                <div class="case-problem">
                  <h4>é—®é¢˜åˆ†æ</h4>
                  <ul>
                    <li v-for="problem in caseStudy.problems" :key="problem">{{ problem }}</li>
                  </ul>
                </div>
                <div class="case-solution">
                  <h4>è§£å†³æ–¹æ¡ˆ</h4>
                  <pre><code>{{ caseStudy.solution }}</code></pre>
                </div>
                <div class="case-benefits">
                  <h4>æ”¹è¿›æ•ˆæœ</h4>
                  <ul>
                    <li v-for="benefit in caseStudy.benefits" :key="benefit">{{ benefit }}</li>
                  </ul>
                </div>
              </div>
            </div>
          </div>
        </section>

        <!-- è°ƒè¯•å·¥å…· -->
        <section id="debugging-tools" class="content-section">
          <h2>è°ƒè¯•ä¸ç›‘æ§å·¥å…·</h2>
          <p class="section-description">åˆ©ç”¨å·¥å…·æé«˜é”™è¯¯è¯Šæ–­å’Œä¿®å¤æ•ˆç‡ã€‚</p>

          <div class="tools-overview">
            <div class="tool-category" v-for="category in toolCategories" :key="category.name">
              <h3>{{ category.name }}</h3>
              <div class="tool-list">
                <div class="tool-item" v-for="tool in category.tools" :key="tool.name">
                  <div class="tool-info">
                    <h4>{{ tool.name }}</h4>
                    <p>{{ tool.description }}</p>
                  </div>
                  <div class="tool-usage">
                    <pre><code>{{ tool.usage }}</code></pre>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </section>
      </main>
    </div>

    <footer class="page-footer">
      <p>JavaScript é”™è¯¯å¤„ç† - æ„å»ºç¨³å®šå¯é çš„åº”ç”¨ç¨‹åº</p>
      <p class="footer-note">åˆç†çš„é”™è¯¯å¤„ç†æ˜¯ä¸“ä¸šå¼€å‘çš„æ ‡å¿—</p>
    </footer>
  </div>
</template>

<script setup lang="ts">
import { ref, onMounted, onUnmounted } from 'vue';

// å“åº”å¼æ•°æ®
const activeSection = ref('error-types');

// é”™è¯¯å¤„ç†æµç¨‹
const errorFlow = [
  {
    id: 1,
    icon: 'ğŸš¨',
    title: 'é”™è¯¯å‘ç”Ÿ',
    description: 'ä»£ç æ‰§è¡Œè¿‡ç¨‹ä¸­å‡ºç°å¼‚å¸¸',
    status: 'error'
  },
  {
    id: 2,
    icon: 'ğŸ•µï¸',
    title: 'é”™è¯¯æ•è·',
    description: 'é€šè¿‡try-catchæˆ–é”™è¯¯äº‹ä»¶ç›‘å¬æ•è·é”™è¯¯',
    status: 'catching'
  },
  {
    id: 3,
    icon: 'ğŸ”',
    title: 'é”™è¯¯åˆ†æ',
    description: 'åˆ†æé”™è¯¯ç±»å‹ã€å †æ ˆä¿¡æ¯å’Œä¸Šä¸‹æ–‡',
    status: 'analyzing'
  },
  {
    id: 4,
    icon: 'ğŸ› ï¸',
    title: 'é”™è¯¯å¤„ç†',
    description: 'æ ¹æ®é”™è¯¯ç±»å‹é‡‡å–é€‚å½“çš„æ¢å¤æªæ–½',
    status: 'handling'
  },
  {
    id: 5,
    icon: 'ğŸ“Š',
    title: 'é”™è¯¯æŠ¥å‘Š',
    description: 'è®°å½•é”™è¯¯ä¿¡æ¯ç”¨äºç›‘æ§å’Œè°ƒè¯•',
    status: 'reporting'
  },
  {
    id: 6,
    icon: 'âœ…',
    title: 'æ¢å¤æ‰§è¡Œ',
    description: 'ç¨‹åºç»§ç»­æ­£å¸¸è¿è¡Œæˆ–ä¼˜é›…é™çº§',
    status: 'recovered'
  }
];

// å¯¼èˆªç« èŠ‚
const sections = [
  { id: 'error-types', title: 'é”™è¯¯ç±»å‹', icon: 'ğŸ“' },
  { id: 'error-catching', title: 'é”™è¯¯æ•è·', icon: 'ğŸ•¸ï¸' },
  { id: 'custom-errors', title: 'è‡ªå®šä¹‰é”™è¯¯', icon: 'âš™ï¸' },
  { id: 'practical-cases', title: 'å®æˆ˜æ¡ˆä¾‹', icon: 'ğŸ’¼' },
  { id: 'debugging-tools', title: 'è°ƒè¯•å·¥å…·', icon: 'ğŸ”§' }
];

// é”™è¯¯ç±»å‹æ•°æ®
const errorTypes = [
  {
    name: 'SyntaxError',
    icon: 'ğŸ“–',
    severity: 'high',
    description: 'è¯­æ³•é”™è¯¯ï¼Œä»£ç ä¸ç¬¦åˆJavaScriptè¯­æ³•è§„åˆ™',
    example: `// ç¼ºå°‘æ‹¬å·
if (x > 5 {
  console.log('x is greater than 5');
}

// æ— æ•ˆçš„å˜é‡å
let 123variable = 'test';`,
    solution: 'æ£€æŸ¥ä»£ç è¯­æ³•ï¼Œä½¿ç”¨ä»£ç ç¼–è¾‘å™¨æˆ–lintå·¥å…·æ£€æµ‹è¯­æ³•é—®é¢˜'
  },
  {
    name: 'ReferenceError',
    icon: 'ğŸ”',
    severity: 'medium',
    description: 'å¼•ç”¨é”™è¯¯ï¼Œè®¿é—®æœªå®šä¹‰çš„å˜é‡æˆ–å‡½æ•°',
    example: `// å¼•ç”¨æœªå£°æ˜çš„å˜é‡
console.log(undefinedVariable);

// åœ¨å£°æ˜å‰è®¿é—®å˜é‡
console.log(x);
let x = 5;`,
    solution: 'ç¡®ä¿å˜é‡åœ¨ä½¿ç”¨å‰å·²å£°æ˜ï¼Œæ£€æŸ¥å˜é‡ä½œç”¨åŸŸ'
  },
  {
    name: 'TypeError',
    icon: 'ğŸ”„',
    severity: 'medium',
    description: 'ç±»å‹é”™è¯¯ï¼Œå¯¹å€¼è¿›è¡Œäº†ä¸é€‚å½“çš„æ“ä½œ',
    example: `// å¯¹nullè°ƒç”¨æ–¹æ³•
let obj = null;
obj.someMethod();

// å¯¹éå‡½æ•°å€¼è¿›è¡Œè°ƒç”¨
let notFunction = 42;
notFunction();`,
    solution: 'è¿›è¡Œç±»å‹æ£€æŸ¥ï¼Œä½¿ç”¨å¯é€‰é“¾æ“ä½œç¬¦(?.)å’Œç©ºå€¼åˆå¹¶æ“ä½œç¬¦(??)'
  },
  {
    name: 'RangeError',
    icon: 'ğŸ“',
    severity: 'medium',
    description: 'èŒƒå›´é”™è¯¯ï¼Œæ•°å€¼è¶…å‡ºæœ‰æ•ˆèŒƒå›´',
    example: `// æ•°ç»„é•¿åº¦ä¸ºè´Ÿæ•°
let arr = new Array(-1);

// é€’å½’è°ƒç”¨æ ˆæº¢å‡º
function infiniteRecursion() {
  infiniteRecursion();
}`,
    solution: 'éªŒè¯è¾“å…¥å‚æ•°çš„èŒƒå›´ï¼Œé¿å…æ— é™é€’å½’'
  },
  {
    name: 'URIError',
    icon: 'ğŸŒ',
    severity: 'low',
    description: 'URIå¤„ç†é”™è¯¯ï¼ŒURIç¼–ç æˆ–è§£ç æ“ä½œå¤±è´¥',
    example: `// é”™è¯¯çš„URIç¼–ç 
decodeURIComponent('%');

// æ— æ•ˆçš„URI
encodeURI('\\uD800');`,
    solution: 'ç¡®ä¿URIæ ¼å¼æ­£ç¡®ï¼Œä½¿ç”¨try-catchå¤„ç†URIæ“ä½œ'
  },
  {
    name: 'EvalError',
    icon: 'âš¡',
    severity: 'low',
    description: 'eval()å‡½æ•°ä½¿ç”¨é”™è¯¯ï¼Œåœ¨ç°ä»£JavaScriptä¸­è¾ƒå°‘è§',
    example: `// ä¸¥æ ¼æ¨¡å¼ä¸‹ä½¿ç”¨eval
"use strict";
eval = 10;`,
    solution: 'é¿å…ä½¿ç”¨eval()ï¼Œä½¿ç”¨æ›´å®‰å…¨çš„æ›¿ä»£æ–¹æ¡ˆ'
  },
  {
    name: 'AggregateError',
    icon: 'ğŸ“¦',
    severity: 'medium',
    description: 'èšåˆé”™è¯¯ï¼Œå¤šä¸ªé”™è¯¯è¢«ç»„åˆåœ¨ä¸€èµ·',
    example: `// Promise.any()æ‰€æœ‰promiseéƒ½è¢«æ‹’ç»æ—¶
Promise.any([
  Promise.reject(new Error('Error 1')),
  Promise.reject(new Error('Error 2'))
]).catch(error => {
  console.log(error instanceof AggregateError); // true
});`,
    solution: 'å¤„ç†å¤šä¸ªå¹¶è¡Œæ“ä½œçš„é”™è¯¯æƒ…å†µ'
  }
];

// é”™è¯¯æ•è·æ–¹æ³•
const catchingMethods = [
  {
    name: 'try-catch-finally',
    scope: 'åŒæ­¥ä»£ç ',
    description: 'æœ€åŸºæœ¬çš„é”™è¯¯æ•è·æœºåˆ¶ï¼Œç”¨äºåŒæ­¥ä»£ç å—çš„é”™è¯¯å¤„ç†',
    example: `try {
  // å¯èƒ½æŠ›å‡ºé”™è¯¯çš„ä»£ç 
  const result = riskyOperation();
  console.log(result);
} catch (error) {
  // é”™è¯¯å¤„ç†
  console.error('æ“ä½œå¤±è´¥:', error.message);
  // å¯é€‰çš„æ¢å¤é€»è¾‘
  fallbackOperation();
} finally {
  // æ— è®ºæ˜¯å¦å‘ç”Ÿé”™è¯¯éƒ½ä¼šæ‰§è¡Œ
  cleanup();
}`,
    pros: [
      'ç²¾ç¡®æ§åˆ¶é”™è¯¯å¤„ç†èŒƒå›´',
      'æ”¯æŒfinallyå—è¿›è¡Œæ¸…ç†æ“ä½œ',
      'å¯è®¿é—®å®Œæ•´çš„é”™è¯¯å¯¹è±¡'
    ],
    cons: [
      'æ— æ³•æ•è·å¼‚æ­¥é”™è¯¯',
      'åµŒå¥—è¿‡å¤šä¼šå½±å“ä»£ç å¯è¯»æ€§',
      'éœ€è¦é¢„çŸ¥å¯èƒ½å‡ºé”™çš„ä½ç½®'
    ]
  },
  {
    name: 'Promise.catch()',
    scope: 'Promiseå¼‚æ­¥',
    description: 'ç”¨äºæ•è·Promiseé“¾ä¸­çš„æ‹’ç»çŠ¶æ€',
    example: `fetch('/api/data')
  .then(response => {
    if (!response.ok) {
      throw new Error('ç½‘ç»œå“åº”ä¸æ­£å¸¸');
    }
    return response.json();
  })
  .then(data => processData(data))
  .catch(error => {
    console.error('è¯·æ±‚å¤±è´¥:', error);
    showErrorMessage('æ•°æ®åŠ è½½å¤±è´¥');
  });`,
    pros: [
      'ä¸“é—¨å¤„ç†Promiseé”™è¯¯',
      'é“¾å¼è°ƒç”¨ï¼Œä»£ç æ¸…æ™°',
      'å¯ä»¥æ•è·æ•´ä¸ªPromiseé“¾çš„é”™è¯¯'
    ],
    cons: [
      'åªèƒ½ç”¨äºPromise',
      'éœ€è¦è¿”å›Promiseæˆ–ä½¿ç”¨async/await',
      'é”™è¯¯ç±»å‹ä¿¡æ¯å¯èƒ½æœ‰é™'
    ]
  },
  {
    name: 'async/await + try-catch',
    scope: 'å¼‚æ­¥å‡½æ•°',
    description: 'åœ¨asyncå‡½æ•°ä¸­ä½¿ç”¨try-catchæ•è·å¼‚æ­¥æ“ä½œé”™è¯¯',
    example: `async function loadUserData(userId) {
  try {
    const response = await fetch(\`/api/users/\${userId}\`);
    if (!response.ok) {
      throw new Error('ç”¨æˆ·æ•°æ®è·å–å¤±è´¥');
    }
    const userData = await response.json();
    return processUserData(userData);
  } catch (error) {
    console.error('åŠ è½½ç”¨æˆ·æ•°æ®å¤±è´¥:', error);
    // è¿”å›é»˜è®¤å€¼æˆ–é‡æ–°æŠ›å‡ºé”™è¯¯
    return getDefaultUserData();
  }
}`,
    pros: [
      'åŒæ­¥é£æ ¼çš„é”™è¯¯å¤„ç†',
      'ä»£ç å¯è¯»æ€§å¥½',
      'å¯ä»¥ç²¾ç¡®æ§åˆ¶é”™è¯¯å¤„ç†é€»è¾‘'
    ],
    cons: [
      'åªèƒ½åœ¨asyncå‡½æ•°ä¸­ä½¿ç”¨',
      'éœ€è¦é¢å¤–çš„å‡½æ•°åŒ…è£…',
      'å¯èƒ½éšè—çœŸæ­£çš„é”™è¯¯åŸå› '
    ]
  },
  {
    name: 'window.onerror',
    scope: 'å…¨å±€é”™è¯¯',
    description: 'å…¨å±€é”™è¯¯äº‹ä»¶å¤„ç†ç¨‹åºï¼Œæ•è·æœªè¢«å¤„ç†çš„è¿è¡Œæ—¶é”™è¯¯',
    example: `window.onerror = function(message, source, lineno, colno, error) {
  console.error('å…¨å±€é”™è¯¯:', {
    message,    // é”™è¯¯ä¿¡æ¯
    source,     // å‘ç”Ÿé”™è¯¯çš„è„šæœ¬URL
    lineno,     // è¡Œå·
    colno,      // åˆ—å·
    error       // Errorå¯¹è±¡
  });

  // å‘é€é”™è¯¯æŠ¥å‘Šåˆ°ç›‘æ§ç³»ç»Ÿ
  sendErrorReport({
    message, source, lineno, colno, error
  });

  // è¿”å›trueé˜»æ­¢æµè§ˆå™¨é»˜è®¤é”™è¯¯å¤„ç†
  return true;
};`,
    pros: [
      'æ•è·å…¨å±€æœªå¤„ç†é”™è¯¯',
      'æä¾›è¯¦ç»†çš„é”™è¯¯ä¸Šä¸‹æ–‡',
      'å¯ä»¥é›†æˆé”™è¯¯ç›‘æ§ç³»ç»Ÿ'
    ],
    cons: [
      'æ— æ³•æ•è·Promiseæ‹’ç»',
      'ä¸åŒæµè§ˆå™¨å®ç°æœ‰å·®å¼‚',
      'å¯èƒ½å½±å“é¡µé¢æ€§èƒ½'
    ]
  },
  {
    name: 'unhandledrejection',
    scope: 'Promiseæ‹’ç»',
    description: 'æ•è·æœªè¢«å¤„ç†çš„Promiseæ‹’ç»äº‹ä»¶',
    example: `window.addEventListener('unhandledrejection', function(event) {
  console.error('æœªå¤„ç†çš„Promiseæ‹’ç»:', event.reason);

  // é˜»æ­¢é»˜è®¤è¡Œä¸ºï¼ˆæµè§ˆå™¨æ§åˆ¶å°é”™è¯¯ï¼‰
  event.preventDefault();

  // è®°å½•é”™è¯¯ä¿¡æ¯
  logUnhandledRejection(event.reason);
});`,
    pros: [
      'ä¸“é—¨å¤„ç†æœªæ•è·çš„Promiseé”™è¯¯',
      'æä¾›Promiseæ‹’ç»çš„åŸå› ',
      'å¯ä»¥é˜²æ­¢Promiseé”™è¯¯è¢«é™é»˜å¿½ç•¥'
    ],
    cons: [
      'åªå¤„ç†Promiseç›¸å…³é”™è¯¯',
      'éœ€è¦æ‰‹åŠ¨æ·»åŠ äº‹ä»¶ç›‘å¬',
      'é”™è¯¯å †æ ˆä¿¡æ¯å¯èƒ½ä¸å®Œæ•´'
    ]
  }
];

// é”™è¯¯ä¼ æ’­æ­¥éª¤
const propagationSteps = [
  {
    step: 1,
    description: 'é”™è¯¯åœ¨å‡½æ•°å†…éƒ¨æŠ›å‡º',
    code: `function processData(data) {
  if (!data) {
    throw new Error('æ•°æ®ä¸èƒ½ä¸ºç©º');
  }
  // å¤„ç†æ•°æ®...
}`
  },
  {
    step: 2,
    description: 'é”™è¯¯æ²¿ç€è°ƒç”¨æ ˆå‘ä¸Šä¼ æ’­',
    code: `function main() {
  try {
    processData(null); // è¿™é‡Œä¼šæŠ›å‡ºé”™è¯¯
  } catch (error) {
    // é”™è¯¯ä¼ æ’­åˆ°è¿™é‡Œè¢«æ•è·
    console.error('å¤„ç†æ•°æ®æ—¶å‡ºé”™:', error);
  }
}`
  },
  {
    step: 3,
    description: 'å¦‚æœæ²¡æœ‰è¢«æ•è·ï¼Œç»§ç»­å‘ä¸Šä¼ æ’­',
    code: `// å¦‚æœæ²¡æœ‰try-catchï¼Œé”™è¯¯ä¼šç»§ç»­ä¼ æ’­
function init() {
  main(); // é”™è¯¯ä»è¿™é‡Œç»§ç»­ä¼ æ’­
}

// æœ€ç»ˆåˆ°è¾¾å…¨å±€ä½œç”¨åŸŸ
init(); // é”™è¯¯åœ¨å…¨å±€ä½œç”¨åŸŸè¢«window.onerroræ•è·`
  },
  {
    step: 4,
    description: 'åœ¨å…¨å±€ä½œç”¨åŸŸè¢«å¤„ç†æˆ–æ˜¾ç¤º',
    code: `// å…¨å±€é”™è¯¯å¤„ç†
window.onerror = function(msg, source, line, col, error) {
  console.log('å…¨å±€é”™è¯¯å¤„ç†:', error);
  return true; // é˜»æ­¢æµè§ˆå™¨é»˜è®¤é”™è¯¯æ˜¾ç¤º
};`
  }
];

// è‡ªå®šä¹‰é”™è¯¯ä»£ç 
const customErrorCode = `// åŸºç¡€è‡ªå®šä¹‰é”™è¯¯ç±»
class AppError extends Error {
  constructor(message, code, context) {
    super(message);
    this.name = this.constructor.name;
    this.code = code;
    this.context = context;
    this.timestamp = new Date().toISOString();

    // ä¿æŒæ­£ç¡®çš„å †æ ˆè·Ÿè¸ª
    if (Error.captureStackTrace) {
      Error.captureStackTrace(this, this.constructor);
    }
  }

  toJSON() {
    return {
      name: this.name,
      message: this.message,
      code: this.code,
      context: this.context,
      timestamp: this.timestamp,
      stack: this.stack
    };
  }
}

// ç‰¹å®šé”™è¯¯ç±»å‹
class ValidationError extends AppError {
  constructor(field, value, rules) {
    super(\`å­—æ®µ "\${field}" éªŒè¯å¤±è´¥\`, 'VALIDATION_ERROR', {
      field,
      value,
      rules
    });
  }
}

class NetworkError extends AppError {
  constructor(url, status, response) {
    super(\`ç½‘ç»œè¯·æ±‚å¤±è´¥: \${url}\`, 'NETWORK_ERROR', {
      url,
      status,
      response
    });
  }
}

class BusinessError extends AppError {
  constructor(operation, reason, details) {
    super(\`ä¸šåŠ¡æ“ä½œå¤±è´¥: \${operation}\`, 'BUSINESS_ERROR', {
      operation,
      reason,
      details
    });
  }
}`;

// ä½¿ç”¨ç¤ºä¾‹
const usageExamples = [
  {
    title: 'æŠ›å‡ºéªŒè¯é”™è¯¯',
    code: `function validateUser(user) {
  if (!user.email) {
    throw new ValidationError('email', user.email, {
      required: true,
      type: 'email'
    });
  }

  if (user.age < 18) {
    throw new ValidationError('age', user.age, {
      min: 18,
      max: 100
    });
  }
}`,
    output: `ValidationError: å­—æ®µ "email" éªŒè¯å¤±è´¥
    at validateUser (user.js:15:11)
    at createUser (user.js:25:5)`
  },
  {
    title: 'æ•è·å’Œå¤„ç†è‡ªå®šä¹‰é”™è¯¯',
    code: `async function createUser(userData) {
  try {
    validateUser(userData);
    const response = await fetch('/api/users', {
      method: 'POST',
      body: JSON.stringify(userData)
    });

    if (!response.ok) {
      throw new NetworkError('/api/users', response.status, await response.text());
    }

    return await response.json();
  } catch (error) {
    if (error instanceof ValidationError) {
      // å¤„ç†éªŒè¯é”™è¯¯
      showValidationErrors(error.context);
      return null;
    } else if (error instanceof NetworkError) {
      // å¤„ç†ç½‘ç»œé”™è¯¯
      showNetworkError(error.context.status);
      return null;
    } else {
      // å¤„ç†å…¶ä»–æœªçŸ¥é”™è¯¯
      console.error('æœªçŸ¥é”™è¯¯:', error);
      throw error;
    }
  }
}`,
    output: `æ ¹æ®é”™è¯¯ç±»å‹æ‰§è¡Œä¸åŒçš„å¤„ç†é€»è¾‘`
  }
];

// æœ€ä½³å®è·µ
const bestPractices = [
  {
    icon: 'ğŸ¯',
    title: 'å…·ä½“é”™è¯¯ä¿¡æ¯',
    description: 'æä¾›è¶³å¤Ÿè¯¦ç»†çš„é”™è¯¯ä¿¡æ¯ï¼ŒåŒ…æ‹¬ä¸Šä¸‹æ–‡å’Œå¯èƒ½çš„åŸå› ',
    example: `// ä¸å¥½çš„åšæ³•
throw new Error('æ“ä½œå¤±è´¥');

// å¥½çš„åšæ³•
throw new AppError(
  'ç”¨æˆ·åˆ›å»ºå¤±è´¥: é‚®ç®±å·²è¢«æ³¨å†Œ',
  'USER_CREATE_FAILED',
  { email: 'user@example.com', reason: 'duplicate_email' }
);`
  },
  {
    icon: 'ğŸ“‹',
    title: 'é”™è¯¯åˆ†ç±»',
    description: 'æ ¹æ®é”™è¯¯ç±»å‹è¿›è¡Œåˆ†ç±»ï¼Œä¾¿äºä¸åŒçš„å¤„ç†ç­–ç•¥',
    example: `// å®šä¹‰é”™è¯¯ç±»å‹æšä¸¾
const ErrorType = {
  VALIDATION: 'VALIDATION_ERROR',
  NETWORK: 'NETWORK_ERROR',
  BUSINESS: 'BUSINESS_ERROR',
  SYSTEM: 'SYSTEM_ERROR'
};

// æ ¹æ®ç±»å‹å¤„ç†é”™è¯¯
switch (error.code) {
  case ErrorType.VALIDATION:
    handleValidationError(error);
    break;
  case ErrorType.NETWORK:
    handleNetworkError(error);
    break;
  default:
    handleUnknownError(error);
}`
  },
  {
    icon: 'ğŸ”„',
    title: 'ä¼˜é›…é™çº§',
    description: 'åœ¨é”™è¯¯å‘ç”Ÿæ—¶æä¾›å¤‡ç”¨æ–¹æ¡ˆï¼Œç¡®ä¿ç”¨æˆ·ä½“éªŒ',
    example: `async function loadUserProfile(userId) {
  try {
    const profile = await fetchUserProfile(userId);
    return profile;
  } catch (error) {
    console.warn('åŠ è½½ç”¨æˆ·èµ„æ–™å¤±è´¥ï¼Œä½¿ç”¨é»˜è®¤èµ„æ–™:', error);
    // è¿”å›é»˜è®¤èµ„æ–™è€Œä¸æ˜¯æŠ›å‡ºé”™è¯¯
    return getDefaultProfile();
  }
}`
  },
  {
    icon: 'ğŸ“Š',
    title: 'é”™è¯¯ç›‘æ§',
    description: 'è®°å½•å’Œä¸ŠæŠ¥é”™è¯¯ä¿¡æ¯ï¼Œç”¨äºé—®é¢˜è¯Šæ–­å’Œç³»ç»Ÿæ”¹è¿›',
    example: `// é”™è¯¯ç›‘æ§é›†æˆ
window.addEventListener('error', (event) => {
  const errorInfo = {
    message: event.message,
    filename: event.filename,
    lineno: event.lineno,
    colno: event.colno,
    error: event.error?.stack,
    userAgent: navigator.userAgent,
    url: window.location.href
  };

  // å‘é€åˆ°é”™è¯¯ç›‘æ§æœåŠ¡
  fetch('/api/error-report', {
    method: 'POST',
    body: JSON.stringify(errorInfo)
  });
});`
  }
];

// å®æˆ˜æ¡ˆä¾‹
const caseStudies = [
  {
    title: 'è¡¨å•éªŒè¯é”™è¯¯å¤„ç†',
    difficulty: 'åˆçº§',
    scenario: 'ç”¨æˆ·æ³¨å†Œè¡¨å•éœ€è¦éªŒè¯å¤šä¸ªå­—æ®µï¼Œå¹¶æä¾›æ¸…æ™°çš„é”™è¯¯æç¤º',
    problems: [
      'ç”¨æˆ·è¾“å…¥ä¸åˆæ³•æ—¶ç¼ºä¹æ˜ç¡®æç¤º',
      'å¤šä¸ªéªŒè¯é”™è¯¯éš¾ä»¥åŒæ—¶å±•ç¤º',
      'é”™è¯¯ä¿¡æ¯æ ¼å¼ä¸ç»Ÿä¸€'
    ],
    solution: `class FormValidator {
  constructor(formElement) {
    this.form = formElement;
    this.errors = new Map();
  }

  validateField(fieldName, value, rules) {
    const fieldErrors = [];

    if (rules.required && !value) {
      fieldErrors.push(new ValidationError(fieldName, value, {
        rule: 'required',
        message: 'æ­¤å­—æ®µä¸ºå¿…å¡«é¡¹'
      }));
    }

    if (rules.minLength && value.length < rules.minLength) {
      fieldErrors.push(new ValidationError(fieldName, value, {
        rule: 'minLength',
        message: \`æœ€å°‘éœ€è¦ \${rules.minLength} ä¸ªå­—ç¬¦\`
      }));
    }

    if (rules.pattern && !rules.pattern.test(value)) {
      fieldErrors.push(new ValidationError(fieldName, value, {
        rule: 'pattern',
        message: rules.customMessage || 'æ ¼å¼ä¸æ­£ç¡®'
      }));
    }

    if (fieldErrors.length > 0) {
      this.errors.set(fieldName, fieldErrors);
    } else {
      this.errors.delete(fieldName);
    }

    return fieldErrors;
  }

  displayErrors() {
    // æ¸…é™¤ä¹‹å‰çš„é”™è¯¯æ˜¾ç¤º
    this.clearErrors();

    // æ˜¾ç¤ºæ–°çš„é”™è¯¯
    for (const [fieldName, errors] of this.errors) {
      const fieldElement = this.form.querySelector(\`[name="\${fieldName}"]\`);
      const errorContainer = document.createElement('div');
      errorContainer.className = 'error-message';

      errors.forEach(error => {
        const errorElement = document.createElement('p');
        errorElement.textContent = error.context.message;
        errorContainer.appendChild(errorElement);
      });

      fieldElement.parentNode.appendChild(errorContainer);
      fieldElement.classList.add('error');
    }
  }

  clearErrors() {
    const errorElements = this.form.querySelectorAll('.error-message');
    errorElements.forEach(el => el.remove());

    const fieldElements = this.form.querySelectorAll('.error');
    fieldElements.forEach(el => el.classList.remove('error'));
  }
}`,
    benefits: [
      'ç»Ÿä¸€çš„é”™è¯¯å¤„ç†é€»è¾‘',
      'æ¸…æ™°çš„ç”¨æˆ·é”™è¯¯æç¤º',
      'å¯é‡ç”¨çš„éªŒè¯ç»„ä»¶',
      'æ˜“äºæ‰©å±•æ–°çš„éªŒè¯è§„åˆ™'
    ]
  },
  {
    title: 'APIè¯·æ±‚é”™è¯¯å¤„ç†',
    difficulty: 'ä¸­çº§',
    scenario: 'å‰ç«¯åº”ç”¨éœ€è¦å¤„ç†å„ç§HTTPè¯·æ±‚é”™è¯¯ï¼ŒåŒ…æ‹¬ç½‘ç»œé—®é¢˜å’ŒæœåŠ¡ç«¯é”™è¯¯',
    problems: [
      'ç½‘ç»œè¶…æ—¶æ²¡æœ‰é‡è¯•æœºåˆ¶',
      'æœåŠ¡ç«¯é”™è¯¯ç¼ºä¹ç»Ÿä¸€å¤„ç†',
      'ç”¨æˆ·çœ‹ä¸åˆ°è¯·æ±‚çŠ¶æ€åé¦ˆ'
    ],
    solution: `class ApiClient {
  constructor(baseURL, options = {}) {
    this.baseURL = baseURL;
    this.defaultOptions = {
      timeout: 10000,
      retries: 3,
      ...options
    };
  }

  async request(endpoint, options = {}) {
    const url = \`\${this.baseURL}\${endpoint}\`;
    const requestOptions = {
      ...this.defaultOptions,
      ...options,
      headers: {
        'Content-Type': 'application/json',
        ...options.headers
      }
    };

    let lastError;

    for (let attempt = 0; attempt <= requestOptions.retries; attempt++) {
      try {
        const controller = new AbortController();
        const timeoutId = setTimeout(() => controller.abort(), requestOptions.timeout);

        const response = await fetch(url, {
          ...requestOptions,
          signal: controller.signal
        });

        clearTimeout(timeoutId);

        if (!response.ok) {
          throw new NetworkError(
            url,
            response.status,
            await response.text().catch(() => 'æ— æ³•è¯»å–å“åº”å†…å®¹')
          );
        }

        return await response.json();

      } catch (error) {
        lastError = error;

        // å¦‚æœæ˜¯ä¸­æ­¢é”™è¯¯æˆ–éç½‘ç»œé”™è¯¯ï¼Œä¸å†é‡è¯•
        if (error.name === 'AbortError' ||
            !(error instanceof NetworkError)) {
          break;
        }

        // å¦‚æœæ˜¯æœåŠ¡å™¨é”™è¯¯ä¸”ä¸æ˜¯æœ€åä¸€æ¬¡å°è¯•ï¼Œç­‰å¾…åé‡è¯•
        if (attempt < requestOptions.retries &&
            error.context.status >= 500) {
          await this.delay(1000 * Math.pow(2, attempt)); // æŒ‡æ•°é€€é¿
          continue;
        }

        break;
      }
    }

    throw lastError;
  }

  delay(ms) {
    return new Promise(resolve => setTimeout(resolve, ms));
  }
}`,
    benefits: [
      'è‡ªåŠ¨é‡è¯•æœºåˆ¶æé«˜è¯·æ±‚æˆåŠŸç‡',
      'ç»Ÿä¸€çš„ç½‘ç»œé”™è¯¯å¤„ç†',
      'è¶…æ—¶æ§åˆ¶é˜²æ­¢é•¿æ—¶é—´ç­‰å¾…',
      'æ¸…æ™°çš„é”™è¯¯åˆ†ç±»å’Œåé¦ˆ'
    ]
  }
];

// è°ƒè¯•å·¥å…·åˆ†ç±»
const toolCategories = [
  {
    name: 'æµè§ˆå™¨å¼€å‘è€…å·¥å…·',
    tools: [
      {
        name: 'Console',
        description: 'æŸ¥çœ‹é”™è¯¯æ—¥å¿—å’Œå †æ ˆè·Ÿè¸ª',
        usage: `// åœ¨æ§åˆ¶å°ä¸­æŸ¥çœ‹é”™è¯¯
console.error('é”™è¯¯ä¿¡æ¯:', error);
console.trace(); // æ‰“å°å †æ ˆè·Ÿè¸ª

// ä½¿ç”¨æ–­ç‚¹è°ƒè¯•
debugger;`
      },
      {
        name: 'Sourcesé¢æ¿',
        description: 'è®¾ç½®æ–­ç‚¹å’Œå•æ­¥è°ƒè¯•',
        usage: `// åœ¨Sourcesé¢æ¿ä¸­å¯ä»¥ï¼š
// 1. è®¾ç½®æ–­ç‚¹
// 2. å•æ­¥æ‰§è¡Œä»£ç 
// 3. æŸ¥çœ‹å˜é‡å€¼
// 4. æŸ¥çœ‹è°ƒç”¨å †æ ˆ`
      },
      {
        name: 'Networké¢æ¿',
        description: 'ç›‘æ§ç½‘ç»œè¯·æ±‚å’Œå“åº”',
        usage: `// æŸ¥çœ‹è¯·æ±‚çŠ¶æ€å’Œå“åº”å†…å®¹
// è¿‡æ»¤å¤±è´¥çš„è¯·æ±‚ (status >= 400)
// æŸ¥çœ‹è¯·æ±‚å¤´å’Œå“åº”å¤´`
      }
    ]
  },
  {
    name: 'é”™è¯¯ç›‘æ§æœåŠ¡',
    tools: [
      {
        name: 'Sentry',
        description: 'å®æ—¶é”™è¯¯è·Ÿè¸ªå’Œç›‘æ§',
        usage: `// åˆå§‹åŒ–Sentry
import * as Sentry from "@sentry/browser";

Sentry.init({
  dsn: "YOUR_DSN_HERE",
  environment: "production"
});

// æ‰‹åŠ¨æ•è·é”™è¯¯
try {
  riskyOperation();
} catch (error) {
  Sentry.captureException(error);
}

// è®¾ç½®ç”¨æˆ·ä¸Šä¸‹æ–‡
Sentry.setUser({ email: "user@example.com" });`
      },
      {
        name: 'Bugsnag',
        description: 'é”™è¯¯ç›‘æ§å’Œç¨³å®šæ€§æŒ‡æ ‡',
        usage: `// åˆå§‹åŒ–Bugsnag
import Bugsnag from '@bugsnag/js';

Bugsnag.start({
  apiKey: 'YOUR_API_KEY',
  onError: (event) => {
    // è‡ªå®šä¹‰é”™è¯¯å¤„ç†é€»è¾‘
    event.severity = 'warning';
  }
});

// æ‰‹åŠ¨é€šçŸ¥
Bugsnag.notify(new Error('Something went wrong'));`
      }
    ]
  },
  {
    name: 'è‡ªå®šä¹‰å·¥å…·',
    tools: [
      {
        name: 'é”™è¯¯è¾¹ç•Œ (React)',
        description: 'Reactç»„ä»¶æ ‘çš„é”™è¯¯æ•è·',
        usage: `class ErrorBoundary extends React.Component {
  constructor(props) {
    super(props);
    this.state = { hasError: false, error: null };
  }

  static getDerivedStateFromError(error) {
    return { hasError: true, error };
  }

  componentDidCatch(error, errorInfo) {
    // è®°å½•é”™è¯¯ä¿¡æ¯
    console.error('ç»„ä»¶é”™è¯¯:', error, errorInfo);
    // å‘é€é”™è¯¯æŠ¥å‘Š
    logErrorToService(error, errorInfo);
  }

  render() {
    if (this.state.hasError) {
      return this.props.fallback || <div>å‡ºé”™äº†ï¼</div>;
    }

    return this.props.children;
  }
}

// ä½¿ç”¨
<ErrorBoundary fallback={<ErrorComponent />}>
  <MyComponent />
</ErrorBoundary>`
      },
      {
        name: 'æ€§èƒ½ç›‘æ§',
        description: 'ç›‘æ§åº”ç”¨æ€§èƒ½å’Œé”™è¯¯ç‡',
        usage: `// æ€§èƒ½æŒ‡æ ‡ç›‘æ§
const observer = new PerformanceObserver((list) => {
  for (const entry of list.getEntries()) {
    if (entry.entryType === 'navigation') {
      console.log('é¡µé¢åŠ è½½æ—¶é—´:', entry.loadEventEnd - entry.navigationStart);
    }
  }
});

observer.observe({ entryTypes: ['navigation', 'resource', 'paint'] });

// é”™è¯¯ç‡ç»Ÿè®¡
let errorCount = 0;
let totalRequests = 0;

window.addEventListener('error', () => errorCount++);

function calculateErrorRate() {
  return totalRequests > 0 ? (errorCount / totalRequests) * 100 : 0;
}`
      }
    ]
  }
];

// æ»šåŠ¨åˆ°æŒ‡å®šç« èŠ‚
const scrollToSection = (sectionId: string) => {
  const element = document.getElementById(sectionId);
  if (element) {
    element.scrollIntoView({ behavior: 'smooth' });
    activeSection.value = sectionId;
  }
};

// ç›‘å¬æ»šåŠ¨ä»¥æ›´æ–°æ´»åŠ¨ç« èŠ‚
const handleScroll = () => {
  const scrollPosition = window.scrollY + 100;

  for (const section of sections) {
    const element = document.getElementById(section.id);
    if (element) {
      const offsetTop = element.offsetTop;
      const offsetHeight = element.offsetHeight;

      if (scrollPosition >= offsetTop && scrollPosition < offsetTop + offsetHeight) {
        activeSection.value = section.id;
        break;
      }
    }
  }
};

// ç”Ÿå‘½å‘¨æœŸé’©å­
onMounted(() => {
  window.addEventListener('scroll', handleScroll);
});

onUnmounted(() => {
  window.removeEventListener('scroll', handleScroll);
});
</script>

<style lang="less" scoped>
// å˜é‡å®šä¹‰
@primary-color: #4a6fa5;
@primary-light: #6b8cbc;
@primary-dark: #3a5680;
@error-color: #e74c3c;
@warning-color: #f39c12;
@success-color: #27ae60;
@info-color: #3498db;
@text-color: #2c3e50;
@text-light: #7f8c8d;
@border-color: #e1e8ed;
@bg-color: #ffffff;
@sidebar-bg: #f8fafc;
@card-bg: #fdfdfd;
@shadow: 0 2px 12px 0 rgba(0, 0, 0, 0.1);
@shadow-hover: 0 8px 24px 0 rgba(0, 0, 0, 0.15);

// åŸºç¡€æ ·å¼
.error-handling-intro {
  font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
  line-height: 1.6;
  color: @text-color;
  background-color: @bg-color;
  min-height: 100vh;
  max-width: 1200px;
  margin: 0 auto;
}

// é¡µé¢å¤´éƒ¨
.page-header {
  background: linear-gradient(135deg, @primary-color 0%, @primary-dark 100%);
  color: white;
  padding: 3rem 2rem 4rem;
  margin-bottom: 2rem;
  position: relative;
  overflow: hidden;

  &::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: url("data:image/svg+xml,%3Csvg width='100' height='100' viewBox='0 0 100 100' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M11 18c3.866 0 7-3.134 7-7s-3.134-7-7-7-7 3.134-7 7 3.134 7 7 7zm48 25c3.866 0 7-3.134 7-7s-3.134-7-7-7-7 3.134-7 7 3.134 7 7 7zm-43-7c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zm63 31c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zM34 90c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zm56-76c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zM12 86c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm28-65c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm23-11c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zm-6 60c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm29 22c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zM32 63c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zm57-13c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zm-9-21c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2zM60 91c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2zM35 41c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2zM12 60c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2z' fill='%23ffffff' fill-opacity='0.1' fill-rule='evenodd'/%3E%3C/svg%3E");
    opacity: 0.3;
  }

  .header-content {
    position: relative;
    z-index: 1;
    max-width: 1200px;
    margin: 0 auto;
    text-align: center;
  }

  .title {
    font-size: 3rem;
    font-weight: 800;
    margin: 0 0 0.5rem;
    text-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
  }

  .subtitle {
    font-size: 1.5rem;
    opacity: 0.9;
    margin: 0 0 3rem;
    font-weight: 400;
  }
}

// é”™è¯¯æµç¨‹å¯è§†åŒ–
.error-visualization {
  margin-top: 2rem;

  .error-flow {
    display: flex;
    justify-content: space-between;
    align-items: flex-start;
    position: relative;

    &::before {
      content: '';
      position: absolute;
      top: 30px;
      left: 0;
      right: 0;
      height: 2px;
      background: rgba(255, 255, 255, 0.3);
      z-index: 1;
    }

    .flow-step {
      display: flex;
      flex-direction: column;
      align-items: center;
      text-align: center;
      position: relative;
      z-index: 2;
      flex: 1;

      .step-icon {
        width: 60px;
        height: 60px;
        background: rgba(255, 255, 255, 0.2);
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 1.5rem;
        margin-bottom: 1rem;
        border: 2px solid rgba(255, 255, 255, 0.5);
      }

      .step-content {
        h4 {
          margin: 0 0 0.5rem;
          font-size: 1.1rem;
        }

        p {
          margin: 0;
          font-size: 0.9rem;
          opacity: 0.9;
        }
      }

      // çŠ¶æ€é¢œè‰²
      &.error .step-icon {
        background: rgba(231, 76, 60, 0.3);
        border-color: rgba(231, 76, 60, 0.7);
      }

      &.catching .step-icon {
        background: rgba(52, 152, 219, 0.3);
        border-color: rgba(52, 152, 219, 0.7);
      }

      &.analyzing .step-icon {
        background: rgba(243, 156, 18, 0.3);
        border-color: rgba(243, 156, 18, 0.7);
      }

      &.handling .step-icon {
        background: rgba(155, 89, 182, 0.3);
        border-color: rgba(155, 89, 182, 0.7);
      }

      &.reporting .step-icon {
        background: rgba(46, 204, 113, 0.3);
        border-color: rgba(46, 204, 113, 0.7);
      }

      &.recovered .step-icon {
        background: rgba(39, 174, 96, 0.3);
        border-color: rgba(39, 174, 96, 0.7);
      }
    }
  }
}

// å†…å®¹å¸ƒå±€
.content-wrapper {
  display: flex;
  max-width: 1200px;
  margin: 0 auto;
  padding: 0 1rem;
  gap: 2rem;
}

// å¯¼èˆªä¾§è¾¹æ 
.nav-sidebar {
  width: 280px;
  flex-shrink: 0;
  position: sticky;
  top: 2rem;
  align-self: flex-start;

  .nav-list {
    list-style: none;
    padding: 0;
    margin: 0;
    background: @sidebar-bg;
    border-radius: 12px;
    overflow: hidden;
    box-shadow: @shadow;

    li {
      padding: 1rem 1.5rem;
      cursor: pointer;
      transition: all 0.2s ease;
      border-left: 4px solid transparent;
      display: flex;
      align-items: center;
      gap: 0.75rem;

      &:hover {
        background-color: darken(@sidebar-bg, 2%);
        color: @primary-color;
      }

      &.active {
        background-color: white;
        color: @primary-color;
        border-left-color: @primary-color;
        font-weight: 600;
      }

      .nav-icon {
        font-size: 1.2rem;
      }
    }
  }
}

// ä¸»å†…å®¹åŒºåŸŸ
.main-content {
  flex: 1;
  max-width: 880px;
}

// å†…å®¹åŒºå—
.content-section {
  margin-bottom: 3rem;
  padding: 2.5rem;
  background: white;
  border-radius: 12px;
  box-shadow: @shadow;
  transition: box-shadow 0.3s ease;

  &:hover {
    box-shadow: @shadow-hover;
  }

  h2 {
    font-size: 1.8rem;
    margin-top: 0;
    margin-bottom: 1rem;
    padding-bottom: 0.75rem;
    border-bottom: 2px solid @border-color;
    color: @primary-dark;
  }

  .section-description {
    color: @text-light;
    margin-bottom: 2rem;
    font-size: 1.1rem;
  }
}

// é”™è¯¯ç±»å‹ç½‘æ ¼
.error-types-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
  gap: 1.5rem;
  margin: 2rem 0;
}

.error-type-card {
  background: @card-bg;
  border-radius: 8px;
  overflow: hidden;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
  transition: transform 0.2s ease;

  &:hover {
    transform: translateY(-2px);
  }

  .error-header {
    padding: 1.25rem;
    color: white;
    display: flex;
    justify-content: space-between;
    align-items: center;

    &.high {
      background: @error-color;
    }

    &.medium {
      background: @warning-color;
    }

    &.low {
      background: @info-color;
    }

    h3 {
      margin: 0;
      font-size: 1.3rem;
    }

    .error-icon {
      font-size: 1.5rem;
    }
  }

  .error-content {
    padding: 1.25rem;

    p {
      margin-bottom: 1rem;
      color: @text-color;
    }

    .error-example,
    .error-solution {
      margin-top: 1rem;

      strong {
        display: block;
        margin-bottom: 0.5rem;
        color: @text-light;
      }

      pre {
        background: @sidebar-bg;
        border-radius: 4px;
        padding: 1rem;
        overflow-x: auto;
        margin: 0;

        code {
          font-family: 'Fira Code', 'Consolas', monospace;
          font-size: 0.85rem;
          color: @text-color;
          line-height: 1.4;
        }
      }
    }
  }
}

// æ•è·æ–¹æ³•
.catching-methods {
  display: flex;
  flex-direction: column;
  gap: 2rem;
  margin: 2rem 0;
}

.method-card {
  background: @card-bg;
  border-radius: 8px;
  overflow: hidden;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
  border-left: 4px solid @primary-color;

  .method-header {
    padding: 1.25rem;
    background: @sidebar-bg;
    display: flex;
    justify-content: space-between;
    align-items: center;

    h3 {
      margin: 0;
      color: @primary-color;
    }

    .method-scope {
      background: @primary-color;
      color: white;
      padding: 0.25rem 0.75rem;
      border-radius: 20px;
      font-size: 0.8rem;
      font-weight: 600;
    }
  }

  .method-content {
    padding: 1.25rem;

    p {
      margin-bottom: 1rem;
      color: @text-color;
    }

    .method-example {
      margin: 1.5rem 0;

      pre {
        background: @sidebar-bg;
        border-radius: 4px;
        padding: 1rem;
        overflow-x: auto;

        code {
          font-family: 'Fira Code', 'Consolas', monospace;
          font-size: 0.85rem;
          color: @text-color;
          line-height: 1.4;
        }
      }
    }

    .method-pros-cons {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 1.5rem;
      margin-top: 1.5rem;

      .pros, .cons {
        strong {
          display: block;
          margin-bottom: 0.5rem;
          color: @text-color;
        }

        ul {
          margin: 0;
          padding-left: 1.5rem;

          li {
            margin-bottom: 0.25rem;
            color: @text-light;
          }
        }
      }

      .pros {
        strong {
          color: @success-color;
        }
      }

      .cons {
        strong {
          color: @error-color;
        }
      }
    }
  }
}

// é”™è¯¯ä¼ æ’­
.error-propagation {
  margin-top: 3rem;

  h3 {
    margin-bottom: 1.5rem;
    color: @primary-color;
  }

  .propagation-chart {
    display: flex;
    flex-direction: column;
    gap: 1.5rem;
  }

  .propagation-step {
    display: flex;
    align-items: flex-start;
    gap: 1.5rem;
    padding: 1.5rem;
    background: @card-bg;
    border-radius: 8px;
    border-left: 4px solid @info-color;

    .step-number {
      width: 40px;
      height: 40px;
      background: @info-color;
      color: white;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: 700;
      flex-shrink: 0;
    }

    .step-description {
      flex: 1;
      color: @text-color;
      font-weight: 500;
    }

    .step-code {
      flex: 2;

      pre {
        background: @sidebar-bg;
        border-radius: 4px;
        padding: 1rem;
        overflow-x: auto;
        margin: 0;

        code {
          font-family: 'Fira Code', 'Consolas', monospace;
          font-size: 0.85rem;
          color: @text-color;
          line-height: 1.4;
        }
      }
    }
  }
}

// è‡ªå®šä¹‰é”™è¯¯æ¼”ç¤º
.custom-error-demo {
  display: grid;
  grid-template-columns: 1fr;
  gap: 2rem;
  margin: 2rem 0;

  .demo-explanation,
  .demo-usage {
    h3 {
      margin-top: 0;
      margin-bottom: 1rem;
      color: @primary-color;
    }
  }

  .code-implementation {
    margin-top: 1.5rem;

    pre {
      background: @sidebar-bg;
      border-radius: 4px;
      padding: 1.25rem;
      overflow-x: auto;

      code {
        font-family: 'Fira Code', 'Consolas', monospace;
        font-size: 0.85rem;
        color: @text-color;
        line-height: 1.4;
      }
    }
  }

  .usage-examples {
    display: flex;
    flex-direction: column;
    gap: 1.5rem;
  }

  .usage-example {
    h4 {
      margin: 0 0 1rem;
      color: @primary-color;
    }

    pre {
      background: @sidebar-bg;
      border-radius: 4px;
      padding: 1rem;
      overflow-x: auto;
      margin-bottom: 1rem;

      code {
        font-family: 'Fira Code', 'Consolas', monospace;
        font-size: 0.85rem;
        color: @text-color;
        line-height: 1.4;
      }
    }

    .example-output {
      strong {
        display: block;
        margin-bottom: 0.5rem;
        color: @text-light;
      }

      pre {
        background: lighten(@warning-color, 45%);
        border: 1px solid lighten(@warning-color, 20%);
      }
    }
  }
}

// æœ€ä½³å®è·µ
.best-practices {
  margin-top: 3rem;

  h3 {
    margin-bottom: 1.5rem;
    color: @primary-color;
  }

  .practice-cards {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
    gap: 1.5rem;
  }

  .practice-card {
    padding: 1.5rem;
    background: @card-bg;
    border-radius: 8px;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
    border-top: 3px solid @primary-color;
    transition: transform 0.2s ease;

    &:hover {
      transform: translateY(-2px);
    }

    .practice-icon {
      font-size: 2rem;
      margin-bottom: 1rem;
    }

    h4 {
      margin: 0 0 0.75rem;
      color: @primary-color;
    }

    p {
      margin-bottom: 1rem;
      color: @text-color;
    }

    .practice-example {
      pre {
        background: @sidebar-bg;
        border-radius: 4px;
        padding: 1rem;
        overflow-x: auto;
        margin: 0;

        code {
          font-family: 'Fira Code', 'Consolas', monospace;
          font-size: 0.85rem;
          color: @text-color;
          line-height: 1.4;
        }
      }
    }
  }
}

// å®æˆ˜æ¡ˆä¾‹
.case-studies {
  display: flex;
  flex-direction: column;
  gap: 2rem;
  margin: 2rem 0;
}

.case-study {
  background: @card-bg;
  border-radius: 8px;
  overflow: hidden;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);

  .case-header {
    padding: 1.25rem;
    background: @sidebar-bg;
    display: flex;
    justify-content: space-between;
    align-items: center;

    h3 {
      margin: 0;
      color: @primary-color;
    }

    .case-difficulty {
      padding: 0.25rem 0.75rem;
      border-radius: 20px;
      font-size: 0.8rem;
      font-weight: 600;
      color: white;

      &.åˆçº§ {
        background: @success-color;
      }

      &.ä¸­çº§ {
        background: @warning-color;
      }

      &.é«˜çº§ {
        background: @error-color;
      }
    }
  }

  .case-content {
    padding: 1.25rem;

    p {
      margin-bottom: 1.5rem;
      color: @text-color;
    }

    .case-problem,
    .case-benefits {
      margin: 1.5rem 0;

      h4 {
        margin: 0 0 1rem;
        color: @primary-color;
      }

      ul {
        margin: 0;
        padding-left: 1.5rem;

        li {
          margin-bottom: 0.5rem;
          color: @text-color;
        }
      }
    }

    .case-solution {
      margin: 1.5rem 0;

      h4 {
        margin: 0 0 1rem;
        color: @primary-color;
      }

      pre {
        background: @sidebar-bg;
        border-radius: 4px;
        padding: 1.25rem;
        overflow-x: auto;

        code {
          font-family: 'Fira Code', 'Consolas', monospace;
          font-size: 0.85rem;
          color: @text-color;
          line-height: 1.4;
        }
      }
    }
  }
}

// è°ƒè¯•å·¥å…·
.tools-overview {
  display: flex;
  flex-direction: column;
  gap: 2rem;
  margin: 2rem 0;
}

.tool-category {
  h3 {
    margin: 0 0 1.5rem;
    color: @primary-color;
    padding-bottom: 0.5rem;
    border-bottom: 1px solid @border-color;
  }

  .tool-list {
    display: flex;
    flex-direction: column;
    gap: 1.5rem;
  }

  .tool-item {
    display: flex;
    gap: 1.5rem;
    padding: 1.5rem;
    background: @card-bg;
    border-radius: 8px;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);

    .tool-info {
      flex: 1;

      h4 {
        margin: 0 0 0.5rem;
        color: @primary-color;
      }

      p {
        margin: 0;
        color: @text-color;
      }
    }

    .tool-usage {
      flex: 1;

      pre {
        background: @sidebar-bg;
        border-radius: 4px;
        padding: 1rem;
        overflow-x: auto;
        margin: 0;

        code {
          font-family: 'Fira Code', 'Consolas', monospace;
          font-size: 0.85rem;
          color: @text-color;
          line-height: 1.4;
        }
      }
    }
  }
}

// é¡µè„š
.page-footer {
  text-align: center;
  padding: 2.5rem;
  margin-top: 3rem;
  background: @sidebar-bg;
  color: @text-light;

  p {
    margin: 0.5rem 0;
  }

  .footer-note {
    font-size: 0.9rem;
    opacity: 0.7;
  }
}

// å“åº”å¼è®¾è®¡
@media (max-width: 1024px) {
  .content-wrapper {
    flex-direction: column;
  }

  .nav-sidebar {
    width: 100%;
    margin-bottom: 1.5rem;
    position: static;

    .nav-list {
      display: flex;
      overflow-x: auto;

      li {
        flex-shrink: 0;
        border-left: none;
        border-bottom: 3px solid transparent;

        &.active {
          border-left: none;
          border-bottom-color: @primary-color;
        }
      }
    }
  }

  .error-flow {
    flex-direction: column;
    gap: 2rem;

    &::before {
      display: none;
    }
  }

  .custom-error-demo {
    grid-template-columns: 1fr;
  }

  .tool-item {
    flex-direction: column;
  }
}

@media (max-width: 768px) {
  .page-header {
    padding: 2rem 1rem 3rem;

    .title {
      font-size: 2.2rem;
    }

    .subtitle {
      font-size: 1.2rem;
    }
  }

  .content-section {
    padding: 1.5rem;
  }

  .error-types-grid {
    grid-template-columns: 1fr;
  }

  .method-pros-cons {
    grid-template-columns: 1fr;
  }

  .propagation-step {
    flex-direction: column;
    gap: 1rem;
  }

  .practice-cards {
    grid-template-columns: 1fr;
  }
}
</style>
