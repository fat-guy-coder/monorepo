<template>
  <div class="container">
    <!-- Á±ªÂûãÂà§Êñ≠ÊñπÊ≥ï -->
    <section class="method-section">
      <h2 class="section-title">JavaScript Á±ªÂûãÂà§Êñ≠ÊñπÊ≥ïÂ§ßÂÖ® ({{ typeMethods.length }})</h2>
      <ul class="method-list">
        <li v-for="(method, index) in typeMethods" :key="index" class="method-item">
          <div class="method-header">
            <span class="method-name">{{ method.name }}</span>
            <a @click="handleRoute(method.route)" v-if="method.route">Ë∑≥ËΩ¨ÂÆûÁé∞</a>
          </div>
          <div class="method-detail">
            <div class="method-desc">{{ method.description }}</div>
            <div class="method-desc">{{ method.implementationPrinciple }}</div>
            <div class="principle-detail">Â∫ïÂ±ÇÂéüÁêÜÔºö{{ method.principleDetail }}</div>
            <pre class="code-block"><code>{{ method.usage }}</code></pre>
            <div class="pros-cons">
              <div class="pros">
                <h3 class="section-title">‚úÖ ‰ºòÁÇπ</h3>
                <ul>
                  <li v-for="(pro, pIndex) in method.pros" :key="'pro' + pIndex">{{ pro }}</li>
                </ul>
              </div>
              <div class="cons">
                <h3 class="section-title">‚ùå Áº∫ÁÇπ</h3>
                <ul>
                  <li v-for="(con, cIndex) in method.cons" :key="'con' + cIndex">{{ con }}</li>
                </ul>
              </div>
            </div>
            <div class="examples">
              <h3 class="section-title">üå∞ Á§∫‰æã</h3>
              <div
                class="example-item"
                v-for="(example, exIndex) in method.examples"
                :key="'ex' + exIndex"
              >
                <pre class="code-block"><code>{{ example.code }}</code></pre>
                <div class="output">
                  ËæìÂá∫ÁªìÊûú: <span class="result">{{ example.output }}</span>
                </div>
              </div>
            </div>
          </div>
        </li>
      </ul>
    </section>
  </div>
</template>

<script lang="ts" setup>
import { ref } from 'vue'

const typeMethods = ref([
  {
    name: 'typeof',
    description: 'Ê£ÄÊµãÂü∫Êú¨Êï∞ÊçÆÁ±ªÂûãÁöÑÊúÄ‰Ω≥ÈÄâÊã©',
    usage: 'typeof variable',
    implementationPrinciple: 'ÊåâÁÖßÊï∞ÊçÆÂú®ËÆ°ÁÆóÊú∫Â∫ïÂ±ÇÂ≠òÂÇ®ÁöÑ‰∫åËøõÂà∂ÁªìÊûúÊù•ËøõË°åÊ£ÄÊµã',
    principleDetail:
      'Âú® JavaScript ÂºïÊìéÂÜÖÈÉ®ÔºåÊØèÁßçÊï∞ÊçÆÁ±ªÂûãÂú®Â∫ïÂ±ÇÈÉΩÊúâ‰∏Ä‰∏™ÂØπÂ∫îÁöÑÁ±ªÂûãÊ†áÁ≠æÔºàtype tagÔºâÔºåtypeof Êìç‰ΩúÁ¨¶‰ºöËØªÂèñÂèòÈáèÁöÑÁ±ªÂûãÊ†áÁ≠æÂπ∂ËøîÂõûÂØπÂ∫îÁöÑÂ≠óÁ¨¶‰∏≤„ÄÇ‰æãÂ¶ÇÔºånumber„ÄÅstring„ÄÅboolean„ÄÅundefined„ÄÅfunction ÈÉΩÊúâÂêÑËá™ÁöÑÁ±ªÂûãÊ†áÁ≠æ„ÄÇ‰ΩÜÁî±‰∫éÂéÜÂè≤ÂéüÂõ†Ôºånull ÁöÑÁ±ªÂûãÊ†áÁ≠æÂíåÂØπË±°‰∏ÄÊ†∑ÔºåÈÉΩÊòØ 0ÔºåÂõ†Ê≠§ typeof null ‰ºöËøîÂõû "object"„ÄÇ',
    pros: ['ÁÆÄÂçïÂø´ÈÄüÊ£ÄÊµãÂü∫Êú¨Á±ªÂûã', 'ÂØπ undefined Ê£ÄÊµãÂáÜÁ°Æ', 'ÊâÄÊúâÊµèËßàÂô®ÊîØÊåÅ'],

    cons: ['Êó†Ê≥ïÂå∫ÂàÜÊï∞ÁªÑ‰∏éÂØπË±°', 'null ‰ºöË¢´ËØÜÂà´‰∏∫ object', 'Êó†Ê≥ïÊ£ÄÊµãËá™ÂÆö‰πâÂØπË±°Á±ªÂûã'],
    examples: [
      {
        code: 'typeof "hello" // string',
        output: 'string',
      },
      {
        code: 'typeof null // object',
        output: 'object',
      },
    ],
  },
  {
    name: 'instanceof',
    description: 'Ê£ÄÊµãÂØπË±°ÂÆû‰æãÁöÑÊûÑÈÄ†ÂáΩÊï∞',
    usage: 'object instanceof Constructor',
    implementationPrinciple: 'Ê≤øÁùÄÂØπË±°ÁöÑÂéüÂûãÈìæÂêë‰∏äÊü•ÊâæÔºåÁõ¥Âà∞ÊâæÂà∞ÊûÑÈÄ†ÂáΩÊï∞ÁöÑ prototype Â±ûÊÄß‰∏∫Ê≠¢„ÄÇ',
    principleDetail:
      'Ê≤øÁùÄÂØπË±°ÁöÑÂéüÂûãÈìæÈÄíÂΩíÂêë‰∏äÊü•ÊâæÔºåÁõ¥Âà∞ÊâæÂà∞ÊûÑÈÄ†ÂáΩÊï∞ÁöÑ prototype Â±ûÊÄß‰∏∫Ê≠¢„ÄÇÂ¶ÇÊûúÊâæÂà∞ÔºåÂàôËøîÂõû trueÔºåÂê¶ÂàôËøîÂõû false„ÄÇ',
    pros: ['ÂáÜÁ°ÆÊ£ÄÊµãÂØπË±°Á±ªÂûã', 'ÊîØÊåÅÁªßÊâøÂÖ≥Á≥ªÂà§Êñ≠', 'ÂèØÊ£ÄÊµãËá™ÂÆö‰πâÁ±ªÂûã'],
    cons: ['Êó†Ê≥ïÊ£ÄÊµãÂü∫Êú¨Á±ªÂûã', 'Ë∑®Á™óÂè£/iframe Â§±Êïà', 'ÂéüÂûãÈìæÂèØËÉΩË¢´‰øÆÊîπ'],
    route: 'AchieveInstanceof',
    examples: [
      {
        code: '[] instanceof Array // true',
        output: 'true',
      },
      {
        code: 'document.body instanceof HTMLBodyElement',
        output: 'true',
      },
    ],
  },
  {
    name: 'Object.prototype.toString.call',
    description: 'ÊúÄÂÖ®Èù¢ÁöÑÁ±ªÂûãÊ£ÄÊµãÊñπÊ≥ï',
    usage: 'Object.prototype.toString.call(value)',
    implementationPrinciple:
      'ËÆ∏Â§öÁ±ªÂéüÂûã‰∏äÁöÑtoStringÊñπÊ≥ïÈÉΩÊòØÁî®‰∫éËΩ¨Êç¢Â≠óÁ¨¶‰∏≤ÁöÑÔºåËÄåObject.prototype.toStringÊòØÁî®‰∫éÊ£ÄÊµãÊï∞ÊçÆÁ±ªÂûãÁöÑÔºåÊâÄ‰ª•‰ΩøÁî®Êó∂‰∏ÄËà¨Êê≠ÈÖçcallÊù•ÊîπÂèòthisÁöÑÊåáÂêë',
    principleDetail:
      'Âú® JavaScript ÂºïÊìéÂÜÖÈÉ®ÔºåÊØèÁßçÊï∞ÊçÆÁ±ªÂûãÂú®Â∫ïÂ±ÇÈÉΩÊúâ‰∏Ä‰∏™ÂØπÂ∫îÁöÑÁ±ªÂûãÊ†áÁ≠æÔºàtype tagÔºâÔºåObject.prototype.toString.call Êìç‰ΩúÁ¨¶‰ºöËØªÂèñÂèòÈáèÁöÑÁ±ªÂûãÊ†áÁ≠æÂπ∂ËøîÂõûÂØπÂ∫îÁöÑÂ≠óÁ¨¶‰∏≤„ÄÇ‰æãÂ¶ÇÔºånumber„ÄÅstring„ÄÅboolean„ÄÅundefined„ÄÅfunction ÈÉΩÊúâÂêÑËá™ÁöÑÁ±ªÂûãÊ†áÁ≠æ„ÄÇ(Ë∑ütypeofÁöÑÂ∫ïÂ±ÇÂéüÁêÜ‰∏ÄÊ†∑)',
    pros: ['ËÉΩÊ£ÄÊµãÊâÄÊúâÂÜÖÁΩÆÁ±ªÂûã', 'ÂáÜÁ°ÆÂå∫ÂàÜÊï∞ÁªÑ/ÂØπË±°', 'ËøîÂõûÊ†áÂáÜÊ†ºÂºèÂ≠óÁ¨¶‰∏≤'],
    cons: ['ÂèØËÉΩ‰ºöË¢´ÈáçÂÜô', 'ËØ≠Ê≥ïÁ®çÊòæÂ§çÊùÇ', 'Ëá™ÂÆö‰πâÁ±ªÂûãËøîÂõû [object Object]', 'ÈúÄË¶ÅÂ§ÑÁêÜÂ≠óÁ¨¶‰∏≤ÁªìÊûú'],
    examples: [
      {
        code: 'Object.prototype.toString.call([]) // [object Array]',
        output: '[object Array]',
      },
      {
        code: 'Object.prototype.toString.call(null) // [object Null]',
        output: '[object Null]',
      },
    ],
  },
  {
    name: 'Array.isArray',
    description: '‰∏ìÈó®Áî®‰∫éÊ£ÄÊµãÊï∞ÁªÑÁ±ªÂûã',
    usage: 'Array.isArray(value)',
    implementationPrinciple: 'Array.isArray(value) ‰ºöËøîÂõû‰∏Ä‰∏™Â∏ÉÂ∞îÂÄºÔºåË°®Á§∫ÂèòÈáèÊòØÂê¶ÊòØÊï∞ÁªÑ„ÄÇ',
    principleDetail:
      'Array.isArray ÁöÑÂ∫ïÂ±ÇÂéüÁêÜÊòØÈÄöËøáÂÜÖÈÉ®ÁöÑ [[Class]] Â±ûÊÄßÔºàÂç≥ Object.prototype.toString.call(value) ËøîÂõû [object Array]ÔºâÊù•Âà§Êñ≠ÂèòÈáèÊòØÂê¶‰∏∫Êï∞ÁªÑ„ÄÇÂú® ES5 ËßÑËåÉ‰∏≠ÔºåArray.isArray ÈÄöËøáÂà§Êñ≠ÂØπË±°ÁöÑÂÜÖÈÉ®Â±ûÊÄß [[Class]] ÊòØÂê¶‰∏∫ "Array" Êù•ÂÆûÁé∞ÔºåÂõ†Ê≠§ËÉΩÂáÜÁ°ÆÂå∫ÂàÜÊï∞ÁªÑÂíåÂÖ∂‰ªñÂØπË±°Á±ªÂûã„ÄÇ',
    pros: ['ÂáÜÁ°ÆÊ£ÄÊµãÊï∞ÁªÑÁ±ªÂûã', 'ES5+ ÊµèËßàÂô®ÊîØÊåÅ', 'Ëß£ÂÜ≥ instanceof Ë∑®Á™óÂè£ÈóÆÈ¢ò'],
    cons: ['‰ªÖÈÄÇÁî®‰∫éÊï∞ÁªÑÊ£ÄÊµã', 'ÊóßÊµèËßàÂô®ÈúÄË¶Å polyfill', 'Êó†Ê≥ïÊ£ÄÊµãÁ±ªÊï∞ÁªÑÂØπË±°'],
    examples: [
      {
        code: 'Array.isArray([]) // true',
        output: 'true',
      },
      {
        code: 'Array.isArray({ length: 0 }) // false',
        output: 'false',
      },
    ],
  },
])

const emit = defineEmits(['goToByRouteName'])

const handleRoute = (route: string) => {
  emit('goToByRouteName', route)
}
</script>

<style scoped>
.container {
  display: grid;
  grid-template-columns: 1fr;
  gap: 2rem;
  padding: 2rem;
  max-width: 1200px;
  margin: 0 auto;
}

.method-section {
  background: #fff;
  border-radius: 12px;
  padding: 1.5rem;
  box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
}

.section-title {
  font-size: 1.5rem;
  margin-bottom: 1rem;
  padding-bottom: 0.5rem;
  border-bottom: 3px solid;
}

.method-list {
  list-style: none;
  padding: 0;
  margin: 0;
}

.method-item {
  margin: 1rem 0;
  border: 1px solid #eee;
  border-radius: 8px;
  overflow: hidden;
  padding: 1rem;
  background: #f8f9fa;
}

.method-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 0.5rem 0;
  border-bottom: 1px solid #ddd;
}

.method-name {
  font-family: 'Fira Code', monospace;
  color: #2c3e50;
  font-size: 1.2rem;
}

.method-detail {
  padding: 1rem 0;
}

.method-desc {
  color: #666;
  margin-bottom: 1rem;
}

.principle-detail {
  color: #666;
  margin-bottom: 1rem;
}

.code-block {
  background: #2c3e50;
  color: #fff;
  padding: 1rem;
  border-radius: 6px;
  overflow-x: auto;
  code {
    color: #fff;
  }
}

.pros-cons {
  display: grid;
  gap: 1rem;
  grid-template-columns: 1fr 1fr;
  margin: 1rem 0;
}

.pros ul,
.cons ul {
  padding-left: 1.2rem;
  margin: 0.5rem 0;
}

.pros li {
  color: #27ae60;
}

.cons li {
  color: #c0392b;
}

.output {
  margin-top: 0.5rem;
  font-family: monospace;
  color: #95a5a6;
}

.result {
  color: #e67e22;
  font-weight: bold;
}
</style>
