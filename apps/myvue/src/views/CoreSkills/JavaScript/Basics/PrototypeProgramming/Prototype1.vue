<template>
  <div class="prototype-container">
    <header class="header">
      <h1 class="title">JavaScript åŸå‹ä¸åŸå‹é“¾</h1>
      <p class="subtitle">æ·±å…¥ç†è§£JavaScripté¢å‘å¯¹è±¡çš„æ ¸å¿ƒæœºåˆ¶</p>
    </header>

    <div class="content-section">
      <h2 class="section-title">åŸå‹çš„ä½œç”¨</h2>
      <div class="concept-card">
        <p>
        åŸå‹æ˜¯JavaScriptä¸­å®ç°
        <b>ç»§æ‰¿å’Œå…±äº«å±æ€§</b>
        çš„é‡è¦æœºåˆ¶ã€‚æ¯ä¸ªå¯¹è±¡éƒ½æœ‰ä¸€ä¸ªåŸå‹ï¼Œå½“è®¿é—®å¯¹è±¡çš„å±æ€§æ—¶ï¼ŒJavaScriptä¼šæ²¿ç€åŸå‹é“¾å‘ä¸ŠæŸ¥æ‰¾ï¼Œç›´åˆ°æ‰¾åˆ°å±æ€§æˆ–åˆ°è¾¾åŸå‹é“¾æœ«ç«¯ã€‚
      </p>
      <p>
        å…¶å®å°±æ˜¯åŒç§ç±»å‹æ•°æ®(å­ç±»,çˆ¶ç±»,ç¥–å…ˆç±»,å­å¯¹è±¡,çˆ¶å¯¹è±¡,ç¥–å…ˆå¯¹è±¡)
        <b>å…±äº«æ–¹æ³•å’Œå±æ€§</b>,å€Ÿæ­¤è¿˜èƒ½<b>é™ä½å†…å­˜æ¶ˆè€—ï¼Œæé«˜æ€§èƒ½</b> ã€‚
      </p>
      <p>åŸç†å°±æ˜¯åŸå‹éƒ½æŒ‡å‘ <b>ç»Ÿä¸€æŒ‡é’ˆ</b> (åŸå‹å¯¹è±¡,åŒç±»çš„æƒ…å†µä¸‹)</p>
      <p>åŸå‹é“¾å°±æ˜¯åŸå‹å¯¹è±¡çš„é“¾å¼ç»“æ„(è¿èµ·æ¥çš„åŸå‹å¯¹è±¡)</p>
    </div>
      </div>

    <div class="content-section">
      <h2 class="section-title">ğŸ” åŸºæœ¬æ¦‚å¿µ</h2>
      <div class="concept-grid">
        <div class="concept-card">
          <h3>åŸå‹ (Prototype)</h3>
          <p>æ¯ä¸ªJavaScriptå¯¹è±¡éƒ½æœ‰ä¸€ä¸ªå†…ç½®å±æ€§<code>[[Prototype]]</code>ï¼ŒæŒ‡å‘å®ƒçš„åŸå‹å¯¹è±¡</p>
          <div class="code-example">
            <pre><code>function Person() {}
const person = new Person();
// person.__proto__ === Person.prototype</code></pre>
          </div>
        </div>
        <div class="concept-card">
          <h3>åŸå‹é“¾ (Prototype Chain)</h3>
          <p>å½“è®¿é—®å¯¹è±¡å±æ€§æ—¶ï¼ŒJavaScriptä¼šæ²¿ç€åŸå‹é“¾å‘ä¸ŠæŸ¥æ‰¾ï¼Œç›´åˆ°æ‰¾åˆ°å±æ€§æˆ–åˆ°è¾¾åŸå‹é“¾æœ«ç«¯</p>
          <div class="code-example">
            <pre><code>person.toString(); // æŸ¥æ‰¾é¡ºåº:
// 1. person å¯¹è±¡æœ¬èº«
// 2. Person.prototype
// 3. Object.prototype
// 4. null</code></pre>
          </div>
        </div>
      </div>
    </div>

    <div class="content-section">
      <h2 class="section-title">ğŸ› ï¸ æ ¸å¿ƒæ–¹æ³•</h2>
      <div class="method-grid">
        <div class="method-card">
          <h3>Object.getPrototypeOf()</h3>
          <p>è·å–å¯¹è±¡çš„åŸå‹</p>
          <div class="code-example">
            <pre><code>const proto = Object.getPrototypeOf(obj);
// ç­‰åŒäº obj.__proto__ (æ¨èä½¿ç”¨æ ‡å‡†æ–¹æ³•)</code></pre>
          </div>
        </div>
        <div class="method-card">
          <h3>Object.setPrototypeOf()</h3>
          <p>è®¾ç½®å¯¹è±¡çš„åŸå‹</p>
          <div class="code-example">
            <pre><code>Object.setPrototypeOf(obj, prototype);
// ä¿®æ”¹ç°æœ‰å¯¹è±¡çš„åŸå‹</code></pre>
          </div>
        </div>
        <div class="method-card">
          <h3>Object.create()</h3>
          <p>åˆ›å»ºå…·æœ‰æŒ‡å®šåŸå‹çš„æ–°å¯¹è±¡</p>
          <div class="code-example">
            <pre><code>const newObj = Object.create(proto);
// ä»¥protoä¸ºåŸå‹åˆ›å»ºæ–°å¯¹è±¡</code></pre>
          </div>
        </div>
        <div class="method-card">
          <h3>instanceof</h3>
          <p>æ£€æŸ¥æ„é€ å‡½æ•°çš„prototypeæ˜¯å¦å‡ºç°åœ¨å¯¹è±¡çš„åŸå‹é“¾ä¸Š</p>
          <div class="code-example">
            <pre><code>obj instanceof Constructor;
// æ£€æŸ¥objçš„åŸå‹é“¾æ˜¯å¦åŒ…å«Constructor.prototype</code></pre>
          </div>
        </div>
      </div>
    </div>

    <div class="content-section">
      <h2 class="section-title">åŸå‹é“¾</h2>
      <div class="concept-card">
        <p>
        åŸå‹é“¾å°±æ˜¯ <b>åŸå‹å¯¹è±¡çš„é“¾å¼ç»“æ„</b> (è¿èµ·æ¥çš„åŸå‹å¯¹è±¡)
      </p>
      <p>
        å°±æ˜¯ <b>åŒç§ç±»å‹æ•°æ®(å­ç±»,çˆ¶ç±»,ç¥–å…ˆç±»,å­å¯¹è±¡,çˆ¶å¯¹è±¡,ç¥–å…ˆå¯¹è±¡)ä»ä¸‹(å­)åˆ°ä¸Š(ç¥–)è¿èµ·æ¥çš„åŸå‹å¯¹è±¡é“¾</b> ã€‚æ–¹ä¾¿è·Ÿç€é“¾æŸ¥æ‰¾å±æ€§ã€‚
      </p>
      <p>å­ä¼šå…ˆä»å­å¯¹è±¡æ‰¾ï¼Œæ‰¾ä¸åˆ°ä¼šä»çˆ¶å¯¹è±¡æ‰¾ï¼Œçˆ¶å¯¹è±¡æ‰¾ä¸åˆ°ä¼šä»ç¥–å…ˆå¯¹è±¡æ‰¾ï¼Œç¥–å…ˆå¯¹è±¡æ‰¾ä¸åˆ°ä¼šä»Object.prototypeæ‰¾ï¼ŒObject.prototypeæ‰¾ä¸åˆ°ä¼šä»nullæ‰¾ã€‚</p>
    </div>
      </div>

    <div class="content-section">
      <h2 class="section-title">ğŸ“Š åŸå‹é“¾å›¾ç¤ºï¼ˆå¼€é¥¶ï¼‰</h2>
      <div class="diagram">
        <div class="chain">
          <div class="object">sonå¯¹è±¡</div>
          <div class="arrow">â†“ __proto__</div>
          <div class="prototype">Son.prototype</div>
          <div class="arrow">â†“ __proto__</div>
          <div class="prototype">Person.prototype</div>
          <div class="arrow"></div>
          <div class="object">personå¯¹è±¡</div>
          <div class="arrow">â†“ __proto__</div>
          <div class="prototype">Person.prototype</div>
          <div class="arrow">â†“ __proto__</div>
          <div class="prototype">Object.prototype</div>
          <div class="arrow">â†“ __proto__</div>
          <div class="null">null</div>
        </div>
        <div class="code-example">
          <pre><code>function Person() {}
const person = new Person();

class Son extends Person {
}//ç­‰åŒäºSon = Object.create(Person)//è™½ç„¶å®é™…ä¸Šä¸èƒ½å¯¹ç±»èµ‹å€¼ï¼Œä½†æ˜¯åŸç†æ˜¯è¿™æ ·çš„
//å°†Personä½œä¸ºåŸå‹ï¼Œåˆ›å»ºä¸€ä¸ªæ–°å¯¹è±¡ï¼Œè¿™ä¸ªæ–°å¯¹è±¡Sonçš„__proto__æŒ‡å‘Personï¼Œæ‰€ä»¥Son.__proto__ === Person

const son = new Son();
son.__proto__ === Son.prototype //true
Son.__proto__ === Person //true
Son.prototype.__proto__ === Person.prototype //true

// åŸå‹é“¾å…³ç³»:
person.__proto__ === Person.prototype
Person.prototype.__proto__ === Object.prototype
Object.prototype.__proto__ === null</code></pre>
        </div>
      </div>
      <div>
        <img :src="imgsrc" alt="åŠ è½½å¤±è´¥" loading="lazy" />
      </div>
    </div>

    <div class="content-section">
      <h2 class="section-title">ç»•è¿‡åŸå‹é“¾(ç»•ï¼Ÿç»•å—ï¼Ÿ)</h2>
      <div class="concept-card">
        <p>
          åŸå‹é“¾çš„æŸ¥æ‰¾æœºåˆ¶æ˜¯ <b>ä»ä¸‹åˆ°ä¸Š</b> ï¼Œæ‰€ä»¥å¦‚æœæƒ³è¦ç»•è¿‡åŸå‹é“¾ï¼Œå¯ä»¥ <b>ç›´æ¥ä¿®æ”¹åŸå‹å¯¹è±¡</b> ã€‚
        </p>
        <p>
          ä½†æ˜¯è¿™æ ·ä¿®æ”¹äº†åŸå‹å¯¹è±¡ï¼Œä¼šå¯¼è‡´æ‰€æœ‰å®ä¾‹éƒ½å—åˆ°å½±å“ï¼Œæ‰€ä»¥éœ€è¦è°¨æ…ä½¿ç”¨ã€‚
        </p>
        <p>
          æ‰€ä»¥ <b>ä¸è¦ä¿®æ”¹å†…ç½®å¯¹è±¡çš„åŸå‹</b> ï¼Œå› ä¸ºè¿™æ ·ä¼šå½±å“æ‰€æœ‰å®ä¾‹ã€‚
        </p>
        <p><b>ä½†æ˜¯ä½ ç”¨ç†Ÿäº†ï¼Œäº†è§£åŸç†å’Œæœºåˆ¶åï¼Œè¿™äº›éƒ½ä¸æ˜¯é—®é¢˜ã€‚</b></p>
      </div>
    </div>

    <div class="content-section">
      <h2 class="section-title">constructorå±æ€§ <a @click="goToByRouteName('Class')">è·³è½¬è¯¦ç»†</a> </h2>
      <div class="concept-card">
        <p>æ¯ä¸ªå¯¹è±¡(å®ä¾‹)éƒ½æœ‰ä¸€ä¸ªconstructorå±æ€§ï¼ŒæŒ‡å‘åˆ›å»ºè¯¥å¯¹è±¡çš„æ„é€ å‡½æ•°ã€‚å¹¶ä¸”ç±»çš„prototype.constructoræŒ‡å‘ç±»æœ¬èº«ã€‚</p>
        <p>å› ä¸ºå¯¹è±¡(ç¤ºä¾‹)çš„__proto__æŒ‡å‘prototypeï¼Œæ‰€ä»¥å¯¹è±¡çš„__proto__.constructorå±æ€§æŒ‡å‘ç±»æœ¬èº«ã€‚</p>
        <p>constructorå±æ€§æ˜¯ä¸å¯æšä¸¾çš„ï¼Œæ‰€ä»¥ä¸èƒ½è¢«for...inå¾ªç¯éå†ã€‚</p>
        <p>constructorå±æ€§æ˜¯ä¸å¯ä¿®æ”¹çš„ï¼Œæ‰€ä»¥ä¸èƒ½è¢«ä¿®æ”¹ã€‚</p>
        <p>constructorå±æ€§æ˜¯ä¸å¯åˆ é™¤çš„ï¼Œæ‰€ä»¥ä¸èƒ½è¢«åˆ é™¤ã€‚</p>
       <pre>
        <code>//æ„é€ å‡½æ•°
function Person() {}
Person.prototype.constructor === Person //true
new Person().__proto__.constructor === Person //true
//ç±»
class Person {}
Person.prototype.constructor === Person //true
new Person().__proto__.constructor === Person //true</code></pre>
      </div>
    </div>

    <div class="content-section">
      <h2 class="section-title">ğŸ’¡ å®é™…åº”ç”¨</h2>
      <div class="application-grid">
        <div class="application-card">
          <h3>åŸå‹ç»§æ‰¿</h3>
          <p>å®ç°å¯¹è±¡ä¹‹é—´çš„ç»§æ‰¿å…³ç³»</p>
          <div class="code-example">
            <pre><code>function Animal() {}
Animal.prototype.eat = function() {};

function Dog() {}
Dog.prototype = Object.create(Animal.prototype);
Dog.prototype.bark = function() {};</code></pre>
          </div>
        </div>
        <div class="application-card">
          <h3>æ–¹æ³•å…±äº«</h3>
          <p>æ‰€æœ‰å®ä¾‹å…±äº«åŸå‹ä¸Šçš„æ–¹æ³•ï¼ŒèŠ‚çœå†…å­˜</p>
          <div class="code-example">
            <pre><code>function Car() {}
Car.prototype.drive = function() {
  console.log('Driving...');
};

const car1 = new Car();
const car2 = new Car();
// car1å’Œcar2å…±äº«driveæ–¹æ³•</code></pre>
          </div>
        </div>
        <div class="application-card">
          <h3>å±æ€§é®è”½</h3>
          <p>å®ä¾‹å±æ€§ä¼šé®è”½åŸå‹ä¸Šçš„åŒåå±æ€§</p>
          <div class="code-example">
            <pre><code>function Item() {}
Item.prototype.price = 100;

const item = new Item();
item.price = 200; // é®è”½åŸå‹å±æ€§
console.log(item.price); // 200</code></pre>
          </div>
        </div>
        <div class="application-card">
          <h3>å†…ç½®å¯¹è±¡æ‰©å±•</h3>
          <p>è°¨æ…æ‰©å±•å†…ç½®å¯¹è±¡çš„åŸå‹</p>
          <div class="code-example">
            <pre><code>// ä¸æ¨èå¤§è§„æ¨¡ä¿®æ”¹
Array.prototype.last = function() {
  return this[this.length - 1];
};

[1, 2, 3].last(); // 3</code></pre>
          </div>
        </div>
      </div>
    </div>

    <div class="content-section">
      <h2 class="section-title">âš–ï¸ ä¼˜ç¼ºç‚¹åˆ†æ</h2>
      <div class="pros-cons">
        <div class="pros">
          <h3>ä¼˜ç‚¹</h3>
          <ul>
            <li><strong>å†…å­˜é«˜æ•ˆ</strong> - å…±äº«åŸå‹ä¸Šçš„æ–¹æ³•å’Œå±æ€§</li>
            <li><strong>åŠ¨æ€ç»§æ‰¿</strong> - å¯è¿è¡Œæ—¶ä¿®æ”¹åŸå‹</li>
            <li><strong>çµæ´»æ‰©å±•</strong> - å¯æ‰©å±•å†…ç½®å¯¹è±¡åŠŸèƒ½</li>
            <li><strong>ä»£ç å¤ç”¨</strong> - å®ç°ç»§æ‰¿å’Œæ··å…¥æ¨¡å¼</li>
          </ul>
        </div>
        <div class="cons">
          <h3>ç¼ºç‚¹</h3>
          <ul>
            <li><strong>ç†è§£æˆæœ¬é«˜</strong> - æ¦‚å¿µè¾ƒæŠ½è±¡</li>
            <li><strong>æ€§èƒ½å½±å“</strong> - é•¿åŸå‹é“¾æŸ¥æ‰¾è¾ƒæ…¢</li>
            <li><strong>å…¨å±€æ±¡æŸ“</strong> - ä¿®æ”¹å†…ç½®åŸå‹æœ‰é£é™©</li>
            <li><strong>è°ƒè¯•å›°éš¾</strong> - åŸå‹é“¾å…³ç³»ä¸æ˜“è¿½è¸ª</li>
          </ul>
        </div>
      </div>
    </div>

    <div class="content-section">
      <h2 class="section-title">âš ï¸ æ³¨æ„äº‹é¡¹</h2>
      <div class="note-grid">
        <div class="note-card">
          <h3>æ€§èƒ½è€ƒé‡</h3>
          <p>è¿‡é•¿çš„åŸå‹é“¾ä¼šå½±å“å±æ€§æŸ¥æ‰¾æ€§èƒ½ï¼Œå°½é‡ä¿æŒæ‰å¹³ç»“æ„</p>
        </div>
        <div class="note-card">
          <h3>åŸå‹ä¿®æ”¹æ—¶æœº</h3>
          <p>åœ¨åˆ›å»ºå®ä¾‹å‰ä¿®æ”¹åŸå‹ï¼Œå·²å­˜åœ¨å®ä¾‹ä¸ä¼šè‡ªåŠ¨æ›´æ–°</p>
        </div>
        <div class="note-card">
          <h3>constructorå±æ€§</h3>
          <p>é‡å†™prototypeæ—¶éœ€è¦æ‰‹åŠ¨è®¾ç½®constructorå±æ€§</p>
        </div>
        <div class="note-card">
          <h3>ç°ä»£æ›¿ä»£æ–¹æ¡ˆ</h3>
          <p>ES6 classè¯­æ³•æ˜¯åŸå‹çš„è¯­æ³•ç³–ï¼Œæ›´æ˜“ç†è§£å’Œä½¿ç”¨</p>
        </div>
      </div>
    </div>

    <footer class="footer">
      <p>åŸå‹æœºåˆ¶æ˜¯JavaScripté¢å‘å¯¹è±¡ç¼–ç¨‹çš„æ ¸å¿ƒï¼Œç†è§£å®ƒæœ‰åŠ©äºç¼–å†™æ›´é«˜æ•ˆçš„ä»£ç </p>
    </footer>
  </div>
</template>

<script setup lang="ts">
import imgsrc from '@/assets/js/prototype-chain.png'

const emit = defineEmits(['goToByRouteName']);

const goToByRouteName = (route: string) => {
  emit('goToByRouteName', route);
};

</script>

<style lang="less" scoped>
.prototype-container {
  max-width: 1000px;
  margin: 0 auto;
  padding: 2rem;
  font-family:
    'Inter',
    -apple-system,
    BlinkMacSystemFont,
    sans-serif;
  color: #2c3e50;
  background-color: #fff;
  line-height: 1.6;
}

.header {
  text-align: center;
  margin-bottom: 2rem;
  padding-bottom: 1.5rem;
  border-bottom: 1px solid #eaecef;

  .title {
    font-size: 2.2rem;
    font-weight: 600;
    margin-bottom: 0.5rem;
    color: #2c3e50;
    background: linear-gradient(90deg, #3498db, #9b59b6);
    -webkit-background-clip: text;
    background-clip: text;
    color: transparent;
  }

  .subtitle {
    font-size: 1.1rem;
    color: #7f8c8d;
    font-weight: 400;
  }
}

.content-section {
  margin-bottom: 2.5rem;

  .section-title {
    font-size: 1.5rem;
    font-weight: 600;
    margin-bottom: 1.2rem;
    color: #2c3e50;
    border-left: 4px solid #9b59b6;
    padding-left: 0.8rem;
  }
}

.concept-grid,
.method-grid,
.application-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
  gap: 1.2rem;
  margin: 1.5rem 0;
}

.concept-card,
.method-card,
.application-card {
  background-color: #fff;
  border-radius: 8px;
  padding: 1.2rem;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
  border: 1px solid #eaecef;
  transition: transform 0.2s;

  &:hover {
    transform: translateY(-3px);
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
  }

  h3 {
    font-size: 1.2rem;
    margin-top: 0;
    color: #3498db;
  }

  p {
    font-size: 0.9rem;
    color: #555;
    margin: 0.5rem 0;
  }
}

.code-example {
  background-color: #f8f9fa;
  padding: 0.8rem;
  border-radius: 4px;
  margin-top: 0.8rem;
  overflow-x: auto;

  pre {
    margin: 0;

    code {
      font-family: 'SFMono-Regular', Consolas, 'Liberation Mono', Menlo, monospace;
      font-size: 0.85rem;
      color: #333;
      line-height: 1.4;
    }
  }
}

.diagram {
  background-color: #fff;
  border-radius: 8px;
  padding: 1.5rem;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
  border: 1px solid #eaecef;
  margin: 1.5rem 0;

  .chain {
    display: flex;
    flex-direction: column;
    align-items: center;
    margin-bottom: 1.5rem;

    .object,
    .prototype,
    .null {
      padding: 0.8rem 1.5rem;
      border-radius: 6px;
      text-align: center;
      font-weight: 500;
    }

    .object {
      background-color: #e3f2fd;
      border: 1px solid #bbdefb;
    }

    .prototype {
      background-color: #f3e5f5;
      border: 1px solid #e1bee7;
    }

    .null {
      background-color: #e0e0e0;
      border: 1px solid #bdbdbd;
    }

    .arrow {
      margin: 0.5rem 0;
      color: #7f8c8d;
      font-weight: bold;
    }
  }
}

.pros-cons {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 1.5rem;
  margin: 1.5rem 0;

  .pros,
  .cons {
    background-color: #fff;
    border-radius: 8px;
    padding: 1.2rem;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
    border: 1px solid #eaecef;

    h3 {
      font-size: 1.2rem;
      margin-top: 0;
      margin-bottom: 0.8rem;
      color: #2c3e50;
      border-bottom: 2px solid;
      padding-bottom: 0.5rem;
    }

    ul {
      padding-left: 1.2rem;
      margin: 0;

      li {
        margin-bottom: 0.5rem;
        font-size: 0.9rem;

        strong {
          color: #e74c3c;
        }
      }
    }
  }

  .pros h3 {
    border-color: #42b983;
  }

  .cons h3 {
    border-color: #e74c3c;
  }
}

.note-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
  gap: 1.2rem;
  margin: 1.5rem 0;
}

.note-card {
  background-color: #fff;
  border-radius: 8px;
  padding: 1.2rem;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
  border: 1px solid #eaecef;

  h3 {
    font-size: 1.1rem;
    margin-top: 0;
    color: #3498db;
  }

  p {
    font-size: 0.9rem;
    color: #555;
    margin-bottom: 0;
  }
}

.footer {
  text-align: center;
  margin-top: 2rem;
  padding-top: 1.5rem;
  border-top: 1px solid #eaecef;
  color: #7f8c8d;
  font-size: 0.9rem;
}

@media (max-width: 768px) {
  .prototype-container {
    padding: 1rem;
  }

  .concept-grid,
  .method-grid,
  .application-grid,
  .note-grid {
    grid-template-columns: 1fr;
  }

  .pros-cons {
    grid-template-columns: 1fr;
  }

  .header .title {
    font-size: 1.8rem;
  }
}
</style>
