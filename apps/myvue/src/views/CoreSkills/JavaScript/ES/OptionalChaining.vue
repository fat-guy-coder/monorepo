<template>
  <div class="optional-chaining-guide">
    <!-- æ ‡é¢˜éƒ¨åˆ† -->
    <div class="guide-header">
      <h1>å¯é€‰é“¾æ“ä½œç¬¦ <span class="operator">?.</span> åŸºæœ¬ä»‹ç»</h1>
      <div class="decorative-line"></div>
    </div>

    <!-- æ ¸å¿ƒæ¦‚å¿µå¡ç‰‡ -->
    <div class="concept-card">
      <div class="section-title">
        <div class="icon">ğŸ›¡ï¸</div>
        <h2>ä»€ä¹ˆæ˜¯å¯é€‰é“¾ï¼Ÿ</h2>
      </div>
      <div class="definition">
        <p>
          å¯é€‰é“¾æ“ä½œç¬¦
          <code>?.</code>
          å…è®¸è¯»å–ä½äºè¿æ¥å¯¹è±¡é“¾æ·±å¤„çš„å±æ€§çš„å€¼ï¼Œ<br />æ— éœ€æ˜ç¡®éªŒè¯é“¾ä¸­çš„æ¯ä¸ªå¼•ç”¨æ˜¯å¦æœ‰æ•ˆã€‚
        </p>
        <div class="syntax-diagram">
          <span>obj</span>
          <span class="chain">?.</span>
          <span>prop1</span>
          <span class="chain">?.</span>
          <span>prop2</span>
        </div>
      </div>
    </div>

    <!-- ä½¿ç”¨å¯¹æ¯”æ¨¡å— -->
    <div class="comparison-card">
      <div class="section-title">
        <div class="icon">âš–ï¸</div>
        <h2>ä¼ ç»Ÿå†™æ³• vs å¯é€‰é“¾å†™æ³•</h2>
      </div>

      <div class="comparison-grid">
        <!-- åœºæ™¯1ï¼šå¯¹è±¡å±æ€§ -->
        <div class="scenario">
          <h3>è®¿é—®åµŒå¥—å¯¹è±¡å±æ€§</h3>
          <div class="code-compare">
            <div class="old-code">
              <pre>
const street = user &&
  user.address &&
  user.address.street;</pre>
            </div>
            <div class="arrow">â‡’</div>
            <div class="new-code">
              <pre>const street = user?.address?.street;</pre>
            </div>
          </div>
        </div>

        <!-- åœºæ™¯2ï¼šæ•°ç»„å…ƒç´  -->
        <div class="scenario">
          <h3>è®¿é—®æ•°ç»„å…ƒç´ </h3>
          <div class="code-compare">
            <div class="old-code">
              <pre>
const firstItem = arr &&
  arr.length &&
  arr[0];</pre>
            </div>
            <div class="arrow">â‡’</div>
            <div class="new-code">
              <pre>const firstItem = arr?.[0];</pre>
            </div>
          </div>
        </div>

        <!-- åœºæ™¯3ï¼šå‡½æ•°è°ƒç”¨ -->
        <div class="scenario">
          <h3>å®‰å…¨å‡½æ•°è°ƒç”¨</h3>
          <div class="code-compare">
            <div class="old-code">
              <pre>
const result = obj.method &&
  obj.method();</pre>
            </div>
            <div class="arrow">â‡’</div>
            <div class="new-code">
              <pre>const result = obj.method?.();</pre>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- æŠ€æœ¯ç»†èŠ‚å¡ç‰‡ -->
    <div class="tech-card">
      <div class="section-title">
        <div class="icon">ğŸ“Œ</div>
        <h2>æŠ€æœ¯ç‰¹æ€§ä¸æ³¨æ„äº‹é¡¹</h2>
      </div>

      <div class="detail-grid">
        <div class="detail-item pro">
          <h3>âœ… ä¼˜åŠ¿ç‰¹æ€§</h3>
          <ul>
            <li>è‡ªåŠ¨çŸ­è·¯ç‰¹æ€§ï¼šé‡åˆ° null/undefined ç«‹å³åœæ­¢</li>
            <li>å…¼å®¹å¤šç§è®¿é—®å½¢å¼ï¼šæ”¯æŒ <code>.</code>ã€<code>[]</code>ã€<code>()</code></li>
            <li>TypeScript ç±»å‹å®‰å…¨ï¼šè‡ªåŠ¨æ¨å¯¼å¯èƒ½ä¸º undefined çš„ç±»å‹</li>
          </ul>
        </div>

        <div class="detail-item caution">
          <h3>âš ï¸ ä½¿ç”¨æ³¨æ„</h3>
          <ul>
            <li>ä¸èƒ½ç”¨äºèµ‹å€¼æ“ä½œï¼š<code>obj?.prop = 1</code> âŒ</li>
            <li>è¿‡åº¦ä½¿ç”¨ä¼šæ©ç›–æ½œåœ¨çš„æ•°æ®ç»“æ„é—®é¢˜</li>
            <li>æµè§ˆå™¨å…¼å®¹æ€§éœ€è¦ç¼–è¯‘å¤„ç†ï¼ˆBabelï¼‰</li>
          </ul>
        </div>
      </div>
    </div>

    <!-- æµè§ˆå™¨æ”¯æŒ -->
    <div class="support-card">
      <div class="section-title">
        <div class="icon">ğŸŒ</div>
        <h2>æµè§ˆå™¨å…¼å®¹æ–¹æ¡ˆ</h2>
      </div>
      <div class="compatibility">
        <div class="browser-support">
          <div class="browser chrome"></div>
          <div class="browser firefox"></div>
          <div class="browser safari"></div>
          <div class="browser edge"></div>
        </div>
        <p>é€šè¿‡ Babel æ’ä»¶ <code>@babel/plugin-proposal-optional-chaining</code> å®ç°å…¼å®¹</p>
      </div>
    </div>
  </div>
</template>

<script lang="ts" setup>
// æ— äº¤äº’é€»è¾‘
</script>

<style scoped>
.optional-chaining-guide {
  max-width: 1200px;
  margin: 2rem auto;
  padding: 0 2rem;
  font-family: 'Segoe UI', system-ui, sans-serif;
  color: #2c3e50;
}

.guide-header {
  text-align: center;
  margin-bottom: 3rem;
}

.guide-header h1 {
  font-size: 2.4rem;
  margin-bottom: 1rem;
}

.operator {
  color: #e74c3c;
  font-weight: bold;
}

.decorative-line {
  width: 120px;
  height: 4px;
  background: linear-gradient(90deg, #3498db, #e67e22);
  margin: 0 auto;
}

.concept-card,
.comparison-card,
.tech-card,
.support-card {
  background: white;
  border-radius: 12px;
  padding: 2rem;
  margin-bottom: 2rem;
  box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
}

.section-title {
  display: flex;
  align-items: center;
  gap: 1rem;
  margin-bottom: 2rem;
}

.icon {
  font-size: 2rem;
}

h2 {
  margin: 0;
  font-size: 1.8rem;
}

.syntax-diagram {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 0.5rem;
  font-size: 1.5rem;
  padding: 1.5rem;
  background: #f8f9fa;
  border-radius: 8px;
  margin: 1.5rem 0;
}

.chain {
  color: #e74c3c;
  font-weight: bold;
}

.comparison-grid {
  display: grid;
  gap: 2rem;
}

.scenario h3 {
  color: #34495e;
  margin-bottom: 1rem;
}

.code-compare {
  display: flex;
  align-items: center;
  gap: 2rem;
  background: #f8f9fa;
  border-radius: 8px;
  padding: 1.5rem;
}

.old-code,
.new-code {
  flex: 1;
}

.old-code pre {
  background: #f1f2f6;
  color: #666;
  padding: 1rem;
  border-radius: 6px;
}

.new-code pre {
  background: #2d2d2d;
  color: #f8f8f2;
  padding: 1rem;
  border-radius: 6px;
}

.arrow {
  font-size: 1.5rem;
  color: #7f8c8d;
}

.detail-grid {
  display: grid;
  grid-template-columns: repeat(2, 1fr);
  gap: 2rem;
}

.detail-item {
  padding: 1.5rem;
  border-radius: 8px;
}

.pro {
  background: #e8f5e9;
  border: 2px solid #81c784;
}

.caution {
  background: #ffebee;
  border: 2px solid #e57373;
}

.support-card .compatibility {
  text-align: center;
}

.browser-support {
  display: flex;
  justify-content: center;
  gap: 2rem;
  margin: 2rem 0;
}

.browser {
  width: 50px;
  height: 50px;
  border-radius: 8px;
  background: #eee;
}

code {
  background: #f1f2f6;
  padding: 0.2em 0.4em;
  border-radius: 4px;
}

pre {
  overflow-x: auto;
  margin: 0;
}
</style>
