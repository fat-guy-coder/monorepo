<template>
  <div class="page-container">
    <div class="content-wrapper">
      <!-- é¡µé¢å¤´éƒ¨ -->
      <header class="page-header">
        <h1 class="page-title">
          <span class="card-icon">ğŸ“</span>
          ES6+ å­—ç¬¦ä¸²æ–°å¢æ–¹æ³•åŸºæœ¬æŒ‡å—
        </h1>
        <p class="page-subtitle">ES2015 ~ ES2023</p>
      </header>

      <Nav :list="methods" class="nav"></Nav>

      <!-- æ¨¡æ¿å­—ç¬¦ä¸² -->
      <div class="card mb-xl highlight">
        <div class="card-header">
          <h2 class="card-title">
            <span class="card-icon">ğŸŒŸ</span>
            æ¨¡æ¿å­—ç¬¦ä¸²ï¼ˆTemplate Literalsï¼‰
          </h2>
        </div>
        <div class="card-body">
          <div class="grid grid-2">
            <div class="example-box">
              <h3 class="text-lg font-semibold mb-md">æ¨¡æ¿å­—ç¬¦ä¸²ç¤ºä¾‹</h3>
              <div class="code-block">
                <pre><code>// å¤šè¡Œå­—ç¬¦ä¸²
const poem = `æ˜”äººå·²ä¹˜é»„é¹¤å»ï¼Œ
æ­¤åœ°ç©ºä½™é»„é¹¤æ¥¼ã€‚
é»„é¹¤ä¸€å»ä¸å¤è¿”ï¼Œ
ç™½äº‘åƒè½½ç©ºæ‚ æ‚ ã€‚`

// è¡¨è¾¾å¼åµŒå…¥
const user = { name: 'å¼ ä¸‰', age: 25 }
console.log(`ç”¨æˆ·åï¼š${user.name}ï¼Œå¹´é¾„ï¼š${user.age}`)

// æ ‡ç­¾æ¨¡æ¿
function highlight(strings, ...values) {
  return strings.reduce((result, str, i) =>
    `${result}${str}<span class="highlight">${values[i] || ''}</span>`, '')
}
const message = highlight`ä»Šå¤©æ˜¯${new Date().toLocaleDateString()}`</code></pre>
              </div>
            </div>
            <div class="detail-box">
              <h3 class="text-lg font-semibold mb-md">ğŸŒŸ æ ¸å¿ƒåŠŸèƒ½</h3>
              <ul class="feature-list">
                <li>å¤šè¡Œå­—ç¬¦ä¸²æ”¯æŒ</li>
                <li>è¡¨è¾¾å¼åµŒå…¥ï¼ˆ${expression}ï¼‰</li>
                <li>æ ‡ç­¾æ¨¡æ¿åŠŸèƒ½</li>
              </ul>

              <div class="best-practice">
                <h4 class="text-lg font-semibold mb-md">æœ€ä½³å®è·µ</h4>
                <p class="text-secondary mb-md">ä¼˜å…ˆä½¿ç”¨æ¨¡æ¿å­—ç¬¦ä¸²ä»£æ›¿å­—ç¬¦ä¸²æ‹¼æ¥</p>
                <div class="code-block">
                  <pre><code>// ä¸æ¨è
const str = 'Hello ' + name + ', your score is ' + score

// æ¨è
const str = `Hello ${name}, your score is ${score}`</code></pre>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- å­—ç¬¦ä¸²æ–¹æ³• -->
      <div class="card mb-xl" v-for="(item, index) in methods" :key="index" :id="item.id">
        <div class="card-header">
          <h2 class="card-title">
            <span class="card-icon">ğŸ”§</span>
            {{ item.title }}
          </h2>
        </div>
        <div class="card-body">
          <h3 class="text-lg font-semibold mb-md">{{ item.description }}</h3>
          <div class="grid grid-2">
            <div class="example-col">
              <h4 class="text-md font-semibold mb-sm">ä¼ ç»Ÿæ–¹å¼</h4>
              <div class="code-block">
                <pre><code>{{ item.LegacyExample }}</code></pre>
              </div>
            </div>
            <div class="example-col modern">
              <h4 class="text-md font-semibold mb-sm">ç°ä»£æ–¹å¼</h4>
              <div class="code-block">
                <pre><code>{{ item.ModernExample }}</code></pre>
              </div>
            </div>
          </div>

          <div class="grid grid-2 mt-lg">
            <div class="meta-item success">
              <h4 class="text-md font-semibold mb-sm">âœ… ä¼˜ç‚¹</h4>
              <ul class="feature-list">
                <li v-for="(i, index) in item.advantage" :key="index">{{ i }}</li>
              </ul>
            </div>
            <div class="meta-item warning">
              <h4 class="text-md font-semibold mb-sm">âš ï¸ æ³¨æ„</h4>
              <p class="text-secondary">{{ item.attention }}</p>
            </div>
          </div>
        </div>
      </div>

      <!-- æ–¹æ³•å¯¹æ¯”è¡¨ -->
      <div class="card mb-xl contrast">
        <div class="card-header">
          <h2 class="card-title">
            <span class="card-icon">ğŸ”</span>
            æ–¹æ³•å¯¹æ¯”è¡¨
          </h2>
        </div>
        <div class="card-body">
          <div class="table-container">
            <table class="table">
              <thead>
                <tr>
                  <th>æ–¹æ³•</th>
                  <th>è¿”å›å€¼</th>
                  <th>å¤§å°å†™æ•æ„Ÿ</th>
                  <th>æ”¯æŒæ­£åˆ™</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td>includes()</td>
                  <td>Boolean</td>
                  <td>æ˜¯</td>
                  <td>å¦</td>
                </tr>
                <tr>
                  <td>startsWith()</td>
                  <td>Boolean</td>
                  <td>æ˜¯</td>
                  <td>å¦</td>
                </tr>
                <tr>
                  <td>endsWith()</td>
                  <td>Boolean</td>
                  <td>æ˜¯</td>
                  <td>å¦</td>
                </tr>
                <tr>
                  <td>padStart()</td>
                  <td>String</td>
                  <td>-</td>
                  <td>å¦</td>
                </tr>
                <tr>
                  <td>padEnd()</td>
                  <td>String</td>
                  <td>-</td>
                  <td>å¦</td>
                </tr>
                <tr>
                  <td>trimStart()</td>
                  <td>String</td>
                  <td>-</td>
                  <td>å¦</td>
                </tr>
                <tr>
                  <td>trimEnd()</td>
                  <td>String</td>
                  <td>-</td>
                  <td>å¦</td>
                </tr>
                <tr>
                  <td>repeat()</td>
                  <td>String</td>
                  <td>-</td>
                  <td>å¦</td>
                </tr>
                <tr>
                  <td>at()</td>
                  <td>String</td>
                  <td>-</td>
                  <td>å¦</td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
      </div>
    </div>
  </div>
</template>

<script setup lang="ts">
import '@/assets/css/main.less';
import Nav from '@/components/Nav/ScrollNav.vue';

const methods = [
  {
    id: 'includes',
    name: 'includes',
    title: 'includes() æ–¹æ³•',
    description: 'æ£€æŸ¥å­—ç¬¦ä¸²æ˜¯å¦åŒ…å«æŒ‡å®šçš„å­å­—ç¬¦ä¸²ã€‚',
    LegacyExample: `// ES5æ–¹å¼
var str = 'hello world'
var hasHello = str.indexOf('hello') !== -1`,
    ModernExample: `// ES6+æ–¹å¼
const str = 'hello world'
const hasHello = str.includes('hello')`,
    advantage: ['è¯­ä¹‰æ›´æ¸…æ™°', 'æ”¯æŒç¬¬äºŒä¸ªå‚æ•°ï¼ˆèµ·å§‹ä½ç½®ï¼‰'],
    attention: 'åŒºåˆ†å¤§å°å†™ï¼Œå¯ç”¨toLowerCase()ç»Ÿä¸€å¤§å°å†™',
  },
  {
    id: 'padStart',
    name: 'padStart',
    title: 'padStart() æ–¹æ³•',
    description: 'åœ¨å½“å‰å­—ç¬¦ä¸²çš„å¼€å¤´å¡«å……æŒ‡å®šçš„å­—ç¬¦ï¼Œç›´åˆ°è¾¾åˆ°æŒ‡å®šçš„é•¿åº¦ã€‚',
    LegacyExample: `// ES5æ–¹å¼
var str = '5'
var padded = (new Array(3).join('0') + str).slice(-3)`,
    ModernExample: `// ES6+æ–¹å¼
const str = '5'
const padded = str.padStart(3, '0')`,
    advantage: ['å¯ä»¥è½»æ¾å¡«å……å­—ç¬¦ä¸²'],
    attention: 'æ³¨æ„å¡«å……å­—ç¬¦çš„é•¿åº¦',
  },
  {
    id: 'padEnd',
    name: 'padEnd',
    title: 'padEnd() æ–¹æ³•',
    description: 'åœ¨å½“å‰å­—ç¬¦ä¸²çš„ç»“å°¾å¡«å……æŒ‡å®šçš„å­—ç¬¦ï¼Œç›´åˆ°è¾¾åˆ°æŒ‡å®šçš„é•¿åº¦ã€‚',
    LegacyExample: `// ES5æ–¹å¼
var str = '5'
var padded = str + (new Array(3).join('0')).slice(0, 3 - str.length)`,
    ModernExample: `// ES6+æ–¹å¼
const str = '5'
const padded = str.padEnd(3, '0')`,
    advantage: ['å¯ä»¥è½»æ¾å¡«å……å­—ç¬¦ä¸²'],
    attention: 'æ³¨æ„å¡«å……å­—ç¬¦çš„é•¿åº¦',
  },
  {
    id: 'trimStart',
    name: 'trimStart',
    title: 'trimStart() æ–¹æ³•',
    description: 'å»é™¤å­—ç¬¦ä¸²å¼€å¤´çš„ç©ºæ ¼ã€‚',
    LegacyExample: `// ES5æ–¹å¼
var str = '   hello'
var trimmed = str.replace(/^[\\s]+/, '')`,
    ModernExample: `// ES6+æ–¹å¼
const str = '   hello'
const trimmed = str.trimStart()`,
    advantage: ['å»é™¤å­—ç¬¦ä¸²å¼€å¤´çš„ç©ºæ ¼'],
    attention: 'æ³¨æ„åªå»é™¤å¼€å¤´çš„ç©ºæ ¼',
  },
  {
    id: 'trimEnd',
    name: 'trimEnd',
    title: 'trimEnd() æ–¹æ³•',
    description: 'å»é™¤å­—ç¬¦ä¸²ç»“å°¾çš„ç©ºæ ¼ã€‚',
    LegacyExample: `// ES5æ–¹å¼
var str = 'hello   '
var trimmed = str.replace(/[\\s]+$/, '')`,
    ModernExample: `// ES6+æ–¹å¼
const str = 'hello   '
const trimmed = str.trimEnd()`,
    advantage: ['å»é™¤å­—ç¬¦ä¸²ç»“å°¾çš„ç©ºæ ¼'],
    attention: 'æ³¨æ„åªå»é™¤ç»“å°¾çš„ç©ºæ ¼',
  },
  {
    id: 'matchAll',
    name: 'matchAll',
    title: 'matchAll() æ–¹æ³•',
    description: 'è¿”å›ä¸€ä¸ªç±»ä¼¼æ•°ç»„çš„è¿­ä»£å™¨ï¼ŒåŒ…å«æ‰€æœ‰åŒ¹é…çš„é¡¹ã€‚',
    LegacyExample: `// ES5æ–¹å¼
var str = 'hello hello'
var matches = str.match(/hello/g)`,
    ModernExample: `// ES6+æ–¹å¼
const str = 'hello hello'
const matches = [...str.matchAll(/hello/g)]`,
    advantage: ['è¿”å›æ‰€æœ‰åŒ¹é…é¡¹'],
    attention: 'æ³¨æ„æ­£åˆ™è¡¨è¾¾å¼çš„ä½¿ç”¨',
  },
  {
    id: 'at',
    name: 'at',
    title: 'at() æ–¹æ³•',
    description: 'è¿”å›æŒ‡å®šä½ç½®çš„å­—ç¬¦ã€‚',
    LegacyExample: `// ES5æ–¹å¼
var str = 'hello'
var char = str.charAt(1)`,
    ModernExample: `// ES6+æ–¹å¼
const str = 'hello'
const char = str.at(1)`,
    advantage: ['å¯ä»¥ä½¿ç”¨è´Ÿæ•°ç´¢å¼•'],
    attention: 'æ³¨æ„è´Ÿæ•°ç´¢å¼•çš„ä½¿ç”¨',
  },
  {
    id: 'repeat',
    name: 'repeat',
    title: 'repeat() æ–¹æ³•',
    description: 'è¿”å›ä¸€ä¸ªæ–°å­—ç¬¦ä¸²ï¼Œè¯¥å­—ç¬¦ä¸²åŒ…å«å½“å‰å­—ç¬¦ä¸²é‡å¤æŒ‡å®šæ¬¡æ•°çš„å‰¯æœ¬ã€‚',
    LegacyExample: `// ES5æ–¹å¼
var str = 'hello'
var repeated = (new Array(3).join(str + ' ') + str).trim()`,
    ModernExample: `// ES6+æ–¹å¼
const str = 'hello'
const repeated = str.repeat(3)`,
    advantage: ['å¯ä»¥è½»æ¾é‡å¤å­—ç¬¦ä¸²'],
    attention: 'æ³¨æ„é‡å¤æ¬¡æ•°çš„é™åˆ¶',
  },
  {
    id: 'startsWith',
    name: 'startsWith',
    title: 'startsWith() æ–¹æ³•',
    description: 'åˆ¤æ–­å­—ç¬¦ä¸²æ˜¯å¦ä»¥æŒ‡å®šçš„å­å­—ç¬¦ä¸²å¼€å¤´ã€‚',
    LegacyExample: `// ES5æ–¹å¼
var str = 'hello'
var starts = str.indexOf('he') === 0`,
    ModernExample: `// ES6+æ–¹å¼
const str = 'hello'
const starts = str.startsWith('he')`,
    advantage: ['åˆ¤æ–­å­—ç¬¦ä¸²å¼€å¤´'],
    attention: 'æ³¨æ„å¤§å°å†™',
  },
  {
    id: 'endsWith',
    name: 'endsWith',
    title: 'endsWith() æ–¹æ³•',
    description: 'åˆ¤æ–­å­—ç¬¦ä¸²æ˜¯å¦ä»¥æŒ‡å®šçš„å­å­—ç¬¦ä¸²ç»“å°¾ã€‚',
    LegacyExample: `// ES5æ–¹å¼
var str = 'hello'
var ends = str.lastIndexOf('lo') === str.length - 2`,
    ModernExample: `// ES6+æ–¹å¼
const str = 'hello'
const ends = str.endsWith('lo')`,
    advantage: ['åˆ¤æ–­å­—ç¬¦ä¸²ç»“å°¾'],
    attention: 'æ³¨æ„å¤§å°å†™',
  },
];
</script>

<style scoped>
/* ç»„ä»¶ç‰¹å®šæ ·å¼ */
.nav {
  position: fixed;
  top: 5rem;
  right: 2rem;
  width: 300px;
  z-index: 2;
}

.highlight {
  border: 2px solid var(--success-color);
  background: var(--bg-secondary);
}

.contrast {
  background: var(--bg-secondary);
}

.example-box,
.detail-box {
  background: var(--bg-secondary);
  border-radius: var(--radius-lg);
  padding: var(--spacing-lg);
  border: 1px solid var(--border-light);
}

.example-col {
  background: var(--bg-secondary);
  border-radius: var(--radius-lg);
  padding: var(--spacing-lg);
  border: 1px solid var(--border-light);
}

.modern {
  border: 2px solid var(--success-color);
}

.meta-item {
  background: var(--bg-secondary);
  border-radius: var(--radius-lg);
  padding: var(--spacing-lg);
  border: 1px solid var(--border-light);
}

.success {
  border-left: 4px solid var(--success-color);
}

.warning {
  border-left: 4px solid var(--warning-color);
}

.feature-list {
  list-style: none;
  padding: 0;
  margin: 0;
}

.feature-list li {
  padding: var(--spacing-sm) 0;
  border-bottom: 1px solid var(--border-light);
  color: var(--text-secondary);
}

.feature-list li:last-child {
  border-bottom: none;
}

.best-practice {
  background: var(--bg-secondary);
  border-radius: var(--radius-lg);
  padding: var(--spacing-lg);
  border: 1px solid var(--border-light);
  margin-top: var(--spacing-lg);
}

/* å“åº”å¼è°ƒæ•´ */
@media (max-width: 768px) {
  .grid-2 {
    grid-template-columns: 1fr;
  }
}
</style>
