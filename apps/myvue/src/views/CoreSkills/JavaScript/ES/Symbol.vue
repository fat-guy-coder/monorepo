<template>
  <div class="symbol-guide">
    <header class="guide-header">
      <h1 class="title">JavaScript Symbol åŸºæœ¬æŒ‡å—</h1>
      <div class="decorative-line"></div>
    </header>

    <div class="content-wrapper">
      <!-- å®šä¹‰ç« èŠ‚ -->
      <section class="definition-section card">
        <h2 class="section-title gradient-text">ğŸ“Œ Symbolå®šä¹‰</h2>
        <div class="section-content">
          <p class="highlight-text">ES6å¼•å…¥çš„ç¬¬ä¸ƒç§åŸå§‹æ•°æ®ç±»å‹ï¼Œè¡¨ç¤ºç‹¬ä¸€æ— äºŒçš„å€¼</p>
          <pre class="code-block">const sym = Symbol('description');</pre>
        </div>
      </section>
      <!-- æ–¹æ³•å’Œå±æ€§ -->
      <section class="methods-section card">
        <h2 class="section-title gradient-text">ğŸ”§ Symbolçš„æ–¹æ³•å’Œå±æ€§</h2>
        <div class="methods-content">
          <h3>å¸¸ç”¨æ–¹æ³•</h3>
          <ul>
            <li>
              <strong>Symbol.for(key)</strong>:
              è¿”å›ä¸€ä¸ªå·²æ³¨å†Œçš„Symbolï¼Œå¦‚æœæ²¡æœ‰åˆ™åˆ›å»ºä¸€ä¸ªæ–°çš„Symbolã€‚
            </li>
            <li><strong>Symbol.keyFor(sym)</strong>: è¿”å›ä¸€ä¸ªå·²æ³¨å†ŒSymbolçš„keyã€‚</li>
            <li>Symbol.match(str, regex): è¿”å›ä¸€ä¸ªé»˜è®¤çš„åŒ¹é…å™¨ã€‚</li>
            <li>Symbol.replace(str, regex): è¿”å›ä¸€ä¸ªé»˜è®¤çš„æ›¿æ¢å™¨ã€‚</li>
            <li>Symbol.search(str, regex): è¿”å›ä¸€ä¸ªé»˜è®¤çš„æœç´¢å™¨ã€‚</li>
            <li>Symbol.species: è¿”å›ä¸€ä¸ªé»˜è®¤çš„æ„é€ å™¨ã€‚</li>
            <li>Symbol.split(str, regex): è¿”å›ä¸€ä¸ªé»˜è®¤çš„åˆ†å‰²å™¨ã€‚</li>
          </ul>
          <h3>å†…ç½®å±æ€§</h3>
          <ul>
            <li><strong>Symbol.length</strong>: è¿”å›Symbolçš„æè¿°å­—ç¬¦ä¸²é•¿åº¦ã€‚</li>
            <li><strong>Symbol.iterator</strong>: è¿”å›ä¸€ä¸ªé»˜è®¤è¿­ä»£å™¨ã€‚</li>
            <li><strong>Symbol.asyncIterator</strong>: è¿”å›ä¸€ä¸ªå¼‚æ­¥è¿­ä»£å™¨ã€‚</li>
            <li>Symbol.toStringTag: å®šä¹‰å¯¹è±¡çš„é»˜è®¤å­—ç¬¦ä¸²æè¿°ã€‚</li>
          </ul>
        </div>
      </section>

      <!-- Well-known Symbols -->
      <section class="well-known-section card">
        <h2 class="section-title gradient-text">ğŸŒŸ Well-known Symbols</h2>
        <div class="well-known-content">
          <p class="intro">JavaScriptå†…ç½®äº†ä¸€äº›ç‰¹æ®Šçš„Symbolå€¼,ç§°ä¸ºWell-known Symbolsã€‚è¿™äº›Symbolç”¨äºæš´éœ²JavaScriptè¯­è¨€å†…éƒ¨çš„è¡Œä¸ºã€‚</p>

          <div class="symbol-grid">
            <div class="symbol-item">
              <h3>Symbol.iterator</h3>
              <p>å®šä¹‰å¯¹è±¡çš„é»˜è®¤è¿­ä»£å™¨,ä½¿å¯¹è±¡å¯ä»¥è¢«for...ofå¾ªç¯éå†</p>
              <pre class="code-example">const myArray = [1, 2, 3];
// Arrayé»˜è®¤å®ç°äº†Symbol.iterator
for (const item of myArray) {
  console.log(item);
}</pre>
            </div>

            <div class="symbol-item">
              <h3>Symbol.toPrimitive</h3>
              <p>å®šä¹‰å¯¹è±¡è¢«è½¬æ¢ä¸ºåŸå§‹å€¼æ—¶çš„è¡Œä¸º</p>
              <pre class="code-example">const obj = {
  [Symbol.toPrimitive](hint) {
    if (hint === 'number') return 42;
    if (hint === 'string') return 'hello';
    return true;
  }
};</pre>
            </div>

            <div class="symbol-item">
              <h3>Symbol.toStringTag</h3>
              <p>è‡ªå®šä¹‰å¯¹è±¡çš„toString()æ–¹æ³•è¿”å›å€¼</p>
              <pre class="code-example">class MyClass {
  get [Symbol.toStringTag]() {
    return 'MyClass';
  }
}
console.log(Object.prototype.toString.call(new MyClass()));
// [object MyClass]</pre>
            </div>

            <div class="symbol-item">
              <h3>Symbol.hasInstance</h3>
              <p>è‡ªå®šä¹‰instanceofæ“ä½œç¬¦çš„è¡Œä¸º</p>
              <pre class="code-example">class MyArray {
  static [Symbol.hasInstance](instance) {
    return Array.isArray(instance);
  }
}</pre>
            </div>
          </div>

          <div class="note-box">
            <p>è¿™äº›Well-known Symbolsè®©å¼€å‘è€…èƒ½å¤Ÿè‡ªå®šä¹‰JavaScriptä¸­ä¸€äº›åŸºç¡€æ“ä½œçš„è¡Œä¸º,ä½¿è¯­è¨€æ›´åŠ çµæ´»å’Œå¯æ‰©å±•ã€‚</p>
          </div>
        </div>
      </section>

      <!-- æ ¸å¿ƒç‰¹æ€§ -->
      <section class="features-section card">
        <h2 class="section-title gradient-text">âœ¨ æ ¸å¿ƒç‰¹æ€§</h2>
        <ul class="feature-list">
          <li v-for="(feature, index) in features" :key="index" class="feature-item">
            <div class="icon-box">ğŸ”‘</div>
            <div class="feature-content">
              <h3>{{ feature.title }}</h3>
              <p>{{ feature.description }}</p>
              <pre v-if="feature.example" class="example-code">{{ feature.example }}</pre>
            </div>
          </li>
        </ul>
      </section>

      <!-- ä½¿ç”¨ç¤ºä¾‹ -->
      <section class="usage-section card">
        <h2 class="section-title gradient-text">ğŸ’¡ ä½¿ç”¨åœºæ™¯</h2>
        <div class="usage-grid">
          <div v-for="(usage, index) in useCases" :key="index" class="usage-card">
            <div class="usage-header">
              <span class="scenario-icon">ğŸš€</span>
              <h3>{{ usage.scenario }}</h3>
            </div>
            <pre class="code-example">{{ usage.example }}</pre>
            <p class="usage-desc">{{ usage.description }}</p>
          </div>
        </div>
      </section>

      <!-- å‰ç«¯åº”ç”¨åœºæ™¯ -->
      <section class="frontend-section card">
        <h2 class="section-title gradient-text">ğŸ¯ å‰ç«¯åº”ç”¨åœºæ™¯</h2>
        <div class="frontend-content">
          <div class="scenario-grid">
            <div class="scenario-card">
              <h3>ğŸ”’ ç§æœ‰å±æ€§æ¨¡æ‹Ÿ</h3>
              <p>åœ¨ç±»ä¸­ä½¿ç”¨Symbolä½œä¸ºå±æ€§é”®,å¯ä»¥é¿å…å±æ€§è¢«æ„å¤–è®¿é—®æˆ–ä¿®æ”¹</p>
              <pre class="code-example">const privateField = Symbol('private');
class MyClass {
  constructor() {
    this[privateField] = 'secret';
  }
}</pre>
            </div>

            <div class="scenario-card">
              <h3>ğŸ¨ Reactç»„ä»¶æ ‡è¯†</h3>
              <p>ç”¨Symbolå®šä¹‰ç»„ä»¶çš„displayNameæˆ–å…¶ä»–å…ƒæ•°æ®,ç¡®ä¿å”¯ä¸€æ€§</p>
              <pre class="code-example">const ComponentType = Symbol('MyComponent');
class MyComponent extends React.Component {
  static [Symbol.for('type')] = ComponentType;
}</pre>
            </div>

            <div class="scenario-card">
              <h3>ğŸ”„ Vueå“åº”å¼ç³»ç»Ÿ</h3>
              <p>åœ¨Vueå†…éƒ¨å®ç°ä¸­ä½¿ç”¨Symbolæ ‡è®°å“åº”å¼å¯¹è±¡å’Œä¾èµ–æ”¶é›†</p>
              <pre class="code-example">const IS_REACTIVE = Symbol('isReactive');
const obj = {
  [IS_REACTIVE]: true,
  // ...å…¶ä»–å“åº”å¼å±æ€§
}</pre>
            </div>

            <div class="scenario-card">
              <h3>ğŸ® çŠ¶æ€ç®¡ç†</h3>
              <p>åœ¨Vuex/Reduxç­‰çŠ¶æ€ç®¡ç†ä¸­ä½¿ç”¨Symbolä½œä¸ºactionç±»å‹</p>
              <pre class="code-example">const UPDATE_USER = Symbol('UPDATE_USER');
store.dispatch({
  type: UPDATE_USER,
  payload: userData
});</pre>
            </div>
          </div>
        </div>
      </section>

      <!-- æ³¨æ„äº‹é¡¹ -->
      <section class="notice-section card">
        <h2 class="section-title gradient-text">âš ï¸ æ³¨æ„äº‹é¡¹</h2>
        <div class="notice-content">
          <div v-for="(notice, index) in notices" :key="index" class="notice-item">
            <span class="warning-icon">â—</span>
            <p>{{ notice }}</p>
          </div>
        </div>
      </section>
    </div>
  </div>
</template>

<script setup lang="ts">
const features = [
  {
    title: 'å”¯ä¸€æ€§',
    description: 'ç›¸åŒæè¿°çš„Symbolå€¼ä¸ç›¸ç­‰',
    example: 'Symbol("id") === Symbol("id") // false',
  },
  {
    title: 'ä¸å¯æšä¸¾',
    description: 'é»˜è®¤ä¸åœ¨for...in/Object.keys()ä¸­å‡ºç°',
    example: 'Object.keys({[sym]: 123}) // []',
  },
  {
    title: 'å…¨å±€æ³¨å†Œè¡¨',
    description: 'ä½¿ç”¨Symbol.for()åˆ›å»ºå…¨å±€å…±äº«Symbol',
    example: 'Symbol.for("key") === Symbol.for("key") // true',
  },
]

const useCases = [
  {
    scenario: 'å”¯ä¸€å±æ€§é”®',
    example: `const USER_ID = Symbol('id');
const obj = {
  [USER_ID]: '123456'
};`,
    description: 'é¿å…å±æ€§åå†²çªçš„æœ€ä½³å®è·µ',
  },
  {
    scenario: 'å…ƒç¼–ç¨‹',
    example: `const obj = {
  [Symbol.toPrimitive](hint) {
    // è‡ªå®šä¹‰ç±»å‹è½¬æ¢é€»è¾‘
  }
};`,
    description: 'é€šè¿‡Well-known Symbolsä¿®æ”¹å¯¹è±¡è¡Œä¸º',
  },
  {
    scenario: 'ç§æœ‰å±æ€§',
    example: `const _counter = Symbol('counter');
class MyClass {
  constructor() {
    this[_counter] = 0;
  }
}`,
    description: 'æ¨¡æ‹Ÿç±»ç§æœ‰æˆå‘˜ï¼ˆéçœŸæ­£ç§æœ‰ï¼‰',
  },
  {
    scenario: 'çŠ¶æ€ç®¡ç†',
    example: `const UPDATE_USER = Symbol('UPDATE_USER');
store.dispatch({
  type: UPDATE_USER,
  payload: userData
});`,
    description: 'åœ¨Vuex/Reduxç­‰çŠ¶æ€ç®¡ç†ä¸­ä½¿ç”¨Symbolä½œä¸ºactionç±»å‹',
  },

]

const notices = [
  'Symbolå€¼ä¸èƒ½ä¸å…¶ä»–ç±»å‹è¿›è¡Œè¿ç®—',
  'è½¬æ¢ä¸ºå­—ç¬¦ä¸²æ—¶éœ€æ˜¾å¼è°ƒç”¨toString()',
  'JSON.stringify()ä¼šå¿½ç•¥Symbolå±æ€§é”®',
  'Object.getOwnPropertySymbols()å¯è·å–å¯¹è±¡Symbolå±æ€§',
]
</script>

<style lang="less" scoped>
@primary-color: #2c3e50;
@secondary-color: #42b983;
@accent-color: #ff6b6b;
@code-bg: #f8f9fa;

h3,
li,
pre,
p {
  color: #000;
}

.symbol-guide {
  max-width: 1200px;
  margin: 2rem auto;
  padding: 0 2rem;
  font-family: 'Helvetica Neue', Arial, sans-serif;
}

.guide-header {
  text-align: center;
  margin-bottom: 3rem;

  .title {
    font-size: 2.8rem;
    color: @primary-color;
    margin-bottom: 1rem;
    letter-spacing: 1px;
  }

  .decorative-line {
    width: 100px;
    height: 4px;
    background: linear-gradient(90deg, @secondary-color, @accent-color);
    margin: 0 auto;
    border-radius: 2px;
  }
}

.card {
  background: white;
  border-radius: 12px;
  padding: 2rem;
  margin-bottom: 2rem;
  box-shadow: 0 8px 30px rgba(0, 0, 0, 0.1);
}

.section-title {
  font-size: 1.8rem;
  margin-bottom: 1.5rem;
  padding-bottom: 0.5rem;
  border-bottom: 2px solid #eee;
}

.gradient-text {
  background: linear-gradient(45deg, @secondary-color, @accent-color);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
}

.feature-list {
  display: grid;
  gap: 1.5rem;

  .feature-item {
    display: flex;
    gap: 1rem;
    padding: 1.5rem;
    background: #f8fafc;
    border-radius: 8px;
    transition: transform 0.2s;

    &:hover {
      transform: translateY(-3px);
    }

    .icon-box {
      font-size: 1.5rem;
      padding: 1rem;
      background: white;
      border-radius: 50%;
      box-shadow: 0 2px 6px rgba(0, 0, 0, 0.1);
    }
  }
}

.code-block,
.code-example {
  background: @code-bg;
  padding: 1.2rem;
  border-radius: 8px;
  font-family: 'Fira Code', monospace;
  font-size: 0.95rem;
  line-height: 1.6;
  margin: 1rem 0;
  border: 1px solid #eee;
}

.usage-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
  gap: 2rem;

  .usage-card {
    padding: 1.5rem;
    background: #f8fafc;
    border-radius: 8px;

    .usage-header {
      display: flex;
      align-items: center;
      gap: 1rem;
      margin-bottom: 1rem;

      .scenario-icon {
        font-size: 1.8rem;
      }
    }
  }
}

.notice-item {
  display: flex;
  gap: 1rem;
  padding: 1rem;
  margin: 1rem 0;
  background: #fff9f9;
  border-left: 4px solid @accent-color;
  border-radius: 4px;

  .warning-icon {
    color: @accent-color;
    font-size: 1.2rem;
  }
}

.highlight-text {
  color: @secondary-color;
  font-weight: 600;
  font-size: 1.1rem;
  margin: 1rem 0;
}
</style>
