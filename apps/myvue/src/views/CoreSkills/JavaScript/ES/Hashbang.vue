<template>
  <div class="hashbang-reference">
    <!-- æ ‡é¢˜åŒºåŸŸ -->
    <header class="header">
      <h1>ECMAScript Hashbang è¯­æ³•</h1>
      <p class="subtitle">æ·±å…¥è§£æ JavaScript ä¸­çš„ Shebang è¯­æ³•åŠå…¶åº”ç”¨</p>
    </header>

    <!-- å†…å®¹åŒºåŸŸ -->
    <div class="content">
      <!-- æ¦‚è¿°å¡ç‰‡ -->
      <div class="card overview-card">
        <div class="card-header">
          <h2>æ¦‚è¿°</h2>
          <span class="version-tag">ES2023</span>
        </div>
        <div class="card-content">
          <p>Hashbangï¼ˆä¹Ÿç§°ä¸º Shebangï¼‰è¯­æ³•å…è®¸åœ¨ JavaScript æ–‡ä»¶çš„å¼€å¤´ä½¿ç”¨ <code>#!</code> å‰ç¼€ï¼Œä½¿ JavaScript æ–‡ä»¶å¯ä»¥ç›´æ¥ä½œä¸ºå¯æ‰§è¡Œè„šæœ¬è¿è¡Œã€‚</p>
          <div class="example">
            <pre>#!/usr/bin/env node
console.log("Hello, Hashbang!");</pre>
          </div>
        </div>
      </div>

      <!-- è¯¦ç»†å†…å®¹ -->
      <div class="details-grid">
        <!-- æ¦‚å¿µå¡ç‰‡ -->
        <div class="card concept-card">
          <div class="card-header">
            <h2>æ¦‚å¿µ</h2>
            <div class="icon">ğŸ“š</div>
          </div>
          <div class="card-content">
            <p>Hashbang è¯­æ³•æºè‡ª Unix/Linux ç³»ç»Ÿï¼Œç”¨äºæŒ‡å®šè„šæœ¬çš„è§£é‡Šå™¨è·¯å¾„ã€‚</p>
            <p>åœ¨ JavaScript ä¸­ï¼Œå®ƒç”±ä»¥ä¸‹éƒ¨åˆ†ç»„æˆï¼š</p>
            <ul>
              <li><strong>#!</strong> - å›ºå®šå‰ç¼€ï¼ˆç§°ä¸º shebangï¼‰</li>
              <li><strong>è·¯å¾„</strong> - è§£é‡Šå™¨çš„è·¯å¾„ï¼ˆå¦‚ <code>/usr/bin/env node</code>ï¼‰</li>
            </ul>
            <p>åœ¨ ECMAScript 2023 ä¹‹å‰ï¼ŒHashbang è¯­æ³•ä¼šå¯¼è‡´è¯­æ³•é”™è¯¯ï¼Œç°åœ¨å®ƒè¢«æ­£å¼çº³å…¥è§„èŒƒã€‚</p>
          </div>
        </div>

        <!-- ä½œç”¨å¡ç‰‡ -->
        <div class="card purpose-card">
          <div class="card-header">
            <h2>ä½œç”¨</h2>
            <div class="icon">ğŸ¯</div>
          </div>
          <div class="card-content">
            <ul>
              <li><strong>ç›´æ¥æ‰§è¡Œè„šæœ¬</strong> - å…è®¸ JavaScript æ–‡ä»¶åƒå¯æ‰§è¡Œæ–‡ä»¶ä¸€æ ·ç›´æ¥è¿è¡Œ</li>
              <li><strong>æŒ‡å®šè§£é‡Šå™¨</strong> - æ˜ç¡®ä½¿ç”¨å“ªä¸ªç¯å¢ƒæ‰§è¡Œè„šæœ¬ï¼ˆå¦‚ Node.jsï¼‰</li>
              <li><strong>è·¨å¹³å°å…¼å®¹</strong> - åœ¨ Unix/Linux/macOS å’Œ Windowsï¼ˆé€šè¿‡é€‚å½“é…ç½®ï¼‰ä¸Šå·¥ä½œ</li>
              <li><strong>ç®€åŒ–å·¥ä½œæµ</strong> - æ— éœ€æ˜¾å¼è°ƒç”¨è§£é‡Šå™¨ï¼ˆå¦‚ <code>node script.js</code>ï¼‰</li>
            </ul>
            <p class="note">åœ¨æ”¯æŒçš„æ“ä½œç³»ç»Ÿä¸­ï¼Œä½ å¯ä»¥ç›´æ¥è¿è¡Œï¼š<br><code>./script.js</code> è€Œä¸éœ€è¦ <code>node script.js</code></p>
          </div>
        </div>

        <!-- ä½¿ç”¨æ–¹å¼å¡ç‰‡ -->
        <div class="card usage-card">
          <div class="card-header">
            <h2>ä½¿ç”¨æ–¹å¼</h2>
            <div class="icon">ğŸ’»</div>
          </div>
          <div class="card-content">
            <h3>åŸºæœ¬è¯­æ³•</h3>
            <pre>#!/usr/bin/env node</pre>

            <h3>æ­¥éª¤æŒ‡å—</h3>
            <ol>
              <li>åœ¨ JavaScript æ–‡ä»¶çš„ç¬¬ä¸€è¡Œæ·»åŠ  Hashbang æ³¨é‡Š</li>
              <li>æŒ‡å®šè§£é‡Šå™¨è·¯å¾„ï¼ˆæ¨èä½¿ç”¨ <code>/usr/bin/env node</code>ï¼‰</li>
              <li>ä¿å­˜æ–‡ä»¶å¹¶æ·»åŠ æ‰§è¡Œæƒé™ï¼š<br><code>chmod +x script.js</code></li>
              <li>ç›´æ¥è¿è¡Œè„šæœ¬ï¼š<br><code>./script.js</code></li>
            </ol>

            <h3>å®Œæ•´ç¤ºä¾‹</h3>
            <pre>#!/usr/bin/env node

// ç®€å•çš„CLIåº”ç”¨
const args = process.argv.slice(2);
console.log(`Hello, ${args[0] || 'World'}!`);

// ä½¿ç”¨è¯´æ˜
if (args.includes('--help')) {
  console.log('Usage: ./greet.js [name]');
}</pre>
          </div>
        </div>

        <!-- ä½¿ç”¨åœºæ™¯å¡ç‰‡ -->
        <div class="card scenarios-card">
          <div class="card-header">
            <h2>ä½¿ç”¨åœºæ™¯</h2>
            <div class="icon">ğŸš€</div>
          </div>
          <div class="card-content">
            <div class="scenario">
              <h3>å‘½ä»¤è¡Œå·¥å…· (CLI)</h3>
              <p>åˆ›å»ºå¯ä»¥ç›´æ¥ä»ç»ˆç«¯è°ƒç”¨çš„ Node.js å‘½ä»¤è¡Œå·¥å…·</p>
              <pre>#!/usr/bin/env node
// my-cli-tool.js
console.log('Running my CLI tool...');</pre>
            </div>

            <div class="scenario">
              <h3>ç³»ç»Ÿè„šæœ¬</h3>
              <p>ç¼–å†™ç³»ç»Ÿè‡ªåŠ¨åŒ–è„šæœ¬ï¼ˆå¦‚å¤‡ä»½ã€éƒ¨ç½²ç­‰ï¼‰</p>
              <pre>#!/usr/bin/env node
// backup.js
const { exec } = require('child_process');
exec('tar -czf backup.tar.gz ./data');</pre>
            </div>

            <div class="scenario">
              <h3>å®ç”¨ç¨‹åº</h3>
              <p>åˆ›å»ºå¯ç›´æ¥è¿è¡Œçš„å®ç”¨ç¨‹åºè„šæœ¬</p>
              <pre>#!/usr/bin/env node
// file-organizer.js
const fs = require('fs');
// æ–‡ä»¶æ•´ç†é€»è¾‘...</pre>
            </div>

            <div class="scenario">
              <h3>å¼€å‘å·¥å…·</h3>
              <p>ç®€åŒ–å¼€å‘å·¥ä½œæµç¨‹è„šæœ¬çš„æ‰§è¡Œ</p>
              <pre>#!/usr/bin/env node
// build.js
const { build } = require('./build-system');
build();</pre>
            </div>
          </div>
        </div>

        <!-- æ³¨æ„äº‹é¡¹å¡ç‰‡ -->
        <div class="card precautions-card">
          <div class="card-header">
            <h2>æ³¨æ„äº‹é¡¹</h2>
            <div class="icon">âš ï¸</div>
          </div>
          <div class="card-content">
            <ul>
              <li><strong>ä½ç½®è¦æ±‚</strong> - å¿…é¡»æ˜¯æ–‡ä»¶çš„ç¬¬ä¸€è¡Œï¼ˆå‰é¢ä¸èƒ½æœ‰ä»»ä½•å­—ç¬¦ï¼ŒåŒ…æ‹¬ç©ºæ ¼ï¼‰</li>
              <li><strong>æµè§ˆå™¨å¿½ç•¥</strong> - æµè§ˆå™¨ä¼šå¿½ç•¥ Hashbang è¡Œï¼Œä¸å½±å“ç½‘é¡µè„šæœ¬</li>
              <li><strong>Windows æ”¯æŒ</strong> - éœ€è¦é…ç½®æ–‡ä»¶å…³è”æˆ–ä½¿ç”¨ WSL</li>
              <li><strong>æ–‡ä»¶æƒé™</strong> - åœ¨ Unix ç³»ç»Ÿä¸Šéœ€è¦è®¾ç½®å¯æ‰§è¡Œæƒé™ (<code>chmod +x</code>)</li>
              <li><strong>æ¨¡å—ç±»å‹</strong> - åœ¨ ES æ¨¡å—ä¸­åŒæ ·é€‚ç”¨</li>
              <li><strong>é”™è¯¯å¤„ç†</strong> - å¦‚æœè§£é‡Šå™¨è·¯å¾„é”™è¯¯ï¼Œæ‰§è¡Œä¼šå¤±è´¥</li>
              <li><strong>ç‰ˆæœ¬å…¼å®¹</strong> - éœ€è¦ Node.js æˆ–æ”¯æŒ ES2023 çš„ç¯å¢ƒ</li>
            </ul>

            <div class="comparison">
              <h3>ä¸åŒç¯å¢ƒä¸‹çš„è¡Œä¸º</h3>
              <table>
                <thead>
                  <tr>
                    <th>ç¯å¢ƒ</th>
                    <th>è¡Œä¸º</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td>Node.js (CLI)</td>
                    <td>æ­£å¸¸æ‰§è¡Œï¼Œå¿½ç•¥ Hashbang è¡Œ</td>
                  </tr>
                  <tr>
                    <td>æµè§ˆå™¨</td>
                    <td>è§†ä¸ºæ³¨é‡Šï¼Œå®Œå…¨å¿½ç•¥</td>
                  </tr>
                  <tr>
                    <td>Unix/Linux/macOS</td>
                    <td>ä½¿ç”¨æŒ‡å®šè§£é‡Šå™¨æ‰§è¡Œè„šæœ¬</td>
                  </tr>
                  <tr>
                    <td>Windows (CMD/PowerShell)</td>
                    <td>éœ€è¦é¢å¤–é…ç½®æ‰èƒ½æ”¯æŒ</td>
                  </tr>
                </tbody>
              </table>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- åº•éƒ¨ä¿¡æ¯ -->
    <footer class="footer">
      <p>ECMAScript 2023 è§„èŒƒ | Hashbang è¯­æ³•å‚è€ƒ | Vue 3 + TypeScript + Less</p>
    </footer>
  </div>
</template>

<script setup lang="ts">
import { ref } from 'vue';

// ç¤ºä¾‹ä»£ç å¯å¤åˆ¶åŠŸèƒ½
const copyCode = (code: string) => {
  navigator.clipboard.writeText(code)
    .then(() => {
      alert('ä»£ç å·²å¤åˆ¶åˆ°å‰ªè´´æ¿ï¼');
    })
    .catch(err => {
      console.error('å¤åˆ¶å¤±è´¥:', err);
    });
};
</script>

<style scoped lang="less">
@primary-color: #4361ee;
@secondary-color: #3a0ca3;
@light-bg: #f8f9fa;
@card-bg: #ffffff;
@text-color: #2b2d42;
@border-color: #e9ecef;
@success-color: #06d6a0;
@warning-color: #ffd166;
@error-color: #ef476f;
@info-color: #118ab2;

* {
  box-sizing: border-box;
  margin: 0;
  padding: 0;
}

.hashbang-reference {
  max-width: 1200px;
  margin: 0 auto;
  padding: 20px;
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, sans-serif;
  background-color: @light-bg;
  min-height: 100vh;
  color: @text-color;
  line-height: 1.6;
}

.header {
  text-align: center;
  margin-bottom: 30px;
  padding: 20px 0;

  h1 {
    font-size: 2.5rem;
    color: @secondary-color;
    margin-bottom: 10px;
  }

  .subtitle {
    font-size: 1.1rem;
    color: lighten(@text-color, 20%);
  }
}

.content {
  display: flex;
  flex-direction: column;
  gap: 25px;
}

.card {
  background: @card-bg;
  border-radius: 12px;
  overflow: hidden;
  box-shadow: 0 5px 15px rgba(0,0,0,0.05);
  transition: transform 0.3s, box-shadow 0.3s;

  &:hover {
    transform: translateY(-5px);
    box-shadow: 0 8px 20px rgba(0,0,0,0.1);
  }
}

.card-header {
  background: linear-gradient(135deg, @primary-color, @secondary-color);
  color: white;
  padding: 15px 20px;
  display: flex;
  justify-content: space-between;
  align-items: center;

  h2 {
    font-size: 1.5rem;
    font-weight: 600;
  }

  .version-tag {
    background: rgba(255,255,255,0.2);
    padding: 4px 12px;
    border-radius: 20px;
    font-size: 0.9rem;
    font-weight: 500;
  }

  .icon {
    font-size: 1.5rem;
  }
}

.card-content {
  padding: 20px;

  h3 {
    color: @secondary-color;
    margin: 15px 0 10px;
    font-size: 1.2rem;
    border-bottom: 1px solid @border-color;
    padding-bottom: 5px;
  }

  p {
    margin-bottom: 15px;
    line-height: 1.6;
  }

  ul, ol {
    padding-left: 20px;
    margin-bottom: 15px;

    li {
      margin-bottom: 8px;
    }
  }

  .note {
    background: fade(@info-color, 10%);
    border-left: 3px solid @info-color;
    padding: 10px 15px;
    border-radius: 0 4px 4px 0;
    margin-top: 15px;
  }
}

.overview-card {
  .example {
    background: @light-bg;
    border-radius: 8px;
    padding: 15px;
    margin-top: 15px;
    overflow-x: auto;

    pre {
      font-family: 'Courier New', monospace;
      font-size: 1rem;
      color: #333;
      line-height: 1.4;
    }
  }
}

.details-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
  gap: 25px;
}

.concept-card, .purpose-card {
  .card-content {
    display: flex;
    flex-direction: column;
    height: calc(100% - 60px); // å‡å»å¤´éƒ¨é«˜åº¦
  }
}

.usage-card, .scenarios-card, .precautions-card {
  grid-column: span 2;
}

.scenarios-card {
  .scenario {
    margin-bottom: 20px;
    padding-bottom: 20px;
    border-bottom: 1px dashed @border-color;

    &:last-child {
      margin-bottom: 0;
      padding-bottom: 0;
      border-bottom: none;
    }

    pre {
      background: @light-bg;
      border-radius: 6px;
      padding: 12px;
      margin-top: 10px;
      overflow-x: auto;
      font-size: 0.9rem;
    }
  }
}

.precautions-card {
  .comparison {
    margin-top: 20px;

    table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 10px;

      th, td {
        padding: 10px 15px;
        text-align: left;
        border-bottom: 1px solid @border-color;
      }

      th {
        background: fade(@primary-color, 10%);
        color: @primary-color;
        font-weight: 600;
      }

      tr:last-child td {
        border-bottom: none;
      }
    }
  }
}

.footer {
  text-align: center;
  padding: 30px 20px 20px;
  color: lighten(@text-color, 30%);
  font-size: 0.9rem;
  margin-top: 40px;
  border-top: 1px solid @border-color;
}

code {
  background: fade(@primary-color, 10%);
  color: @primary-color;
  padding: 2px 6px;
  border-radius: 4px;
  font-family: 'Courier New', monospace;
  font-size: 0.9em;
}

pre {
  background: @light-bg;
  border-radius: 6px;
  padding: 12px;
  overflow-x: auto;
  font-family: 'Courier New', monospace;
  font-size: 0.9rem;
  line-height: 1.4;
  color: #333;
  margin: 10px 0;
  border-left: 3px solid @primary-color;
}

@media (max-width: 900px) {
  .details-grid {
    grid-template-columns: 1fr;

    .usage-card, .scenarios-card, .precautions-card {
      grid-column: span 1;
    }
  }

  .header h1 {
    font-size: 2rem;
  }
}

@media (max-width: 480px) {
  .header {
    padding: 10px 0;

    h1 {
      font-size: 1.8rem;
    }
  }

  .card-header h2 {
    font-size: 1.3rem;
  }
}
</style>
