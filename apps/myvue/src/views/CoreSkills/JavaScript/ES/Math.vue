<template>
  <div class="math-docs-container">
    <h1 class="title">ğŸ“ JavaScript Math å¯¹è±¡æ–‡æ¡£</h1>

    <!-- æ¦‚è¿°éƒ¨åˆ† -->
    <section class="overview-card">
      <h2 class="section-title">ğŸ” æ¦‚è¿°</h2>
      <p class="content">
        Math æ˜¯ JavaScript å†…ç½®çš„æ•°å­¦å¯¹è±¡ï¼Œæä¾›åŸºç¡€æ•°å­¦å‡½æ•°å’Œå¸¸é‡çš„è®¿é—®ã€‚ES6+
        æ–°å¢äº†å¤šä¸ªå®ç”¨æ–¹æ³•ï¼Œå¢å¼ºäº†æ•°å­¦è®¡ç®—èƒ½åŠ›ã€‚
      </p>
    </section>

    <!-- åŸºç¡€å±æ€§ -->
    <section class="properties-card">
      <h3>ğŸ”¢ å¸¸ç”¨å±æ€§</h3>
      <div class="grid-container">
        <div v-for="(desc, key) in mathConstants" :key="key" class="property-item">
          <span class="constant-name">Math.{{ key }}</span>
          <span class="constant-value">{{ desc.value.toFixed(5) }}</span>
          <p class="constant-desc">{{ desc.description }}</p>
        </div>
      </div>
    </section>

    <!-- ä¼ ç»Ÿæ–¹æ³• -->
    <section class="methods-card">
      <h3>ğŸ› ï¸ ä¼ ç»Ÿå¸¸ç”¨æ–¹æ³•</h3>
      <div class="method-grid">
        <div v-for="method in basicMethods" :key="method.name" class="method-item">
          <div class="method-header">
            <span class="method-name">Math.{{ method.name }}({{ method.args }})</span>
            <span class="method-example">{{ method.example }}</span>
          </div>
          <p class="method-desc">{{ method.description }}</p>
        </div>
      </div>
    </section>

    <!-- ES6+ æ–°å¢æ–¹æ³• -->
    <section class="es6-methods-card">
      <h3>ğŸš€ ES6+ æ–°å¢æ–¹æ³•</h3>
      <div class="es6-grid">
        <div v-for="method in es6Methods" :key="method.name" class="es6-item">
          <div class="method-title">
            <span class="icon">âœ¨</span>
            Math.{{ method.name }}()
          </div>
          <div class="method-detail">
            <p>{{ method.description }}</p>
            <pre><code>{{ method.examples.join('\n') }}</code></pre>
          </div>
        </div>
      </div>
    </section>

    <!-- æ³¨æ„äº‹é¡¹ -->
    <section class="notice-card">
      <h3>âš ï¸ æ³¨æ„äº‹é¡¹</h3>
      <ul>
        <li>æµ®ç‚¹æ•°è®¡ç®—å­˜åœ¨ç²¾åº¦é—®é¢˜ï¼Œéœ€æ³¨æ„èˆå…¥è¯¯å·®</li>
        <li>å‚æ•°ç±»å‹ä¸ç¬¦åˆè¦æ±‚æ—¶è¿”å›NaN</li>
        <li>ES6æ–°å¢æ–¹æ³•éœ€è€ƒè™‘æµè§ˆå™¨å…¼å®¹æ€§</li>
      </ul>
    </section>
  </div>
</template>

<script lang="ts">
import { defineComponent, reactive } from 'vue'

export default defineComponent({
  setup() {
    const mathConstants = reactive({
      PI: {
        value: Math.PI,
        description: 'åœ†å‘¨ç‡å¸¸æ•°',
      },
      E: {
        value: Math.E,
        description: 'è‡ªç„¶å¯¹æ•°çš„åº•æ•°',
      },
      LN2: {
        value: Math.LN2,
        description: '2çš„è‡ªç„¶å¯¹æ•°',
      },
    })

    const basicMethods = reactive([
      {
        name: 'sqrt',
        args: 'x',
        example: 'Math.sqrt(9) â†’ 3',
        description: 'è®¡ç®—å¹³æ–¹æ ¹',
      },
      {
        name: 'pow',
        args: 'x, y',
        example: 'Math.pow(2, 3) â†’ 8',
        description: `è®¡ç®—xçš„yæ¬¡å¹‚
æ–°å†™æ³• 2**3 â†’ 8`,
      },
      {
        name: 'abs',
        args: 'x',
        example: 'Math.abs(-5) â†’ 5',
        description: 'è¿”å›ç»å¯¹å€¼',
      },
      {
        name: 'ceil',
        args: 'x',
        example: 'Math.ceil(4.1) â†’ 5',
        description: 'å‘ä¸Šå–æ•´',
      },
      {
        name: 'floor',
        args: 'x',
        example: 'Math.floor(4.9) â†’ 4',
        description: 'å‘ä¸‹å–æ•´',
      },
      {
        name: 'random',
        args: '',
        example: 'Math.random() â†’ 0~1',
        description: 'ç”Ÿæˆ[0,1)éšæœºæ•°',
      },
      {
        name: 'max',
        args: '...values',
        example: 'Math.max(1, 2, 3) â†’ 3',
        description: 'è¿”å›æœ€å¤§å€¼',
      },
      {
        name: 'min',
        args: '...values',
        example: 'Math.min(1, 2, 3) â†’ 1',
        description: 'è¿”å›æœ€å°å€¼',
      },
      {
        name: 'round',
        args: 'x',
        example: 'Math.round(4.5) â†’ 5',
        description: 'å››èˆäº”å…¥',
      },
      {
        name: 'sin',
        args: 'x',
        example: 'Math.sin(Math.PI / 2) â†’ 1',
        description: 'è®¡ç®—æ­£å¼¦',
      },
      {
        name: 'cos',
        args: 'x',
        example: 'Math.cos(0) â†’ 1',
        description: 'è®¡ç®—ä½™å¼¦',
      },
      {
        name: 'tan',
        args: 'x',
        example: 'Math.tan(Math.PI / 4) â†’ 1',
        description: 'è®¡ç®—æ­£åˆ‡',
      },
      {
        name: 'log',
        args: 'x',
        example: 'Math.log(Math.E) â†’ 1',
        description: 'è®¡ç®—è‡ªç„¶å¯¹æ•°',
      },
      {
        name: 'exp',
        args: 'x',
        example: 'Math.exp(1) â†’ 2.71828',
        description: 'è®¡ç®—eçš„xæ¬¡å¹‚',
      },
      {
        name: 'sqrt',
        args: 'x',
        example: 'Math.sqrt(16) â†’ 4',
        description: 'è®¡ç®—å¹³æ–¹æ ¹',
      },
      {
        name: 'cbrt',
        args: 'x',
        example: 'Math.cbrt(27) â†’ 3',
        description: 'è®¡ç®—ç«‹æ–¹æ ¹',
      },
      {
        name: 'hypot',
        args: '...values',
        example: 'Math.hypot(3, 4) â†’ 5',
        description: 'è®¡ç®—å‚æ•°å¹³æ–¹å’Œçš„å¹³æ–¹æ ¹',
      },
    ])

    const es6Methods = reactive([
      {
        name: 'trunc',
        description: 'å»é™¤å°æ•°éƒ¨åˆ†ï¼Œä¿ç•™æ•´æ•°',
        examples: ['Math.trunc(4.9)    // 4', 'Math.trunc(-4.1)   // -4'],
      },
      {
        name: 'sign',
        description: 'åˆ¤æ–­æ•°å€¼ç¬¦å·',
        examples: ['Math.sign(5)      // 1', 'Math.sign(-5)     // -1', 'Math.sign(0)      // 0'],
      },
      {
        name: 'cbrt',
        description: 'è®¡ç®—ç«‹æ–¹æ ¹',
        examples: ['Math.cbrt(27)     // 3', 'Math.cbrt(64)     // 4'],
      },
      {
        name: 'hypot',
        description: 'è®¡ç®—å‚æ•°å¹³æ–¹å’Œçš„å¹³æ–¹æ ¹',
        examples: ['Math.hypot(3,4)   // 5', 'Math.hypot(5,12)  // 13'],
      },
    ])

    return { mathConstants, basicMethods, es6Methods }
  },
})
</script>

<style scoped>
.math-docs-container {
  max-width: 1200px;
  margin: 2rem auto;
  padding: 0 1.5rem;
  font-family: 'Segoe UI', system-ui;
}

.title {
  text-align: center;
  color: #2c3e50;
  margin-bottom: 2rem;
}

/* å¡ç‰‡é€šç”¨æ ·å¼ */
.overview-card,
.properties-card,
.methods-card,
.es6-methods-card,
.notice-card {
  background: #ffffff;
  border-radius: 12px;
  padding: 2rem;
  margin-bottom: 2rem;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
}

.grid-container {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
  gap: 1.5rem;
}

.property-item {
  background: #f8f9fa;
  padding: 1rem;
  border-radius: 8px;
  transition: transform 0.2s;
}

.property-item:hover {
  transform: translateY(-2px);
}

.constant-name {
  font-weight: 600;
  color: #34495e;
}

.constant-value {
  float: right;
  color: #3498db;
}

.method-grid {
  display: grid;
  gap: 1rem;
  grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
}

.method-item {
  background: #f8f9fa;
  padding: 1rem;
  border-radius: 8px;
}

.es6-grid {
  display: grid;
  gap: 1.5rem;
  grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
}

.es6-item {
  background: #f4f5f7;
  border-left: 4px solid #3498db;
  padding: 1rem;
  border-radius: 6px;
}

pre {
  background: #282c34;
  padding: 1rem;
  border-radius: 6px;
  overflow-x: auto;
  margin: 1rem 0;
}

code {
  font-family: 'Fira Code', monospace;
  color: #abb2bf;
  font-size: 0.9em;
}

.notice-card {
  background: #fff3cd;
  border-color: #ffeeba;
  color: #856404;
}

.method-title {
  font-size: 1.1em;
  font-weight: 600;
  color: #2c3e50;
  margin-bottom: 0.5rem;
}

.icon {
  margin-right: 0.5rem;
}
</style>
