<template>
  <div class="class-container">
    <header class="header">
      <h1>JavaScript ç±»(Class)</h1>
      <div class="subtitle">ES6 é¢å‘å¯¹è±¡ç¼–ç¨‹çš„è¯­æ³•ç³–</div>
    </header>

    <section class="card introduction">
      <h2>ğŸ“š ç±»çš„ä»‹ç»</h2>
      <div class="introduction-content">
        <p>
          åœ¨ JavaScript
          ä¸­ï¼Œç±»æ˜¯åˆ›å»ºå¯¹è±¡çš„ä¸€ç§æ–¹å¼ã€‚ç±»æä¾›äº†ä¸€ç§æ›´æ¸…æ™°å’Œç®€æ´çš„è¯­æ³•æ¥åˆ›å»ºæ„é€ å‡½æ•°å’Œå¤„ç†ç»§æ‰¿ã€‚ä½¿ç”¨ç±»å¯ä»¥æ›´å¥½åœ°ç»„ç»‡ä»£ç ï¼Œæé«˜å¯è¯»æ€§å’Œå¯ç»´æŠ¤æ€§ã€‚
        </p>
        <h3>ç±»çš„åŸºæœ¬ç»“æ„</h3>
        <pre><code>class ClassName {
    constructor(parameters) {
    // æ„é€ å‡½æ•°
    }

    methodName() {
    // æ–¹æ³•
    }
  }</code></pre>
        <p>ç±»çš„å®šä¹‰åŒ…æ‹¬æ„é€ å‡½æ•°å’Œæ–¹æ³•ã€‚æ„é€ å‡½æ•°ç”¨äºåˆå§‹åŒ–å¯¹è±¡çš„å±æ€§ï¼Œè€Œæ–¹æ³•åˆ™å®šä¹‰äº†å¯¹è±¡çš„è¡Œä¸ºã€‚</p>
      </div>
    </section>

    <main class="content">
      <!-- åŸç†ç¤ºæ„å›¾ -->
      <section class="card principle">
        <h2>âš™ï¸ åº•å±‚åŸç†</h2>
        <div class="principle-content">
          <div class="prototype-chain">
            <div class="class-box">
              <div class="class-name">Class</div>
              <div class="constructor">constructor</div>
              <div class="methods">
                <div class="method">method1</div>
                <div class="method">method2</div>
              </div>
            </div>
            <div class="arrow">â†“ [[Prototype]]</div>
            <div class="instance-box">
              <div class="instance">Instance</div>
              <div class="props">
                <div class="prop">prop1</div>
                <div class="prop">prop2</div>
              </div>
            </div>
          </div>
          <ul class="principle-list">
            <li>â–¸ åŸºäºåŸå‹ç»§æ‰¿çš„è¯­æ³•ç³–</li>
            <li>â–¸ ç±»å£°æ˜ä¸ä¼šæå‡ï¼ˆä¸åŒäºå‡½æ•°å£°æ˜ï¼‰</li>
            <li>â–¸ æœ¬è´¨ä»æ˜¯æ„é€ å‡½æ•° + åŸå‹å¯¹è±¡</li>
            <li>â–¸ ç±»æ–¹æ³•ä¸å¯æšä¸¾ï¼ˆä¸åŒäºå¯¹è±¡æ–¹æ³•ï¼‰</li>
          </ul>
        </div>
      </section>

      <!-- åŸºæœ¬è¯­æ³• -->
      <section class="card syntax">
        <h2>ğŸ“œ åŸºæœ¬è¯­æ³•</h2>
        <div class="syntax-grid">
          <div class="syntax-item">
            <h3>1. ç±»å£°æ˜</h3>
            <pre><code>class Animal {
  constructor(name) {
    this.name = name;
  }

  speak() {
    console.log(\`\${this.name} makes a noise\`);
  }
}

const dog = new Animal('Rex');
dog.speak(); // Rex makes a noise</code></pre>
          </div>

          <div class="syntax-item">
            <h3>2. ç±»è¡¨è¾¾å¼</h3>
            <pre><code>const Person = class {
  constructor(age) {
    this.age = age;
  }

  static createBaby() {
    return new Person(0);
  }
}

const baby = Person.createBaby();
console.log(baby.age); // 0</code></pre>
          </div>
        </div>
      </section>

      <!-- é«˜çº§ç‰¹æ€§ -->
      <section class="card features">
        <h2>ğŸ© é«˜çº§ç‰¹æ€§</h2>
        <div class="feature-grid">
          <div class="feature-card">
            <h3>ç»§æ‰¿</h3>
            <pre><code>class Dog extends Animal {
  constructor(name, breed) {
    super(name); // è°ƒç”¨çˆ¶ç±»çš„æ„é€ å‡½æ•°
    this.breed = breed;
  }

  bark() {
    super.speak(); // è°ƒç”¨çˆ¶ç±»çš„æ–¹æ³•
    console.log('Woof!');
  }
}

const dog = new Dog('Rex', 'Labrador');
dog.bark(); // Rex makes a noise
            // Woof!</code></pre>
          </div>

          <div class="feature-card">
            <h3>é™æ€æ–¹æ³•</h3>
            <pre><code>class MathUtils {
  static sum(...nums) {
    return nums.reduce((a, b) => a + b);
  }
}

console.log(MathUtils.sum(1, 2, 3)); // 6</code></pre>
          </div>

          <div class="feature-card">
            <h3>é™æ€å±æ€§</h3>
            <pre><code>class MathUtils {
  static x;
  static y = 1;
}

console.log(MathUtils.y); // 1</code></pre>
          </div>

          <div class="feature-card">
            <h3>ç±»å­—æ®µå£°æ˜(ES2022)</h3>
            <pre><code>class MathUtils {
         y = 1;
}

console.log(new MathUtils().y); // 1</code></pre>
          </div>

          <div class="feature-card">
            <h3>ç§æœ‰å­—æ®µ</h3>
            <pre><code>class User {
  #password;  // ç§æœ‰å­—æ®µ

  constructor(username, pwd) {
    this.username = username;
    this.#password = pwd;
  }

  validate(pwd) {
    return this.#password === pwd;
  }
}

const user = new User('Alice', 'secret');
console.log(user.validate('secret')); // true</code></pre>
          </div>

          <div class="feature-card">
            <h3>Getter/Setter</h3>
            <pre><code>class Circle {
  constructor(radius) {
    this.radius = radius;
  }

  get area() {
    return Math.PI * this.radius**2;
  }

  set diameter(value) {
    this.radius = value / 2;
  }
}

const circle = new Circle(10);
console.log(circle.area); // 314.159...
circle.diameter = 20;
console.log(circle.radius); // 10</code></pre>
          </div>
        </div>
      </section>

      <!-- super å…³é”®å­— -->
      <section class="card super-keyword">
        <h2>ğŸ”‘ super å…³é”®å­—</h2>
        <div class="super-content">
          <p>
            åœ¨ JavaScript ä¸­ï¼Œ`super` å…³é”®å­—ç”¨äºè°ƒç”¨çˆ¶ç±»çš„æ„é€ å‡½æ•°å’Œæ–¹æ³•ã€‚å®ƒåœ¨ç»§æ‰¿ä¸­æ‰®æ¼”ç€é‡è¦è§’è‰²ã€‚
          </p>
          <h3>ç”¨æ³•</h3>
          <pre class="code-block"><code>class Animal {
  constructor(name) {
    this.name = name;
  }

  speak() {
    console.log(\`\${this.name} makes a noise\`);
  }
}

class Dog extends Animal {
  constructor(name, breed) {
    super(name); // è°ƒç”¨çˆ¶ç±»çš„æ„é€ å‡½æ•°
    this.breed = breed;
  }

  bark() {
    super.speak(); // è°ƒç”¨çˆ¶ç±»çš„æ–¹æ³•
    console.log('Woof!');
  }
}

const dog = new Dog('Rex', 'Labrador');
dog.bark(); // Rex makes a noise
            // Woof!</code></pre>
          <h3>æ³¨æ„äº‹é¡¹</h3>
          <ul>
            <li>åœ¨æ´¾ç”Ÿç±»çš„æ„é€ å‡½æ•°ä¸­ï¼Œå¿…é¡»åœ¨ä½¿ç”¨ `this` ä¹‹å‰è°ƒç”¨ `super()`ã€‚</li>
            <li>åœ¨é™æ€æ–¹æ³•ä¸­ï¼Œ`super` æŒ‡å‘çˆ¶ç±»ï¼Œè€Œåœ¨å®ä¾‹æ–¹æ³•ä¸­ï¼Œ`super` æŒ‡å‘çˆ¶ç±»çš„åŸå‹å¯¹è±¡ã€‚</li>
            <li>è°ƒç”¨ `super()` æ—¶ï¼Œå¿…é¡»ä¼ é€’çˆ¶ç±»æ„é€ å‡½æ•°æ‰€éœ€çš„å‚æ•°ã€‚</li>
          </ul>
        </div>
      </section>

      <!-- Class Static Block -->
      <section class="card static-block">
        <h2>ğŸ“¦ Class Static Block</h2>
        <div class="static-block-content">
          <p>
            Class Static Block æ˜¯ ES2022
            å¼•å…¥çš„ç‰¹æ€§ï¼Œå…è®¸åœ¨ç±»çš„é™æ€ä¸Šä¸‹æ–‡ä¸­æ‰§è¡Œä»£ç ã€‚å®ƒå¯ä»¥ç”¨äºåˆå§‹åŒ–é™æ€å±æ€§æˆ–æ‰§è¡Œå…¶ä»–é™æ€é€»è¾‘ã€‚
          </p>
          <h3>ç”¨æ³•ç¤ºä¾‹</h3>
          <pre><code>class MyClass {
      static x = 10;
      static y;

      static {
        this.y = this.x * 2; // åœ¨é™æ€å—ä¸­åˆå§‹åŒ–é™æ€å±æ€§
      }
    }

    console.log(MyClass.x); // 10
    console.log(MyClass.y); // 20</code></pre>
        </div>
      </section>

      <!-- æœ€ä½³å®è·µ -->
      <section class="card best-practice">
        <h2>âœ… æœ€ä½³å®è·µ</h2>
        <div class="practice-grid">
          <div class="practice do">
            <h3>åº”è¯¥åš</h3>
            <ul>
              <li>å§‹ç»ˆä½¿ç”¨ class è¯­æ³•ä»£æ›¿æ—§å¼åŸå‹ç»§æ‰¿</li>
              <li>æ–¹æ³•é—´ä¿ç•™ç©ºè¡Œæé«˜å¯è¯»æ€§</li>
              <li>ä¼˜å…ˆä½¿ç”¨ç§æœ‰å­—æ®µä¿æŠ¤æ•°æ® (#field)</li>
              <li>ç”¨ static æ–¹æ³•å®ç°å·¥å…·å‡½æ•°</li>
            </ul>
          </div>

          <div class="practice dont">
            <h3>é¿å…åš</h3>
            <ul>
              <li>ä¸è¦å¿˜è®°è°ƒç”¨ super() åœ¨æ´¾ç”Ÿç±»ä¸­</li>
              <li>é¿å…åœ¨ç±»ä¸­å®šä¹‰ç®­å¤´å‡½æ•°ä½œä¸ºå®ä¾‹æ–¹æ³•</li>
              <li>ä¸è¦ç›´æ¥æ“ä½œ prototype å±æ€§</li>
              <li>é¿å…è¿‡åº¦ä½¿ç”¨ç»§æ‰¿ï¼ˆç»„åˆä¼˜äºç»§æ‰¿ï¼‰</li>
            </ul>
          </div>
        </div>
      </section>
    </main>
  </div>
</template>

<script setup lang="ts">
import { ref, watch } from 'vue'

class father {
  name: string
  #age: number
  static height: number = 180
  constructor(name: string) {
    this.name = name
    this.#age = 18
  }
  speak() {
    console.log(`${this.name} makes a noise`)
  }
  static createBaby() {
    return console.log('baby')
  }
}

class Son extends father {
  constructor(name: string) {
    super(name)
  }
  bark() {
    super.speak()
    console.log('Woof!')
  }

  static sum() {
    super.createBaby()
  }
}
</script>

<style scoped>
/* æ–°å¢å…¨å±€æ–‡å­—é¢œè‰²è®¾ç½® */
pre,
h3,
li,
p {
  color: #333;
  /* è®¾ç½®æ·±ç°è‰² */
}

.super-keyword {
  code {
    color: #fff;
  }
}

/* è°ƒæ•´ä»£ç å—æ–‡å­—é¢œè‰²ä¿æŒå¯¹æ¯”åº¦ */

.class-container {
  max-width: 1200px;
  margin: 0 auto;
  padding: 2rem;
  background: #f8f9fa;
  min-height: 100vh;
}

.header {
  text-align: center;
  margin-bottom: 3rem;
}

.header h1 {
  font-size: 2.5rem;
  color: #2c3e50;
  margin-bottom: 0.5rem;
}

.subtitle {
  font-size: 1.2rem;
  color: #7f8c8d;
}

.card {
  background: white;
  border-radius: 12px;
  padding: 2rem;
  margin-bottom: 2rem;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.05);
}

h2 {
  color: #2c3e50;
  border-bottom: 2px solid #3498db;
  padding-bottom: 0.5rem;
  margin-bottom: 1.5rem;
}

.principle-content {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 2rem;
  align-items: center;
}

.prototype-chain {
  background: #f4f6f8;
  padding: 2rem;
  border-radius: 8px;
}

.class-box,
.instance-box {
  border: 2px solid #3498db;
  border-radius: 8px;
  padding: 1rem;
  margin: 1rem 0;
  text-align: center;
}

.class-name,
.instance {
  font-weight: bold;
  color: #2c3e50;
}

.constructor {
  color: #e67e22;
  margin: 0.5rem 0;
}

.methods .method {
  color: #2ecc71;
  margin: 0.3rem 0;
}

.props .prop {
  color: #9b59b6;
  margin: 0.3rem 0;
}

.arrow {
  text-align: center;
  font-size: 1.5rem;
  color: #7f8c8d;
  margin: 1rem 0;
}

.principle-list {
  padding-left: 2rem;
  line-height: 1.8;
}

.principle-list li {
  margin: 1rem 0;
  position: relative;
}

.principle-list li::before {
  content: 'â–¸';
  position: absolute;
  left: -1.5rem;
  color: #3498db;
}

.syntax-grid,
.feature-grid,
.practice-grid {
  display: grid;
  gap: 1.5rem;
  grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
}

.syntax-item,
.feature-card {
  background: #f8f9fa;
  padding: 1.2rem;
  border-radius: 8px;
}

pre code {
  font-family: 'Fira Code', monospace;
  font-size: 0.9rem;
}

.best-practice ul {
  padding-left: 1.5rem;
}

.do {
  border-left: 4px solid #2ecc71;
  padding-left: 1rem;
}

.dont {
  border-left: 4px solid #e74c3c;
  padding-left: 1rem;
}

@media (max-width: 768px) {
  .principle-content {
    grid-template-columns: 1fr;
  }

  .syntax-grid,
  .feature-grid,
  .practice-grid {
    grid-template-columns: 1fr;
  }
}

.code-block {
  background: #2c3e50;
  color: white;
  padding: 1.5rem;
  border-radius: 8px;
  overflow-x: auto;
}
</style>
