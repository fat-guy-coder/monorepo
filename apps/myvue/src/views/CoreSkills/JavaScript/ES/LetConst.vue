<template>
  <div class="container">
    <header class="header">
      <h1 class="title">ES6 ä¸­çš„ let ä¸ const</h1>
      <p class="subtitle">å—çº§ä½œç”¨åŸŸå˜é‡çš„æ–°æ—¶ä»£</p>
    </header>

    <main class="main-content">
      <!-- åŸºæœ¬ä»‹ç» -->
      <section class="section">
        <h2 class="section-title">ä»€ä¹ˆæ˜¯ let å’Œ constï¼Ÿ</h2>
        <div class="section-content">
          <p>
            let å’Œ const æ˜¯ ES6ï¼ˆECMAScript 2015ï¼‰å¼•å…¥çš„æ–°å˜é‡å£°æ˜æ–¹å¼ï¼Œç”¨äºè§£å†³ var å£°æ˜å˜é‡æ—¶çš„ä¸€äº›é—®é¢˜ã€‚
            å®ƒä»¬æä¾›äº†å—çº§ä½œç”¨åŸŸï¼Œä½¿ JavaScript å˜é‡ç®¡ç†æ›´åŠ ä¸¥è°¨å’Œå¯é¢„æµ‹ã€‚
          </p>
          <div class="code-example">
            <pre><code>// var å£°æ˜
var a = 1;

// let å£°æ˜
let b = 2;

// const å£°æ˜
const c = 3;</code></pre>
          </div>
        </div>
      </section>

      <!-- ä¸»è¦ä½œç”¨ -->
      <section class="section">
        <h2 class="section-title">ä¸»è¦ä½œç”¨</h2>
        <div class="section-content">
          <div class="feature-grid">
            <div class="feature-card">
              <h3>let çš„ä½œç”¨</h3>
              <ul>
                <li>å£°æ˜å—çº§ä½œç”¨åŸŸçš„å˜é‡</li>
                <li>å…è®¸é‡æ–°èµ‹å€¼ä½†ä¸å…è®¸é‡å¤å£°æ˜</li>
                <li>è§£å†³å˜é‡æå‡å¸¦æ¥çš„é—®é¢˜</li>
                <li>åœ¨å¾ªç¯ä¸­åˆ›å»ºç‹¬ç«‹ä½œç”¨åŸŸ</li>
              </ul>
            </div>
            <div class="feature-card">
              <h3>const çš„ä½œç”¨</h3>
              <ul>
                <li>å£°æ˜å—çº§ä½œç”¨åŸŸçš„å¸¸é‡</li>
                <li>å£°æ˜æ—¶å¿…é¡»åˆå§‹åŒ–ä¸”ä¸å…è®¸é‡æ–°èµ‹å€¼</li>
                <li>å¯¹äºå¼•ç”¨ç±»å‹ï¼Œå…è®¸ä¿®æ”¹å…¶å±æ€§</li>
                <li>æé«˜ä»£ç å¯è¯»æ€§å’Œå¯ç»´æŠ¤æ€§</li>
              </ul>
            </div>
          </div>
        </div>
      </section>

      <!-- å·¥ä½œåŸç† -->
      <section class="section">
        <h2 class="section-title">å·¥ä½œåŸç†</h2>
        <div class="section-content">
          <div class="principle-card">
            <h3>å—çº§ä½œç”¨åŸŸ</h3>
            <p>
              let å’Œ const å£°æ˜çš„å˜é‡å…·æœ‰å—çº§ä½œç”¨åŸŸï¼Œå³åªåœ¨æœ€è¿‘çš„èŠ±æ‹¬å· <code>{}</code> å†…æœ‰æ•ˆï¼Œ
              åŒ…æ‹¬ ifã€forã€while ç­‰è¯­å¥å—ã€‚
            </p>
            <div class="code-example">
              <pre><code>if (true) {
  let x = 10;
  const y = 20;
}
console.log(x); // ReferenceError: x is not defined
console.log(y); // ReferenceError: y is not defined</code></pre>
            </div>
          </div>

          <div class="principle-card">
            <h3>å˜é‡æå‡ä¸æš‚æ—¶æ€§æ­»åŒº</h3>
            <p>
              let å’Œ const å£°æ˜çš„å˜é‡å­˜åœ¨"æš‚æ—¶æ€§æ­»åŒº"ï¼ˆTemporal Dead Zoneï¼‰ï¼Œåœ¨å£°æ˜ä¹‹å‰ä½¿ç”¨ä¼šæŠ›å‡ºé”™è¯¯ï¼Œ
              è¿™ä¸ var å£°æ˜çš„å˜é‡ä¼šè¢«æå‡åˆ°ä½œç”¨åŸŸé¡¶éƒ¨ä¸åŒã€‚
            </p>
            <div class="code-example">
              <pre><code>console.log(a); // undefined (varå£°æ˜çš„å˜é‡æå‡)
var a = 1;

console.log(b); // ReferenceError: Cannot access 'b' before initialization
let b = 2;

console.log(c); // ReferenceError: Cannot access 'c' before initialization
const c = 3;</code></pre>
            </div>
          </div>

          <div class="principle-card">
            <h3>const çš„ä¸å¯å˜æ€§</h3>
            <p>
              const å£°æ˜çš„å˜é‡ä¸èƒ½é‡æ–°èµ‹å€¼ï¼Œä½†å¯¹äºå¯¹è±¡å’Œæ•°ç»„ç­‰å¼•ç”¨ç±»å‹ï¼Œå…¶å†…éƒ¨å±æ€§æˆ–å…ƒç´ æ˜¯å¯ä»¥ä¿®æ”¹çš„ï¼Œ
              å› ä¸º const åªä¿è¯å˜é‡å¼•ç”¨ä¸å˜ã€‚
            </p>
            <div class="code-example">
              <pre><code>const PI = 3.14159;
PI = 3.14; // TypeError: Assignment to constant variable

const person = { name: "Alice" };
person.name = "Bob"; // å…è®¸ä¿®æ”¹å±æ€§
person.age = 30; // å…è®¸æ·»åŠ å±æ€§

const numbers = [1, 2, 3];
numbers.push(4); // å…è®¸ä¿®æ”¹æ•°ç»„
numbers[0] = 0; // å…è®¸ä¿®æ”¹å…ƒç´ </code></pre>
            </div>
          </div>

          <section class="principle-card">
        <h2 class="section-title">ğŸ§ let/const ä¹Ÿæœ‰å˜é‡æå‡å—ï¼Ÿ</h2>
        <div class="let-const-hoisting-explanation">
          <p>
            å¾ˆå¤šäººä»¥ä¸º <code>let</code> å’Œ <code>const</code> æ²¡æœ‰å˜é‡æå‡ï¼Œå…¶å®å®ƒä»¬ä¹Ÿä¼šè¢«æå‡åˆ°å½“å‰ä½œç”¨åŸŸçš„é¡¶éƒ¨ï¼Œ
            <strong>åªæ˜¯ä¸ä¼šåˆå§‹åŒ–</strong>ã€‚åœ¨å£°æ˜ä¹‹å‰è®¿é—®ä¼šè¿›å…¥â€œæš‚å­˜æ­»åŒºâ€ï¼ˆTDZï¼‰ï¼Œå¯¼è‡´ <code>ReferenceError</code>ã€‚
          </p>
          <div class="code-example">
            <pre class="code-block"><code>console.log(b); // ReferenceError: Cannot access 'b' before initialization
let b = 20;

console.log(c); // ReferenceError: Cannot access 'c' before initialization
const c = 30;</code></pre>
          </div>
          <p>
            <strong>åŸç†è§£æï¼š</strong> <br>
            <code>let</code> å’Œ <code>const</code> å£°æ˜çš„å˜é‡åœ¨ä½œç”¨åŸŸå¼€å§‹æ—¶å°±å·²ç»â€œè¢«åˆ›å»ºâ€ï¼Œ
            ä½†åœ¨ä»£ç è¿è¡Œåˆ°å£°æ˜è¯­å¥ä¹‹å‰ï¼Œå˜é‡å¤„äºâ€œæœªåˆå§‹åŒ–â€çŠ¶æ€ï¼Œä¸èƒ½è¢«è®¿é—®ã€‚
            è¿™å°±æ˜¯ä¸ºä»€ä¹ˆä¼šæŠ¥é”™ï¼Œè€Œä¸æ˜¯åƒ <code>var</code> é‚£æ ·è¿”å› <code>undefined</code>ã€‚
          </p>
          <div class="code-example">
            <pre class="code-block"><code>// ä¼ªä»£ç ç†è§£
{
  // TDZå¼€å§‹
  // è®¿é—®bä¼šæŠ¥é”™
  let b; // å£°æ˜æå‡åˆ°å—é¡¶éƒ¨ï¼Œä½†æœªåˆå§‹åŒ–
  // ç°åœ¨bå¯ç”¨
}</code></pre>
          </div>
          <ul>
            <li><strong>varï¼š</strong> å£°æ˜æå‡+åˆå§‹åŒ–ä¸º<code>undefined</code>ï¼Œå¯æå‰è®¿é—®</li>
            <li><strong>let/constï¼š</strong> åªæå‡å£°æ˜ï¼Œä¸åˆå§‹åŒ–ï¼Œæå‰è®¿é—®æŠ¥é”™</li>
          </ul>
        </div>
      </section>

        </div>
      </section>

      <!-- å®é™…æå‡ -->
      <section class="section">
        <h2 class="section-title">å®é™…å¼€å‘ä¸­çš„æå‡</h2>
        <div class="section-content">
          <div class="improvement-list">
            <div class="improvement-item">
              <h3>1. å‡å°‘å˜é‡æ±¡æŸ“</h3>
              <p>
                å—çº§ä½œç”¨åŸŸé¿å…äº†å˜é‡æ³„éœ²åˆ°å¤–éƒ¨ä½œç”¨åŸŸï¼Œå‡å°‘äº†å…¨å±€å˜é‡æ±¡æŸ“å’Œæ„å¤–çš„å˜é‡è¦†ç›–ã€‚
              </p>
            </div>
            <div class="improvement-item">
              <h3>2. æé«˜ä»£ç å¯è¯»æ€§</h3>
              <p>
                const æ˜ç¡®è¡¨ç¤ºå˜é‡ä¸ä¼šè¢«é‡æ–°èµ‹å€¼ï¼Œè®©ä»£ç æ„å›¾æ›´æ¸…æ™°ï¼Œæé«˜äº†ä»£ç çš„å¯ç»´æŠ¤æ€§ã€‚
              </p>
            </div>
            <div class="improvement-item">
              <h3>3. å‡å°‘é”™è¯¯</h3>
              <p>
                æš‚æ—¶æ€§æ­»åŒºå’Œä¸å…è®¸é‡å¤å£°æ˜çš„ç‰¹æ€§ï¼Œå¸®åŠ©å¼€å‘è€…åœ¨ç¼–ç é˜¶æ®µå‘ç°æ½œåœ¨é”™è¯¯ã€‚
              </p>
            </div>
            <div class="improvement-item">
              <h3>4. å¾ªç¯ä¸­çš„è¡¨ç°</h3>
              <p>
                let åœ¨ for å¾ªç¯ä¸­æ¯æ¬¡è¿­ä»£éƒ½ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„å˜é‡ç»‘å®šï¼Œè§£å†³äº† var å¯¼è‡´çš„å¾ªç¯é—­åŒ…é—®é¢˜ã€‚
              </p>
              <div class="code-example">
                <pre><code>// ä½¿ç”¨ var çš„é—®é¢˜
for (var i = 0; i < 3; i++) {
  setTimeout(() => console.log(i), 100); // è¾“å‡º: 3 3 3
}

// ä½¿ç”¨ let çš„è§£å†³
for (let i = 0; i < 3; i++) {
  setTimeout(() => console.log(i), 100); // è¾“å‡º: 0 1 2
}</code></pre>
              </div>
            </div>
          </div>
        </div>
      </section>

      <!-- é€‚ç”¨åœºæ™¯ -->
      <section class="section">
        <h2 class="section-title">é€‚ç”¨åœºæ™¯</h2>
        <div class="section-content">
          <div class="use-case-grid">
            <div class="use-case-card">
              <h3>ä½¿ç”¨ let çš„åœºæ™¯</h3>
              <ul>
                <li>å¾ªç¯è®¡æ•°å™¨ï¼ˆforã€while å¾ªç¯ï¼‰</li>
                <li>éœ€è¦é‡æ–°èµ‹å€¼çš„å˜é‡</li>
                <li>æ¡ä»¶è¯­å¥ä¸­å£°æ˜çš„å˜é‡</li>
                <li>å‡½æ•°å†…éƒ¨éœ€è¦å¤šæ¬¡ä¿®æ”¹çš„å˜é‡</li>
              </ul>
              <div class="code-snippet">
                <code>let count = 0;
count += 1; // éœ€è¦é‡æ–°èµ‹å€¼ï¼Œä½¿ç”¨let</code>
              </div>
            </div>
            <div class="use-case-card">
              <h3>ä½¿ç”¨ const çš„åœºæ™¯</h3>
              <ul>
                <li>å£°æ˜ä¸å¸Œæœ›è¢«é‡æ–°èµ‹å€¼çš„å˜é‡</li>
                <li>é…ç½®é¡¹å’Œå¸¸é‡å€¼ï¼ˆå¦‚ PIã€URL ç­‰ï¼‰</li>
                <li>å£°æ˜å¯¹è±¡å’Œæ•°ç»„ï¼ˆå³ä½¿éœ€è¦ä¿®æ”¹å…¶å†…å®¹ï¼‰</li>
                <li>å¯¼å…¥æ¨¡å—å’Œå®šä¹‰å‡½æ•°</li>
              </ul>
              <div class="code-snippet">
                <code>const MAX_SIZE = 100;
const user = { name: "John" };
user.age = 25; // å…è®¸ï¼Œä½¿ç”¨const</code>
              </div>
            </div>
          </div>
        </div>
      </section>

      <!-- æ³¨æ„äº‹é¡¹ -->
      <section class="section">
        <h2 class="section-title">æ³¨æ„äº‹é¡¹</h2>
        <div class="section-content">
          <div class="warning-list">
            <div class="warning-item">
              <h3>1. é‡å¤å£°æ˜</h3>
              <p>
                åœ¨åŒä¸€ä½œç”¨åŸŸå†…ï¼Œlet å’Œ const ä¸å…è®¸é‡å¤å£°æ˜åŒä¸€å˜é‡ï¼Œä¹Ÿä¸å…è®¸ä¸ var å£°æ˜çš„å˜é‡é‡åã€‚
              </p>
              <div class="code-snippet error">
                <code>let x = 1;
let x = 2; // SyntaxError: Identifier 'x' has already been declared</code>
              </div>
            </div>
            <div class="warning-item">
              <h3>2. const åˆå§‹åŒ–</h3>
              <p>
                const å£°æ˜çš„å˜é‡å¿…é¡»åœ¨å£°æ˜æ—¶åˆå§‹åŒ–ï¼Œå¦åˆ™ä¼šæŠ¥é”™ã€‚
              </p>
              <div class="code-snippet error">
                <code>const x; // SyntaxError: Missing initializer in const declaration</code>
              </div>
            </div>
            <div class="warning-item">
              <h3>3. å—çº§ä½œç”¨åŸŸè¾¹ç•Œ</h3>
              <p>
                è¦æ³¨æ„å—çº§ä½œç”¨åŸŸçš„è¾¹ç•Œï¼Œé¿å…åœ¨ä½œç”¨åŸŸå¤–è®¿é—® let/const å£°æ˜çš„å˜é‡ã€‚
              </p>
            </div>
            <div class="warning-item">
              <h3>4. å¾ªç¯ä¸­çš„ const</h3>
              <p>
                åœ¨ for å¾ªç¯ä¸­ä¸èƒ½ä½¿ç”¨ const ä½œä¸ºå¾ªç¯å˜é‡ï¼ˆå› ä¸ºéœ€è¦é‡æ–°èµ‹å€¼ï¼‰ï¼Œä½†åœ¨ for...in å’Œ for...of ä¸­å¯ä»¥ã€‚
              </p>
              <div class="code-snippet">
                <code>// é”™è¯¯
for (const i = 0; i < 3; i++) {} // TypeError: Assignment to constant variable

// æ­£ç¡®
const arr = [1, 2, 3];
for (const item of arr) {
  console.log(item);
}</code>
              </div>
            </div>
            <div class="warning-item">
              <h3>5. å…¨å±€ä½œç”¨åŸŸ</h3>
              <p>
                åœ¨å…¨å±€ä½œç”¨åŸŸä¸­ï¼Œlet/const å£°æ˜çš„å˜é‡ä¸ä¼šæˆä¸º window å¯¹è±¡çš„å±æ€§ï¼Œè€Œ var å£°æ˜çš„ä¼šã€‚
              </p>
            </div>
          </div>
        </div>
      </section>

      <!-- æœ€ä½³å®è·µ -->
      <section class="section">
        <h2 class="section-title">æœ€ä½³å®è·µ</h2>
        <div class="section-content">
          <ul class="best-practices">
            <li>ä¼˜å…ˆä½¿ç”¨ constï¼Œåªæœ‰å½“éœ€è¦é‡æ–°èµ‹å€¼æ—¶æ‰ä½¿ç”¨ let</li>
            <li>é¿å…ä½¿ç”¨ varï¼Œä¿æŒä»£ç é£æ ¼ä¸€è‡´</li>
            <li>å¯¹å¼•ç”¨ç±»å‹ä½¿ç”¨ const å£°æ˜ï¼Œæ˜ç¡®è¡¨ç¤ºä¸æ”¹å˜å¼•ç”¨</li>
            <li>åœ¨å¾ªç¯ä¸­ä½¿ç”¨ let å£°æ˜è®¡æ•°å™¨å˜é‡</li>
            <li>åˆ©ç”¨å—çº§ä½œç”¨åŸŸå°è£…ä¸´æ—¶å˜é‡ï¼Œå‡å°‘å‘½åå†²çª</li>
          </ul>
        </div>
      </section>
    </main>

    <footer class="footer">
      <p>ES6 let ä¸ const è¯¦è§£ &copy; {{ new Date().getFullYear() }}</p>
    </footer>
  </div>
</template>

<script setup lang="ts">
// ç»„ä»¶é€»è¾‘éƒ¨åˆ†ï¼Œå½“å‰ä¸ºé™æ€å±•ç¤º
</script>

<style scoped lang="less">
.container {
  max-width: 1200px;
  margin: 0 auto;
  padding: 20px;
  background-color: #f9fafb;
  color: #334155;
  font-family: 'Segoe UI', Roboto, Oxygen, Ubuntu, sans-serif;
  line-height: 1.7;
}

.header {
  text-align: center;
  margin-bottom: 30px;
  padding-bottom: 15px;
  border-bottom: 1px solid #e2e8f0;

  .title {
    color: #1e293b;
    margin: 0 0 10px 0;
    font-size: 1.8rem;
  }

  .subtitle {
    color: #64748b;
    margin: 0;
    font-size: 1.1rem;
    font-weight: 400;
  }
}

.main-content {
  .section {
    margin-bottom: 40px;

    .section-title {
      color: #1e293b;
      border-bottom: 2px solid #dbeafe;
      padding-bottom: 8px;
      margin-top: 0;
      margin-bottom: 20px;
      font-size: 1.4rem;
    }

    .section-content {
      background-color: #fff;
      padding: 25px;
      border-radius: 8px;
      box-shadow: 0 1px 3px rgba(0, 0, 0, 0.05);
    }
  }

  .code-example {
    background-color: #f8fafc;
    border-radius: 6px;
    margin: 15px 0;
    overflow-x: auto;
    border: 1px solid #e2e8f0;

    pre {
      margin: 0;
      padding: 15px;

      code {
        font-family: 'Fira Code', monospace;
        font-size: 0.9rem;
        color: #0f172a;
      }
    }
  }

  .code-snippet {
    background-color: #f8fafc;
    border-radius: 4px;
    padding: 10px;
    margin: 10px 0;
    font-family: 'Fira Code', monospace;
    font-size: 0.9rem;
    border: 1px solid #e2e8f0;
    overflow-x: auto;

    &.error {
      background-color: #fee2e2;
      border-color: #fecaca;
      color: #b91c1c;
    }
  }

  .feature-grid {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 20px;
  }

  .feature-card, .use-case-card {
    background-color: #f8fafc;
    border-radius: 6px;
    padding: 20px;
    border: 1px solid #e2e8f0;

    h3 {
      margin-top: 0;
      color: #1e293b;
      margin-bottom: 15px;
      font-size: 1.1rem;
    }

    ul {
      margin: 0;
      padding-left: 25px;

      li {
        margin-bottom: 8px;
      }
    }
  }

  .principle-card {
    margin-bottom: 25px;

    h3 {
      color: #1e293b;
      margin-top: 0;
      margin-bottom: 15px;
      font-size: 1.2rem;
    }

    &:last-child {
      margin-bottom: 0;
    }
  }

  .improvement-list {
    .improvement-item {
      margin-bottom: 25px;

      h3 {
        color: #1e293b;
        margin-top: 0;
        margin-bottom: 10px;
        font-size: 1.1rem;
      }

      &:last-child {
        margin-bottom: 0;
      }
    }
  }

  .use-case-grid {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 20px;
  }

  .warning-list {
    .warning-item {
      background-color: #fffbeb;
      border-radius: 6px;
      padding: 18px;
      margin-bottom: 15px;
      border-left: 3px solid #f59e0b;

      h3 {
        color: #92400e;
        margin-top: 0;
        margin-bottom: 10px;
        font-size: 1.1rem;
      }

      &:last-child {
        margin-bottom: 0;
      }
    }
  }

  .best-practices {
    background-color: #f0fdf4;
    border-radius: 6px;
    padding: 20px 25px;
    margin: 0;
    border: 1px solid #dcfce7;

    li {
      margin-bottom: 10px;
      position: relative;

      &::before {
        content: "â€¢";
        color: #166534;
        font-weight: bold;
        position: absolute;
        left: -20px;
      }

      &:last-child {
        margin-bottom: 0;
      }
    }
  }
}

footer.footer {
  margin-top: 50px;
  padding-top: 20px;
  border-top: 1px solid #e2e8f0;
  text-align: center;
  color: #94a3b8;
  font-size: 0.9rem;
}

@media (max-width: 768px) {
  .container {
    padding: 15px;
  }

  .feature-grid, .use-case-grid {
    grid-template-columns: 1fr;
  }

  .header .title {
    font-size: 1.5rem;
  }
}
</style>
