<template>
  <div class="promise-container">
    <header class="header">
      <div class="title-wrapper">
        <h1>JavaScript Promise è¯¦è§£</h1>
        <p class="subtitle">å¼‚æ­¥ç¼–ç¨‹çš„ç°ä»£è§£å†³æ–¹æ¡ˆ</p>
        <a @click="goToByRouteName" style="cursor: pointer">promiseçš„å®ç°åŸç†</a>
        <p>promiseè¿‡äºé‡è¦ï¼Œéœ€è¦é‡ç‚¹æŒæ¡</p>
      </div>
      <div class="demo-area">
        <div class="promise-visualization">
          <div class="promise-flow">
            <div class="state pending">
              <div class="state-label">Pending</div>
              <div class="state-icon">â³</div>
            </div>
            <div class="flow-arrow">â†’</div>
            <div class="state resolved">
              <div class="state-label">Fulfilled</div>
              <div class="state-icon">âœ…</div>
            </div>
            <div class="flow-arrow">â†’</div>
            <div class="state rejected">
              <div class="state-label">Rejected</div>
              <div class="state-icon">âŒ</div>
            </div>
          </div>

          <div class="demo-controls">
            <button class="run-button" @click="runDemo">è¿è¡Œ Promise æ¼”ç¤º</button>
            <div class="demo-result">
              <div class="result-label">æ‰§è¡Œç»“æœï¼š</div>
              <div class="result-content">{{ demoResult }}</div>
            </div>
          </div>
        </div>
      </div>
    </header>

    <div class="content">
      <section class="intro-section">
        <div class="intro-card">
          <h2>ä»€ä¹ˆæ˜¯ Promiseï¼Ÿ</h2>
          <p>
            Promise æ˜¯ JavaScript
            ä¸­å¤„ç†å¼‚æ­¥æ“ä½œçš„ç°ä»£è§£å†³æ–¹æ¡ˆã€‚å®ƒä»£è¡¨ä¸€ä¸ªå¼‚æ­¥æ“ä½œçš„æœ€ç»ˆå®Œæˆï¼ˆæˆ–å¤±è´¥ï¼‰åŠå…¶ç»“æœå€¼ã€‚ Promise
            æä¾›äº†ä¸€ç§æ›´ä¼˜é›…çš„æ–¹å¼æ¥å¤„ç†å¼‚æ­¥æ“ä½œï¼Œé¿å…äº†ä¼ ç»Ÿçš„å›è°ƒåœ°ç‹±ï¼ˆCallback Hellï¼‰é—®é¢˜ã€‚
          </p>

          <div class="promise-states">
            <div class="state-card">
              <div class="state-icon pending">â³</div>
              <h3>Pendingï¼ˆå¾…å®šï¼‰</h3>
              <p>åˆå§‹çŠ¶æ€ï¼Œæ“ä½œå°šæœªå®Œæˆ</p>
            </div>
            <div class="state-card">
              <div class="state-icon fulfilled">âœ…</div>
              <h3>Fulfilledï¼ˆå·²å…‘ç°ï¼‰</h3>
              <p>æ“ä½œæˆåŠŸå®Œæˆ</p>
            </div>
            <div class="state-card">
              <div class="state-icon rejected">âŒ</div>
              <h3>Rejectedï¼ˆå·²æ‹’ç»ï¼‰</h3>
              <p>æ“ä½œå¤±è´¥</p>
            </div>
          </div>
        </div>
      </section>

      <section class="basic-usage">
        <h2 class="section-title">Promise åŸºæœ¬ä½¿ç”¨</h2>
        <div class="usage-grid">
          <div class="usage-card">
            <h3>åˆ›å»º Promise</h3>
            <pre><code>{{ createPromiseCode }}</code></pre>
            <p>Promise æ„é€ å‡½æ•°æ¥æ”¶ä¸€ä¸ªæ‰§è¡Œå™¨å‡½æ•°ï¼Œè¯¥å‡½æ•°æœ‰ä¸¤ä¸ªå‚æ•°ï¼šresolve å’Œ reject</p>
          </div>
          <div class="usage-card">
            <h3>ä½¿ç”¨ Promise</h3>
            <pre><code>{{ usePromiseCode }}</code></pre>
            <p>ä½¿ç”¨ .then() å¤„ç†æˆåŠŸç»“æœï¼Œ.catch() å¤„ç†é”™è¯¯ï¼Œ.finally() æ‰§è¡Œæ¸…ç†æ“ä½œ</p>
          </div>
        </div>
      </section>

      <section class="chaining-section">
        <h2 class="section-title">Promise é“¾å¼è°ƒç”¨</h2>
        <div class="chaining-example">
          <div class="code-block">
            <pre><code>{{ chainingCode }}</code></pre>
          </div>
          <div class="explanation">
            <h3>é“¾å¼è°ƒç”¨åŸç†</h3>
            <p>Promise çš„ .then() æ–¹æ³•è¿”å›ä¸€ä¸ªæ–°çš„ Promiseï¼Œå…è®¸é“¾å¼è°ƒç”¨ï¼š</p>
            <ul>
              <li>å¦‚æœ .then() çš„å›è°ƒå‡½æ•°è¿”å›ä¸€ä¸ªå€¼ï¼Œæ–° Promise ä¼šä»¥è¯¥å€¼å…‘ç°</li>
              <li>å¦‚æœ .then() çš„å›è°ƒå‡½æ•°è¿”å›å¦ä¸€ä¸ª Promiseï¼Œæ–° Promise ä¼šé‡‡ç”¨è¯¥ Promise çš„çŠ¶æ€</li>
              <li>å¦‚æœ .then() çš„å›è°ƒå‡½æ•°æŠ›å‡ºé”™è¯¯ï¼Œæ–° Promise ä¼šè¢«æ‹’ç»</li>
            </ul>
          </div>
        </div>
      </section>

      <section class="return-values">
        <h2 class="section-title">.then() æ–¹æ³•è¿”å›å€¼</h2>
        <div class="return-grid">
          <div class="return-card">
            <h3>è¿”å›æ™®é€šå€¼</h3>
            <pre><code>{{ returnPrimitiveCode }}</code></pre>
            <div class="return-result">
              <p>ç»“æœ: {{ returnPrimitiveResult || 'ç‚¹å‡»è¿è¡ŒæŸ¥çœ‹ç»“æœ' }}</p>
            </div>
            <button class="run-small" @click="runReturnPrimitive">è¿è¡Œ</button>
            <p class="return-desc">è¿”å›æ™®é€šå€¼æ—¶ï¼ŒPromise ä¼šç«‹å³ä»¥è¯¥å€¼å…‘ç°</p>
          </div>
          <div class="return-card">
            <h3>è¿”å› Promise</h3>
            <pre><code>{{ returnPromiseCode }}</code></pre>
            <div class="return-result">
              <p>ç»“æœ: {{ returnPromiseResult || 'ç‚¹å‡»è¿è¡ŒæŸ¥çœ‹ç»“æœ' }}</p>
            </div>
            <button class="run-small" @click="runReturnPromise">è¿è¡Œ</button>
            <p class="return-desc">è¿”å› Promise æ—¶ï¼Œä¼šç­‰å¾…è¯¥ Promise è§£å†³åå†ç»§ç»­é“¾å¼è°ƒç”¨</p>
          </div>
        </div>
      </section>

      <section class="static-methods">
        <h2 class="section-title">Promise é™æ€æ–¹æ³•</h2>
        <div class="methods-grid">
          <div class="method-card" v-for="(method, index) in staticMethods" :key="index">
            <div class="method-header">
              <div class="method-name">Promise.{{ method.name }}</div>
              <div class="method-signature">{{ method.signature }}</div>
            </div>
            <div class="method-description">
              {{ method.description }}
            </div>
            <div class="method-example">
              <pre><code>{{ method.example }}</code></pre>
            </div>
          </div>
        </div>
      </section>

      <section class="performance-section">
        <h2 class="section-title">æ€§èƒ½ä¸æ³¨æ„äº‹é¡¹</h2>
        <div class="performance-grid">
          <div class="performance-card">
            <h3>æ€§èƒ½é—®é¢˜</h3>
            <ul>
              <li>Promise æ¯”å›è°ƒå‡½æ•°æœ‰æ›´é«˜çš„å†…å­˜å¼€é”€</li>
              <li>é“¾å¼ Promise ä¼šåˆ›å»ºå¤šä¸ªå¾®ä»»åŠ¡</li>
              <li>æ·±å±‚åµŒå¥—çš„ Promise å¯èƒ½å¯¼è‡´å †æ ˆè¿½è¸ªå›°éš¾</li>
              <li>å¤§é‡ Promise å¯èƒ½å½±å“åƒåœ¾å›æ”¶æ•ˆç‡</li>
            </ul>
          </div>
          <div class="performance-card">
            <h3>æœ€ä½³å®è·µ</h3>
            <ul>
              <li>é¿å…ä¸å¿…è¦çš„ Promise åµŒå¥—</li>
              <li>ä½¿ç”¨ async/await ç®€åŒ–ä»£ç </li>
              <li>æ€»æ˜¯æ·»åŠ  .catch() å¤„ç†é”™è¯¯</li>
              <li>ä½¿ç”¨ Promise.all() å¹¶è¡Œå¤„ç†ç‹¬ç«‹æ“ä½œ</li>
              <li>é¿å…åœ¨å¾ªç¯ä¸­åˆ›å»ºä¸å¿…è¦çš„ Promise</li>
            </ul>
          </div>
          <div class="performance-card">
            <h3>åƒåœ¾å›æ”¶</h3>
            <p>Promise å¯¹è±¡åœ¨è§£å†³åä¸ä¼šè¢«ç«‹å³å›æ”¶ï¼š</p>
            <ul>
              <li>å·²è§£å†³çš„ Promise ä¼šä¿ç•™åœ¨å†…å­˜ä¸­ï¼Œç›´åˆ°æ²¡æœ‰å¼•ç”¨</li>
              <li>é“¾å¼è°ƒç”¨ä¼šåˆ›å»ºä¸­é—´ Promise å¯¹è±¡</li>
              <li>é¿å…åœ¨é•¿æœŸè¿è¡Œçš„åº”ç”¨ä¸­ä¿ç•™æœªä½¿ç”¨çš„ Promise å¼•ç”¨</li>
            </ul>
          </div>
        </div>
      </section>

      <section class="use-cases">
        <h2 class="section-title">é€‚ç”¨åœºæ™¯</h2>
        <div class="cases-grid">
          <div class="case-card" v-for="(useCase, index) in useCases" :key="index">
            <div class="case-icon">{{ useCase.icon }}</div>
            <div class="case-content">
              <h3>{{ useCase.title }}</h3>
              <p>{{ useCase.description }}</p>
              <div class="case-example">
                <pre><code>{{ useCase.example }}</code></pre>
              </div>
            </div>
          </div>
        </div>
      </section>
    </div>

    <footer class="footer">
      <p>Promise æ˜¯ç°ä»£ JavaScript å¼‚æ­¥ç¼–ç¨‹çš„åŸºçŸ³ï¼Œåˆç†ä½¿ç”¨å¯ä»¥æ˜¾è‘—æé«˜ä»£ç å¯è¯»æ€§å’Œå¯ç»´æŠ¤æ€§</p>
      <div class="resources">
        <h3>æ¨èèµ„æºï¼š</h3>
        <ul>
          <li>
            <a
              href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise"
              target="_blank"
              >MDN Promise æ–‡æ¡£</a
            >
          </li>
          <li><a href="https://promisesaplus.com/" target="_blank">Promises/A+ è§„èŒƒ</a></li>
          <li>
            <a href="https://javascript.info/async" target="_blank">JavaScript.info å¼‚æ­¥æ•™ç¨‹</a>
          </li>
        </ul>
      </div>
    </footer>
  </div>
</template>

<script setup lang="ts">
import { ref, defineEmits } from 'vue'

const emit = defineEmits(['goToByRouteName'])

const goToByRouteName = () => {
  emit('goToByRouteName', 'PromiseImplementation')
}

const demoResult = ref('ç‚¹å‡»"è¿è¡ŒPromiseæ¼”ç¤º"æŒ‰é’®æŸ¥çœ‹ç»“æœ')
const returnPrimitiveResult = ref('')
const returnPromiseResult = ref('')

const createPromiseCode = `// åˆ›å»º Promise
const promise = new Promise((resolve, reject) => {
  // å¼‚æ­¥æ“ä½œ
  setTimeout(() => {
    const success = Math.random() > 0.5;

    if (success) {
      resolve('æ“ä½œæˆåŠŸï¼');
    } else {
      reject(new Error('æ“ä½œå¤±è´¥ï¼'));
    }
  }, 1000);
});`

const usePromiseCode = `// ä½¿ç”¨ Promise
promise
  .then(result => {
    console.log(result); // æˆåŠŸæ—¶æ‰§è¡Œ
  })
  .catch(error => {
    console.error(error); // å¤±è´¥æ—¶æ‰§è¡Œ
  })
  .finally(() => {
    console.log('æ“ä½œå®Œæˆ'); // æ— è®ºæˆåŠŸå¤±è´¥éƒ½ä¼šæ‰§è¡Œ
  });`

const chainingCode = `// Promise é“¾å¼è°ƒç”¨
fetch('/api/user')
  .then(response => response.json()) // è¿”å›æ™®é€šå€¼
  .then(user => {
    return fetch(\`/api/posts/\${user.id}\`); // è¿”å›æ–°Promise
  })
  .then(response => response.json())
  .then(posts => {
    console.log('ç”¨æˆ·å¸–å­:', posts);
  })
  .catch(error => {
    console.error('è¯·æ±‚å¤±è´¥:', error);
  });`

const returnPrimitiveCode = `// .then() è¿”å›æ™®é€šå€¼
Promise.resolve(10)
  .then(value => {
    console.log('ç¬¬ä¸€æ­¥:', value);
    return value * 2; // è¿”å›æ™®é€šå€¼
  })
  .then(value => {
    console.log('ç¬¬äºŒæ­¥:', value);
    return value + 5; // è¿”å›æ™®é€šå€¼
  })
  .then(value => {
    console.log('æœ€ç»ˆç»“æœ:', value);
    return value;
  });`

const returnPromiseCode = `// .then() è¿”å› Promise
Promise.resolve(10)
  .then(value => {
    console.log('ç¬¬ä¸€æ­¥:', value);
    return new Promise(resolve => {
      setTimeout(() => resolve(value * 2), 1000);
    }); // è¿”å›Promise
  })
  .then(value => {
    console.log('ç¬¬äºŒæ­¥:', value);
    return new Promise(resolve => {
      setTimeout(() => resolve(value + 5), 1000);
    }); // è¿”å›Promise
  })
  .then(value => {
    console.log('æœ€ç»ˆç»“æœ:', value);
    return value;
  });`

const staticMethods = [
  {
    name: 'resolve',
    signature: 'Promise.resolve(value)',
    description: 'åˆ›å»ºä¸€ä¸ªå·²è§£å†³çš„ Promise å¯¹è±¡',
    example: `// åˆ›å»ºå·²è§£å†³çš„ Promise
const resolvedPromise = Promise.resolve(42);

resolvedPromise.then(value => {
  console.log(value); // 42
});`,
  },
  {
    name: 'reject',
    signature: 'Promise.reject(reason)',
    description: 'åˆ›å»ºä¸€ä¸ªå·²æ‹’ç»çš„ Promise å¯¹è±¡',
    example: `// åˆ›å»ºå·²æ‹’ç»çš„ Promise
const rejectedPromise = Promise.reject(new Error('å¤±è´¥'));

rejectedPromise.catch(error => {
  console.error(error.message); // 'å¤±è´¥'
});`,
  },
  {
    name: 'all',
    signature: 'Promise.all(iterable)',
    description: 'ç­‰å¾…æ‰€æœ‰ Promise å®Œæˆï¼Œæˆ–ä»»ä¸€ Promise å¤±è´¥',
    example: `// å¹¶è¡Œæ‰§è¡Œå¤šä¸ª Promise
const promise1 = Promise.resolve(1);
const promise2 = Promise.resolve(2);
const promise3 = new Promise(resolve => setTimeout(resolve, 100, 3));

Promise.all([promise1, promise2, promise3])
  .then(values => {
    console.log(values); // [1, 2, 3]
  });`,
  },
  {
    name: 'allSettled',
    signature: 'Promise.allSettled(iterable)',
    description: 'ç­‰å¾…æ‰€æœ‰ Promise å®Œæˆï¼ˆæ— è®ºæˆåŠŸæˆ–å¤±è´¥ï¼‰',
    example: `// è·å–æ‰€æœ‰ Promise çš„ç»“æœ
const promises = [
  Promise.resolve(1),
  Promise.reject(new Error('å¤±è´¥')),
  Promise.resolve(3)
];

Promise.allSettled(promises)
  .then(results => {
    results.forEach(result => {
      if (result.status === 'fulfilled') {
        console.log('æˆåŠŸ:', result.value);
      } else {
        console.log('å¤±è´¥:', result.reason.message);
      }
    });
  });`,
  },
  {
    name: 'race',
    signature: 'Promise.race(iterable)',
    description: 'è¿”å›ç¬¬ä¸€ä¸ªè§£å†³ï¼ˆæ— è®ºæˆåŠŸæˆ–å¤±è´¥ï¼‰çš„ Promise',
    example: `// è·å–æœ€å…ˆå®Œæˆçš„ Promise
const promise1 = new Promise(resolve => setTimeout(resolve, 500, 'ç¬¬ä¸€ä¸ª'));
const promise2 = new Promise(resolve => setTimeout(resolve, 100, 'ç¬¬äºŒä¸ª'));

Promise.race([promise1, promise2])
  .then(value => {
    console.log(value); // 'ç¬¬äºŒä¸ª'
  });`,
  },
  {
    name: 'any',
    signature: 'Promise.any(iterable)',
    description: 'è¿”å›ç¬¬ä¸€ä¸ªæˆåŠŸçš„ Promiseï¼Œå¦‚æœå…¨éƒ¨å¤±è´¥åˆ™è¿”å› AggregateError',
    example: `// è·å–ç¬¬ä¸€ä¸ªæˆåŠŸçš„ Promise
const promises = [
  Promise.reject(new Error('é”™è¯¯1')),
  new Promise(resolve => setTimeout(resolve, 200, 'æˆåŠŸ1')),
  Promise.reject(new Error('é”™è¯¯2'))
];

Promise.any(promises)
  .then(value => {
    console.log(value); // 'æˆåŠŸ1'
  });`,
  },
]

const useCases = [
  {
    icon: 'ğŸŒ',
    title: 'API è¯·æ±‚',
    description: 'å¤„ç†ç½‘ç»œè¯·æ±‚å’Œå“åº”',
    example: `// ä½¿ç”¨ fetch API
function getUserData(userId) {
  return fetch(\`https://api.example.com/users/\${userId}\`)
    .then(response => {
      if (!response.ok) {
        throw new Error('ç½‘ç»œå“åº”å¼‚å¸¸');
      }
      return response.json();
    });
}

// ä½¿ç”¨
getUserData(123)
  .then(user => console.log(user))
  .catch(error => console.error(error));`,
  },
  {
    icon: 'ğŸ“',
    title: 'æ–‡ä»¶æ“ä½œ',
    description: 'å¼‚æ­¥è¯»å–æˆ–å†™å…¥æ–‡ä»¶',
    example: `// Node.js æ–‡ä»¶è¯»å–
const fs = require('fs').promises;

function readFileAsync(path) {
  return fs.readFile(path, 'utf8')
    .then(data => JSON.parse(data))
    .catch(error => {
      console.error('æ–‡ä»¶è¯»å–å¤±è´¥:', error);
      return {};
    });
}

// ä½¿ç”¨
readFileAsync('config.json')
  .then(config => console.log(config));`,
  },
  {
    icon: 'â±ï¸',
    title: 'å®šæ—¶æ“ä½œ',
    description: 'å®ç°å¸¦å»¶è¿Ÿçš„å¼‚æ­¥æ“ä½œ',
    example: `// å¸¦å»¶è¿Ÿçš„ Promise
function delay(ms) {
  return new Promise(resolve => setTimeout(resolve, ms));
}

// ä½¿ç”¨
delay(2000)
  .then(() => {
    console.log('2ç§’åæ‰§è¡Œ');
    return delay(1000);
  })
  .then(() => {
    console.log('å†1ç§’åæ‰§è¡Œ');
  });`,
  },
  {
    icon: 'ğŸ”„',
    title: 'å¼‚æ­¥æµç¨‹æ§åˆ¶',
    description: 'ç®¡ç†å¤æ‚çš„å¼‚æ­¥æ“ä½œåºåˆ—',
    example: `// é¡ºåºæ‰§è¡Œå¼‚æ­¥æ“ä½œ
function executeSequentially(promises) {
  return promises.reduce((chain, promiseFunc) => {
    return chain.then(promiseFunc);
  }, Promise.resolve());
}

// ä½¿ç”¨
executeSequentially([
  () => doTask1(),
  () => doTask2(),
  () => doTask3()
])
.then(finalResult => console.log(finalResult));`,
  },
]

const runDemo = () => {
  demoResult.value = 'Promise æ‰§è¡Œä¸­...'

  let promise: Promise<void> | null = new Promise((resolve, reject) => {
    setTimeout(() => {
      Math.random() > 0.3 ? resolve('æˆåŠŸå®Œæˆæ“ä½œï¼') : reject(new Error('æ“ä½œå¤±è´¥ï¼')) // eslint-disable-line
    }, 1500)
  })
    .then((result) => {
      demoResult.value = `âœ… æˆåŠŸ: ${result}`
    })
    .catch((error) => {
      demoResult.value = `âŒ é”™è¯¯: ${error.message}`
    })
    .finally(() => {
      setTimeout(() => {
        demoResult.value = 'æ¼”ç¤ºå®Œæˆï¼Œå¯ä»¥å†æ¬¡è¿è¡Œ'
      }, 2000)
      promise = null
    })
}

const runReturnPrimitive = () => {
  returnPrimitiveResult.value = 'æ‰§è¡Œä¸­...'

  Promise.resolve(10)
    .then((value) => {
      returnPrimitiveResult.value = `ç¬¬ä¸€æ­¥: ${value}`
      return value * 2
    })
    .then((value) => {
      returnPrimitiveResult.value += `\\nç¬¬äºŒæ­¥: ${value}`
      return value + 5
    })
    .then((value) => {
      returnPrimitiveResult.value += `\\næœ€ç»ˆç»“æœ: ${value}`
    })
}

const runReturnPromise = () => {
  returnPromiseResult.value = 'æ‰§è¡Œä¸­...'

  Promise.resolve(10)
    .then((value) => {
      returnPromiseResult.value = `ç¬¬ä¸€æ­¥: ${value}`
      return new Promise((resolve) => {
        setTimeout(() => resolve(value * 2), 1000)
      })
    })
    .then((value) => {
      returnPromiseResult.value += `\\nç¬¬äºŒæ­¥: ${value}`
      return new Promise((resolve) => {
        setTimeout(() => resolve(Number(value) + 5), 1000)
      })
    })
    .then((value) => {
      returnPromiseResult.value += `\\næœ€ç»ˆç»“æœ: ${value}`
    })
}
</script>

<style lang="less" scoped>

// é¢œè‰²å˜é‡
@primary-color: #4a6cf7;
@primary-light: #e6eeff;
@secondary-color: #3a56d4;
@accent-color: #ff9800;
@text-color: #2c3e50;
@light-gray: #f8f9fc;
@border-color: #e0e6ed;
@card-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
@success-color: #4caf50;
@error-color: #f44336;

// åŸºç¡€æ ·å¼
.promise-container {
  font-family: 'Inter', sans-serif;
  max-width: 1200px;
  margin: 0 auto;
  padding: 2rem 1.5rem;
  color: @text-color;
  background: #fff;
  line-height: 1.6;
}

.header {
  text-align: center;
  margin-bottom: 3rem;
  padding-bottom: 2rem;
  border-bottom: 1px solid @border-color;

  .title-wrapper {
    margin-bottom: 2rem;

    h1 {
      font-size: 2.5rem;
      font-weight: 700;
      color: @secondary-color;
      margin-bottom: 0.5rem;
    }

    .subtitle {
      font-size: 1.3rem;
      color: #666;
      font-weight: 300;
    }
  }
}

.demo-area {
  max-width: 900px;
  margin: 0 auto;

  .promise-visualization {
    background: @light-gray;
    border-radius: 16px;
    padding: 2rem;
    box-shadow: @card-shadow;

    .promise-flow {
      display: flex;
      justify-content: center;
      align-items: center;
      gap: 2rem;
      margin-bottom: 2rem;

      .state {
        text-align: center;
        padding: 1.5rem;
        border-radius: 12px;
        min-width: 150px;
        box-shadow: @card-shadow;
        background: white;

        .state-icon {
          font-size: 2.5rem;
          margin: 0.5rem 0;
        }

        .state-label {
          font-weight: 600;
        }

        &.pending {
          border-top: 4px solid #ffc107;
        }

        &.resolved {
          border-top: 4px solid @success-color;
        }

        &.rejected {
          border-top: 4px solid @error-color;
        }
      }

      .flow-arrow {
        font-size: 2rem;
        color: #777;
      }
    }

    .demo-controls {
      text-align: center;

      .run-button {
        background: @primary-color;
        color: white;
        border: none;
        padding: 0.8rem 1.8rem;
        border-radius: 30px;
        font-size: 1.1rem;
        font-weight: 500;
        cursor: pointer;
        transition: all 0.3s;

        &:hover {
          background: darken(@primary-color, 10%);
          transform: translateY(-2px);
        }
      }

      .demo-result {
        margin-top: 1.5rem;
        padding: 1.5rem;
        background: white;
        border-radius: 12px;
        box-shadow: @card-shadow;
        border: 1px solid @border-color;
        min-height: 80px;
        text-align: left;

        .result-label {
          font-weight: 500;
          margin-bottom: 0.5rem;
          color: @primary-color;
        }

        .result-content {
          font-family: 'Source Code Pro', monospace;
          white-space: pre-line;
        }
      }
    }
  }
}

.content {
  display: grid;
  gap: 3rem;
}

.section-title {
  font-size: 1.8rem;
  color: @secondary-color;
  text-align: center;
  margin-bottom: 2rem;
  padding-bottom: 0.8rem;
  position: relative;

  &::after {
    content: '';
    position: absolute;
    bottom: 0;
    left: 50%;
    transform: translateX(-50%);
    width: 80px;
    height: 4px;
    background: linear-gradient(to right, @primary-color, @accent-color);
    border-radius: 2px;
  }
}

.intro-section {
  .intro-card {
    background: @light-gray;
    border-radius: 16px;
    padding: 2.5rem;
    box-shadow: @card-shadow;

    h2 {
      color: @secondary-color;
      margin-top: 0;
      margin-bottom: 1.5rem;
      font-size: 1.8rem;
    }

    p {
      margin-bottom: 2rem;
      font-size: 1.1rem;
      line-height: 1.8;
    }
  }

  .promise-states {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
    gap: 1.5rem;
    margin-top: 1.5rem;

    .state-card {
      background: white;
      border-radius: 12px;
      padding: 1.5rem;
      text-align: center;
      box-shadow: @card-shadow;
      transition: transform 0.3s ease;

      &:hover {
        transform: translateY(-5px);
      }

      .state-icon {
        font-size: 2.5rem;
        margin-bottom: 1rem;

        &.pending {
          color: #ffc107;
        }

        &.fulfilled {
          color: @success-color;
        }

        &.rejected {
          color: @error-color;
        }
      }

      h3 {
        color: @secondary-color;
        margin: 0.5rem 0;
      }

      p {
        margin: 0;
        color: #666;
        font-size: 0.95rem;
      }
    }
  }
}

.basic-usage {
  .usage-grid {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 1.5rem;

    @media (max-width: 900px) {
      grid-template-columns: 1fr;
    }

    .usage-card {
      background: white;
      border-radius: 12px;
      padding: 1.5rem;
      box-shadow: @card-shadow;
      border-top: 4px solid @primary-color;

      h3 {
        color: @secondary-color;
        margin-top: 0;
        margin-bottom: 1rem;
      }

      pre {
        background: #2d2d2d;
        border-radius: 8px;
        padding: 1.2rem;
        overflow-x: auto;

        code {
          font-family: 'Source Code Pro', monospace;
          color: #f8f8f2;
          font-size: 0.95rem;
          line-height: 1.6;

          .comment {
            color: #6a9955;
          }
          .keyword {
            color: #c586c0;
          }
          .function {
            color: #dcdcaa;
          }
          .string {
            color: #ce9178;
          }
        }
      }

      p {
        margin: 1rem 0 0;
        font-size: 0.95rem;
        color: #555;
        line-height: 1.7;
      }
    }
  }
}

.chaining-section {
  .chaining-example {
    display: grid;
    grid-template-columns: 1.5fr 1fr;
    gap: 1.5rem;
    background: white;
    border-radius: 16px;
    padding: 2rem;
    box-shadow: @card-shadow;

    @media (max-width: 900px) {
      grid-template-columns: 1fr;
    }

    .code-block {
      pre {
        margin: 0;
        background: #2d2d2d;
        border-radius: 8px;
        padding: 1.2rem;
        overflow-x: auto;

        code {
          font-family: 'Source Code Pro', monospace;
          color: #f8f8f2;
          font-size: 0.95rem;
          line-height: 1.6;
        }
      }
    }

    .explanation {
      h3 {
        color: @secondary-color;
        margin-top: 0;
        margin-bottom: 1rem;
      }

      ul {
        padding-left: 1.2rem;

        li {
          margin-bottom: 0.8rem;
          line-height: 1.6;
        }
      }
    }
  }
}

.return-values {
  .return-grid {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 1.5rem;

    @media (max-width: 900px) {
      grid-template-columns: 1fr;
    }

    .return-card {
      background: white;
      border-radius: 12px;
      padding: 1.5rem;
      box-shadow: @card-shadow;
      border-top: 4px solid @primary-color;

      h3 {
        color: @secondary-color;
        margin-top: 0;
        margin-bottom: 1rem;
      }

      pre {
        background: #2d2d2d;
        border-radius: 8px;
        padding: 1.2rem;
        overflow-x: auto;
        margin-bottom: 1rem;

        code {
          font-family: 'Source Code Pro', monospace;
          color: #f8f8f2;
          font-size: 0.95rem;
          line-height: 1.6;
        }
      }

      .return-result {
        background: #f8f9fc;
        border-radius: 8px;
        padding: 1rem;
        margin-bottom: 1rem;
        min-height: 60px;
        font-family: 'Source Code Pro', monospace;
        white-space: pre-line;
      }

      .run-small {
        background: @primary-light;
        color: @primary-color;
        border: 1px solid @primary-color;
        padding: 0.4rem 1rem;
        border-radius: 4px;
        font-family: 'Inter', sans-serif;
        font-weight: 500;
        cursor: pointer;
        margin-bottom: 1rem;
        transition: all 0.2s;

        &:hover {
          background: @primary-color;
          color: white;
        }
      }

      .return-desc {
        margin: 0;
        font-size: 0.9rem;
        color: #666;
      }
    }
  }
}

.static-methods {
  .methods-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
    gap: 1.5rem;
  }

  .method-card {
    background: white;
    border-radius: 12px;
    padding: 1.5rem;
    box-shadow: @card-shadow;
    border-left: 4px solid @primary-color;

    .method-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 1rem;
      flex-wrap: wrap;

      .method-name {
        font-weight: 700;
        color: @secondary-color;
        font-size: 1.2rem;
      }

      .method-signature {
        font-family: 'Source Code Pro', monospace;
        background: #f0f4f8;
        padding: 0.3rem 0.6rem;
        border-radius: 4px;
        font-size: 0.9rem;
        color: #d35400;
      }
    }

    .method-description {
      margin-bottom: 1rem;
      font-size: 0.95rem;
      color: #555;
      line-height: 1.7;
    }

    .method-example {
      pre {
        margin: 0;
        background: #2d2d2d;
        border-radius: 8px;
        padding: 1.2rem;
        overflow-x: auto;

        code {
          font-family: 'Source Code Pro', monospace;
          color: #f8f8f2;
          font-size: 0.9rem;
          line-height: 1.5;
        }
      }
    }
  }
}

.performance-section {
  .performance-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
    gap: 1.5rem;
  }

  .performance-card {
    background: white;
    border-radius: 12px;
    padding: 1.5rem;
    box-shadow: @card-shadow;

    h3 {
      color: @secondary-color;
      margin-top: 0;
      margin-bottom: 1rem;
      padding-bottom: 0.5rem;
      border-bottom: 2px solid @primary-light;
    }

    ul {
      padding-left: 1.2rem;

      li {
        margin-bottom: 0.8rem;
        line-height: 1.6;
      }
    }

    p {
      margin: 0 0 1rem;
      font-size: 0.95rem;
      color: #555;
      line-height: 1.7;
    }
  }
}

.use-cases {
  .cases-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
    gap: 1.5rem;
  }

  .case-card {
    display: flex;
    background: white;
    border-radius: 12px;
    padding: 1.5rem;
    box-shadow: @card-shadow;
    gap: 1.2rem;
    border-top: 3px solid @primary-color;
    transition: transform 0.3s ease;

    &:hover {
      transform: translateY(-5px);
    }

    .case-icon {
      width: 50px;
      height: 50px;
      background: @primary-light;
      color: @primary-color;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1.5rem;
      flex-shrink: 0;
    }

    .case-content {
      flex: 1;

      h3 {
        color: @secondary-color;
        margin-top: 0;
        margin-bottom: 0.8rem;
        font-size: 1.2rem;
      }

      p {
        margin: 0 0 1rem;
        font-size: 0.95rem;
        color: #555;
        line-height: 1.7;
      }
    }

    .case-example {
      background: #2d2d2d;
      border-radius: 6px;
      padding: 0.8rem;
      margin-top: 0.5rem;

      pre {
        margin: 0;

        code {
          font-family: 'Source Code Pro', monospace;
          color: #f8f8f2;
          font-size: 0.9rem;
          line-height: 1.5;
        }
      }
    }
  }
}

.footer {
  margin-top: 4rem;
  padding: 2rem;
  text-align: center;
  background: @light-gray;
  border-radius: 16px;
  font-size: 1.1rem;
  font-weight: 500;
  color: @secondary-color;
  box-shadow: @card-shadow;
  border-top: 2px solid fade(@primary-color, 30%);

  p {
    margin-bottom: 1.5rem;
  }

  .resources {
    margin-top: 1.5rem;

    h3 {
      font-size: 1.1rem;
      margin-bottom: 0.8rem;
    }

    ul {
      list-style: none;
      padding: 0;
      display: flex;
      justify-content: center;
      gap: 1.5rem;
      flex-wrap: wrap;

      li a {
        color: @primary-color;
        text-decoration: none;
        font-weight: 500;

        &:hover {
          text-decoration: underline;
        }
      }
    }
  }
}

@media (max-width: 768px) {
  .promise-container {
    padding: 1.5rem 1rem;
  }

  .header h1 {
    font-size: 2rem;
  }

  .section-title {
    font-size: 1.6rem;
  }

  .intro-card {
    padding: 1.5rem !important;
  }

  .chaining-example {
    grid-template-columns: 1fr !important;
  }
}
</style>
