<template>
  <div class="page-container">
    <div class="content-wrapper">
      <!-- é¡µé¢å¤´éƒ¨ -->
      <header class="page-header">
        <h1 class="page-title">
          <span class="card-icon">ğŸ”’</span>
          JavaScript ä¸¥æ ¼æ¨¡å¼ä»‹ç»
        </h1>
        <p class="page-subtitle">æå‡ä»£ç è´¨é‡ä¸å®‰å…¨æ€§çš„å…³é”®ç‰¹æ€§</p>
      </header>

      <!-- ä»‹ç»éƒ¨åˆ† -->
      <div class="card mb-xl">
        <div class="card-header">
          <h2 class="card-title">
            <span class="card-icon">ğŸ”’</span>
            ä»€ä¹ˆæ˜¯ä¸¥æ ¼æ¨¡å¼ï¼Ÿ
          </h2>
        </div>
        <div class="card-body">
          <div class="grid grid-2">
            <div class="definition-card">
              <div class="strict-icon">ğŸ”’</div>
              <div>
                <h3 class="text-lg font-semibold mb-md">ä¸¥æ ¼æ¨¡å¼å®šä¹‰</h3>
                <p class="text-secondary">
                  ä¸¥æ ¼æ¨¡å¼ï¼ˆStrict Modeï¼‰æ˜¯ECMAScript
                  5å¼•å…¥çš„ä¸€ç§<strong>å—é™çš„JavaScriptå˜ä½“</strong>ï¼Œå®ƒé€šè¿‡æŠ›å‡ºé”™è¯¯æ¥æ¶ˆé™¤ä¸€äº›é™é»˜é”™è¯¯ï¼Œä½¿JavaScriptå¼•æ“èƒ½å¤Ÿæ‰§è¡Œæ›´å¤šä¼˜åŒ–ï¼Œå¹¶ç¦æ­¢ä½¿ç”¨ä¸€äº›å¯èƒ½åœ¨æœªæ¥ç‰ˆæœ¬ä¸­å®šä¹‰çš„è¯­æ³•ã€‚
                </p>
              </div>
            </div>

            <div class="benefits-card">
              <h3 class="text-lg font-semibold mb-md">ä½¿ç”¨ä¸¥æ ¼æ¨¡å¼çš„å¥½å¤„</h3>
              <div class="benefits-grid">
                <div class="benefit-item">
                  <div class="benefit-icon">ğŸš«</div>
                  <h4>æ¶ˆé™¤é™é»˜é”™è¯¯</h4>
                  <p>å°†é™é»˜é”™è¯¯è½¬ä¸ºæŠ›å‡ºé”™è¯¯</p>
                </div>
                <div class="benefit-item">
                  <div class="benefit-icon">âš¡</div>
                  <h4>ä¼˜åŒ–æ‰§è¡Œæ•ˆç‡</h4>
                  <p>å¸®åŠ©JavaScriptå¼•æ“ä¼˜åŒ–ä»£ç </p>
                </div>
                <div class="benefit-item">
                  <div class="benefit-icon">ğŸ›¡ï¸</div>
                  <h4>é¿å…æ„å¤–å…¨å±€å˜é‡</h4>
                  <p>é˜²æ­¢æ„å¤–åˆ›å»ºå…¨å±€å˜é‡</p>
                </div>
                <div class="benefit-item">
                  <div class="benefit-icon">ğŸ”®</div>
                  <h4>é¢å‘æœªæ¥</h4>
                  <p>ç¦æ­¢æœªæ¥å¯èƒ½ä¿ç•™çš„è¯­æ³•</p>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- å¯ç”¨æ–¹æ³• -->
      <div class="card mb-xl">
        <div class="card-header">
          <h2 class="card-title">
            <span class="card-icon">âš™ï¸</span>
            å¯ç”¨ä¸¥æ ¼æ¨¡å¼
          </h2>
        </div>
        <div class="card-body">
          <div class="grid grid-3">
            <div class="method-card">
              <h3 class="text-lg font-semibold mb-md">å…¨å±€å¯ç”¨</h3>
              <div class="code-block">
                <pre><code>'use strict';

// æ•´ä¸ªè„šæœ¬å°†è¿è¡Œåœ¨ä¸¥æ ¼æ¨¡å¼
function doSomething() {
  // ä¸¥æ ¼æ¨¡å¼ä»£ç 
}</code></pre>
              </div>
            </div>
            <div class="method-card">
              <h3 class="text-lg font-semibold mb-md">å‡½æ•°ä½œç”¨åŸŸå¯ç”¨</h3>
              <div class="code-block">
                <pre><code>function strictFunction() {
  'use strict';

  // ä»…åœ¨è¯¥å‡½æ•°å†…å¯ç”¨ä¸¥æ ¼æ¨¡å¼
}</code></pre>
              </div>
            </div>
            <div class="method-card">
              <h3 class="text-lg font-semibold mb-md">æ¨¡å—è‡ªåŠ¨å¯ç”¨</h3>
              <div class="code-block">
                <pre><code>// ES6æ¨¡å—é»˜è®¤åœ¨ä¸¥æ ¼æ¨¡å¼ä¸‹æ‰§è¡Œ
export function moduleFunction() {
  // è‡ªåŠ¨å¯ç”¨ä¸¥æ ¼æ¨¡å¼
}</code></pre>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- ä¸¥æ ¼æ¨¡å¼ç¦æ­¢äº‹é¡¹ -->
      <div class="card mb-xl">
        <div class="card-header">
          <h2 class="card-title">
            <span class="card-icon">ğŸš«</span>
            ä¸¥æ ¼æ¨¡å¼ç¦æ­¢äº‹é¡¹
          </h2>
        </div>
        <div class="card-body">
          <div class="grid grid-2">
            <!-- å˜é‡ç›¸å…³é™åˆ¶ -->
            <div class="prohibited-category">
              <h3 class="text-lg font-semibold mb-md text-error">å˜é‡ç›¸å…³é™åˆ¶</h3>
              <div class="prohibited-items">
                <div class="prohibited-item">
                  <div class="item-header">
                    <div class="item-icon">âŒ</div>
                    <h4>æ„å¤–åˆ›å»ºå…¨å±€å˜é‡</h4>
                  </div>
                  <p class="text-secondary mb-sm">æœªå£°æ˜å˜é‡ç›´æ¥èµ‹å€¼ä¼šæŠ›å‡ºé”™è¯¯</p>
                  <div class="code-block">
                    <pre><code>'use strict';
mistypedVariable = 17; // æŠ›å‡º ReferenceError</code></pre>
                  </div>
                </div>

                <div class="prohibited-item">
                  <div class="item-header">
                    <div class="item-icon">âŒ</div>
                    <h4>åˆ é™¤å˜é‡</h4>
                  </div>
                  <p class="text-secondary mb-sm">åˆ é™¤å˜é‡ã€å‡½æ•°æˆ–å‡½æ•°å‚æ•°ä¼šæŠ›å‡ºè¯­æ³•é”™è¯¯</p>
                  <div class="code-block">
                    <pre><code>'use strict';
var x;
delete x; // è¯­æ³•é”™è¯¯</code></pre>
                  </div>
                </div>

                <div class="prohibited-item">
                  <div class="item-header">
                    <div class="item-icon">âŒ</div>
                    <h4>ä¿ç•™å…³é”®å­—ä½œä¸ºå˜é‡å</h4>
                  </div>
                  <p class="text-secondary mb-sm">ç¦æ­¢ä½¿ç”¨æœªæ¥ä¿ç•™å­—ä½œä¸ºæ ‡è¯†ç¬¦</p>
                  <div class="code-block">
                    <pre><code>'use strict';
var implements; // è¯­æ³•é”™è¯¯
var interface;  // è¯­æ³•é”™è¯¯
var package;    // è¯­æ³•é”™è¯¯</code></pre>
                  </div>
                </div>
              </div>
            </div>

            <!-- å¯¹è±¡æ“ä½œé™åˆ¶ -->
            <div class="prohibited-category">
              <h3 class="text-lg font-semibold mb-md text-error">å¯¹è±¡æ“ä½œé™åˆ¶</h3>
              <div class="prohibited-items">
                <div class="prohibited-item">
                  <div class="item-header">
                    <div class="item-icon">âŒ</div>
                    <h4>åªè¯»å±æ€§èµ‹å€¼</h4>
                  </div>
                  <p class="text-secondary mb-sm">ç»™ä¸å¯å†™å±æ€§èµ‹å€¼ä¼šæŠ›å‡ºé”™è¯¯</p>
                  <div class="code-block">
                    <pre><code>'use strict';
var obj = {};
Object.defineProperty(obj, 'x', {
  value: 42,
  writable: false
});

obj.x = 9; // æŠ›å‡º TypeError</code></pre>
                  </div>
                </div>

                <div class="prohibited-item">
                  <div class="item-header">
                    <div class="item-icon">âŒ</div>
                    <h4>ä¸å¯æ‰©å±•å¯¹è±¡æ·»åŠ å±æ€§</h4>
                  </div>
                  <p class="text-secondary mb-sm">ç»™ä¸å¯æ‰©å±•å¯¹è±¡æ·»åŠ æ–°å±æ€§ä¼šæŠ›å‡ºé”™è¯¯</p>
                  <div class="code-block">
                    <pre><code>'use strict';
var fixed = {};
Object.preventExtensions(fixed);
fixed.newProp = 'ohai'; // æŠ›å‡º TypeError</code></pre>
                  </div>
                </div>

                <div class="prohibited-item">
                  <div class="item-header">
                    <div class="item-icon">âŒ</div>
                    <h4>åˆ é™¤ä¸å¯åˆ é™¤å±æ€§</h4>
                  </div>
                  <p class="text-secondary mb-sm">åˆ é™¤ä¸å¯é…ç½®å±æ€§ä¼šæŠ›å‡ºé”™è¯¯</p>
                  <div class="code-block">
                    <pre><code>'use strict';
delete Object.prototype; // æŠ›å‡º TypeError</code></pre>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <!-- å‡½æ•°ç›¸å…³é™åˆ¶ -->
          <div class="grid grid-2 mt-xl">
            <div class="prohibited-category">
              <h3 class="text-lg font-semibold mb-md text-error">å‡½æ•°ç›¸å…³é™åˆ¶</h3>
              <div class="prohibited-items">
                <div class="prohibited-item">
                  <div class="item-header">
                    <div class="item-icon">âŒ</div>
                    <h4>é‡å¤å‚æ•°å</h4>
                  </div>
                  <p class="text-secondary mb-sm">å‡½æ•°å‚æ•°åé‡å¤ä¼šæŠ›å‡ºè¯­æ³•é”™è¯¯</p>
                  <div class="code-block">
                    <pre><code>'use strict';
function sum(a, a, c) { // è¯­æ³•é”™è¯¯
  return a + a + c;
}</code></pre>
                  </div>
                </div>

                <div class="prohibited-item">
                  <div class="item-header">
                    <div class="item-icon">âŒ</div>
                    <h4>arguments.callee</h4>
                  </div>
                  <p class="text-secondary mb-sm">ç¦æ­¢ä½¿ç”¨arguments.callee</p>
                  <div class="code-block">
                    <pre><code>'use strict';
function factorial(n) {
  if (n <= 1) return 1;
  return n * arguments.callee(n-1); // ç±»å‹é”™è¯¯
}</code></pre>
                  </div>
                </div>

                <div class="prohibited-item">
                  <div class="item-header">
                    <div class="item-icon">âŒ</div>
                    <h4>å‡½æ•°å‚æ•°ä¸argumentsä¸åŒæ­¥</h4>
                  </div>
                  <p class="text-secondary mb-sm">ä¿®æ”¹å‚æ•°å€¼ä¸ä¼šåŒæ­¥åˆ°argumentså¯¹è±¡</p>
                  <div class="code-block">
                    <pre><code>'use strict';
function func(a) {
  a = 2;
  return [a, arguments[0]];
}

func(1); // è¿”å› [2, 1] éä¸¥æ ¼æ¨¡å¼è¿”å› [2, 2]</code></pre>
                  </div>
                </div>
              </div>
            </div>

            <!-- å…¶ä»–é‡è¦é™åˆ¶ -->
            <div class="prohibited-category">
              <h3 class="text-lg font-semibold mb-md text-error">å…¶ä»–é‡è¦é™åˆ¶</h3>
              <div class="prohibited-items">
                <div class="prohibited-item">
                  <div class="item-header">
                    <div class="item-icon">âŒ</div>
                    <h4>å…«è¿›åˆ¶å­—é¢é‡</h4>
                  </div>
                  <p class="text-secondary mb-sm">ç¦æ­¢ä½¿ç”¨å…«è¿›åˆ¶æ•°å­—è¯­æ³•ï¼ˆ0å¼€å¤´ï¼‰</p>
                  <div class="code-block">
                    <pre><code>'use strict';
var sum = 015 + // è¯­æ³•é”™è¯¯
          197 +
          142;</code></pre>
                  </div>
                </div>

                <div class="prohibited-item">
                  <div class="item-header">
                    <div class="item-icon">âŒ</div>
                    <h4>withè¯­å¥</h4>
                  </div>
                  <p class="text-secondary mb-sm">ç¦æ­¢ä½¿ç”¨withè¯­å¥</p>
                  <div class="code-block">
                    <pre><code>'use strict';
with (Math) { // è¯­æ³•é”™è¯¯
  x = cos(3 * PI) + sin(LN10);
}</code></pre>
                  </div>
                </div>

                <div class="prohibited-item">
                  <div class="item-header">
                    <div class="item-icon">âŒ</div>
                    <h4>evalåˆ›å»ºå˜é‡</h4>
                  </div>
                  <p class="text-secondary mb-sm">evalåˆ›å»ºçš„å˜é‡ä¸ä¼šæ³„æ¼åˆ°å¤–éƒ¨ä½œç”¨åŸŸ</p>
                  <div class="code-block">
                    <pre><code>'use strict';
eval('var x = 2');
console.log(x); // æŠ›å‡º ReferenceError</code></pre>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- ä½¿ç”¨å»ºè®® -->
      <div class="card mb-xl">
        <div class="card-header">
          <h2 class="card-title">
            <span class="card-icon">ğŸ’¡</span>
            ä¸¥æ ¼æ¨¡å¼ä½¿ç”¨å»ºè®®
          </h2>
        </div>
        <div class="card-body">
          <div class="recommendations">
            <div class="recommendation-item">
              <div class="rec-number">1</div>
              <div class="rec-content">
                <h3 class="text-lg font-semibold mb-sm">æ–°é¡¹ç›®é»˜è®¤å¯ç”¨</h3>
                <p class="text-secondary">
                  æ‰€æœ‰æ–°JavaScripté¡¹ç›®éƒ½åº”å¯ç”¨ä¸¥æ ¼æ¨¡å¼ï¼Œä»¥æé«˜ä»£ç è´¨é‡å’Œå®‰å…¨æ€§ã€‚
                </p>
              </div>
            </div>

            <div class="recommendation-item">
              <div class="rec-number">2</div>
              <div class="rec-content">
                <h3 class="text-lg font-semibold mb-sm">é€æ­¥è¿ç§»æ—§ä»£ç </h3>
                <p class="text-secondary">å¯¹äºæ—§é¡¹ç›®ï¼Œå¯ä»¥é€ä¸ªæ–‡ä»¶æˆ–å‡½æ•°å¯ç”¨ä¸¥æ ¼æ¨¡å¼ï¼Œé€æ­¥è¿ç§»ã€‚</p>
              </div>
            </div>

            <div class="recommendation-item">
              <div class="rec-number">3</div>
              <div class="rec-content">
                <h3 class="text-lg font-semibold mb-sm">é¿å…å…¨å±€å¯ç”¨</h3>
                <p class="text-secondary">
                  åœ¨åˆå¹¶å¤šä¸ªè„šæœ¬çš„é¡¹ç›®ä¸­ï¼Œé¿å…å…¨å±€å¯ç”¨ï¼Œä»¥é˜²æ­¢éä¸¥æ ¼æ¨¡å¼è„šæœ¬å‡ºç°é—®é¢˜ã€‚
                </p>
              </div>
            </div>

            <div class="recommendation-item">
              <div class="rec-number">4</div>
              <div class="rec-content">
                <h3 class="text-lg font-semibold mb-sm">ä¼˜å…ˆä½¿ç”¨æ¨¡å—</h3>
                <p class="text-secondary">ES6æ¨¡å—è‡ªåŠ¨å¯ç”¨ä¸¥æ ¼æ¨¡å¼ï¼Œæ˜¯æ›´å¥½çš„é€‰æ‹©ã€‚</p>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- é¡µè„š -->
      <div class="card">
        <div class="card-body">
          <p class="text-center text-secondary">
            ä¸¥æ ¼æ¨¡å¼æ˜¯ç¼–å†™å¥å£®ã€å¯ç»´æŠ¤JavaScriptä»£ç çš„é‡è¦å·¥å…·ï¼Œç°ä»£JavaScriptå¼€å‘åº”è¯¥å§‹ç»ˆä½¿ç”¨ä¸¥æ ¼æ¨¡å¼ã€‚
          </p>
        </div>
      </div>
    </div>
  </div>
</template>

<script setup lang="ts">
import { ref } from 'vue'
import '@/assets/css/unified-styles.css'

// ä¸¥æ ¼æ¨¡å¼æ£€æµ‹
const isStrictMode = (() => {
  'use strict'
  return !this
})()

// ç¤ºä¾‹æ•°æ®
const strictModeStatus = ref(isStrictMode ? 'å·²å¯ç”¨' : 'æœªå¯ç”¨')
</script>

<style scoped>
/* ç»„ä»¶ç‰¹å®šæ ·å¼ */
.definition-card {
  display: flex;
  gap: var(--spacing-lg);
  align-items: flex-start;
}

.strict-icon {
  font-size: 3rem;
  width: 80px;
  height: 80px;
  background: var(--primary-bg);
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  flex-shrink: 0;
}

.benefits-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
  gap: var(--spacing-md);
}

.benefit-item {
  background: var(--bg-secondary);
  border-radius: var(--radius-lg);
  padding: var(--spacing-md);
  text-align: center;
  transition: transform 0.3s ease;
}

.benefit-item:hover {
  transform: translateY(-5px);
}

.benefit-icon {
  font-size: 2.5rem;
  margin-bottom: var(--spacing-sm);
}

.benefit-item h4 {
  margin: 0 0 var(--spacing-sm) 0;
  color: var(--text-primary);
}

.benefit-item p {
  margin: 0;
  color: var(--text-secondary);
  font-size: var(--text-sm);
}

.method-card {
  background: var(--bg-secondary);
  border-radius: var(--radius-lg);
  padding: var(--spacing-lg);
  border: 1px solid var(--border-light);
}

.prohibited-category {
  background: var(--bg-secondary);
  border-radius: var(--radius-lg);
  padding: var(--spacing-lg);
  border: 1px solid var(--border-light);
}

.prohibited-items {
  display: flex;
  flex-direction: column;
  gap: var(--spacing-lg);
}

.prohibited-item {
  padding-top: var(--spacing-lg);
  border-top: 1px dashed var(--border-light);
}

.prohibited-item:first-child {
  padding-top: 0;
  border-top: none;
}

.item-header {
  display: flex;
  align-items: center;
  gap: var(--spacing-sm);
  margin-bottom: var(--spacing-sm);
}

.item-icon {
  font-size: 1.5rem;
  color: var(--error-color);
}

.item-header h4 {
  margin: 0;
  color: var(--text-primary);
}

.recommendations {
  display: flex;
  flex-direction: column;
  gap: var(--spacing-lg);
}

.recommendation-item {
  display: flex;
  gap: var(--spacing-lg);
  padding: var(--spacing-lg) 0;
  border-bottom: 1px solid var(--border-light);
}

.recommendation-item:last-child {
  border-bottom: none;
}

.rec-number {
  width: 40px;
  height: 40px;
  background: var(--primary-color);
  color: white;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: bold;
  font-size: var(--text-lg);
  flex-shrink: 0;
}

.rec-content h3 {
  margin: 0 0 var(--spacing-sm) 0;
  color: var(--text-primary);
}

.rec-content p {
  margin: 0;
  color: var(--text-secondary);
  line-height: var(--leading-relaxed);
}

/* å“åº”å¼è°ƒæ•´ */
@media (max-width: 768px) {
  .grid-2,
  .grid-3 {
    grid-template-columns: 1fr;
  }

  .definition-card {
    flex-direction: column;
    text-align: center;
  }

  .recommendation-item {
    flex-direction: column;
    text-align: center;
  }
}
</style>
