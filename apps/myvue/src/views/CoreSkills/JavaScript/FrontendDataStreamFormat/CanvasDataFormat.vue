<template>
  <div class="canvas-data-container">
    <header class="header">
      <h1>Canvas æ•°æ®æµå¤„ç†è¯¦è§£</h1>
      <p>æŒæ¡ Canvas æ•°æ®çš„è·å–ã€è½¬æ¢ä¸å¤„ç†æŠ€å·§</p>
    </header>

    <div class="content-grid">
      <!-- ä»‹ç»éƒ¨åˆ† -->
      <section class="card intro">
        <div class="section-header">
          <div class="icon">ğŸ¨</div>
          <h2>Canvas æ•°æ®æµä»‹ç»</h2>
        </div>
        <div class="content">
          <div class="definition">
            <p>Canvas æ•°æ®æµå¤„ç†æŒ‡çš„æ˜¯ä» HTML5 Canvas å…ƒç´ è·å–å›¾åƒæ•°æ®ï¼Œå¹¶å°†å…¶è½¬æ¢ä¸ºå„ç§æ ¼å¼ï¼ˆå¦‚ ImageDataã€Data URLã€Blobã€ArrayBuffer ç­‰ï¼‰çš„æŠ€æœ¯ã€‚</p>
          </div>

          <div class="workflow">
            <h3>æ•°æ®å¤„ç†æµç¨‹</h3>
            <div class="workflow-steps">
              <div class="step">
                <div class="step-icon">1</div>
                <div class="step-content">
                  <h4>è·å– Canvas ä¸Šä¸‹æ–‡</h4>
                  <p>è®¿é—® Canvas çš„ç»˜å›¾ä¸Šä¸‹æ–‡</p>
                </div>
              </div>
              <div class="step">
                <div class="step-icon">2</div>
                <div class="step-content">
                  <h4>æå–å›¾åƒæ•°æ®</h4>
                  <p>ä½¿ç”¨ getImageData() æ–¹æ³•</p>
                </div>
              </div>
              <div class="step">
                <div class="step-icon">3</div>
                <div class="step-content">
                  <h4>è½¬æ¢æ•°æ®æ ¼å¼</h4>
                  <p>è½¬æ¢ä¸ºæ‰€éœ€æ ¼å¼</p>
                </div>
              </div>
              <div class="step">
                <div class="step-icon">4</div>
                <div class="step-content">
                  <h4>åº”ç”¨å¤„ç†ç»“æœ</h4>
                  <p>æ¸²æŸ“ã€å­˜å‚¨æˆ–ä¼ è¾“</p>
                </div>
              </div>
            </div>
          </div>

          <div class="data-types">
            <h3>æ”¯æŒçš„æ•°æ®ç±»å‹</h3>
            <div class="types-grid">
              <div class="type">ImageData</div>
              <div class="type">Data URL</div>
              <div class="type">Blob</div>
              <div class="type">File</div>
              <div class="type">ArrayBuffer</div>
              <div class="type">Image å¯¹è±¡</div>
            </div>
          </div>
        </div>
      </section>

      <!-- ImageData å¤„ç† -->
      <section class="card image-data">
        <div class="section-header">
          <div class="icon">ğŸ–¼ï¸</div>
          <h2>ImageData å¤„ç†</h2>
        </div>
        <div class="content">
          <div class="explanation">
            <p>ImageData å¯¹è±¡åŒ…å« Canvas åƒç´ çš„åŸå§‹æ•°æ®ï¼Œæ¯ä¸ªåƒç´ ç”±å››ä¸ªå€¼è¡¨ç¤ºï¼ˆRGBAï¼‰ã€‚</p>
          </div>

          <div class="usage-grid">
            <div class="usage-card">
              <h3>è·å– ImageData</h3>
              <pre><code>// è·å–æ•´ä¸ª Canvas çš„å›¾åƒæ•°æ®
const canvas = document.getElementById('myCanvas');
const ctx = canvas.getContext('2d');
const imageData = ctx.getImageData(0, 0, canvas.width, canvas.height);

// è·å–éƒ¨åˆ†åŒºåŸŸ
const partialData = ctx.getImageData(50, 50, 100, 100);</code></pre>
            </div>

            <div class="usage-card">
              <h3>æ“ä½œåƒç´ æ•°æ®</h3>
              <pre><code>// è®¿é—®åƒç´ æ•°æ®
const data = imageData.data;

// éå†æ‰€æœ‰åƒç´  (æ¯4ä¸ªå€¼ä»£è¡¨ä¸€ä¸ªåƒç´ )
for (let i = 0; i < data.length; i += 4) {
  const r = data[i];     // çº¢è‰² (0-255)
  const g = data[i+1];   // ç»¿è‰²
  const b = data[i+2];   // è“è‰²
  const a = data[i+3];   // é€æ˜åº¦

  // ç¤ºä¾‹ï¼šè½¬æ¢ä¸ºç°åº¦
  const gray = 0.299 * r + 0.587 * g + 0.114 * b;
  data[i] = data[i+1] = data[i+2] = gray;
}

// å°†ä¿®æ”¹åçš„æ•°æ®æ”¾å› Canvas
ctx.putImageData(imageData, 0, 0);</code></pre>
            </div>
          </div>

          <div class="performance-tip">
            <h3>æ€§èƒ½ä¼˜åŒ–æŠ€å·§</h3>
            <ul>
              <li>åªå¤„ç†éœ€è¦æ›´æ–°çš„åŒºåŸŸ</li>
              <li>ä½¿ç”¨ Web Workers å¤„ç†å¤§å‹å›¾åƒ</li>
              <li>é¿å…åœ¨å¾ªç¯ä¸­åˆ›å»ºä¸´æ—¶å¯¹è±¡</li>
              <li>ä½¿ç”¨ TypedArray æ“ä½œåƒç´ æ•°æ®</li>
            </ul>
          </div>
        </div>
      </section>

      <!-- æ•°æ®è½¬æ¢ -->
      <section class="card conversion">
        <div class="section-header">
          <div class="icon">ğŸ”„</div>
          <h2>æ•°æ®æ ¼å¼è½¬æ¢</h2>
        </div>
        <div class="content">
          <div class="conversion-grid">
            <div class="conversion-card">
              <div class="conversion-header">
                <div class="conversion-icon">ğŸ”—</div>
                <h3>è½¬æ¢ä¸º Data URL</h3>
              </div>
              <pre><code>// è·å– Data URL (é»˜è®¤ PNG)
const dataURL = canvas.toDataURL();
console.log(dataURL); // "data:image/png;base64,..."

// æŒ‡å®šæ ¼å¼å’Œè´¨é‡ (JPEG)
const jpegURL = canvas.toDataURL('image/jpeg', 0.9);

// ä½¿ç”¨ç¤ºä¾‹
const img = document.createElement('img');
img.src = dataURL;
document.body.appendChild(img);</code></pre>
            </div>

            <div class="conversion-card">
              <div class="conversion-header">
                <div class="conversion-icon">ğŸ“·</div>
                <h3>è½¬æ¢ä¸º Image å¯¹è±¡</h3>
              </div>
              <pre><code>// é€šè¿‡ Data URL åˆ›å»ºå›¾åƒ
function canvasToImage(canvas) {
  return new Promise((resolve) => {
    const img = new Image();
    img.onload = () => resolve(img);
    img.src = canvas.toDataURL();
  });
}

// ä½¿ç”¨ç¤ºä¾‹
canvasToImage(canvas)
  .then(img => {
    document.body.appendChild(img);
  });</code></pre>
            </div>

            <div class="conversion-card">
              <div class="conversion-header">
                <div class="conversion-icon">ğŸ“¦</div>
                <h3>è½¬æ¢ä¸º Blob</h3>
              </div>
              <pre><code>// è·å– Blob å¯¹è±¡
canvas.toBlob((blob) => {
  console.log('Blob size:', blob.size);
  console.log('Blob type:', blob.type);

  // ä½¿ç”¨ç¤ºä¾‹ï¼šä¸Šä¼ åˆ°æœåŠ¡å™¨
  const formData = new FormData();
  formData.append('image', blob, 'canvas-image.png');

  fetch('/upload', {
    method: 'POST',
    body: formData
  });
}, 'image/png', 0.9);</code></pre>
            </div>

            <div class="conversion-card">
              <div class="conversion-header">
                <div class="conversion-icon">ğŸ“„</div>
                <h3>è½¬æ¢ä¸º File</h3>
              </div>
              <pre><code>// å…ˆè·å– Blobï¼Œç„¶ååˆ›å»º File
canvas.toBlob((blob) => {
  const file = new File([blob], 'canvas-image.png', {
    type: 'image/png',
    lastModified: Date.now()
  });

  console.log('File name:', file.name);
  console.log('File size:', file.size);

  // ä½¿ç”¨ç¤ºä¾‹ï¼šæ–‡ä»¶ä¸‹è½½
  const url = URL.createObjectURL(file);
  const a = document.createElement('a');
  a.href = url;
  a.download = file.name;
  a.click();
  URL.revokeObjectURL(url);
}, 'image/png');</code></pre>
            </div>

            <div class="conversion-card">
              <div class="conversion-header">
                <div class="conversion-icon">ğŸ’¾</div>
                <h3>è½¬æ¢ä¸º ArrayBuffer</h3>
              </div>
              <pre><code>// é€šè¿‡ Blob è·å– ArrayBuffer
canvas.toBlob((blob) => {
  const reader = new FileReader();
  reader.onload = () => {
    const arrayBuffer = reader.result;
    console.log('ArrayBuffer length:', arrayBuffer.byteLength);

    // ä½¿ç”¨ç¤ºä¾‹ï¼šWebSocket å‘é€
    socket.send(arrayBuffer);
  };
  reader.readAsArrayBuffer(blob);
}, 'image/png');</code></pre>
            </div>

            <div class="conversion-card">
              <div class="conversion-header">
                <div class="conversion-icon">ğŸï¸</div>
                <h3>è½¬æ¢ä¸ºè§†é¢‘å¸§</h3>
              </div>
              <pre><code>// ä½¿ç”¨ ImageData åˆ›å»ºè§†é¢‘å¸§
async function canvasToVideoFrame(canvas) {
  const imageData = ctx.getImageData(0, 0, canvas.width, canvas.height);

  // åˆ›å»º VideoFrame
  return new VideoFrame(
    new ImageBitmap(imageData),
    { timestamp: 0 }
  );
}

// ä½¿ç”¨ç¤ºä¾‹ (éœ€è¦æµè§ˆå™¨æ”¯æŒ)
const frame = await canvasToVideoFrame(canvas);
videoProcessor.process(frame);
frame.close();</code></pre>
            </div>
          </div>
        </div>
      </section>

      <!-- ä½¿ç”¨åœºæ™¯ -->
      <section class="card scenarios">
        <div class="section-header">
          <div class="icon">ğŸš€</div>
          <h2>ä½¿ç”¨åœºæ™¯</h2>
        </div>
        <div class="content">
          <div class="scenario-grid">
            <div class="scenario">
              <div class="scenario-icon">1</div>
              <h3>å›¾åƒå¤„ç†åº”ç”¨</h3>
              <p>è·å–åƒç´ æ•°æ®å®ç°æ»¤é•œå’Œç‰¹æ•ˆ</p>
              <pre><code>// åº”ç”¨å¤å¤æ»¤é•œ
function applySepia(imageData) {
  const data = imageData.data;
  for (let i = 0; i < data.length; i += 4) {
    const r = data[i];
    const g = data[i+1];
    const b = data[i+2];

    data[i] = Math.min(255, r * 0.393 + g * 0.769 + b * 0.189);
    data[i+1] = Math.min(255, r * 0.349 + g * 0.686 + b * 0.168);
    data[i+2] = Math.min(255, r * 0.272 + g * 0.534 + b * 0.131);
  }
  return imageData;
}</code></pre>
            </div>

            <div class="scenario">
              <div class="scenario-icon">2</div>
              <h3>æˆªå›¾ä¸ä¿å­˜</h3>
              <p>å°† Canvas å†…å®¹ä¿å­˜ä¸ºå›¾ç‰‡æ–‡ä»¶</p>
              <pre><code>// ä¿å­˜ Canvas ä¸º PNG
function saveAsPNG(canvas, filename) {
  const link = document.createElement('a');
  link.download = filename || 'canvas-image.png';
  link.href = canvas.toDataURL('image/png');
  link.click();
}

// ä¿å­˜ä¸º JPEG
function saveAsJPEG(canvas, filename, quality = 0.92) {
  const link = document.createElement('a');
  link.download = filename || 'canvas-image.jpg';
  link.href = canvas.toDataURL('image/jpeg', quality);
  link.click();
}</code></pre>
            </div>

            <div class="scenario">
              <div class="scenario-icon">3</div>
              <h3>å®æ—¶è§†é¢‘å¤„ç†</h3>
              <p>å¤„ç†æ‘„åƒå¤´æˆ–è§†é¢‘æµçš„å¸§æ•°æ®</p>
              <pre><code>// å¤„ç†è§†é¢‘å¸§
function processVideoFrame(video, canvas) {
  const ctx = canvas.getContext('2d');

  // ç»˜åˆ¶è§†é¢‘å¸§åˆ° Canvas
  ctx.drawImage(video, 0, 0, canvas.width, canvas.height);

  // è·å–å¹¶å¤„ç†å›¾åƒæ•°æ®
  const imageData = ctx.getImageData(0, 0, canvas.width, canvas.height);
  processFrame(imageData);

  // å°†å¤„ç†åçš„æ•°æ®æ”¾å›
  ctx.putImageData(imageData, 0, 0);

  // å¾ªç¯å¤„ç†ä¸‹ä¸€å¸§
  requestAnimationFrame(() => processVideoFrame(video, canvas));
}</code></pre>
            </div>

            <div class="scenario">
              <div class="scenario-icon">4</div>
              <h3>OCR ä¸å›¾åƒåˆ†æ</h3>
              <p>æå–åƒç´ æ•°æ®è¿›è¡Œæ–‡å­—è¯†åˆ«</p>
              <pre><code>// å‡†å¤‡å›¾åƒæ•°æ®ç”¨äº OCR
async function prepareForOCR(canvas) {
  // è½¬æ¢ä¸ºç°åº¦
  const ctx = canvas.getContext('2d');
  const imageData = ctx.getImageData(0, 0, canvas.width, canvas.height);
  const data = imageData.data;

  for (let i = 0; i < data.length; i += 4) {
    const avg = (data[i] + data[i+1] + data[i+2]) / 3;
    data[i] = data[i+1] = data[i+2] = avg;
  }

  ctx.putImageData(imageData, 0, 0);

  // è½¬æ¢ä¸º Blob å‘é€åˆ° OCR API
  return new Promise((resolve) => {
    canvas.toBlob(resolve, 'image/png');
  });
}</code></pre>
            </div>
          </div>
        </div>
      </section>

      <!-- æ€§èƒ½ä¼˜åŒ– -->
      <section class="card performance">
        <div class="section-header">
          <div class="icon">âš¡</div>
          <h2>æ€§èƒ½ä¼˜åŒ–</h2>
        </div>
        <div class="content">
          <div class="optimization-grid">
            <div class="optimization">
              <div class="optimization-icon">1</div>
              <h3>å‡å°‘ getImageData è°ƒç”¨</h3>
              <p>é¿å…é¢‘ç¹è°ƒç”¨ï¼Œåªåœ¨å¿…è¦æ—¶è·å–æ•°æ®</p>
            </div>
            <div class="optimization">
              <div class="optimization-icon">2</div>
              <h3>ä½¿ç”¨ç¦»å± Canvas</h3>
              <p>åœ¨åå°å¤„ç†å¤æ‚æ“ä½œ</p>
            </div>
            <div class="optimization">
              <div class="optimization-icon">3</div>
              <h3>ä¼˜åŒ–åƒç´ å¤„ç†å¾ªç¯</h3>
              <p>ä½¿ç”¨ TypedArray å’Œ WebAssembly</p>
            </div>
            <div class="optimization">
              <div class="optimization-icon">4</div>
              <h3>æ•°æ®å‹ç¼©</h3>
              <p>ä½¿ç”¨åˆé€‚çš„å›¾åƒæ ¼å¼å’Œè´¨é‡</p>
            </div>
          </div>

          <div class="code-optimization">
            <h3>ä¼˜åŒ–åƒç´ å¤„ç†</h3>
            <div class="code-comparison">
              <div class="code-example">
                <h4>ä¼˜åŒ–å‰</h4>
                <pre><code>for (let i = 0; i < data.length; i += 4) {
  // æ¯æ¬¡è®¡ç®—åƒç´ ç´¢å¼•
  const r = data[i];
  const g = data[i+1];
  const b = data[i+2];
  // å¤„ç†é€»è¾‘...
}</code></pre>
              </div>
              <div class="code-example">
                <h4>ä¼˜åŒ–å</h4>
                <pre><code>const len = data.length;
// ä½¿ç”¨å±€éƒ¨å˜é‡ç¼“å­˜é•¿åº¦
for (let i = 0; i < len; i += 4) {
  // ä¸€æ¬¡è¯»å–æ‰€æœ‰é€šé“
  const r = data[i], g = data[i+1], b = data[i+2];
  // å¤„ç†é€»è¾‘...
}</code></pre>
              </div>
            </div>
          </div>
        </div>
      </section>

      <!-- æ³¨æ„äº‹é¡¹ -->
      <section class="card considerations">
        <div class="section-header">
          <div class="icon">âš ï¸</div>
          <h2>æ³¨æ„äº‹é¡¹</h2>
        </div>
        <div class="content">
          <div class="do-dont">
            <div class="do">
              <h3>æœ€ä½³å®è·µ</h3>
              <ul>
                <li>ä½¿ç”¨ requestAnimationFrame è¿›è¡ŒåŠ¨ç”»</li>
                <li>å¤„ç†è·¨åŸŸå›¾åƒæ—¶è®¾ç½® crossOrigin å±æ€§</li>
                <li>åŠæ—¶é‡Šæ”¾ä¸å†éœ€è¦çš„å¯¹è±¡ URL</li>
                <li>ä½¿ç”¨ Web Workers å¤„ç†å¤§å‹å›¾åƒ</li>
                <li>å¯¹ç”¨æˆ·æ“ä½œæä¾›è§†è§‰åé¦ˆ</li>
              </ul>
            </div>

            <div class="dont">
              <h3>é¿å…åšæ³•</h3>
              <ul>
                <li>åœ¨ä¸»çº¿ç¨‹å¤„ç†å¤§å‹å›¾åƒ</li>
                <li>é¢‘ç¹è°ƒç”¨ getImageData/putImageData</li>
                <li>å¿˜è®°é‡Šæ”¾å¯¹è±¡ URL å¯¼è‡´å†…å­˜æ³„æ¼</li>
                <li>ä½¿ç”¨è¿‡é«˜çš„å›¾åƒè´¨é‡å‚æ•°</li>
                <li>å¿½ç•¥è·¨åŸŸå®‰å…¨é™åˆ¶</li>
              </ul>
            </div>
          </div>

          <div class="security">
            <h3>å®‰å…¨é™åˆ¶</h3>
            <ul>
              <li>è·¨åŸŸå›¾åƒæ•°æ®è®¿é—®å—é™ï¼ˆtainted canvasï¼‰</li>
              <li>æŸäº›æµè§ˆå™¨é™åˆ¶ Canvas å¤§å°</li>
              <li>æ–‡ä»¶ç³»ç»Ÿè®¿é—®éœ€è¦ç”¨æˆ·æˆæƒ</li>
              <li>å¤§é‡æ•°æ®å¤„ç†å¯èƒ½é˜»å¡é¡µé¢</li>
            </ul>
          </div>
        </div>
      </section>
    </div>

    <footer class="footer">
      <div class="summary">
        <h3>å…³é”®è¦ç‚¹</h3>
        <p>Canvas æ•°æ®æµå¤„ç†æ˜¯ Web å›¾åƒæ“ä½œçš„æ ¸å¿ƒæŠ€æœ¯ã€‚æŒæ¡ ImageData çš„è·å–ä¸æ“ä½œï¼Œä»¥åŠå„ç§æ ¼å¼çš„è½¬æ¢æ–¹æ³•ï¼Œå¯ä»¥è§£é”å¼ºå¤§çš„å›¾åƒå¤„ç†èƒ½åŠ›ã€‚åˆç†ä¼˜åŒ–æ€§èƒ½å¹¶æ³¨æ„å®‰å…¨é™åˆ¶ï¼Œå¯ä»¥åˆ›å»ºé«˜æ•ˆçš„ Canvas åº”ç”¨ã€‚</p>
      </div>
      <div class="copyright">Canvas æ•°æ®æµå¤„ç† | ç°ä»£ Web å›¾åƒå¤„ç†çš„åŸºç¡€</div>
    </footer>
  </div>
</template>

<script setup lang="ts">
// ç»„ä»¶é€»è¾‘ä¸ºç©ºï¼Œä»…ç”¨äºå±•ç¤º
</script>

<style lang="less" scoped>
.canvas-data-container {
  max-width: 1200px;
  margin: 0 auto;
  padding: 24px;
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, sans-serif;
  background: #f8fafc;
  color: #2d3748;
  line-height: 1.6;
}

.header {
  text-align: center;
  margin-bottom: 32px;
  padding: 28px;
  background: linear-gradient(135deg, #e0f2fe 0%, #dbeafe 100%);
  border-radius: 16px;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);

  h1 {
    font-size: 2.4rem;
    margin: 0 0 12px;
    color: #1e40af;
    font-weight: 700;
  }

  p {
    font-size: 1.2rem;
    color: #4b5563;
    margin: 0;
  }
}

.content-grid {
  display: grid;
  grid-template-columns: 1fr;
  gap: 24px;
  margin-bottom: 32px;
}

.card {
  background: #ffffff;
  border-radius: 16px;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
  padding: 28px;
  transition: all 0.25s ease;

  &:hover {
    transform: translateY(-3px);
    box-shadow: 0 8px 16px rgba(0, 0, 0, 0.08);
  }
}

.section-header {
  display: flex;
  align-items: center;
  margin-bottom: 24px;
  padding-bottom: 16px;
  border-bottom: 2px solid #e2e8f0;

  .icon {
    font-size: 1.8rem;
    margin-right: 16px;
    color: #3b82f6;
    width: 50px;
    height: 50px;
    border-radius: 50%;
    background: #dbeafe;
    display: flex;
    align-items: center;
    justify-content: center;
  }

  h2 {
    font-size: 1.6rem;
    margin: 0;
    color: #1e40af;
  }
}

/* ä»‹ç»éƒ¨åˆ†æ ·å¼ */
.intro {
  .definition {
    p {
      font-size: 1.1rem;
      margin-bottom: 24px;
      line-height: 1.7;
    }
  }

  .workflow {
    margin-bottom: 24px;

    h3 {
      font-size: 1.3rem;
      margin: 0 0 16px;
      color: #1e40af;
    }

    .workflow-steps {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 16px;
    }

    .step {
      display: flex;
      align-items: flex-start;
      background: #f0f9ff;
      border-radius: 12px;
      padding: 16px;
      border: 1px solid #dbeafe;

      .step-icon {
        width: 36px;
        height: 36px;
        background: #3b82f6;
        color: white;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        font-weight: bold;
        font-size: 1.2rem;
        margin-right: 16px;
        flex-shrink: 0;
      }

      h4 {
        margin: 0 0 8px;
        font-size: 1.1rem;
        color: #1e40af;
      }

      p {
        margin: 0;
        color: #4b5563;
        font-size: 0.95rem;
      }
    }
  }

  .data-types {
    h3 {
      font-size: 1.3rem;
      margin: 0 0 16px;
      color: #1e40af;
    }

    .types-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
      gap: 12px;
    }

    .type {
      background: #e0f2fe;
      border-radius: 8px;
      padding: 12px;
      text-align: center;
      font-weight: 500;
      color: #1e40af;
    }
  }
}

/* ImageData éƒ¨åˆ†æ ·å¼ */
.image-data {
  .explanation {
    p {
      font-size: 1.1rem;
      margin-bottom: 24px;
      line-height: 1.7;
    }
  }

  .usage-grid {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 20px;
    margin-bottom: 24px;

    @media (max-width: 768px) {
      grid-template-columns: 1fr;
    }
  }

  .usage-card {
    background: #f8fafc;
    border-radius: 12px;
    padding: 20px;
    border: 1px solid #e2e8f0;

    h3 {
      font-size: 1.2rem;
      margin: 0 0 16px;
      color: #1e40af;
      padding-bottom: 8px;
      border-bottom: 1px solid #e2e8f0;
    }
  }

  .performance-tip {
    h3 {
      font-size: 1.3rem;
      margin: 0 0 16px;
      color: #1e40af;
    }

    ul {
      padding-left: 24px;
      margin: 0;

      li {
        margin-bottom: 12px;
        position: relative;
        padding-left: 12px;

        &::before {
          content: "â€¢";
          position: absolute;
          left: 0;
          color: #3b82f6;
          font-weight: bold;
        }
      }
    }
  }
}

/* æ•°æ®è½¬æ¢æ ·å¼ */
.conversion {
  .conversion-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
    gap: 20px;
  }

  .conversion-card {
    background: #f8fafc;
    border-radius: 12px;
    padding: 20px;
    border: 1px solid #e2e8f0;

    .conversion-header {
      display: flex;
      align-items: center;
      margin-bottom: 16px;

      .conversion-icon {
        font-size: 1.8rem;
        margin-right: 12px;
        color: #3b82f6;
      }

      h3 {
        margin: 0;
        font-size: 1.2rem;
        color: #1e40af;
      }
    }
  }
}

/* ä½¿ç”¨åœºæ™¯æ ·å¼ */
.scenarios {
  .scenario-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
    gap: 20px;
  }

  .scenario {
    background: #f8fafc;
    border-radius: 12px;
    padding: 20px;
    border: 1px solid #e2e8f0;
    position: relative;

    .scenario-icon {
      position: absolute;
      top: -12px;
      left: -12px;
      width: 30px;
      height: 30px;
      background: #3b82f6;
      color: white;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: bold;
      box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
    }

    h3 {
      font-size: 1.2rem;
      margin: 0 0 12px;
      color: #1e40af;
    }

    p {
      margin: 0 0 16px;
      color: #4b5563;
      font-size: 0.95rem;
    }
  }
}

/* æ€§èƒ½ä¼˜åŒ–æ ·å¼ */
.performance {
  .optimization-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
    gap: 20px;
    margin-bottom: 24px;
  }

  .optimization {
    display: flex;
    align-items: center;
    background: #f0f9ff;
    border-radius: 12px;
    padding: 16px;
    border: 1px solid #dbeafe;

    .optimization-icon {
      width: 36px;
      height: 36px;
      background: #3b82f6;
      color: white;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: bold;
      font-size: 1.1rem;
      margin-right: 16px;
      flex-shrink: 0;
    }

    h3 {
      font-size: 1.1rem;
      margin: 0 0 8px;
      color: #1e40af;
    }

    p {
      margin: 0;
      color: #4b5563;
      font-size: 0.9rem;
    }
  }

  .code-optimization {
    h3 {
      font-size: 1.3rem;
      margin: 0 0 16px;
      color: #1e40af;
    }

    .code-comparison {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 20px;

      @media (max-width: 768px) {
        grid-template-columns: 1fr;
      }
    }

    .code-example {
      h4 {
        font-size: 1.1rem;
        margin: 0 0 12px;
        color: #1e40af;
      }
    }
  }
}

/* æ³¨æ„äº‹é¡¹æ ·å¼ */
.considerations {
  .do-dont {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 24px;
    margin-bottom: 24px;

    @media (max-width: 768px) {
      grid-template-columns: 1fr;
    }

    .do, .dont {
      padding: 20px;
      border-radius: 12px;

      h3 {
        font-size: 1.3rem;
        margin: 0 0 16px;
      }

      ul {
        padding-left: 20px;
        margin: 0;

        li {
          margin-bottom: 10px;
          color: #4b5563;
        }
      }
    }

    .do {
      background: #f0fdf4;
      border: 1px solid #bbf7d0;

      h3 {
        color: #065f46;
      }
    }

    .dont {
      background: #fef2f2;
      border: 1px solid #fecaca;

      h3 {
        color: #b91c1c;
      }
    }
  }

  .security {
    h3 {
      font-size: 1.3rem;
      margin: 0 0 16px;
      color: #1e40af;
    }

    ul {
      padding-left: 24px;
      margin: 0;

      li {
        margin-bottom: 12px;
        position: relative;
        padding-left: 12px;

        &::before {
          content: "â€¢";
          position: absolute;
          left: 0;
          color: #3b82f6;
          font-weight: bold;
        }
      }
    }
  }
}

/* ä»£ç å—é€šç”¨æ ·å¼ */
pre {
  background: #1e293b;
  color: #e2e8f0;
  border-radius: 8px;
  padding: 16px;
  overflow-x: auto;
  font-family: 'SFMono-Regular', Consolas, 'Liberation Mono', Menlo, monospace;
  font-size: 0.95rem;
  line-height: 1.5;
  margin: 0 0 16px;

  code {
    color: #cbd5e1;
  }
}

/* é¡µè„šæ ·å¼ */
.footer {
  background: #ffffff;
  border-radius: 16px;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
  padding: 24px;

  .summary {
    max-width: 800px;
    margin: 0 auto 20px;

    h3 {
      font-size: 1.4rem;
      margin: 0 0 16px;
      color: #2563eb;
      text-align: center;
    }

    p {
      font-size: 1.1rem;
      color: #4b5563;
      margin: 0;
      line-height: 1.7;
    }
  }

  .copyright {
    font-size: 0.95rem;
    color: #64748b;
    padding-top: 16px;
    border-top: 1px solid #e2e8f0;
    text-align: center;
  }
}
</style>
