<template>
  <div class="session-management-container">
    <header class="header">
      <div class="title-section">
        <h1>ä¼šè¯ç®¡ç†ä¸‰å‰‘å®¢ï¼š<span class="highlight">Cookie</span>ã€<span class="highlight">Session</span>ã€<span
            class="highlight">Token</span></h1>
        <p class="subtitle">æ·±å…¥ç†è§£Webåº”ç”¨çš„èº«ä»½éªŒè¯ä¸çŠ¶æ€ç®¡ç†æœºåˆ¶</p>
      </div>
      <div class="stats-card">
        <div class="stat-item">
          <div class="stat-value">1994</div>
          <div class="stat-label">Cookieè¯ç”Ÿå¹´ä»½</div>
        </div>
        <div class="stat-item">
          <div class="stat-value">94%</div>
          <div class="stat-label">ç½‘ç«™ä½¿ç”¨Cookie</div>
        </div>
        <div class="stat-item">
          <div class="stat-value">80%</div>
          <div class="stat-label">ç°ä»£åº”ç”¨ä½¿ç”¨Token</div>
        </div>
      </div>
    </header>

    <div class="intro-section">
      <div class="intro-card">
        <h2>ä»€ä¹ˆæ˜¯ä¼šè¯ç®¡ç†ï¼Ÿ</h2>
        <p>ä¼šè¯ç®¡ç†æ˜¯Webåº”ç”¨ä¸­ç»´æŠ¤ç”¨æˆ·çŠ¶æ€çš„æ ¸å¿ƒæœºåˆ¶ï¼Œå…è®¸æœåŠ¡å™¨è¯†åˆ«è¿ç»­è¯·æ±‚æ˜¯å¦æ¥è‡ªåŒä¸€ç”¨æˆ·ï¼Œä»è€Œæä¾›ä¸ªæ€§åŒ–ä½“éªŒå’Œå®‰å…¨è®¿é—®æ§åˆ¶ã€‚</p>

        <div class="session-flow">
          <div class="flow-step">
            <div class="flow-icon">ğŸ‘¤</div>
            <div class="flow-text">ç”¨æˆ·ç™»å½•</div>
          </div>
          <div class="flow-arrow">â†’</div>
          <div class="flow-step">
            <div class="flow-icon">ğŸ“¦</div>
            <div class="flow-text">æœåŠ¡å™¨è®¤è¯</div>
          </div>
          <div class="flow-arrow">â†’</div>
          <div class="flow-step">
            <div class="flow-icon">ğŸ”‘</div>
            <div class="flow-text">è¿”å›å‡­è¯</div>
          </div>
          <div class="flow-arrow">â†’</div>
          <div class="flow-step">
            <div class="flow-icon">ğŸ”„</div>
            <div class="flow-text">åç»­è¯·æ±‚éªŒè¯</div>
          </div>
        </div>
      </div>
    </div>

    <div class="comparison-section">
      <h2 class="section-title">ğŸ“Š ä¸‰è€…å¯¹æ¯”æ¦‚è§ˆ</h2>
      <div class="comparison-table">
        <table>
          <thead>
            <tr>
              <th>ç‰¹æ€§</th>
              <th>Cookie</th>
              <th>Session</th>
              <th>Token</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>å­˜å‚¨ä½ç½®</td>
              <td>å®¢æˆ·ç«¯æµè§ˆå™¨</td>
              <td>æœåŠ¡å™¨å†…å­˜/æ•°æ®åº“</td>
              <td>å®¢æˆ·ç«¯æœ¬åœ°å­˜å‚¨</td>
            </tr>
            <tr>
              <td>å®‰å…¨æ€§</td>
              <td>è¾ƒä½ (æ˜“å—CSRF/XSSæ”»å‡»)</td>
              <td>ä¸­ç­‰ (ä¾èµ–Cookie)</td>
              <td>è¾ƒé«˜ (å¯ç­¾ååŠ å¯†)</td>
            </tr>
            <tr>
              <td>è·¨åŸŸæ”¯æŒ</td>
              <td>æœ‰é™ (éœ€é…ç½®CORS)</td>
              <td>æœ‰é™ (éœ€é…ç½®CORS)</td>
              <td>è‰¯å¥½ (é€šè¿‡Authorizationå¤´)</td>
            </tr>
            <tr>
              <td>æ‰©å±•æ€§</td>
              <td>æœ‰é™ (4KBå¤§å°é™åˆ¶)</td>
              <td>æœåŠ¡å™¨èµ„æºä¾èµ–</td>
              <td>è‰¯å¥½ (æ— çŠ¶æ€æœåŠ¡å™¨)</td>
            </tr>
            <tr>
              <td>ç§»åŠ¨ç«¯æ”¯æŒ</td>
              <td>è‰¯å¥½</td>
              <td>è‰¯å¥½</td>
              <td>ä¼˜ç§€ (åŸç”Ÿæ”¯æŒ)</td>
            </tr>
            <tr>
              <td>ä½¿ç”¨åœºæ™¯</td>
              <td>ä¼šè¯è·Ÿè¸ªã€ç”¨æˆ·åå¥½</td>
              <td>ä¼ ç»ŸWebåº”ç”¨</td>
              <td>APIã€SPAã€è·¨å¹³å°åº”ç”¨</td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>

    <div class="tech-container">
      <!-- Cookie éƒ¨åˆ† -->
      <section class="tech-section cookie-section">
        <div class="section-header">
          <div class="section-icon">ğŸª</div>
          <h2>Cookie</h2>
          <div class="tech-tag">å®¢æˆ·ç«¯å­˜å‚¨</div>
        </div>

        <div class="tech-description">
          <p>Cookieæ˜¯æœåŠ¡å™¨å‘é€åˆ°ç”¨æˆ·æµè§ˆå™¨å¹¶ä¿å­˜åœ¨æœ¬åœ°çš„å°å‹æ–‡æœ¬æ–‡ä»¶ï¼Œæ¯æ¬¡è¯·æ±‚æ—¶æµè§ˆå™¨ä¼šè‡ªåŠ¨å°†å…¶å‘é€å›æœåŠ¡å™¨ã€‚</p>
        </div>

        <div class="tech-details">
          <div class="detail-card">
            <h3><span class="icon">âš™ï¸</span> å·¥ä½œåŸç†</h3>
            <ol>
              <li>ç”¨æˆ·ç™»å½•åï¼ŒæœåŠ¡å™¨é€šè¿‡<b>Set-Cookie</b>å“åº”å¤´è®¾ç½®Cookie</li>
              <li>æµè§ˆå™¨ä¿å­˜Cookieå¹¶åœ¨åç»­è¯·æ±‚ä¸­é€šè¿‡<b>Cookie</b>è¯·æ±‚å¤´è‡ªåŠ¨å‘é€</li>
              <li>æœåŠ¡å™¨éªŒè¯Cookieå†…å®¹è¯†åˆ«ç”¨æˆ·</li>
            </ol>
          </div>

          <div class="detail-card">
            <h3><span class="icon">ğŸ”</span> å®‰å…¨è®¾ç½®</h3>
            <ul>
              <li><b>HttpOnly</b> - é˜»æ­¢JavaScriptè®¿é—®ï¼Œé˜²æ­¢XSSæ”»å‡»</li>
              <li><b>Secure</b> - ä»…é€šè¿‡HTTPSä¼ è¾“</li>
              <li><b>SameSite</b> - é™åˆ¶è·¨ç«™è¯·æ±‚å‘é€Cookieï¼Œé˜²æ­¢CSRFæ”»å‡»</li>
              <li><b>Expires/Max-Age</b> - è®¾ç½®æœ‰æ•ˆæœŸé™</li>
            </ul>
          </div>
        </div>

        <div class="code-example">
          <h3><span class="icon">ğŸ’»</span> ä»£ç ç¤ºä¾‹ - è®¾ç½®HTTP Cookie</h3>
          <div class="tabs">
            <button :class="{ active: activeTab === 'backend' }" @click="activeTab = 'backend'">
              åç«¯è®¾ç½®
            </button>
            <button :class="{ active: activeTab === 'frontend' }" @click="activeTab = 'frontend'">
              å‰ç«¯æ“ä½œ
            </button>
          </div>

          <div v-if="activeTab === 'backend'" class="code-block">
            <pre>// Node.js/Express è®¾ç½®Cookie
res.cookie('sessionId', 'abc123xyz', {
  maxAge: 24 * 60 * 60 * 1000, // 1å¤©
  httpOnly: true,
  secure: true,
  sameSite: 'Strict'
});

// è¯»å–Cookie
const sessionId = req.cookies.sessionId;</pre>
          </div>

          <div v-if="activeTab === 'frontend'" class="code-block">
            <pre>// JavaScript è¯»å–Cookie
function getCookie(name) {
  const value = `; ${document.cookie}`;
  const parts = value.split(`; ${name}=`);
  if (parts.length === 2) return parts.pop().split(';').shift();
}

// è®¾ç½®Cookie (é€šå¸¸ç”±æœåŠ¡å™¨è®¾ç½®)
document.cookie = `username=john_doe; max-age=${24*60*60}; path=/; secure`;</pre>
          </div>
        </div>

        <div class="pros-cons">
          <div class="pros">
            <h3><span class="icon">âœ…</span> ä¼˜åŠ¿</h3>
            <ul>
              <li>è‡ªåŠ¨éšè¯·æ±‚å‘é€ï¼Œæ— éœ€æ‰‹åŠ¨å¤„ç†</li>
              <li>å¹¿æ³›æ”¯æŒï¼Œæ‰€æœ‰æµè§ˆå™¨å…¼å®¹</li>
              <li>ç®€å•æ˜“ç”¨ï¼Œå¼€å‘å¿«é€Ÿ</li>
              <li>å¯è®¾ç½®è¿‡æœŸæ—¶é—´</li>
            </ul>
          </div>
          <div class="cons">
            <h3><span class="icon">âš ï¸</span> ç¼ºç‚¹</h3>
            <ul>
              <li>å¤§å°é™åˆ¶ï¼ˆ4KBï¼‰</li>
              <li>å®‰å…¨é£é™©ï¼ˆCSRF/XSSï¼‰</li>
              <li>è·¨åŸŸé—®é¢˜éœ€è¦é¢å¤–é…ç½®</li>
              <li>ç”¨æˆ·å¯ç¦ç”¨æˆ–æ¸…é™¤Cookie</li>
            </ul>
          </div>
        </div>
      </section>

      <!-- Session éƒ¨åˆ† -->
      <section class="tech-section session-section">
        <div class="section-header">
          <div class="section-icon">ğŸ—‚ï¸</div>
          <h2>Session</h2>
          <div class="tech-tag">æœåŠ¡å™¨ç«¯çŠ¶æ€</div>
        </div>

        <div class="tech-description">
          <p>Sessionæ˜¯åŸºäºæœåŠ¡å™¨ç«¯çš„çŠ¶æ€ç®¡ç†æœºåˆ¶ï¼ŒæœåŠ¡å™¨ä¸ºæ¯ä¸ªä¼šè¯åˆ›å»ºå”¯ä¸€IDï¼ˆé€šå¸¸å­˜å‚¨åœ¨Cookieä¸­ï¼‰ï¼Œå¹¶åœ¨æœåŠ¡å™¨å­˜å‚¨ä¼šè¯æ•°æ®ã€‚</p>
        </div>

        <div class="tech-details">
          <div class="detail-card">
            <h3><span class="icon">âš™ï¸</span> å·¥ä½œåŸç†</h3>
            <ol>
              <li>ç”¨æˆ·ç™»å½•åï¼ŒæœåŠ¡å™¨åˆ›å»ºSessionå¹¶å­˜å‚¨ç”¨æˆ·æ•°æ®</li>
              <li>æœåŠ¡å™¨å‘é€åŒ…å«<b>Session ID</b>çš„Cookieç»™å®¢æˆ·ç«¯</li>
              <li>å®¢æˆ·ç«¯åç»­è¯·æ±‚è‡ªåŠ¨å‘é€Session ID</li>
              <li>æœåŠ¡å™¨æ ¹æ®Session IDæŸ¥æ‰¾ä¼šè¯æ•°æ®</li>
            </ol>
          </div>

          <div class="detail-card">
            <h3><span class="icon">ğŸ”§</span> å­˜å‚¨æ–¹å¼</h3>
            <ul>
              <li><b>å†…å­˜å­˜å‚¨</b> - ç®€å•ä½†é‡å¯ä¸¢å¤±ï¼Œä¸é€‚ç”¨åˆ†å¸ƒå¼ç¯å¢ƒ</li>
              <li><b>æ•°æ®åº“å­˜å‚¨</b> - MySQLã€PostgreSQLç­‰ï¼ˆæŒä¹…åŒ–ï¼‰</li>
              <li><b>ç¼“å­˜å­˜å‚¨</b> - Redisã€Memcachedï¼ˆé«˜æ€§èƒ½ï¼Œæ¨èï¼‰</li>
            </ul>
          </div>
        </div>

        <div class="code-example">
          <h3><span class="icon">ğŸ’»</span> ä»£ç ç¤ºä¾‹ - Express Session</h3>
          <div class="code-block">
            <pre>const express = require('express');
const session = require('express-session');
const RedisStore = require('connect-redis')(session);

const app = express();

// é…ç½®Sessionä¸­é—´ä»¶
app.use(session({
  store: new RedisStore({ host: 'localhost', port: 6379 }), // Rediså­˜å‚¨
  secret: 'my_secret_key', // ç­¾åå¯†é’¥
  resave: false, // é¿å…é‡å¤ä¿å­˜
  saveUninitialized: false, // ä¸ä¿å­˜æœªåˆå§‹åŒ–çš„session
  cookie: {
    maxAge: 24 * 60 * 60 * 1000, // 1å¤©
    httpOnly: true,
    secure: process.env.NODE_ENV === 'production'
  }
}));

// ç™»å½•æ—¶è®¾ç½®Session
app.post('/login', (req, res) => {
  // éªŒè¯ç”¨æˆ·å‡­è¯...
  req.session.userId = user.id; // å­˜å‚¨ç”¨æˆ·ID
  req.session.authenticated = true;
  res.send('ç™»å½•æˆåŠŸ');
});

// è®¿é—®å—ä¿æŠ¤è·¯ç”±
app.get('/profile', (req, res) => {
  if (!req.session.authenticated) {
    return res.status(401).send('æœªæˆæƒ');
  }
  // ä»Sessionè·å–ç”¨æˆ·æ•°æ®
  const userId = req.session.userId;
  // è¿”å›ç”¨æˆ·æ•°æ®...
});</pre>
          </div>
        </div>

        <div class="pros-cons">
          <div class="pros">
            <h3><span class="icon">âœ…</span> ä¼˜åŠ¿</h3>
            <ul>
              <li>æ•æ„Ÿæ•°æ®å­˜å‚¨åœ¨æœåŠ¡å™¨ï¼Œæ›´å®‰å…¨</li>
              <li>å¯å­˜å‚¨è¾ƒå¤šæ•°æ®ï¼ˆä¸å—æµè§ˆå™¨é™åˆ¶ï¼‰</li>
              <li>æœåŠ¡å™¨å®Œå…¨æ§åˆ¶ä¼šè¯ç”Ÿå‘½å‘¨æœŸ</li>
              <li>æ˜“äºæ’¤é”€ä¼šè¯ï¼ˆç›´æ¥åˆ é™¤æœåŠ¡å™¨æ•°æ®ï¼‰</li>
            </ul>
          </div>
          <div class="cons">
            <h3><span class="icon">âš ï¸</span> ç¼ºç‚¹</h3>
            <ul>
              <li>æœåŠ¡å™¨èµ„æºæ¶ˆè€—ï¼ˆå†…å­˜/æ•°æ®åº“ï¼‰</li>
              <li>åˆ†å¸ƒå¼ç¯å¢ƒä¸‹éœ€è¦å…±äº«å­˜å‚¨</li>
              <li>ä¾èµ–Cookieä¼ è¾“Session ID</li>
              <li>æ‰©å±•æ€§æœ‰é™ï¼ˆæœåŠ¡å™¨çŠ¶æ€ï¼‰</li>
            </ul>
          </div>
        </div>
      </section>

      <!-- Token éƒ¨åˆ† -->
      <section class="tech-section token-section">
        <div class="section-header">
          <div class="section-icon">ğŸ”‘</div>
          <h2>Token (JWT)</h2>
          <div class="tech-tag">æ— çŠ¶æ€éªŒè¯</div>
        </div>

        <div class="tech-description">
          <p>Tokenï¼ˆé€šå¸¸æŒ‡JWT - JSON Web Tokenï¼‰æ˜¯æ— çŠ¶æ€çš„éªŒè¯æœºåˆ¶ï¼ŒæœåŠ¡å™¨ç”ŸæˆåŒ…å«ç”¨æˆ·ä¿¡æ¯çš„Tokenï¼Œå®¢æˆ·ç«¯å­˜å‚¨å¹¶åœ¨è¯·æ±‚æ—¶å‘é€ï¼ŒæœåŠ¡å™¨éªŒè¯ç­¾åã€‚</p>

          <div class="jwt-structure">
            <div class="jwt-part header">
              <div class="jwt-label">HEADER</div>
              <div class="jwt-content">{ "alg": "HS256", "typ": "JWT" }</div>
            </div>
            <div class="jwt-separator">.</div>
            <div class="jwt-part payload">
              <div class="jwt-label">PAYLOAD</div>
              <div class="jwt-content">{ "sub": "123", "name": "John", "exp": 1718928000 }</div>
            </div>
            <div class="jwt-separator">.</div>
            <div class="jwt-part signature">
              <div class="jwt-label">SIGNATURE</div>
              <div class="jwt-content">HMACSHA256(base64Header + "." + base64Payload, secret)</div>
            </div>
          </div>
        </div>

        <div class="tech-details">
          <div class="detail-card">
            <h3><span class="icon">âš™ï¸</span> å·¥ä½œåŸç†</h3>
            <ol>
              <li>ç”¨æˆ·ç™»å½•åï¼ŒæœåŠ¡å™¨ç”ŸæˆåŒ…å«ç”¨æˆ·ä¿¡æ¯çš„JWT</li>
              <li>å®¢æˆ·ç«¯å­˜å‚¨JWTï¼ˆé€šå¸¸åœ¨localStorageæˆ–Cookieä¸­ï¼‰</li>
              <li>åç»­è¯·æ±‚åœ¨<b>Authorizationå¤´</b>ä¸­å‘é€Token</li>
              <li>æœåŠ¡å™¨éªŒè¯ç­¾åå¹¶æå–ç”¨æˆ·ä¿¡æ¯</li>
            </ol>
          </div>

          <div class="detail-card">
            <h3><span class="icon">ğŸ”§</span> æœ€ä½³å®è·µ</h3>
            <ul>
              <li>ä½¿ç”¨<strong>https</strong>é˜²æ­¢Tokenè¢«æ‹¦æˆª</li>
              <li>è®¾ç½®åˆç†çš„<strong>è¿‡æœŸæ—¶é—´</strong>(exp)</li>
              <li>ä½¿ç”¨<strong>åˆ·æ–°Token</strong>æœºåˆ¶æ›´æ–°è®¿é—®Token</li>
              <li>æ•æ„Ÿæ“ä½œè¦æ±‚<strong>äºŒæ¬¡éªŒè¯</strong></li>
              <li>ä½¿ç”¨<strong>å¼ºå¯†é’¥</strong>å’Œ<strong>å¼ºç®—æ³•</strong>(å¦‚RS256)</li>
            </ul>
          </div>
        </div>

        <div class="code-example">
          <h3><span class="icon">ğŸ’»</span> ä»£ç ç¤ºä¾‹ - JWTå®ç°</h3>
          <div class="tabs">
            <button :class="{ active: activeTokenTab === 'backend' }" @click="activeTokenTab = 'backend'">
              åç«¯ç”Ÿæˆ/éªŒè¯
            </button>
            <button :class="{ active: activeTokenTab === 'frontend' }" @click="activeTokenTab = 'frontend'">
              å‰ç«¯å¤„ç†
            </button>
          </div>

          <div v-if="activeTokenTab === 'backend'" class="code-block">
            <pre>// Node.js ä½¿ç”¨jsonwebtokenåº“
const jwt = require('jsonwebtoken');

// ç”ŸæˆJWT
function generateToken(user) {
  return jwt.sign(
    {
      id: user.id,
      email: user.email,
      role: user.role
    },
    process.env.JWT_SECRET,
    { expiresIn: '1h' } // 1å°æ—¶åè¿‡æœŸ
  );
}

// éªŒè¯ä¸­é—´ä»¶
function authenticateToken(req, res, next) {
  const authHeader = req.headers['authorization'];
  const token = authHeader && authHeader.split(' ')[1];

  if (!token) return res.sendStatus(401);

  jwt.verify(token, process.env.JWT_SECRET, (err, user) => {
    if (err) return res.sendStatus(403);
    req.user = user;
    next();
  });
}

// åˆ·æ–°Token
app.post('/refresh-token', (req, res) => {
  const refreshToken = req.body.refreshToken;
  // éªŒè¯åˆ·æ–°ä»¤ç‰Œ...
  const newAccessToken = generateToken(user);
  res.json({ accessToken: newAccessToken });
});</pre>
          </div>

          <div v-if="activeTokenTab === 'frontend'" class="code-block">
            <pre>// Vue3 ä¸­å¤„ç†Token
import { ref } from 'vue';

// ä¿å­˜Tokenåˆ°localStorage
function saveToken(token) {
  localStorage.setItem('access_token', token);
}

// ä»è¯·æ±‚å¤´å‘é€Token
function useAuthHeader() {
  const token = localStorage.getItem('access_token');
  return { Authorization: `Bearer ${token}` };
}

// ç¤ºä¾‹APIè°ƒç”¨
async function fetchUserData() {
  const response = await fetch('/api/user', {
    headers: useAuthHeader()
  });

  if (response.status === 401) {
    // ä»¤ç‰Œè¿‡æœŸï¼Œå°è¯•åˆ·æ–°
    await refreshToken();
    return fetchUserData();
  }

  return response.json();
}

// åˆ·æ–°ä»¤ç‰Œ
async function refreshToken() {
  const refreshToken = localStorage.getItem('refresh_token');
  const response = await fetch('/api/refresh-token', {
    method: 'POST',
    body: JSON.stringify({ refreshToken })
  });

  const { access_token } = await response.json();
  saveToken(access_token);
}</pre>
          </div>
        </div>

        <div class="pros-cons">
          <div class="pros">
            <h3><span class="icon">âœ…</span> ä¼˜åŠ¿</h3>
            <ul>
              <li>æ— çŠ¶æ€ï¼ŒæœåŠ¡å™¨ä¸éœ€è¦å­˜å‚¨ä¼šè¯ä¿¡æ¯</li>
              <li>è·¨åŸŸå‹å¥½ï¼Œé€‚åˆå¾®æœåŠ¡æ¶æ„</li>
              <li>ç§»åŠ¨ç«¯å’ŒSPAæ”¯æŒè‰¯å¥½</li>
              <li>å¯åŒ…å«è‡ªå®šä¹‰å£°æ˜ï¼ˆclaimsï¼‰</li>
              <li>è‡ªå¸¦è¿‡æœŸæœºåˆ¶</li>
            </ul>
          </div>
          <div class="cons">
            <h3><span class="icon">âš ï¸</span> ç¼ºç‚¹</h3>
            <ul>
              <li>Tokenä¸€æ—¦ç­¾å‘æ— æ³•æ’¤é”€ï¼ˆéœ€é¢å¤–æœºåˆ¶ï¼‰</li>
              <li>ä»¤ç‰Œå¤§å°å¤§äºSession ID</li>
              <li>éœ€è¦æ‰‹åŠ¨å¤„ç†ä»¤ç‰Œè¿‡æœŸå’Œåˆ·æ–°</li>
              <li>å®‰å…¨å­˜å‚¨æŒ‘æˆ˜ï¼ˆXSSæ”»å‡»ï¼‰</li>
            </ul>
          </div>
        </div>
      </section>

      <!-- é€‰æ‹©æŒ‡å— -->
      <section class="selection-guide">
        <div class="section-header">
          <div class="section-icon">âœ…</div>
          <h2>å¦‚ä½•é€‰æ‹©ä¼šè¯ç®¡ç†æ–¹æ¡ˆï¼Ÿ</h2>
        </div>

        <div class="guide-cards">
          <div class="guide-card">
            <div class="guide-icon">ğŸ›’</div>
            <h3>ä¼ ç»ŸWebåº”ç”¨</h3>
            <p>ä½¿ç”¨ <strong>Session + Cookie</strong>ï¼šæœåŠ¡å™¨æ¸²æŸ“é¡µé¢ï¼Œéœ€è¦ç»´æŠ¤ç”¨æˆ·çŠ¶æ€</p>
          </div>

          <div class="guide-card">
            <div class="guide-icon">ğŸ“±</div>
            <h3>å•é¡µé¢åº”ç”¨(SPA)</h3>
            <p>ä½¿ç”¨ <strong>Token</strong>ï¼šå‰åç«¯åˆ†ç¦»ï¼ŒAPIé©±åŠ¨ï¼Œæ— çŠ¶æ€æœåŠ¡</p>
          </div>

          <div class="guide-card">
            <div class="guide-icon">ğŸŒ</div>
            <h3>è·¨å¹³å°/å¾®æœåŠ¡</h3>
            <p>ä½¿ç”¨ <strong>Token</strong>ï¼šè·¨åŸŸæ”¯æŒï¼Œç»Ÿä¸€è®¤è¯ï¼Œåˆ†å¸ƒå¼ç³»ç»Ÿ</p>
          </div>

          <div class="guide-card">
            <div class="guide-icon">ğŸ”’</div>
            <h3>é«˜å®‰å…¨æ€§åº”ç”¨</h3>
            <p><strong>æ··åˆæ–¹æ¡ˆ</strong>ï¼šæ•æ„Ÿæ“ä½œä½¿ç”¨Sessionï¼ŒAPIä½¿ç”¨Token</p>
          </div>
        </div>
      </section>
    </div>

    <footer class="footer">
      <div class="footer-content">
        <h3>ä¼šè¯å®‰å…¨æœ€ä½³å®è·µ</h3>
        <div class="principles">
          <div class="principle">
            <div class="principle-icon">ğŸ”</div>
            <p>å§‹ç»ˆä½¿ç”¨HTTPSä¼ è¾“å‡­è¯</p>
          </div>
          <div class="principle">
            <div class="principle-icon">â³</div>
            <p>è®¾ç½®åˆç†çš„å‡­è¯è¿‡æœŸæ—¶é—´</p>
          </div>
          <div class="principle">
            <div class="principle-icon">ğŸ”„</div>
            <p>å®æ–½ä»¤ç‰Œåˆ·æ–°æœºåˆ¶</p>
          </div>
          <div class="principle">
            <div class="principle-icon">ğŸ‘ï¸</div>
            <p>ç›‘æ§å¼‚å¸¸ç™»å½•æ´»åŠ¨</p>
          </div>
        </div>
        <p class="footer-note">å®‰å…¨æ— å°äº‹ - æ­£ç¡®å®æ–½ä¼šè¯ç®¡ç†æ˜¯ä¿æŠ¤ç”¨æˆ·æ•°æ®çš„ç¬¬ä¸€é“é˜²çº¿</p>
      </div>
    </footer>
  </div>
</template>

<script lang="ts" setup>
import { ref } from 'vue';

const activeTab = ref('backend');
const activeTokenTab = ref('backend');
</script>

<style lang="less" scoped>
@import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap');

:root {
  --primary-color: #3498db;
  --cookie-color: #e67e22;
  --session-color: #9b59b6;
  --token-color: #2ecc71;
  --light-bg: #f8f9fa;
  --card-bg: #ffffff;
  --border-color: #eaeaea;
  --text-dark: #2c3e50;
  --text-light: #7f8c8d;
  --shadow-sm: 0 2px 8px rgba(0, 0, 0, 0.06);
  --shadow-md: 0 4px 12px rgba(0, 0, 0, 0.08);
  --radius-sm: 8px;
  --radius-md: 12px;
  --radius-lg: 16px;
}

* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

.session-management-container {
  font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, sans-serif;
  max-width: 1400px;
  margin: 0 auto;
  padding: 2rem;
  color: var(--text-dark);
  line-height: 1.6;
  background-color: var(--light-bg);
  min-height: 100vh;
}

.header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  flex-wrap: wrap;
  gap: 2rem;
  margin-bottom: 3rem;
  padding-bottom: 2rem;
  border-bottom: 1px solid var(--border-color);

  .title-section {
    flex: 1;
    min-width: 300px;

    h1 {
      font-size: 2.5rem;
      font-weight: 700;
      color: var(--text-dark);
      margin-bottom: 0.5rem;

      .highlight {
        font-weight: 800;

        &:nth-child(1) {
          color: var(--cookie-color);
        }

        &:nth-child(2) {
          color: var(--session-color);
        }

        &:nth-child(3) {
          color: var(--token-color);
        }
      }
    }

    .subtitle {
      font-size: 1.25rem;
      color: var(--text-light);
      font-weight: 400;
      max-width: 600px;
    }
  }

  .stats-card {
    display: flex;
    gap: 1.5rem;
    background: var(--card-bg);
    border-radius: var(--radius-lg);
    padding: 1.5rem;
    box-shadow: var(--shadow-md);

    .stat-item {
      text-align: center;
      min-width: 100px;

      .stat-value {
        font-size: 2rem;
        font-weight: 700;
        color: var(--primary-color);
        margin-bottom: 0.25rem;
      }

      .stat-label {
        font-size: 0.9rem;
        color: var(--text-light);
      }
    }
  }
}

.intro-section {
  margin-bottom: 3rem;

  .intro-card {
    background: var(--card-bg);
    border-radius: var(--radius-md);
    padding: 2rem;
    box-shadow: var(--shadow-sm);

    h2 {
      font-size: 1.8rem;
      color: var(--text-dark);
      margin-bottom: 1rem;
    }

    p {
      font-size: 1.1rem;
      color: var(--text-light);
      margin-bottom: 1.5rem;
    }

    .session-flow {
      display: flex;
      justify-content: center;
      align-items: center;
      gap: 1.5rem;
      margin-top: 1.5rem;
      flex-wrap: wrap;

      .flow-step {
        text-align: center;
        flex: 1;
        min-width: 130px;

        .flow-icon {
          font-size: 2rem;
          margin-bottom: 0.5rem;
          background: rgba(52, 152, 219, 0.1);
          width: 60px;
          height: 60px;
          line-height: 60px;
          border-radius: 50%;
          margin: 0 auto 0.5rem;
        }

        .flow-text {
          font-weight: 500;
          font-size: 0.95rem;
        }
      }

      .flow-arrow {
        font-size: 1.5rem;
        color: var(--text-light);
        margin: 0 0.5rem;
      }
    }
  }
}

.section-title {
  font-size: 1.75rem;
  margin: 2rem 0 1.5rem;
  color: var(--text-dark);
  padding-bottom: 0.75rem;
  border-bottom: 2px solid var(--border-color);
  position: relative;

  &::after {
    content: '';
    position: absolute;
    bottom: -2px;
    left: 0;
    width: 80px;
    height: 2px;
    background-color: var(--primary-color);
  }
}

.comparison-section {
  background: var(--card-bg);
  border-radius: var(--radius-md);
  padding: 2rem;
  margin-bottom: 3rem;
  box-shadow: var(--shadow-sm);

  .comparison-table {
    overflow-x: auto;

    table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 1.5rem;

      th,
      td {
        padding: 1rem;
        text-align: left;
        border-bottom: 1px solid var(--border-color);
      }

      thead {
        background: var(--light-bg);

        th {
          font-weight: 600;
          color: var(--text-dark);
        }
      }

      tbody tr:hover {
        background-color: rgba(52, 152, 219, 0.03);
      }

      td:nth-child(1) {
        font-weight: 500;
      }

      td:nth-child(2) {
        color: var(--cookie-color);
      }

      td:nth-child(3) {
        color: var(--session-color);
      }

      td:nth-child(4) {
        color: var(--token-color);
      }
    }
  }
}

.tech-container {
  display: flex;
  flex-direction: column;
  gap: 3rem;
}

.tech-section {
  background: var(--card-bg);
  border-radius: var(--radius-md);
  padding: 2rem;
  box-shadow: var(--shadow-sm);
  position: relative;
  overflow: hidden;

  &::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    height: 4px;
    width: 100%;
  }

  &.cookie-section::before {
    background: var(--cookie-color);
  }

  &.session-section::before {
    background: var(--session-color);
  }

  &.token-section::before {
    background: var(--token-color);
  }

  .section-header {
    display: flex;
    align-items: center;
    gap: 1rem;
    margin-bottom: 1.5rem;

    .section-icon {
      font-size: 2rem;
      width: 60px;
      height: 60px;
      background: rgba(0, 0, 0, 0.03);
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    h2 {
      font-size: 1.8rem;
      color: var(--text-dark);
    }

    .tech-tag {
      padding: 0.25rem 0.75rem;
      border-radius: 20px;
      font-size: 0.85rem;
      font-weight: 600;
      margin-left: auto;
      background: rgba(0, 0, 0, 0.05);
    }
  }

  .tech-description {
    font-size: 1.1rem;
    color: var(--text-light);
    margin-bottom: 1.5rem;
    padding-bottom: 1.5rem;
    border-bottom: 1px solid var(--border-color);

    .jwt-structure {
      display: flex;
      justify-content: center;
      align-items: center;
      flex-wrap: wrap;
      gap: 0.5rem;
      margin-top: 1.5rem;
      background: #f5f8fa;
      padding: 1rem;
      border-radius: var(--radius-sm);
      border: 1px solid #e1e8ed;

      .jwt-part {
        padding: 0.5rem;
        border-radius: 6px;
        text-align: center;
        overflow: hidden;

        &.header {
          background: rgba(52, 152, 219, 0.1);
        }

        &.payload {
          background: rgba(46, 204, 113, 0.1);
        }

        &.signature {
          background: rgba(155, 89, 182, 0.1);
        }

        .jwt-label {
          font-size: 0.75rem;
          font-weight: 700;
          text-transform: uppercase;
          margin-bottom: 0.25rem;
        }

        .jwt-content {
          font-size: 0.85rem;
          font-family: 'JetBrains Mono', monospace;
          white-space: nowrap;
          overflow: hidden;
          text-overflow: ellipsis;
          max-width: 250px;
        }
      }

      .jwt-separator {
        color: var(--text-light);
        font-weight: bold;
      }
    }
  }
}

.tech-details {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
  gap: 1.5rem;
  margin-bottom: 2rem;

  .detail-card {
    background: var(--light-bg);
    border-radius: var(--radius-sm);
    padding: 1.5rem;

    h3 {
      font-size: 1.2rem;
      color: var(--text-dark);
      margin-bottom: 1rem;
      display: flex;
      align-items: center;
      gap: 0.5rem;

      .icon {
        font-size: 1.25rem;
      }
    }

    ol,
    ul {
      padding-left: 1.5rem;

      li {
        margin-bottom: 0.75rem;
        font-size: 1rem;
        color: var(--text-light);
        line-height: 1.5;

        b {
          font-weight: 600;
          color: var(--text-dark);
        }
      }
    }
  }
}

.code-example {
  margin-bottom: 2rem;

  h3 {
    font-size: 1.2rem;
    color: var(--text-dark);
    margin-bottom: 1rem;
    display: flex;
    align-items: center;
    gap: 0.5rem;

    .icon {
      font-size: 1.25rem;
    }
  }

  .tabs {
    display: flex;
    gap: 0.5rem;
    margin-bottom: 1rem;

    button {
      padding: 0.5rem 1rem;
      background: var(--light-bg);
      border: none;
      border-radius: 4px;
      cursor: pointer;
      font-weight: 500;
      transition: all 0.2s ease;

      &.active {
        background: #e67e22;
        color: white;
      }

      &:hover:not(.active) {
        background: rgba(52, 152, 219, 0.1);
      }
    }
  }
}

.code-block {
  background-color: #2d2d2d;
  color: #f8f8f2;
  padding: 1.25rem;
  margin: 0;
  font-size: 0.9rem;
  font-family: 'JetBrains Mono', monospace;
  overflow-x: auto;
  line-height: 1.5;
  border-radius: var(--radius-sm);
}

.pros-cons {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
  gap: 1.5rem;
  margin-top: 1.5rem;

  .pros,
  .cons {
    padding: 1.5rem;
    border-radius: var(--radius-sm);

    h3 {
      display: flex;
      align-items: center;
      gap: 0.5rem;
      margin-bottom: 1rem;
      font-size: 1.2rem;
    }

    ul {
      padding-left: 1.5rem;

      li {
        margin-bottom: 0.5rem;
        font-size: 1rem;
        line-height: 1.5;
      }
    }
  }

  .pros {
    background: rgba(46, 204, 113, 0.05);
    border: 1px solid rgba(46, 204, 113, 0.2);

    h3 {
      color: #27ae60;
    }
  }

  .cons {
    background: rgba(231, 76, 60, 0.05);
    border: 1px solid rgba(231, 76, 60, 0.2);

    h3 {
      color: #c0392b;
    }
  }
}

.selection-guide {
  background: var(--card-bg);
  border-radius: var(--radius-md);
  padding: 2rem;
  margin-top: 3rem;
  box-shadow: var(--shadow-sm);

  .guide-cards {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
    gap: 1.5rem;
    margin-top: 1.5rem;

    .guide-card {
      background: var(--light-bg);
      border-radius: var(--radius-sm);
      padding: 1.5rem;
      text-align: center;
      transition: all 0.3s ease;

      &:hover {
        transform: translateY(-5px);
        box-shadow: var(--shadow-md);
      }

      .guide-icon {
        font-size: 2.5rem;
        margin-bottom: 1rem;
      }

      h3 {
        font-size: 1.2rem;
        color: var(--text-dark);
        margin-bottom: 0.75rem;
      }

      p {
        font-size: 0.95rem;
        color: var(--text-light);
      }
    }
  }
}

.footer {
  background: var(--card-bg);
  border-radius: var(--radius-md);
  padding: 2.5rem;
  margin-top: 3rem;
  box-shadow: var(--shadow-sm);

  .footer-content {
    h3 {
      font-size: 1.5rem;
      margin-bottom: 1.5rem;
      color: var(--text-dark);
      text-align: center;
    }

    .principles {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      gap: 1.5rem;
      margin-bottom: 1.5rem;

      .principle {
        display: flex;
        align-items: center;
        gap: 0.75rem;
        padding: 0.75rem 1.25rem;
        background: var(--light-bg);
        border-radius: 50px;

        .principle-icon {
          font-size: 1.5rem;
        }

        p {
          font-weight: 500;
          margin: 0;
        }
      }
    }

    .footer-note {
      font-style: italic;
      color: var(--text-light);
      font-size: 1.1rem;
      text-align: center;
      max-width: 600px;
      margin: 0 auto;
    }
  }
}

@media (max-width: 768px) {
  .header {
    flex-direction: column;
    align-items: flex-start;

    .stats-card {
      width: 100%;
      justify-content: space-around;
    }
  }

  .session-flow {
    flex-direction: column;
    gap: 1rem !important;

    .flow-arrow {
      transform: rotate(90deg);
      margin: 0.5rem 0 !important;
    }
  }

  .tech-details {
    grid-template-columns: 1fr;
  }

  .pros-cons {
    grid-template-columns: 1fr;
  }

  .comparison-table {
    font-size: 0.85rem;

    th,
    td {
      padding: 0.65rem !important;
    }
  }
}

@media (max-width: 480px) {
  .header .title-section h1 {
    font-size: 1.8rem;
  }

  .intro-card h2 {
    font-size: 1.5rem;
  }

  .stats-card {
    gap: 0.5rem;
    padding: 1rem !important;

    .stat-item {
      .stat-value {
        font-size: 1.5rem !important;
      }
    }
  }

  .code-block {
    font-size: 0.8rem;
    padding: 1rem;
  }
}

::-webkit-scrollbar {
  width: 8px;
}

::-webkit-scrollbar-track {
  background: var(--light-bg);
}

::-webkit-scrollbar-thumb {
  background: var(--primary-color);
  border-radius: 4px;
}

html {
  scroll-behavior: smooth;
}

[id] {
  scroll-margin-top: 80px;
}
</style>
