<template>
  <div class="nginx-reference">
    <div class="header">
      <h1>Nginx Web æœåŠ¡å™¨å‚è€ƒæ‰‹å†Œ</h1>
      <p>é«˜æ€§èƒ½ HTTP æœåŠ¡å™¨å’Œåå‘ä»£ç†è§£å†³æ–¹æ¡ˆ</p>
    </div>

    <div class="tabs">
      <button :class="{ active: activeTab === 'overview' }" @click="activeTab = 'overview'">
        æ¦‚è¿°
      </button>
      <button :class="{ active: activeTab === 'features' }" @click="activeTab = 'features'">
        åŠŸèƒ½ç‰¹æ€§
      </button>
      <button :class="{ active: activeTab === 'config' }" @click="activeTab = 'config'">
        é…ç½®å‚è€ƒ
      </button>
      <button :class="{ active: activeTab === 'scenarios' }" @click="activeTab = 'scenarios'">
        ä½¿ç”¨åœºæ™¯
      </button>
    </div>

    <div class="content">
      <!-- æ¦‚è¿°éƒ¨åˆ† -->
      <section v-show="activeTab === 'overview'">
        <h2>Nginx æ¦‚è¿°</h2>
        <div class="card">
          <p>Nginxï¼ˆå‘éŸ³ä¸º"engine x"ï¼‰æ˜¯ä¸€ä¸ªé«˜æ€§èƒ½çš„HTTPå’Œåå‘ä»£ç†æœåŠ¡å™¨ï¼Œç”±Igor Sysoeväº2004å¹´åˆ›å»ºã€‚</p>

          <div class="card-row">
            <div class="card-col">
              <h3>æ ¸å¿ƒç‰¹ç‚¹</h3>
              <ul>
                <li>å¼‚æ­¥éé˜»å¡äº‹ä»¶é©±åŠ¨æ¶æ„</li>
                <li>é«˜å¹¶å‘å¤„ç†èƒ½åŠ›</li>
                <li>ä½å†…å­˜æ¶ˆè€—</li>
                <li>æ¨¡å—åŒ–è®¾è®¡</li>
              </ul>
            </div>
            <div class="card-col">
              <h3>ä¸»è¦åŠŸèƒ½</h3>
              <ul>
                <li>HTTP å’Œ HTTPS æœåŠ¡å™¨</li>
                <li>åå‘ä»£ç†å’Œè´Ÿè½½å‡è¡¡</li>
                <li>é‚®ä»¶ä»£ç†æœåŠ¡å™¨</li>
                <li>TCP/UDP ä»£ç†</li>
              </ul>
            </div>
          </div>

          <h3>Nginx vs Apache</h3>
          <div class="comparison">
            <div>
              <h4>Nginx ä¼˜åŠ¿</h4>
              <ul>
                <li>å¤„ç†é«˜å¹¶å‘è¯·æ±‚æ›´é«˜æ•ˆ</li>
                <li>å†…å­˜å ç”¨æ›´ä½</li>
                <li>é…ç½®æ›´ç®€æ´</li>
                <li>æ›´é€‚åˆé™æ€å†…å®¹æœåŠ¡</li>
              </ul>
            </div>
            <div>
              <h4>Apache ä¼˜åŠ¿</h4>
              <ul>
                <li>.htaccess åŠ¨æ€é…ç½®</li>
                <li>æ¨¡å—ç”Ÿæ€æ›´ä¸°å¯Œ</li>
                <li>å¯¹åŠ¨æ€å†…å®¹å¤„ç†æ›´çµæ´»</li>
                <li>å…¼å®¹æ€§æ›´å¥½</li>
              </ul>
            </div>
          </div>
        </div>
      </section>

      <!-- åŠŸèƒ½ç‰¹æ€§éƒ¨åˆ† -->
      <section v-show="activeTab === 'features'">
        <h2>Nginx åŠŸèƒ½ç‰¹æ€§</h2>
        <div class="card">
          <div class="pros-cons">
            <div class="pros">
              <h3>ä¼˜ç‚¹</h3>
              <ul>
                <li><strong>é«˜æ€§èƒ½</strong>ï¼šå¤„ç†é™æ€å†…å®¹é€Ÿåº¦æå¿«</li>
                <li><strong>é«˜å¹¶å‘</strong>ï¼šå•æœºå¯å¤„ç†æ•°ä¸‡å¹¶å‘è¿æ¥</li>
                <li><strong>ä½èµ„æºæ¶ˆè€—</strong>ï¼šå†…å­˜å’ŒCPUå ç”¨å°‘</li>
                <li><strong>ç¨³å®šæ€§</strong>ï¼šé•¿æ—¶é—´è¿è¡Œæ— å†…å­˜æ³„æ¼</li>
                <li><strong>çƒ­éƒ¨ç½²</strong>ï¼šæ— éœ€é‡å¯æ›´æ–°é…ç½®</li>
                <li><strong>æ¨¡å—åŒ–</strong>ï¼šé€šè¿‡æ¨¡å—æ‰©å±•åŠŸèƒ½</li>
              </ul>
            </div>
            <div class="cons">
              <h3>ç¼ºç‚¹</h3>
              <ul>
                <li><strong>åŠ¨æ€å†…å®¹å¤„ç†</strong>ï¼šä¸å¦‚Apacheçµæ´»</li>
                <li><strong>æ¨¡å—å¼€å‘</strong>ï¼šä¸å¦‚Apacheæˆç†Ÿ</li>
                <li><strong>Windowsæ”¯æŒ</strong>ï¼šæ€§èƒ½ä¸å¦‚Linuxç‰ˆ</li>
                <li><strong>é…ç½®è¯­æ³•</strong>ï¼šå­¦ä¹ æ›²çº¿è¾ƒé™¡å³­</li>
              </ul>
            </div>
          </div>

          <h3>æ ¸å¿ƒæ¨¡å—</h3>
          <div class="modules">
            <div class="module-card">
              <div class="module-icon">ğŸŒ</div>
              <h4>HTTPæ ¸å¿ƒæ¨¡å—</h4>
              <p>æä¾›HTTPæœåŠ¡å™¨åŠŸèƒ½ï¼Œå¤„ç†å®¢æˆ·ç«¯è¯·æ±‚</p>
            </div>
            <div class="module-card">
              <div class="module-icon">ğŸ”„</div>
              <h4>åå‘ä»£ç†æ¨¡å—</h4>
              <p>å°†å®¢æˆ·ç«¯è¯·æ±‚è½¬å‘åˆ°åç«¯æœåŠ¡å™¨</p>
            </div>
            <div class="module-card">
              <div class="module-icon">âš–ï¸</div>
              <h4>è´Ÿè½½å‡è¡¡æ¨¡å—</h4>
              <p>åœ¨å¤šå°æœåŠ¡å™¨é—´åˆ†é…æµé‡</p>
            </div>
            <div class="module-card">
              <div class="module-icon">ğŸ”’</div>
              <h4>SSL/TLSæ¨¡å—</h4>
              <p>æä¾›HTTPSåŠ å¯†è¿æ¥æ”¯æŒ</p>
            </div>
          </div>
        </div>
      </section>

      <!-- é…ç½®å‚è€ƒéƒ¨åˆ† -->
      <section v-show="activeTab === 'config'">
        <h2>Nginx é…ç½®å‚è€ƒ</h2>
        <div class="card">
          <h3>é…ç½®ç»“æ„</h3>
          <pre class="config-block"># ä¸»é…ç½®æ–‡ä»¶ nginx.conf
user  nginx;                     # è¿è¡Œç”¨æˆ·
worker_processes  auto;          # å·¥ä½œè¿›ç¨‹æ•°ï¼ˆé€šå¸¸è®¾ä¸ºCPUæ ¸å¿ƒæ•°ï¼‰

events {
  worker_connections  1024;      # æ¯ä¸ªå·¥ä½œè¿›ç¨‹çš„æœ€å¤§è¿æ¥æ•°
}

http {
  include       mime.types;      # MIMEç±»å‹é…ç½®æ–‡ä»¶
  default_type  application/octet-stream;

  # æ—¥å¿—æ ¼å¼
  log_format  main  '$remote_addr - $remote_user [$time_local] "$request" '
                    '$status $body_bytes_sent "$http_referer" '
                    '"$http_user_agent" "$http_x_forwarded_for"';

  access_log  /var/log/nginx/access.log  main;

  sendfile        on;            # é«˜æ•ˆæ–‡ä»¶ä¼ è¾“æ¨¡å¼
  keepalive_timeout  65;         # ä¿æŒè¿æ¥è¶…æ—¶æ—¶é—´

  # åŒ…å«å…¶ä»–é…ç½®æ–‡ä»¶
  include /etc/nginx/conf.d/*.conf;
}</pre>

          <h3>å¸¸ç”¨é…ç½®æŒ‡ä»¤</h3>
          <div class="directives">
            <div class="directive">
              <h4>server å—</h4>
              <p>å®šä¹‰è™šæ‹Ÿä¸»æœºé…ç½®</p>
              <pre class="config-block">server {
  listen 80;                   # ç›‘å¬ç«¯å£
  server_name example.com;      # åŸŸå

  location / {
    root /var/www/html;         # ç½‘ç«™æ ¹ç›®å½•
    index index.html;           # é»˜è®¤æ–‡æ¡£
  }
}</pre>
            </div>

            <div class="directive">
              <h4>location å—</h4>
              <p>é…ç½®è¯·æ±‚å¤„ç†è§„åˆ™</p>
              <pre class="config-block">location /static/ {
  alias /data/static/;          # é™æ€æ–‡ä»¶ç›®å½•
  expires 30d;                  # ç¼“å­˜æ—¶é—´
}

location ~ \.php$ {
  proxy_pass http://php_backend; # PHPè¯·æ±‚è½¬å‘
}</pre>
            </div>

            <div class="directive">
              <h4>åå‘ä»£ç†é…ç½®</h4>
              <pre class="config-block">location / {
  proxy_pass http://backend_server;  # åç«¯æœåŠ¡å™¨åœ°å€
  proxy_set_header Host $host;        # ä¼ é€’åŸå§‹åŸŸå
  proxy_set_header X-Real-IP $remote_addr;
}</pre>
            </div>

            <div class="directive">
              <h4>è´Ÿè½½å‡è¡¡é…ç½®</h4>
              <pre class="config-block">upstream backend {
  server backend1.example.com weight=5; # æƒé‡è®¾ç½®
  server backend2.example.com;
  server backend3.example.com backup;   # å¤‡ç”¨æœåŠ¡å™¨
}

server {
  location / {
    proxy_pass http://backend;         # ä½¿ç”¨ä¸Šæ¸¸æœåŠ¡å™¨ç»„
  }
}</pre>
            </div>
          </div>
        </div>
      </section>

      <!-- ä½¿ç”¨åœºæ™¯éƒ¨åˆ† -->
      <section v-show="activeTab === 'scenarios'">
        <h2>Nginx ä½¿ç”¨åœºæ™¯</h2>
        <div class="card">
          <div class="scenarios">
            <div class="scenario">
              <div class="scenario-icon">ğŸ“¶</div>
              <h3>é™æ€å†…å®¹æœåŠ¡</h3>
              <p>é«˜æ•ˆæä¾›HTMLã€CSSã€JavaScriptå’Œå›¾ç‰‡ç­‰é™æ€èµ„æº</p>
            </div>
            <div class="scenario">
              <div class="scenario-icon">ğŸ”„</div>
              <h3>åå‘ä»£ç†</h3>
              <p>ä½œä¸ºå‰ç«¯æœåŠ¡å™¨æ¥æ”¶è¯·æ±‚å¹¶è½¬å‘åˆ°åç«¯åº”ç”¨æœåŠ¡å™¨</p>
            </div>
            <div class="scenario">
              <div class="scenario-icon">âš–ï¸</div>
              <h3>è´Ÿè½½å‡è¡¡</h3>
              <p>åœ¨å¤šä¸ªæœåŠ¡å™¨å®ä¾‹é—´åˆ†é…æµé‡ï¼Œæé«˜ç³»ç»Ÿå¯ç”¨æ€§</p>
            </div>
            <div class="scenario">
              <div class="scenario-icon">ğŸ”’</div>
              <h3>SSLç»ˆç«¯</h3>
              <p>å¤„ç†HTTPSåŠ å¯†/è§£å¯†ï¼Œå‡è½»åç«¯æœåŠ¡å™¨è´Ÿæ‹…</p>
            </div>
            <div class="scenario">
              <div class="scenario-icon">ğŸš€</div>
              <h3>ç¼“å­˜åŠ é€Ÿ</h3>
              <p>ç¼“å­˜åŠ¨æ€å†…å®¹ï¼Œå‡å°‘åç«¯è¯·æ±‚æ¬¡æ•°</p>
            </div>
            <div class="scenario">
              <div class="scenario-icon">ğŸ›¡ï¸</div>
              <h3>å®‰å…¨é˜²æŠ¤</h3>
              <p>é€šè¿‡é€Ÿç‡é™åˆ¶ã€IPé»‘åå•ç­‰ä¿æŠ¤åç«¯æœåŠ¡</p>
            </div>
          </div>

          <h3>å…¸å‹æ¶æ„ç¤ºä¾‹</h3>
          <div class="architecture">
            <div class="arch-layer">
              <div class="arch-title">å®¢æˆ·ç«¯</div>
              <div class="arch-box">Web æµè§ˆå™¨</div>
              <div class="arch-arrow">â†“</div>
            </div>
            <div class="arch-layer">
              <div class="arch-title">Nginx å±‚</div>
              <div class="arch-box">è´Ÿè½½å‡è¡¡å™¨</div>
              <div class="arch-box">SSL ç»ˆç«¯</div>
              <div class="arch-box">é™æ€å†…å®¹æœåŠ¡</div>
              <div class="arch-arrow">â†“</div>
            </div>
            <div class="arch-layer">
              <div class="arch-title">åº”ç”¨å±‚</div>
              <div class="arch-box">Node.js æœåŠ¡å™¨</div>
              <div class="arch-box">Python Django</div>
              <div class="arch-box">Java Spring</div>
              <div class="arch-arrow">â†“</div>
            </div>
            <div class="arch-layer">
              <div class="arch-title">æ•°æ®å±‚</div>
              <div class="arch-box">MySQL æ•°æ®åº“</div>
              <div class="arch-box">Redis ç¼“å­˜</div>
            </div>
          </div>
        </div>
      </section>
    </div>

    <div class="footer">
      <p>Nginx å‚è€ƒæ‰‹å†Œ â€¢ ç‰ˆæœ¬ 1.23 â€¢ {{ new Date().getFullYear() }}</p>
    </div>
  </div>
</template>

<script setup lang="ts">
import { ref } from 'vue';

const activeTab = ref('overview');
</script>

<style lang="less" scoped>
@import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap');

// é¢œè‰²å˜é‡
@primary-color: #4361ee;
@secondary-color: #3a0ca3;
@light-bg: #f8f9fa;
@card-bg: #ffffff;
@border-color: #e2e8f0;
@text-color: #2d3748;
@code-bg: #f6f8fa;
@code-text: #2f363d;
@success-color: #10b981;
@warning-color: #f59e0b;
@error-color: #ef4444;

// å¸ƒå±€å˜é‡
@card-radius: 8px;
@transition-speed: 0.2s;

.nginx-reference {
  font-family: 'Inter', sans-serif;
  background-color: @light-bg;
  color: @text-color;
  min-height: 100vh;
  padding-bottom: 40px;
  line-height: 1.6;
  max-width: 1200px;
  margin: 0 auto;
  padding: 0 20px;
}

.header {
  padding: 30px 0 20px;
  text-align: center;
  border-bottom: 1px solid @border-color;
  margin-bottom: 20px;

  h1 {
    font-size: 2rem;
    font-weight: 700;
    color: @primary-color;
    margin: 0 0 8px 0;
  }

  p {
    font-size: 1.1rem;
    color: lighten(@text-color, 15%);
    margin: 0;
  }
}

.tabs {
  display: flex;
  gap: 10px;
  margin-bottom: 25px;
  justify-content: center;

  button {
    background: @card-bg;
    border: 1px solid @border-color;
    border-radius: 20px;
    padding: 8px 16px;
    font-size: 0.95rem;
    font-weight: 500;
    color: lighten(@text-color, 15%);
    cursor: pointer;
    transition: all @transition-speed;

    &:hover {
      border-color: @primary-color;
      color: @primary-color;
    }

    &.active {
      background: @primary-color;
      border-color: @primary-color;
      color: white;
    }
  }
}

.content {
  section {
    margin-bottom: 30px;

    h2 {
      font-size: 1.5rem;
      font-weight: 600;
      color: @secondary-color;
      margin: 0 0 15px 0;
      padding-bottom: 8px;
      border-bottom: 1px solid @border-color;
    }
  }
}

.card {
  background: @card-bg;
  border-radius: @card-radius;
  padding: 20px;
  box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
  margin-bottom: 20px;

  h3 {
    font-size: 1.2rem;
    color: darken(@primary-color, 10%);
    margin: 20px 0 15px 0;
  }

  .card-row {
    display: flex;
    gap: 20px;
    margin-bottom: 20px;

    .card-col {
      flex: 1;
      padding: 15px;
      background: lighten(@light-bg, 1%);
      border-radius: @card-radius;

      ul {
        padding-left: 20px;
        margin: 10px 0;

        li {
          margin-bottom: 8px;
        }
      }
    }
  }
}

.comparison {
  display: flex;
  gap: 20px;
  margin-top: 15px;

  >div {
    flex: 1;
    padding: 15px;
    border-radius: @card-radius;
    background: lighten(@light-bg, 1%);

    h4 {
      margin-top: 0;
      color: @primary-color;
    }

    ul {
      padding-left: 20px;
    }
  }
}

.pros-cons {
  display: flex;
  gap: 20px;
  margin: 20px 0;

  .pros,
  .cons {
    flex: 1;
    padding: 15px;
    border-radius: @card-radius;
  }

  .pros {
    background: fade(@success-color, 8%);
    border-left: 4px solid @success-color;

    h3 {
      color: darken(@success-color, 10%);
    }
  }

  .cons {
    background: fade(@warning-color, 8%);
    border-left: 4px solid @warning-color;

    h3 {
      color: darken(@warning-color, 10%);
    }
  }

  ul {
    padding-left: 20px;

    li {
      margin-bottom: 10px;
      line-height: 1.5;
    }
  }
}

.modules {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
  gap: 15px;
  margin: 20px 0;

  .module-card {
    padding: 15px;
    background: lighten(@light-bg, 1%);
    border-radius: @card-radius;
    border: 1px solid @border-color;
    transition: all @transition-speed;

    &:hover {
      transform: translateY(-3px);
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.08);
    }

    .module-icon {
      font-size: 2rem;
      margin-bottom: 10px;
    }

    h4 {
      margin: 10px 0;
      color: @primary-color;
    }

    p {
      margin: 0;
      font-size: 0.9rem;
      color: lighten(@text-color, 15%);
    }
  }
}

.config-block {
  background: @code-bg;
  border-radius: @card-radius;
  padding: 15px;
  font-family: 'Fira Code', monospace;
  font-size: 0.9rem;
  line-height: 1.5;
  overflow-x: auto;
  margin: 15px 0;
  color: @code-text;
  border: 1px solid darken(@code-bg, 5%);
}

.directives {
  .directive {
    margin: 25px 0;

    h4 {
      margin: 15px 0 10px;
      color: darken(@primary-color, 10%);
      font-size: 1.1rem;
    }

    p {
      margin: 0 0 10px 0;
      color: lighten(@text-color, 10%);
    }
  }
}

.scenarios {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
  gap: 20px;
  margin: 25px 0;

  .scenario {
    padding: 20px;
    background: lighten(@light-bg, 1%);
    border-radius: @card-radius;
    border: 1px solid @border-color;

    .scenario-icon {
      font-size: 2.5rem;
      margin-bottom: 15px;
    }

    h3 {
      margin: 10px 0;
      color: @primary-color;
      font-size: 1.2rem;
    }

    p {
      margin: 0;
      color: lighten(@text-color, 15%);
    }
  }
}

.architecture {
  margin: 30px 0;
  padding: 20px;
  background: fade(@primary-color, 5%);
  border-radius: @card-radius;

  .arch-layer {
    display: flex;
    flex-direction: column;
    align-items: center;
    margin-bottom: 10px;

    .arch-title {
      font-weight: 600;
      margin-bottom: 5px;
      color: @primary-color;
    }

    .arch-box {
      background: @card-bg;
      padding: 12px 20px;
      border-radius: @card-radius;
      border: 1px solid @border-color;
      margin: 5px 0;
      text-align: center;
      min-width: 200px;
      box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
    }

    .arch-arrow {
      font-size: 1.5rem;
      color: @primary-color;
      margin: 5px 0;
    }
  }
}

.footer {
  text-align: center;
  padding: 30px 0 10px;
  margin-top: 20px;
  color: lighten(@text-color, 30%);
  font-size: 0.9rem;
  border-top: 1px solid @border-color;
}

// å“åº”å¼è®¾è®¡
@media (max-width: 768px) {
  .tabs {
    flex-wrap: wrap;
    justify-content: flex-start;
  }

  .card-row,
  .comparison,
  .pros-cons {
    flex-direction: column;
  }

  .modules,
  .scenarios {
    grid-template-columns: 1fr;
  }

  .architecture {
    .arch-box {
      min-width: 150px;
    }
  }
}
</style>
