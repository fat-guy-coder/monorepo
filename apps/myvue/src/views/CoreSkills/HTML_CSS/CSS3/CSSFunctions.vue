<template>
  <div class="css-functions-guide">
    <h1 class="main-title">ğŸ¨ CSS å‡½æ•°åŸºæœ¬æŒ‡å—</h1>

    <NavBar :list="allData" show-child @click="activeCategoryToAll" />

    <!-- å‡½æ•°åˆ†ç±»å¯¼èˆª -->
    <nav class="function-nav">
      <button v-for="category in categories" :key="category.name"
        :class="{ active: activeCategory.type === category.type }" @click="activeCategory = category">
        {{ category.name }}
      </button>
    </nav>

    <!-- å¸¸ç”¨å‡½æ•° -->
    <section v-show="activeCategory.type === 'common'" class="function-section">
      <FunctionCard title="var()" description="å®šä¹‰csså˜é‡,æ’å…¥è‡ªå®šä¹‰çš„å±æ€§å€¼" syntax="var(--custom-property, fallback)"
        example="root: {--primary-color: #333;} body: {--primary-color: #333;} å®šä¹‰:var(--primary-color, #333); ä½¿ç”¨:color: var(--primary-color, #333); "
        :scenes="['ä¸»é¢˜åˆ‡æ¢', 'ç»Ÿä¸€æ ·å¼ç®¡ç†']" :pros="['æé«˜å¯ç»´æŠ¤æ€§', 'æ”¯æŒåŠ¨æ€ä¿®æ”¹']" :cons="['æ—§æµè§ˆå™¨ä¸æ”¯æŒ']" color-type="other">
      </FunctionCard>
      <FunctionCard title="calc()" syntax="calc(expression)" description="å…è®¸è®¡ç®— CSS çš„å±æ€§å€¼ï¼Œæ¯”å¦‚åŠ¨æ€è®¡ç®—é•¿åº¦å€¼"
        example="width: calc(100% - 60px);" :scenes="['å“åº”å¼å¸ƒå±€', 'åŠ¨æ€å°ºå¯¸è®¡ç®—']" :pros="['æ··åˆå•ä½è®¡ç®—', 'å®æ—¶å“åº”å˜åŒ–']"
        :cons="['åµŒå¥—è®¡ç®—å¯è¯»æ€§å·®']" color-type="math">
      </FunctionCard>

      <FunctionCard title="attr()" syntax="attr(attribute-name)" description="è·å–å…ƒç´ çš„å±æ€§å€¼"
        example="width: attr(width); width: attr(width, number);" :scenes="['è·å–å…ƒç´ çš„å±æ€§å€¼', 'åŠ¨æ€è®¾ç½®å…ƒç´ çš„å±æ€§å€¼']" :pros="['è·å–å…ƒç´ çš„å±æ€§å€¼', 'åŠ¨æ€è®¾ç½®å…ƒç´ çš„å±æ€§å€¼']"
        :cons="['ä¸æ”¯æŒæ—§æµè§ˆå™¨']" color-type="other">
      </FunctionCard>

      <FunctionCard title="max()" syntax="max(value1, value2, ...)" description="ä¸€ä¸ªé€—å·åˆ†éš”çš„è¡¨è¾¾å¼åˆ—è¡¨ä¸­é€‰æ‹©æœ€å¤§çš„å€¼ä½œä¸ºå±æ€§çš„å€¼"
        example="width: max(100px, 10%);" :scenes="['é™åˆ¶æœ€å°å®½åº¦', 'å“åº”å¼è®¾è®¡']" :pros="['ç®€åŒ–æ¡ä»¶åˆ¤æ–­', 'æé«˜å¯è¯»æ€§']"
        :cons="['ä¸æ”¯æŒæ—§æµè§ˆå™¨']" color-type="math">
      </FunctionCard>

      <FunctionCard title="min()" description="ä¸€ä¸ªé€—å·åˆ†éš”çš„è¡¨è¾¾å¼åˆ—è¡¨ä¸­é€‰æ‹©æœ€å°çš„å€¼ä½œä¸ºå±æ€§çš„å€¼" syntax="min(value1, value2, ...)"
        example="width: min(50%, 300px);" :scenes="['é™åˆ¶æœ€å¤§å®½åº¦', 'å“åº”å¼è®¾è®¡']" :pros="['ç®€åŒ–æ¡ä»¶åˆ¤æ–­', 'æé«˜å¯è¯»æ€§']" :cons="['ä¸æ”¯æŒæ—§æµè§ˆå™¨']"
        color-type="math">
      </FunctionCard>

      <FunctionCard title="minmax()" description="å®šä¹‰äº†ä¸€ä¸ªé•¿å®½èŒƒå›´çš„é—­åŒºé—´ï¼Œå®ƒä¸CSS ç½‘æ ¼å¸ƒå±€ä¸€èµ·ä½¿ç”¨"
        syntax="minmax(min, max)" example="grid-template-columns: minmax(200px, 1fr); grid-template-rows: minmax(100px, 1fr);"
        :scenes="['è‡ªé€‚åº”å¸ƒå±€', 'é™åˆ¶å°ºå¯¸èŒƒå›´']" :pros="['ç®€åŒ–å“åº”å¼è®¾è®¡', 'é¿å…è¿‡å°æˆ–è¿‡å¤§çš„å°ºå¯¸']" :cons="['ä¸æ”¯æŒæ—§æµè§ˆå™¨']"
        color-type="math">
      </FunctionCard>

    </section>

    <!-- æ•°å­¦å‡½æ•° -->
    <section v-show="activeCategory.type === 'math'" class="function-section">
      <FunctionCard title="calc()" syntax="calc(expression)" description="å…è®¸è®¡ç®— CSS çš„å±æ€§å€¼ï¼Œæ¯”å¦‚åŠ¨æ€è®¡ç®—é•¿åº¦å€¼"
        example="width: calc(100% - 60px);" :scenes="['å“åº”å¼å¸ƒå±€', 'åŠ¨æ€å°ºå¯¸è®¡ç®—']" :pros="['æ··åˆå•ä½è®¡ç®—', 'å®æ—¶å“åº”å˜åŒ–']"
        :cons="['åµŒå¥—è®¡ç®—å¯è¯»æ€§å·®']" color-type="math">
      </FunctionCard>
      <FunctionCard title="min()" description="ä¸€ä¸ªé€—å·åˆ†éš”çš„è¡¨è¾¾å¼åˆ—è¡¨ä¸­é€‰æ‹©æœ€å°çš„å€¼ä½œä¸ºå±æ€§çš„å€¼" syntax="min(value1, value2, ...)"
        example="width: min(50%, 300px);" :scenes="['é™åˆ¶æœ€å¤§å®½åº¦', 'å“åº”å¼è®¾è®¡']" :pros="['ç®€åŒ–æ¡ä»¶åˆ¤æ–­', 'æé«˜å¯è¯»æ€§']" :cons="['ä¸æ”¯æŒæ—§æµè§ˆå™¨']"
        color-type="math">
      </FunctionCard>
      <FunctionCard title="max()" syntax="max(value1, value2, ...)" example="width: max(100px, 10%);"
        description="ä¸€ä¸ªé€—å·åˆ†éš”çš„è¡¨è¾¾å¼åˆ—è¡¨ä¸­é€‰æ‹©æœ€å¤§çš„å€¼ä½œä¸ºå±æ€§çš„å€¼" :scenes="['é™åˆ¶æœ€å°å®½åº¦', 'å“åº”å¼è®¾è®¡']" :pros="['ç®€åŒ–æ¡ä»¶åˆ¤æ–­', 'æé«˜å¯è¯»æ€§']"
        :cons="['ä¸æ”¯æŒæ—§æµè§ˆå™¨']" color-type="math">
      </FunctionCard>

      <FunctionCard title="minmax()" syntax="minmax(200px, 1fr)" example="grid-template-columns:minmax(200px, 1fr);"
        description="å®šä¹‰äº†ä¸€ä¸ªé•¿å®½èŒƒå›´çš„é—­åŒºé—´ï¼Œå®ƒä¸CSS ç½‘æ ¼å¸ƒå±€ä¸€èµ·ä½¿ç”¨" :scenes="['é™åˆ¶æœ€å°æœ€å¤§å®½åº¦', 'å“åº”å¼è®¾è®¡']" :pros="['ç®€åŒ–æ¡ä»¶åˆ¤æ–­', 'æé«˜å¯è¯»æ€§']"
        :cons="['ä¸æ”¯æŒæ—§æµè§ˆå™¨']" color-type="math">
      </FunctionCard>

      <FunctionCard title="clamp()å¤¹ç´§" syntax="clamp(min, preferred, max)"
        description="æŠŠä¸€ä¸ªå€¼é™åˆ¶åœ¨ä¸€ä¸ªä¸Šé™å’Œä¸‹é™ä¹‹é—´ï¼Œå½“è¿™ä¸ªå€¼è¶…è¿‡æœ€å°å€¼å’Œæœ€å¤§å€¼çš„èŒƒå›´æ—¶ï¼Œåœ¨æœ€å°å€¼å’Œæœ€å¤§å€¼ä¹‹é—´é€‰æ‹©ä¸€ä¸ªå€¼ä½¿ç”¨" example="font-size:
clamp(16px, 1vw + 1rem, 32px);
æµè§ˆå™¨é¦–å…ˆä¼šå°è¯•ä½¿ç”¨1vw + 1remè¿™ä¸ªè®¡ç®—å‡ºæ¥çš„å€¼ä½œä¸ºå­—ä½“å¤§å°
å¦‚æœè¿™ä¸ªå€¼å°äº 16pxï¼Œå°±ä¼šä½¿ç”¨ 16px
å¦‚æœè¿™ä¸ªå€¼å¤§äº 32pxï¼Œå°±ä¼šä½¿ç”¨ 32px" :scenes="['è‡ªé€‚åº”å¸ƒå±€', 'é™åˆ¶å°ºå¯¸èŒƒå›´']" :pros="['ç®€åŒ–å“åº”å¼è®¾è®¡', 'é¿å…è¿‡å°æˆ–è¿‡å¤§çš„å°ºå¯¸']" :cons="['ä¸æ”¯æŒæ—§æµè§ˆå™¨']"
        color-type="math">
      </FunctionCard>
      <FunctionCard title="cubic-bezier" description="å®šä¹‰åŠ¨ç”»æ›²çº¿ï¼Œå’Œè¿‡æ¸¡æ›²çº¿" syntax="cubic-bezier(0.1, 0.7, 1.0, 0.1)"
        example="cubic-bezier(0.1, 0.7, 1.0, 0.1);" :scenes="['å®šä¹‰åŠ¨ç”»æ›²çº¿ï¼Œå’Œè¿‡æ¸¡æ›²çº¿']" color-type="other">

      </FunctionCard>
    </section>


    <!-- é¢œè‰²å‡½æ•° -->
    <section v-show="activeCategory.type === 'color'" class="function-section">
      <FunctionCard title="rgb()/rgba()" syntax="rgb(red, green, blue) / rgba(red, green, blue, alpha)"
        example="background: rgba(255, 0, 120, 0.8);" :scenes="['åŠé€æ˜èƒŒæ™¯', 'é¢œè‰²å åŠ æ•ˆæœ']" :pros="['ç›´è§‚çš„é¢œè‰²æ§åˆ¶', 'è‰¯å¥½çš„æµè§ˆå™¨æ”¯æŒ']"
        :cons="['ä¸æ˜“è¿›è¡Œé¢œè‰²è°ƒæ•´', 'ä¸å¤Ÿè¯­ä¹‰åŒ–']" color-type="color">
        <div class="color-demo rgb-demo"></div>
      </FunctionCard>

      <FunctionCard title="hsl()/hsla()" syntax="hsl(hue, saturation%, lightness%)"
        example="color: hsl(200, 100%, 50%);" :scenes="['åŠ¨æ€ä¸»é¢˜è‰²', 'é¢œè‰²æ¸å˜è¿‡æ¸¡']" :pros="['ç›´è§‚çš„é¢œè‰²è°ƒèŠ‚', 'ä¾¿äºç”Ÿæˆé¢œè‰²å˜ä½“']"
        :cons="['æ—§æµè§ˆå™¨æ”¯æŒæœ‰é™']" color-type="color">
        <div class="color-demo hsl-demo"></div>
      </FunctionCard>
    </section>

    <!-- light-darkå‡½æ•° -->
    <section v-show="activeCategory.type === 'light-dark'" class="function-section">
      <FunctionCard title="light-dark()" syntax="light-dark(light-color, dark-color)" description="ç”¨äºå˜æ›´ä¸»é¢˜è‰²"
        example="body { background-color: light-dark(red, blue); }" :scenes="['æ·±è‰²æ¨¡å¼', 'é¢œè‰²è°ƒæ•´']"
        :pros="['è‡ªåŠ¨é€‚åº”ç³»ç»Ÿè®¾ç½®', 'ç»Ÿä¸€æ ·å¼ç®¡ç†', 'åˆ‡æ¢ç±»ådark-modeå’Œlight-modeå³å¯å®ç°ä¸»é¢˜åˆ‡æ¢']" :cons="['ä¸æ”¯æŒæ—§æµè§ˆå™¨']" color-type="other">
        <div class="color-demo light-dark-demo"></div>
      </FunctionCard>
    </section>

    <!-- æ¸å˜å‡½æ•° -->
    <section v-show="activeCategory.type === 'gradient'" class="function-section">
      <FunctionCard title="linear-gradient(),radial-gradient(),conic-gradient()"
        syntax="linear-gradient(direction, color-stop1, color-stop2,...)"
        example="background: linear-gradient(45deg, #ff6b6b, #4ecdc4);" :scenes="['èƒŒæ™¯è£…é¥°', 'æŒ‰é’®æ•ˆæœ', 'å›¾åƒé®ç½©']"
        :pros="['åˆ›å»ºå¹³æ»‘è¿‡æ¸¡', 'æ”¯æŒå¤šé¢œè‰²èŠ‚ç‚¹']" :cons="['å¤æ‚æ¸å˜æ€§èƒ½æ¶ˆè€—']" color-type="gradient">
        <div class="gradient-demo linear"></div>
      </FunctionCard>
    </section>

    <!-- è´å¡å°”æ›²çº¿å‡½æ•° -->
    <section class="cubic-bezier-section" v-if="activeCategory.type === 'math'">
      <h3>è´å¡å°”æ›²çº¿å‡½æ•°</h3>
      <h4>æ‘˜è‡ª<a href="https://www.runoob.com/cssref/func-cubic-bezier.html" target="_blank">èœé¸Ÿæ•™ç¨‹</a></h4>
      <h4>cubic-bezier() å‡½æ•°å®šä¹‰äº†ä¸€ä¸ªè´å¡å°”æ›²çº¿(Cubic Bezier)ã€‚
        è´å¡å°”æ›²çº¿æ›²çº¿ç”±å››ä¸ªç‚¹ P0ï¼ŒP1ï¼ŒP2 å’Œ P3 å®šä¹‰ã€‚P0 å’Œ P3 æ˜¯æ›²çº¿çš„èµ·ç‚¹å’Œç»ˆç‚¹ã€‚P0æ˜¯ï¼ˆ0,0ï¼‰å¹¶ä¸”è¡¨ç¤ºåˆå§‹æ—¶é—´å’Œåˆå§‹çŠ¶æ€ï¼ŒP3æ˜¯ï¼ˆ1,1ï¼‰å¹¶ä¸”è¡¨ç¤ºæœ€ç»ˆæ—¶é—´å’Œæœ€ç»ˆçŠ¶æ€</h4>
      <p><img src="@/assets/css/cubic-bezier-01.png" alt="åŠ è½½å¤±è´¥" loading="lazy"></p>
      <p><img src="@/assets/css/cubic-bezier-02.jpg" alt="åŠ è½½å¤±è´¥" loading="lazy"></p>
      <pre><code>
P0ï¼šé»˜è®¤å€¼ (0, 0)
P1ï¼šåŠ¨æ€å–å€¼ (x1, y1)
P2ï¼šåŠ¨æ€å–å€¼ (x2, y2)
P3ï¼šé»˜è®¤å€¼ (1, 1)
      </code></pre>
    </section>

    <section v-show="activeCategory.type === 'all'" class="all-function-section">
      <div v-for="item in allData" :key="item.name" class="function-item" :id="item.id">
        <h3>{{ item.name }}</h3>
        <div v-for="child in item.children" :key="child.name" :id="child.id">
          <h4>{{ item.type }}-{{ child.title }}</h4>
          <p>{{ child.des }}</p>
          <pre class="code-box"><code>{{ child.code }}</code></pre>
        </div>
      </div>
    </section>

    <!-- ä½¿ç”¨å»ºè®® -->
    <div class="recommendation">
      <h2>ğŸ’¡ æœ€ä½³å®è·µå»ºè®®</h2>
      <ul>
        <li>ä¼˜å…ˆä½¿ç”¨ç°ä»£å‡½æ•°å¦‚ calc() å®ç°å“åº”å¼å¸ƒå±€</li>
        <li>å¤æ‚é¢œè‰²æ“ä½œä½¿ç”¨ hsl() æ›´æ˜“ç»´æŠ¤</li>
        <li>é‡å¤å€¼ä½¿ç”¨ CSS å˜é‡é…åˆ var()</li>
      </ul>
    </div>
  </div>
</template>

<script setup lang="ts">
import { ref, onBeforeMount } from 'vue'
import FunctionCard from '../Components/FunctionCard.vue'
import NavBar from '@/components//ScrollNav.vue'

interface Category {
  name: string
  type: string
}

const categories = ref<Category[]>([{
  name: 'å¸¸ç”¨å‡½æ•°',
  type: 'common'
}, {
  name: 'æ•°å­¦å‡½æ•°',
  type: 'math'
}, {
  name: 'é¢œè‰²å‡½æ•°',
  type: 'color'
}, {
  name: 'light-darkå‡½æ•°',
  type: 'light-dark'
}, {
  name: 'æ¸å˜å‡½æ•°',
  type: 'gradient'
},
{
  name: 'å…¨éƒ¨',
  type: 'all'
}
])
const activeCategory = ref<Category>(categories.value[0])

interface Data {
  id: string
  name: string
  type: string
  children: {
    title: string
    name: string
    des: string
    code: string
    id: string
  }[]
}
const allData = ref<Data[]>([])

const activeCategoryToAll = () => {
  activeCategory.value = categories.value.find(item => item.type === 'all') as { name: string; type: string }
}

onBeforeMount(async () => {
  const { default: data } = await import('../JSON/CssFunction.json')
  allData.value = data as Data[]
})
</script>

<style scoped>
.css-functions-guide {
  max-width: 1100px;
  margin: 0 auto;
  padding: 2rem;
  font-family: 'Inter', system-ui, sans-serif;
  background-color: #f9fafb;
  color: #111827;
}

.main-title {
  text-align: center;
  margin-bottom: 2rem;
  font-size: 2.2rem;
  font-weight: 700;
  background: none;
  -webkit-text-fill-color: inherit;
  color: #111827;
}

.function-nav {
  display: flex;
  gap: 1rem;
  margin: 2rem 0;
  justify-content: center;
}

.function-nav button {
  padding: 0.6rem 1.2rem;
  border: 1px solid #d1d5db;
  border-radius: 6px;
  background: #fff;
  color: #374151;
  cursor: pointer;
  transition: all 0.2s ease;
}

.function-nav button.active {
  background: #3b82f6;
  color: white;
  border-color: #3b82f6;
  transform: none;
}

.function-nav button:hover:not(.active) {
  background-color: #f3f4f6;
}

.function-section {
  display: grid;
  gap: 1.5rem;
  grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
}

.color-demo {
  width: 100%;
  height: 120px;
  border-radius: 8px;
  border: 1px solid #e5e7eb;
}

.rgb-demo {
  background: rgba(255, 0, 120, 0.8);
}

.hsl-demo {
  background: hsl(200, 100%, 50%);
}

.gradient-demo {
  height: 120px;
  border-radius: 8px;
}

.linear {
  background: linear-gradient(45deg, #ff6b6b, #4ecdc4);
}

.recommendation {
  background: #fff;
  padding: 1.5rem;
  border-radius: 8px;
  margin-top: 2rem;
  border: 1px solid #e5e7eb;
}

.recommendation h2 {
  font-size: 1.2rem;
  font-weight: 600;
  margin-bottom: 0.8rem;
}

.recommendation ul {
  padding-left: 1.2rem;
  margin: 0;
}

.cubic-bezier-section {
  margin: 2rem 0;
  padding: 1.5rem;
  background: #fff;
  border-radius: 8px;
  border: 1px solid #e5e7eb;
}

.cubic-bezier-section h3,
.cubic-bezier-section h4 {
  margin-bottom: 0.8rem;
}

.cubic-bezier-section img {
  max-width: 100%;
  border-radius: 6px;
  border: 1px solid #e5e7eb;
}

.all-function-section {
  box-shadow: none;
  padding: 0;
  border-radius: 0;
}

.function-item {
  border: 1px solid #e5e7eb;
  padding: 1.5rem;
  border-radius: 8px;
  margin: 1rem 0;
  background-color: #fff;
}

.function-item h3 {
  font-size: 1.2rem;
  font-weight: 600;
}

.function-item h4 {
  font-size: 1.1rem;
  font-weight: 600;
  color: #4b5563;
}

.code-box {
  background: #f3f4f6;
  padding: 1rem;
  border-radius: 8px;
  color: #1f2937;
}

.code-box code {
  color: #1f2937;
}
</style>
