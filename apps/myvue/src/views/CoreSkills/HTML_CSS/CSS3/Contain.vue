<template>
  <div class="contain-demo">
    <!-- ä»‹ç»éƒ¨åˆ† -->
    <section class="intro-section">
      <h2>CSS Contain å±æ€§</h2>

      <h3>
        CSS å±æ€§ contain æ ‡ç¤ºäº†å…ƒç´ åŠå…¶å†…å®¹å°½å¯èƒ½<b>ç‹¬ç«‹</b>äºæ–‡æ¡£æ ‘çš„å…¶ä½™éƒ¨åˆ†ã€‚containå±æ€§ä½¿ DOM çš„ä¸€éƒ¨åˆ†å¾—ä»¥è¢«éš”ç¦»ï¼Œä¸”é€šè¿‡å°†å¸ƒå±€ã€æ ·å¼ã€ç»˜åˆ¶ã€å°ºå¯¸æˆ–å…¶ä»»æ„ç»„åˆçš„è®¡ç®— <b> é™åˆ¶äº DOM
          å­æ ‘è€Œéæ•´ä¸ªé¡µé¢ä½¿æ€§èƒ½å—ç›Š</b>ã€‚containä¹Ÿå¯ç”¨äºé™åˆ¶
        CSS è®¡æ•°å™¨å’Œå¼•å·çš„ä½œç”¨åŸŸã€‚<a href="https://developer.mozilla.org/en-US/docs/Web/CSS/contain" target="_blank"
          rel="noopener noreferrer">æ‘˜è‡ªMDN</a>
      </h3>
      <h3>ä¼˜ç‚¹</h3>
      <ul>
        <li>åœ¨å®¹å™¨å†…å¯¹è¢«å±€é™å±æ€§çš„ä¿®æ”¹ä¸ä¼šä¼ æ’­åˆ°è¢«å±€é™å…ƒç´ å¤–çš„é¡µé¢çš„å…¶ä½™éƒ¨åˆ†ã€‚</li>
        <li>å±€é™çš„ä¸»è¦ç›Šå¤„åœ¨äºæµè§ˆå™¨æ— éœ€ç»å¸¸é‡æ¸² DOM æˆ–é¡µé¢å¸ƒå±€ï¼Œç”±æ­¤åœ¨é™æ€é¡µé¢çš„æ¸²æŸ“ä¸­å¸¦æ¥å°å¹…æ€§èƒ½æ”¶ç›Šï¼Œåœ¨æ›´åŠ¨æ€çš„åº”ç”¨ä¸­å¸¦æ¥æ›´å¤šçš„æ€§èƒ½æ”¶ç›Š</li>
      </ul>
      <div class="description">
        <p>ğŸš€ <strong>contain</strong> å±æ€§ç”¨äºé™åˆ¶å…ƒç´ åŠå…¶å­å…ƒç´ çš„æ¸²æŸ“å½±å“èŒƒå›´ï¼Œé€šè¿‡éš”ç¦»å†…å®¹æå‡é¡µé¢æ€§èƒ½</p>
        <p>ğŸ“Œ ä¸»è¦åº”ç”¨åœºæ™¯ï¼šå¤æ‚ç•Œé¢ä¼˜åŒ–ã€æ— é™æ»šåŠ¨åˆ—è¡¨ã€åŠ¨ç”»æ€§èƒ½æå‡</p>
      </div>
    </section>

    <!-- æ§åˆ¶é¢æ¿ -->
    <section class="control-section">
      <div class="controls">
        <div class="control-group">
          <label>é€‰æ‹©containç±»å‹ï¼š</label>
          <select v-model="selectedContain">
            <option v-for="type in containTypes" :key="type.value" :value="type.value">
              {{ type.label }}
            </option>
          </select>
        </div>

        <div class="control-group">
          <label>
            <input type="checkbox" v-model="enableAnimation">
            å¯ç”¨åŠ¨ç”»
          </label>
        </div>

        <div class="control-group">
          <button @click="addElement">æ·»åŠ å…ƒç´ (+10)</button>
          <button @click="resetElements">é‡ç½®å…ƒç´ </button>
        </div>
      </div>
    </section>

    <!-- æ¼”ç¤ºåŒºåŸŸ -->
    <section class="demo-section">
      <div class="demo-container" :class="[selectedContain, { 'with-animation': enableAnimation }]"
        :style="{ contain: selectedContain }">
        <div v-for="n in elementCount" :key="n" class="demo-element"></div>
      </div>

      <!-- ä»£ç å±•ç¤º -->
      <pre class="code-display">
.demo-container {
  contain: <span class="highlight">{{ selectedContain || 'none' }}</span>;
}</pre>
    </section>

    <!-- ç±»å‹è¯´æ˜ -->
    <section class="type-section">
      <h3>ğŸ“– å±æ€§å€¼è¯´æ˜</h3>
      <div class="type-grid">
        <div v-for="type in containTypes" :key="type.value" class="type-card">
          <h4>{{ type.label }}</h4>
          <code>{{ type.value }}</code>
          <p>{{ type.description }}</p>
        </div>
      </div>
    </section>

    <!-- æ³¨æ„äº‹é¡¹ -->
    <section class="notice-section">
      <h3>âš ï¸ æ³¨æ„äº‹é¡¹</h3>
      <ul>
        <li>åˆç†é€‰æ‹©containç±»å‹ï¼Œè¿‡åº¦ä½¿ç”¨å¯èƒ½é€‚å¾—å…¶å</li>
        <li>ä½¿ç”¨`size`æ—¶éœ€è¦æ˜ç¡®æŒ‡å®šå…ƒç´ å°ºå¯¸</li>
        <li>æ³¨æ„æµè§ˆå™¨å…¼å®¹æ€§ï¼ˆç°ä»£æµè§ˆå™¨æ”¯æŒè‰¯å¥½ï¼‰</li>
        <li>ç»“åˆ`content-visibility`ä½¿ç”¨æ•ˆæœæ›´ä½³</li>
      </ul>
    </section>
  </div>
</template>

<script setup lang="ts">
import { ref } from 'vue';

const selectedContain = ref('none');
const elementCount = ref(50);
const enableAnimation = ref(false);

const containTypes = [
  {
    value: 'none',
    label: 'é»˜è®¤',
    description: 'æ— containæ•ˆæœ'
  },
  {
    value: 'layout',
    label: 'å¸ƒå±€éš”ç¦»',
    description: 'éš”ç¦»å¸ƒå±€å½±å“ï¼Œé˜²æ­¢å…ƒç´ å¤–å¸ƒå±€å˜åŒ–'
  },
  {
    value: 'paint',
    label: 'ç»˜åˆ¶éš”ç¦»',
    description: 'é™åˆ¶å­å…ƒç´ ç»˜åˆ¶åˆ°å…ƒç´ è¾¹ç•Œå¤–'
  },
  {
    value: 'size',
    label: 'å°ºå¯¸éš”ç¦»',
    description: 'å…ƒç´ å°ºå¯¸ä¸å—å­å…ƒç´ å½±å“ï¼Œéœ€æŒ‡å®šæ˜ç¡®å°ºå¯¸'
  },
  {
    value: 'content',
    label: 'å†…å®¹éš”ç¦»',
    description: 'ç­‰æ•ˆäºåŒæ—¶å¼€å¯layoutå’Œpaint'
  },
  {
    value: 'strict',
    label: 'ä¸¥æ ¼æ¨¡å¼',
    description: 'ç­‰æ•ˆäºåŒæ—¶å¼€å¯layoutã€paintå’Œsize'
  }
];

const addElement = () => {
  elementCount.value += 10;
};

const resetElements = () => {
  elementCount.value = 50;
};
</script>

<style lang="less">
@primary-color: #2c3e50;
@secondary-color: #42b983;
@warning-color: #e74c3c;

.contain-demo {
  max-width: 1200px;
  margin: 2rem auto;
  padding: 0 1rem;
  font-family: 'Segoe UI', system-ui;

  section {
    margin-bottom: 2rem;
    padding: 1.5rem;
    background: white;
    border-radius: 12px;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
  }

  .intro-section {
    h2 {
      color: @primary-color;
      border-bottom: 3px solid @secondary-color;
      padding-bottom: 0.8rem;
    }

    .description {
      padding: 1rem 0;
      line-height: 1.6;

      p {
        margin: 0.8rem 0;
        padding: 1rem;
        background: #f8f9fa;
        border-radius: 6px;
      }
    }
  }

  .control-section {
    .controls {
      display: flex;
      flex-wrap: wrap;
      gap: 1.5rem;

      .control-group {
        display: flex;
        align-items: center;
        gap: 0.8rem;

        select {
          padding: 0.5rem;
          border: 1px solid #ddd;
          border-radius: 6px;
          min-width: 200px;
        }

        button {
          padding: 0.6rem 1.2rem;
          background: @secondary-color;
          color: white;
          border: none;
          border-radius: 6px;
          cursor: pointer;
          transition: opacity 0.2s;

          &:hover {
            opacity: 0.9;
          }
        }
      }
    }
  }

  .demo-section {
    .demo-container {
      position: relative;
      height: 400px;
      border: 2px dashed #ddd;
      border-radius: 8px;
      padding: 1rem;
      overflow: auto;
      margin-bottom: 1.5rem;

      &.with-animation .demo-element {
        animation: scale 1.5s infinite alternate;
      }

      .demo-element {
        display: inline-block;
        width: 40px;
        height: 40px;
        background: @secondary-color;
        margin: 5px;
        border-radius: 4px;
        opacity: 0.8;
      }
    }

    .code-display {
      background: #282c34;
      color: #abb2bf;
      padding: 1rem;
      border-radius: 8px;
      font-family: 'Fira Code', monospace;

      .highlight {
        color: #e06c75;
        font-weight: bold;
      }
    }
  }

  .type-section {
    .type-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
      gap: 1.5rem;

      .type-card {
        padding: 1.2rem;
        background: #f8f9fa;
        border-radius: 8px;
        border-left: 4px solid @secondary-color;

        h4 {
          margin: 0 0 0.8rem;
          color: @primary-color;
        }

        code {
          display: block;
          margin-bottom: 0.8rem;
          color: @secondary-color;
          font-weight: bold;
        }
      }
    }
  }

  .notice-section {
    background: #fff9f9;
    border: 2px solid @warning-color;

    ul {
      padding-left: 1.5rem;

      li {
        margin: 0.8rem 0;
        padding-left: 0.5rem;
        border-left: 3px solid @warning-color;
      }
    }
  }
}

@keyframes scale {
  from {
    transform: scale(1);
  }

  to {
    transform: scale(1.2);
  }
}
</style>
