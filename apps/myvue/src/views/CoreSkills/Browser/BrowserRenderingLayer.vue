<template>
  <div class="browser-layers">
    <header class="header">
      <h1>æµè§ˆå™¨å›¾å±‚æŠ€æœ¯è§£æ</h1>
      <p>æ·±å…¥ç†è§£ç°ä»£æµè§ˆå™¨æ¸²æŸ“æ€§èƒ½ä¼˜åŒ–çš„æ ¸å¿ƒæœºåˆ¶</p>
    </header>

    <div class="content-container">
      <section class="concept-section">
        <div class="section-header">
          <div class="icon">ğŸ”</div>
          <h2>æµè§ˆå™¨å›¾å±‚åŸºç¡€æ¦‚å¿µ</h2>
        </div>

        <div class="content-card">
          <div class="definition">
            <h3>ä»€ä¹ˆæ˜¯æµè§ˆå™¨å›¾å±‚ï¼Ÿ</h3>
            <p>æµè§ˆå™¨å›¾å±‚(Layers)æ˜¯æµè§ˆå™¨æ¸²æŸ“å¼•æ“å†…éƒ¨çš„ä¸€ç§ä¼˜åŒ–æœºåˆ¶ï¼Œå®ƒå°†é¡µé¢å†…å®¹åˆ†è§£ä¸ºå¤šä¸ªç‹¬ç«‹çš„å›¾åƒå±‚ï¼Œé€šè¿‡åˆ†å±‚ç®¡ç†å’ŒåˆæˆæŠ€æœ¯å®ç°é«˜æ•ˆçš„é¡µé¢æ¸²æŸ“ã€‚</p>
          </div>

          <div class="render-flow">
            <h3>æµè§ˆå™¨æ¸²æŸ“æµç¨‹ä¸­çš„å›¾å±‚</h3>
            <div class="flow-diagram">
              <div class="step">
                <div class="step-icon">1</div>
                <div class="step-content">
                  <h4>DOMæ ‘æ„å»º</h4>
                  <p>è§£æHTMLç”ŸæˆDOMæ ‘</p>
                </div>
              </div>
              <div class="arrow">â†’</div>
              <div class="step">
                <div class="step-icon">2</div>
                <div class="step-content">
                  <h4>æ ·å¼è®¡ç®—</h4>
                  <p>è§£æCSSç”ŸæˆCSSOM</p>
                </div>
              </div>
              <div class="arrow">â†’</div>
              <div class="step">
                <div class="step-icon">3</div>
                <div class="step-content">
                  <h4>å¸ƒå±€(Layout)</h4>
                  <p>è®¡ç®—å…ƒç´ ä½ç½®å’Œå¤§å°</p>
                </div>
              </div>
              <div class="arrow">â†’</div>
              <div class="step">
                <div class="step-icon">4</div>
                <div class="step-content">
                  <h4>å›¾å±‚åˆ†å±‚</h4>
                  <p>åˆ›å»ºç‹¬ç«‹çš„æ¸²æŸ“å±‚</p>
                </div>
              </div>
              <div class="arrow">â†’</div>
              <div class="step">
                <div class="step-icon">5</div>
                <div class="step-content">
                  <h4>ç»˜åˆ¶(Paint)</h4>
                  <p>å¡«å……åƒç´ æ•°æ®</p>
                </div>
              </div>
              <div class="arrow">â†’</div>
              <div class="step">
                <div class="step-icon">6</div>
                <div class="step-content">
                  <h4>åˆæˆ(Composite)</h4>
                  <p>åˆå¹¶å›¾å±‚åˆ°å±å¹•</p>
                </div>
              </div>
            </div>
          </div>
        </div>
      </section>

      <section class="types-section">
        <div class="section-header">
          <div class="icon">ğŸ“š</div>
          <h2>æµè§ˆå™¨å›¾å±‚ç±»å‹</h2>
        </div>

        <div class="layer-types">
          <div class="layer-card">
            <div class="layer-icon">1</div>
            <h3>æ ¹å›¾å±‚</h3>
            <p>æ•´ä¸ªé¡µé¢çš„åŸºç¡€å±‚ï¼ŒåŒ…å«æ‰€æœ‰å†…å®¹</p>
            <div class="characteristics">
              <span class="char-tag">ä½ç½®å›ºå®š</span>
              <span class="char-tag">åŒ…å«æ‰€æœ‰å…ƒç´ </span>
            </div>
          </div>

          <div class="layer-card">
            <div class="layer-icon">2</div>
            <h3>æ¸²æŸ“å±‚</h3>
            <p>å…·æœ‰ç‰¹å®šæ ·å¼çš„DOMå­æ ‘</p>
            <div class="characteristics">
              <span class="char-tag">ç‹¬ç«‹ç»˜åˆ¶</span>
              <span class="char-tag">å¯å•ç‹¬æ›´æ–°</span>
            </div>
          </div>

          <div class="layer-card">
            <div class="layer-icon">3</div>
            <h3>åˆæˆå±‚</h3>
            <p>ç”±GPUå¤„ç†çš„ç‹¬ç«‹å›¾å±‚</p>
            <div class="characteristics">
              <span class="char-tag">ç¡¬ä»¶åŠ é€Ÿ</span>
              <span class="char-tag">é«˜æ•ˆåˆæˆ</span>
            </div>
          </div>

          <div class="layer-card">
            <div class="layer-icon">4</div>
            <h3>æ»šåŠ¨å±‚</h3>
            <p>å¤„ç†æ»šåŠ¨å†…å®¹çš„å›¾å±‚</p>
            <div class="characteristics">
              <span class="char-tag">ç‹¬ç«‹æ»šåŠ¨</span>
              <span class="char-tag">å¹³æ»‘æ»šåŠ¨</span>
            </div>
          </div>
        </div>
      </section>

      <section class="function-section">
        <div class="section-header">
          <div class="icon">ğŸ’¡</div>
          <h2>æµè§ˆå™¨å›¾å±‚çš„ä½œç”¨</h2>
        </div>

        <div class="functions">
          <div class="function-card">
            <div class="func-icon">âš¡</div>
            <h3>æ€§èƒ½ä¼˜åŒ–</h3>
            <p>å‡å°‘é‡ç»˜å’Œé‡æ’èŒƒå›´ï¼Œä»…æ›´æ–°å˜åŒ–å›¾å±‚</p>
          </div>

          <div class="function-card">
            <div class="func-icon">ğŸ¨</div>
            <h3>åŠ¨ç”»æµç•…</h3>
            <p>GPUåŠ é€ŸåŠ¨ç”»ï¼Œé¿å…ä¸»çº¿ç¨‹é˜»å¡</p>
          </div>

          <div class="function-card">
            <div class="func-icon">ğŸ”„</div>
            <h3>é«˜æ•ˆæ¸²æŸ“</h3>
            <p>å¹¶è¡Œå¤„ç†å›¾å±‚ï¼Œå……åˆ†åˆ©ç”¨å¤šæ ¸CPU/GPU</p>
          </div>

          <div class="function-card">
            <div class="func-icon">ğŸ›¡ï¸</div>
            <h3>å†…å®¹éš”ç¦»</h3>
            <p>é˜²æ­¢å†…å®¹é‡å å’Œæ˜¾ç¤ºé—®é¢˜</p>
          </div>
        </div>

        <div class="performance-comparison">
          <h3>å›¾å±‚ä¼˜åŒ–å‰åçš„æ€§èƒ½å¯¹æ¯”</h3>
          <div class="comparison-chart">
            <div class="chart-bar">
              <div class="bar-label">æ— å›¾å±‚ä¼˜åŒ–</div>
              <div class="bar-container">
                <div class="bar bad" :style="{ width: '85%' }">85% CPUå ç”¨</div>
              </div>
            </div>
            <div class="chart-bar">
              <div class="bar-label">å¯ç”¨å›¾å±‚åŠ é€Ÿ</div>
              <div class="bar-container">
                <div class="bar good" :style="{ width: '30%' }">30% CPUå ç”¨</div>
              </div>
            </div>
          </div>
        </div>
      </section>

      <section class="acceleration-section">
        <div class="section-header">
          <div class="icon">ğŸš€</div>
          <h2>å¯ç”¨å›¾å±‚åŠ é€ŸæŠ€æœ¯</h2>
        </div>

        <div class="acceleration-methods">
          <div class="method-card">
            <div class="method-icon">ğŸ›ï¸</div>
            <h3>CSSå±æ€§è§¦å‘</h3>
            <div class="code-examples">
              <pre><code>transform: translateZ(0);</code></pre>
              <pre><code>will-change: transform;</code></pre>
              <pre><code>backface-visibility: hidden;</code></pre>
            </div>
          </div>

          <div class="method-card">
            <div class="method-icon">ğŸ–¼ï¸</div>
            <h3>å…ƒç´ ç‰¹æ€§è§¦å‘</h3>
            <ul class="element-list">
              <li>3Då˜æ¢å…ƒç´  (transform: translate3d)</li>
              <li>è§†é¢‘å’ŒCanvaså…ƒç´ </li>
              <li>é€æ˜å…ƒç´  (opacity &lt; 1)</li>
              <li>CSSæ»¤é•œå…ƒç´  (filter)</li>
              <li>å›ºå®šå®šä½å…ƒç´  (position: fixed)</li>
            </ul>
          </div>
        </div>

        <div class="best-practices">
          <h3>å›¾å±‚ä¼˜åŒ–æœ€ä½³å®è·µ</h3>
          <div class="practice-grid">
            <div class="practice">
              <div class="practice-icon">âœ…</div>
              <h4>åˆç†ä½¿ç”¨will-change</h4>
              <p>ä»…å¯¹éœ€è¦åŠ¨ç”»çš„å…ƒç´ åº”ç”¨</p>
            </div>
            <div class="practice">
              <div class="practice-icon">âœ…</div>
              <h4>é¿å…è¿‡åº¦åˆ†å±‚</h4>
              <p>è¿‡å¤šå›¾å±‚æ¶ˆè€—å†…å­˜</p>
            </div>
            <div class="practice">
              <div class="practice-icon">âœ…</div>
              <h4>ä¼˜å…ˆä½¿ç”¨transform/opacity</h4>
              <p>è¿™äº›å±æ€§å¯è¢«GPUåŠ é€Ÿ</p>
            </div>
            <div class="practice">
              <div class="practice-icon">âœ…</div>
              <h4>ä½¿ç”¨CSSåŠ¨ç”»è€ŒéJSåŠ¨ç”»</h4>
              <p>CSSåŠ¨ç”»æ›´æ˜“è¢«æµè§ˆå™¨ä¼˜åŒ–</p>
            </div>
          </div>
        </div>
      </section>

      <section class="devtools-section">
        <div class="section-header">
          <div class="icon">ğŸ”§</div>
          <h2>å¼€å‘è€…å·¥å…·åˆ†æ</h2>
        </div>

        <div class="devtools-content">
          <div class="devtools-image">
            <div class="placeholder">
              <div class="browser-frame">
                <div class="browser-tabs">
                  <div class="tab active">Layers</div>
                  <div class="tab">Performance</div>
                  <div class="tab">Rendering</div>
                </div>
                <div class="layers-panel">
                  <div class="layer-item">
                    <div class="layer-color"></div>
                    <div class="layer-info">Root Layer</div>
                  </div>
                  <div class="layer-item">
                    <div class="layer-color" style="background: #FF6B6B;"></div>
                    <div class="layer-info">Header Layer</div>
                  </div>
                  <div class="layer-item">
                    <div class="layer-color" style="background: #4ECDC4;"></div>
                    <div class="layer-info">Animation Layer</div>
                  </div>
                  <div class="layer-item">
                    <div class="layer-color" style="background: #FFD166;"></div>
                    <div class="layer-info">Video Layer</div>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <div class="devtools-steps">
            <h3>Chromeå›¾å±‚åˆ†ææ­¥éª¤</h3>
            <ol>
              <li>æ‰“å¼€å¼€å‘è€…å·¥å…· (F12)</li>
              <li>åˆ‡æ¢åˆ°"Layers"é¢æ¿</li>
              <li>æŸ¥çœ‹é¡µé¢å›¾å±‚ç»“æ„</li>
              <li>åˆ†æå›¾å±‚è¾¹ç•Œå’Œæ·±åº¦</li>
              <li>æ£€æŸ¥å›¾å±‚æ›´æ–°é¢‘ç‡</li>
              <li>è¯†åˆ«ä¸å¿…è¦çš„å›¾å±‚</li>
            </ol>
          </div>
        </div>
      </section>
    </div>
  </div>
</template>

<script setup lang="ts">
import { ref } from 'vue';

// ç”¨äºåŠ¨ç”»çš„å“åº”å¼æ•°æ®
const animatedValue = ref(0);
</script>

<style lang="less" scoped>
@primary-color: #4361ee;
@secondary-color: #3a0ca3;
@accent-color: #4895ef;
@layer-color-1: #4ECDC4;
@layer-color-2: #FF6B6B;
@layer-color-3: #FFD166;
@layer-color-4: #1A535C;
@light-bg: #f8f9fa;
@card-bg: #ffffff;
@text-color: #2b2d42;
@border-color: #e9ecef;
@success-color: #4cc9f0;
@bad-color: #ff6b6b;
@good-color: #06d6a0;

.browser-layers {
  font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
  line-height: 1.6;
  color: @text-color;
  background: linear-gradient(135deg, #f5f7fa 0%, #e4edf5 100%);
  min-height: 100vh;
  padding: 2rem;
}

.header {
  text-align: center;
  margin-bottom: 2.5rem;
  padding: 2rem;
  background: linear-gradient(120deg, @primary-color, @secondary-color);
  border-radius: 16px;
  color: white;
  box-shadow: 0 6px 20px rgba(0, 0, 0, 0.12);

  h1 {
    font-size: 2.8rem;
    margin-bottom: 0.5rem;
    font-weight: 700;
  }

  p {
    font-size: 1.2rem;
    opacity: 0.9;
    max-width: 600px;
    margin: 0 auto;
  }
}

.content-container {
  max-width: 1400px;
  margin: 0 auto;
}

.section-header {
  display: flex;
  align-items: center;
  gap: 1rem;
  margin-bottom: 1.8rem;
  padding-bottom: 0.8rem;
  border-bottom: 2px solid @primary-color;

  .icon {
    font-size: 2rem;
    background: @primary-color;
    color: white;
    width: 50px;
    height: 50px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
  }

  h2 {
    font-size: 1.8rem;
    color: @secondary-color;
  }
}

.content-card {
  background: @card-bg;
  border-radius: 16px;
  padding: 2.2rem;
  margin-bottom: 2.5rem;
  box-shadow: 0 6px 18px rgba(0, 0, 0, 0.06);
  transition: transform 0.3s ease, box-shadow 0.3s ease;

  &:hover {
    transform: translateY(-5px);
    box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
  }

  h3 {
    color: @primary-color;
    margin-bottom: 1.5rem;
    font-size: 1.6rem;
  }

  p {
    margin-bottom: 1.5rem;
    font-size: 1.1rem;
    line-height: 1.8;
  }
}

.flow-diagram {
  display: flex;
  justify-content: space-between;
  align-items: center;
  flex-wrap: wrap;
  margin-top: 2rem;

  .step {
    flex: 1;
    min-width: 120px;
    text-align: center;
    position: relative;

    .step-icon {
      width: 50px;
      height: 50px;
      background: @accent-color;
      color: white;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1.5rem;
      font-weight: bold;
      margin: 0 auto 1rem;
    }

    .step-content {
      background: @light-bg;
      border-radius: 10px;
      padding: 1rem;

      h4 {
        color: @secondary-color;
        margin-bottom: 0.5rem;
      }
    }
  }

  .arrow {
    font-size: 2rem;
    color: @primary-color;
    font-weight: bold;
    padding: 0 10px;
  }
}

.layer-types {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
  gap: 1.8rem;
  margin-bottom: 2rem;
}

.layer-card {
  background: @card-bg;
  border-radius: 14px;
  padding: 1.8rem;
  text-align: center;
  box-shadow: 0 5px 15px rgba(0, 0, 0, 0.06);
  transition: all 0.3s ease;
  border-top: 4px solid @layer-color-1;

  &:nth-child(2) {
    border-top-color: @layer-color-2;
  }

  &:nth-child(3) {
    border-top-color: @layer-color-3;
  }

  &:nth-child(4) {
    border-top-color: @layer-color-4;
  }

  &:hover {
    transform: translateY(-8px);
    box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
  }

  .layer-icon {
    width: 50px;
    height: 50px;
    border-radius: 50%;
    background: @primary-color;
    color: white;
    font-size: 1.5rem;
    font-weight: bold;
    display: flex;
    align-items: center;
    justify-content: center;
    margin: 0 auto 1.2rem;
  }

  h3 {
    color: @secondary-color;
    margin-bottom: 0.8rem;
    font-size: 1.4rem;
  }

  p {
    color: lighten(@text-color, 15%);
    margin-bottom: 1.2rem;
  }
}

.characteristics {
  display: flex;
  justify-content: center;
  gap: 0.8rem;
  flex-wrap: wrap;

  .char-tag {
    background: @light-bg;
    padding: 0.4rem 0.8rem;
    border-radius: 20px;
    font-size: 0.9rem;
    color: @primary-color;
    border: 1px solid @border-color;
  }
}

.functions {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
  gap: 1.8rem;
  margin-bottom: 2.5rem;
}

.function-card {
  background: @card-bg;
  border-radius: 14px;
  padding: 1.8rem;
  text-align: center;
  box-shadow: 0 5px 15px rgba(0, 0, 0, 0.06);

  .func-icon {
    font-size: 3rem;
    margin-bottom: 1.2rem;
  }

  h3 {
    color: @primary-color;
    margin-bottom: 1rem;
    font-size: 1.3rem;
  }
}

.performance-comparison {
  background: @light-bg;
  border-radius: 14px;
  padding: 1.8rem;

  h3 {
    text-align: center;
    color: @secondary-color;
    margin-bottom: 1.5rem;
  }
}

.comparison-chart {
  max-width: 600px;
  margin: 0 auto;

  .chart-bar {
    margin-bottom: 1.5rem;

    .bar-label {
      margin-bottom: 0.5rem;
      font-weight: 500;
    }

    .bar-container {
      height: 30px;
      background: #e9ecef;
      border-radius: 15px;
      overflow: hidden;

      .bar {
        height: 100%;
        display: flex;
        align-items: center;
        justify-content: flex-end;
        padding-right: 15px;
        font-weight: 500;
        color: white;
        min-width: 80px;
      }

      .bad {
        background: linear-gradient(90deg, #ff6b6b, #ff8e8e);
      }

      .good {
        background: linear-gradient(90deg, #06d6a0, #4ecdc4);
      }
    }
  }
}

.acceleration-methods {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
  gap: 2rem;
  margin-bottom: 2.5rem;
}

.method-card {
  background: @card-bg;
  border-radius: 14px;
  padding: 1.8rem;
  box-shadow: 0 5px 15px rgba(0, 0, 0, 0.06);

  .method-icon {
    font-size: 3rem;
    text-align: center;
    margin-bottom: 1.2rem;
    color: @primary-color;
  }

  h3 {
    color: @secondary-color;
    text-align: center;
    margin-bottom: 1.5rem;
  }
}

.code-examples {
  background: #2b2d42;
  border-radius: 8px;
  padding: 1.2rem;
  color: #f8f9fa;
  font-family: 'Fira Code', monospace;
  font-size: 0.95rem;

  pre {
    margin: 0.8rem 0;
    overflow-x: auto;

    code {
      display: block;
      padding: 0.5rem 1rem;
      background: #34374c;
      border-radius: 4px;
    }
  }
}

.element-list {
  list-style: none;
  padding: 0;

  li {
    padding: 0.8rem 0;
    border-bottom: 1px dashed @border-color;

    &:last-child {
      border-bottom: none;
    }
  }
}

.best-practices {
  background: @light-bg;
  border-radius: 14px;
  padding: 1.8rem;

  h3 {
    text-align: center;
    color: @secondary-color;
    margin-bottom: 1.5rem;
  }
}

.practice-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
  gap: 1.5rem;
}

.practice {
  background: @card-bg;
  border-radius: 10px;
  padding: 1.2rem;
  text-align: center;

  .practice-icon {
    font-size: 1.8rem;
    margin-bottom: 0.8rem;
  }

  h4 {
    color: @primary-color;
    margin-bottom: 0.5rem;
  }
}

.devtools-content {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 2rem;

  @media (max-width: 768px) {
    grid-template-columns: 1fr;
  }
}

.devtools-image {
  .placeholder {
    background: @card-bg;
    border-radius: 10px;
    padding: 1.5rem;
    box-shadow: 0 5px 15px rgba(0, 0, 0, 0.08);
  }
}

.browser-frame {
  border: 1px solid @border-color;
  border-radius: 8px;
  overflow: hidden;
}

.browser-tabs {
  display: flex;
  background: @light-bg;
  border-bottom: 1px solid @border-color;

  .tab {
    padding: 0.8rem 1.2rem;
    font-size: 0.9rem;
    cursor: pointer;

    &.active {
      background: white;
      border-bottom: 2px solid @primary-color;
      font-weight: 500;
    }
  }
}

.layers-panel {
  background: white;
  padding: 1rem;

  .layer-item {
    display: flex;
    align-items: center;
    padding: 0.8rem;
    border-bottom: 1px solid @border-color;

    &:last-child {
      border-bottom: none;
    }

    .layer-color {
      width: 20px;
      height: 20px;
      border-radius: 4px;
      background: @primary-color;
      margin-right: 1rem;
    }
  }
}

.devtools-steps {
  ol {
    padding-left: 1.5rem;

    li {
      padding: 0.8rem 0;
      border-bottom: 1px dashed @border-color;

      &:last-child {
        border-bottom: none;
      }
    }
  }
}

@media (max-width: 768px) {
  .header {
    padding: 1.5rem;

    h1 {
      font-size: 2rem;
    }
  }

  .flow-diagram {
    .step {
      min-width: 100%;
      margin-bottom: 2rem;

      &:last-child {
        margin-bottom: 0;
      }
    }

    .arrow {
      transform: rotate(90deg);
      margin: 0.5rem auto;
      width: 100%;
      text-align: center;
    }
  }
}
</style>
