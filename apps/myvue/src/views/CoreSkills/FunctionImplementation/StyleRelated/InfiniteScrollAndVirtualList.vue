<template>
  <div class="infinite-scroll">
    <header class="header">
      <h1>æ— é™æ»šåŠ¨æŠ€æœ¯è§£æ</h1>
      <p>ä¼˜åŒ–ç”¨æˆ·ä½“éªŒçš„é«˜æ•ˆå†…å®¹åŠ è½½æ–¹æ¡ˆ</p>
    </header>

    <div class="content-container">
      <!-- æ¦‚å¿µä»‹ç» -->
      <section class="concept-section">
        <div class="section-header">
          <div class="icon">ğŸ“š</div>
          <h2>æ— é™æ»šåŠ¨æ¦‚å¿µ</h2>
        </div>

        <div class="concept-grid">
          <div class="concept-card">
            <div class="concept-icon">ğŸ”„</div>
            <h3>ä»€ä¹ˆæ˜¯æ— é™æ»šåŠ¨ï¼Ÿ</h3>
            <p>æ— é™æ»šåŠ¨ï¼ˆInfinite Scrollï¼‰æ˜¯ä¸€ç§å‰ç«¯æŠ€æœ¯ï¼Œå½“ç”¨æˆ·æ»šåŠ¨åˆ°é¡µé¢åº•éƒ¨æ—¶è‡ªåŠ¨åŠ è½½æ–°å†…å®¹ï¼Œæ— éœ€æ‰‹åŠ¨ç‚¹å‡»ç¿»é¡µæŒ‰é’®ã€‚</p>
          </div>

          <div class="concept-card">
            <div class="concept-icon">âš™ï¸</div>
            <h3>æ ¸å¿ƒæœºåˆ¶</h3>
            <ul>
              <li>ç›‘å¬æ»šåŠ¨äº‹ä»¶</li>
              <li>è®¡ç®—æ»šåŠ¨ä½ç½®</li>
              <li>è§¦å‘æ•°æ®åŠ è½½</li>
              <li>æ¸²æŸ“æ–°å†…å®¹</li>
              <li>æ›´æ–°æ»šåŠ¨ä½ç½®</li>
            </ul>
          </div>

          <div class="concept-card">
            <div class="concept-icon">ğŸ“±</div>
            <h3>åº”ç”¨åœºæ™¯</h3>
            <ul>
              <li>ç¤¾äº¤åª’ä½“åŠ¨æ€æµ</li>
              <li>ç”µå•†å•†å“åˆ—è¡¨</li>
              <li>æ–°é—»èµ„è®¯åº”ç”¨</li>
              <li>å›¾ç‰‡/è§†é¢‘ç”»å»Š</li>
              <li>è¯„è®ºåŒºåŠ è½½</li>
            </ul>
          </div>
        </div>
      </section>

      <!-- å®ç°æ€è·¯ -->
      <section class="implementation-section">
        <div class="section-header">
          <div class="icon">ğŸ”§</div>
          <h2>å®ç°æ€è·¯</h2>
        </div>

        <div class="implementation-steps">
          <div class="step">
            <div class="step-number">1</div>
            <div class="step-content">
              <h3>è®¾ç½®æ»šåŠ¨å®¹å™¨</h3>
              <p>ç¡®å®šæ»šåŠ¨å®¹å™¨ï¼ˆé€šå¸¸æ˜¯çª—å£æˆ–è‡ªå®šä¹‰å®¹å™¨ï¼‰å¹¶è®¾ç½®å›ºå®šé«˜åº¦</p>
            </div>
          </div>

          <div class="step">
            <div class="step-number">2</div>
            <div class="step-content">
              <h3>åˆå§‹åŒ–æ•°æ®</h3>
              <p>åŠ è½½ç¬¬ä¸€é¡µæ•°æ®å¹¶æ¸²æŸ“åˆå§‹å†…å®¹</p>
            </div>
          </div>

          <div class="step">
            <div class="step-number">3</div>
            <div class="step-content">
              <h3>ç›‘å¬æ»šåŠ¨äº‹ä»¶</h3>
              <p>æ·»åŠ æ»šåŠ¨äº‹ä»¶ç›‘å¬å™¨ï¼ˆä½¿ç”¨é˜²æŠ–ä¼˜åŒ–æ€§èƒ½ï¼‰</p>
            </div>
          </div>

          <div class="step">
            <div class="step-number">4</div>
            <div class="step-content">
              <h3>è®¡ç®—è§¦å‘ç‚¹</h3>
              <p>å½“æ»šåŠ¨æ¡æ¥è¿‘åº•éƒ¨ï¼ˆå¦‚è·ç¦»åº•éƒ¨200pxï¼‰æ—¶è§¦å‘åŠ è½½</p>
            </div>
          </div>

          <div class="step">
            <div class="step-number">5</div>
            <div class="step-content">
              <h3>åŠ è½½æ–°æ•°æ®</h3>
              <p>å‘èµ·APIè¯·æ±‚è·å–ä¸‹ä¸€é¡µæ•°æ®</p>
            </div>
          </div>

          <div class="step">
            <div class="step-number">6</div>
            <div class="step-content">
              <h3>æ¸²æŸ“æ–°å†…å®¹</h3>
              <p>å°†æ–°æ•°æ®è¿½åŠ åˆ°ç°æœ‰åˆ—è¡¨</p>
            </div>
          </div>

          <div class="step">
            <div class="step-number">7</div>
            <div class="step-content">
              <h3>çŠ¶æ€ç®¡ç†</h3>
              <p>å¤„ç†åŠ è½½çŠ¶æ€ã€é”™è¯¯çŠ¶æ€å’Œæ•°æ®ç»“æŸçŠ¶æ€</p>
            </div>
          </div>
        </div>

        <div class="visualization">
          <h3>æ»šåŠ¨è§¦å‘æœºåˆ¶ç¤ºæ„å›¾</h3>
          <div class="scroll-container">
            <div class="scroll-content">
              <div class="item" v-for="i in 8" :key="i">å·²åŠ è½½å†…å®¹ {{ i }}</div>
              <div class="trigger-area" v-if="!allLoaded">
                <div class="loader">æ­£åœ¨åŠ è½½æ›´å¤šå†…å®¹...</div>
              </div>
              <div class="end-message" v-else>
                â­ æ‰€æœ‰å†…å®¹å·²åŠ è½½å®Œæ¯•
              </div>
            </div>
          </div>
          <div class="scroll-indicator">
            <div class="scroll-bar"></div>
          </div>
          <div class="scroll-labels">
            <div class="label top">é¡¶éƒ¨</div>
            <div class="label trigger">è§¦å‘ç‚¹</div>
            <div class="label bottom">åº•éƒ¨</div>
          </div>
        </div>
      </section>

      <!-- ä»£ç å®ç° -->
      <section class="code-section">
        <div class="section-header">
          <div class="icon">ğŸ’»</div>
          <h2>ä»£ç å®ç°</h2>
        </div>

        <div class="code-tabs">
          <button
            v-for="tab in tabs"
            :key="tab.id"
            :class="{ active: activeTab === tab.id }"
            @click="activeTab = tab.id"
          >
            {{ tab.label }}
          </button>
        </div>

        <div class="code-content">
          <div v-if="activeTab === 'composition'" class="composition-code">
            <h3>Vue Composition API å®ç°</h3>
            <pre><code>import { ref, onMounted, onUnmounted } from 'vue';

// æ¨¡æ‹Ÿæ•°æ®æœåŠ¡
const fetchItems = async (page: number, pageSize = 10): Promise&lt;string[]&gt; => {
  return new Promise(resolve => {
    setTimeout(() => {
      const items = Array.from({ length: pageSize },
        (_, i) => `é¡¹ç›® ${(page - 1) * pageSize + i + 1}`
      );
      resolve(items);
    }, 800);
  });
};

export function useInfiniteScroll(containerRef: Ref&lt;HTMLElement | null&gt;) {
  const items = ref&lt;string[]&gt;([]);
  const page = ref(1);
  const loading = ref(false);
  const allLoaded = ref(false);

  // åŠ è½½æ›´å¤šæ•°æ®
  const loadMore = async () => {
    if (loading.value || allLoaded.value) return;

    loading.value = true;
    try {
      const newItems = await fetchItems(page.value);

      if (newItems.length === 0) {
        allLoaded.value = true;
        return;
      }

      items.value = [...items.value, ...newItems];
      page.value += 1;
    } catch (error) {
      console.error('åŠ è½½å¤±è´¥:', error);
    } finally {
      loading.value = false;
    }
  };

  // æ£€æŸ¥æ˜¯å¦éœ€è¦åŠ è½½
  const checkScroll = () => {
    if (!containerRef.value) return;

    const { scrollTop, scrollHeight, clientHeight } = containerRef.value;
    const threshold = 200; // è·ç¦»åº•éƒ¨200pxè§¦å‘

    if (scrollHeight - scrollTop - clientHeight < threshold) {
      loadMore();
    }
  };

  // é˜²æŠ–å‡½æ•°
  const debounce = (fn: Function, delay: number) => {
    let timeoutId: number;
    return (...args: any[]) => {
      clearTimeout(timeoutId);
      timeoutId = setTimeout(() => fn(...args), delay);
    };
  };

  const debouncedCheck = debounce(checkScroll, 100);

  // è®¾ç½®äº‹ä»¶ç›‘å¬
  onMounted(() => {
    if (!containerRef.value) return;
    containerRef.value.addEventListener('scroll', debouncedCheck);
    loadMore(); // åˆå§‹åŠ è½½
  });

  onUnmounted(() => {
    if (!containerRef.value) return;
    containerRef.value.removeEventListener('scroll', debouncedCheck);
  });

  return {
    items,
    loading,
    allLoaded,
    loadMore
  };
}</code></pre>
          </div>

          <div v-if="activeTab === 'component'" class="component-code">
            <h3>ç»„ä»¶ä½¿ç”¨ç¤ºä¾‹</h3>
            <pre><code>&lt;template&gt;
  &lt;div class="infinite-scroll-demo"&gt;
    &lt;div
      ref="scrollContainer"
      class="scroll-container"
    &gt;
      &lt;div class="item" v-for="(item, index) in items" :key="index"&gt;
      &#123;&#123; item &#125;&#125;
      &lt;/div&gt;

      &lt;div v-if="loading" class="loader"&gt;
        åŠ è½½ä¸­...
      &lt;/div&gt;

      &lt;div v-if="allLoaded" class="end-message"&gt;
        ğŸ‰ æ‰€æœ‰å†…å®¹å·²åŠ è½½å®Œæ¯•
      &lt;/div&gt;
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/template&gt;

&lt;script setup lang="ts"&gt;
import { ref } from 'vue';
import { useInfiniteScroll } from './useInfiniteScroll';

const scrollContainer = ref&lt;HTMLElement | null&gt;(null);
const { items, loading, allLoaded } = useInfiniteScroll(scrollContainer);
&lt;/script&gt;

&lt;style scoped&gt;
.scroll-container {
  height: 500px;
  overflow-y: auto;
  border: 1px solid #e0e0e0;
  border-radius: 8px;
  padding: 16px;
}

.item {
  padding: 20px;
  margin-bottom: 12px;
  background: #f8f9fa;
  border-radius: 8px;
  box-shadow: 0 2px 4px rgba(0,0,0,0.05);
}

.loader, .end-message {
  text-align: center;
  padding: 20px;
  color: #666;
}
&lt;/style&gt;</code></pre>
          </div>

          <div v-if="activeTab === 'options'" class="options-code">
            <h3>é…ç½®é€‰é¡¹ä¸ä¼˜åŒ–</h3>
            <pre><code>// æ— é™æ»šåŠ¨çš„é«˜çº§é…ç½®
interface InfiniteScrollOptions {
  container?: Ref&lt;HTMLElement | null&gt; // è‡ªå®šä¹‰å®¹å™¨
  threshold?: number // è§¦å‘åŠ è½½çš„é˜ˆå€¼ï¼ˆåƒç´ ï¼‰
  pageSize?: number // æ¯é¡µåŠ è½½æ•°é‡
  debounceTime?: number // é˜²æŠ–æ—¶é—´ï¼ˆæ¯«ç§’ï¼‰
  initialLoad?: boolean // æ˜¯å¦åˆå§‹åŠ è½½
}

// å¢å¼ºç‰ˆHook
export function useAdvancedInfiniteScroll(
  options: InfiniteScrollOptions = {}
) {
  const {
    container,
    threshold = 200,
    pageSize = 10,
    debounceTime = 100,
    initialLoad = true
  } = options;

  // å®ç°é€»è¾‘...

  // æ»šåŠ¨åˆ°æŒ‡å®šä½ç½®
  const scrollToPosition = (position: number) => {
    if (container?.value) {
      container.value.scrollTop = position;
    }
  };

  // é‡ç½®çŠ¶æ€
  const reset = () => {
    page.value = 1;
    items.value = [];
    allLoaded.value = false;
    if (initialLoad) loadMore();
  };

  return {
    // åŸæœ‰å±æ€§...
    scrollToPosition,
    reset
  };
}

// ä½¿ç”¨è™šæ‹Ÿåˆ—è¡¨ä¼˜åŒ–å¤§æ•°æ®é‡
import { useVirtualList } from '@vueuse/core';

const { list, containerProps, wrapperProps } = useVirtualList(
  items,
  {
    itemHeight: 60, // æ¯é¡¹é«˜åº¦
    overscan: 10 // é¢å¤–æ¸²æŸ“çš„æ•°é‡
  }
);</code></pre>
          </div>
        </div>
      </section>

      <!-- å®é™…æ¼”ç¤º -->
      <section class="demo-section">
        <div class="section-header">
          <div class="icon">ğŸš€</div>
          <h2>å®é™…æ¼”ç¤º</h2>
        </div>

        <div class="demo-container">
          <div class="demo-controls">
            <div class="control-group">
              <label>è§¦å‘é˜ˆå€¼:</label>
              <input type="range" min="50" max="500" v-model="threshold">
              <span>{{ threshold }}px</span>
            </div>

            <div class="control-group">
              <label>åŠ è½½é€Ÿåº¦:</label>
              <input type="range" min="100" max="2000" v-model="loadDelay">
              <span>{{ loadDelay }}ms</span>
            </div>

            <button @click="resetDemo">é‡ç½®æ¼”ç¤º</button>
          </div>

          <div
            ref="scrollContainer"
            class="scroll-container"
            :style="{ height: containerHeight + 'px' }"
          >
            <div
              v-for="(item, index) in demoItems"
              :key="index"
              class="demo-item"
            >
              <div class="item-number">#{{ item.id }}</div>
              <div class="item-content">
                <div class="avatar"></div>
                <div class="details">
                  <h3>é¡¹ç›® {{ item.id }}</h3>
                  <p>åˆ›å»ºäº {{ item.date }}</p>
                </div>
              </div>
            </div>

            <div v-if="loading" class="loader">
              <div class="spinner"></div>
              <p>æ­£åœ¨åŠ è½½æ›´å¤šé¡¹ç›®...</p>
            </div>

            <div v-if="allLoaded" class="end-message">
              ğŸ‰ å·²åŠ è½½æ‰€æœ‰ {{ demoItems.length }} ä¸ªé¡¹ç›®
            </div>
          </div>
        </div>
      </section>

      <!-- æœ€ä½³å®è·µ -->
      <section class="best-practices">
        <div class="section-header">
          <div class="icon">âœ…</div>
          <h2>æœ€ä½³å®è·µ</h2>
        </div>

        <div class="practices-grid">
          <div class="practice-card">
            <div class="practice-icon">1ï¸âƒ£</div>
            <h3>ä½¿ç”¨é˜²æŠ–/èŠ‚æµ</h3>
            <p>é¿å…æ»šåŠ¨äº‹ä»¶é¢‘ç¹è§¦å‘ï¼Œä¼˜åŒ–æ€§èƒ½</p>
          </div>
          <div class="practice-card">
            <div class="practice-icon">2ï¸âƒ£</div>
            <h3>æ·»åŠ åŠ è½½æŒ‡ç¤ºå™¨</h3>
            <p>æ˜ç¡®æç¤ºç”¨æˆ·æ­£åœ¨åŠ è½½æ–°å†…å®¹</p>
          </div>
          <div class="practice-card">
            <div class="practice-icon">3ï¸âƒ£</div>
            <h3>æä¾›ç»“æŸæ ‡è¯†</h3>
            <p>å½“æ‰€æœ‰å†…å®¹åŠ è½½å®Œæ¯•æ—¶æ˜¾ç¤ºæç¤º</p>
          </div>
          <div class="practice-card">
            <div class="practice-icon">4ï¸âƒ£</div>
            <h3>é”™è¯¯å¤„ç†</h3>
            <p>å¤„ç†åŠ è½½å¤±è´¥æƒ…å†µå¹¶æä¾›é‡è¯•é€‰é¡¹</p>
          </div>
          <div class="practice-card">
            <div class="practice-icon">5ï¸âƒ£</div>
            <h3>è™šæ‹Ÿæ»šåŠ¨</h3>
            <p>å¯¹äºå¤§å‹åˆ—è¡¨ä½¿ç”¨è™šæ‹Ÿæ»šåŠ¨ä¼˜åŒ–æ€§èƒ½</p>
          </div>
          <div class="practice-card">
            <div class="practice-icon">6ï¸âƒ£</div>
            <h3>é”®ç›˜å¯¼èˆªæ”¯æŒ</h3>
            <p>ç¡®ä¿é”®ç›˜ç”¨æˆ·ä¹Ÿèƒ½è®¿é—®æ‰€æœ‰å†…å®¹</p>
          </div>
        </div>
      </section>

      <!-- æ›¿ä»£æ–¹æ¡ˆ -->
      <section class="alternatives-section">
        <div class="section-header">
          <div class="icon">ğŸ”„</div>
          <h2>æ›¿ä»£æ–¹æ¡ˆ</h2>
        </div>

        <div class="alternatives-grid">
          <div class="alternative-card">
            <div class="alt-icon">ğŸ“–</div>
            <h3>åˆ†é¡µå¯¼èˆª</h3>
            <p>ä¼ ç»Ÿé¡µç å¯¼èˆªï¼Œé€‚åˆç²¾ç¡®æŸ¥æ‰¾å†…å®¹</p>
            <div class="pros-cons">
              <div class="pros">
                <h4>ä¼˜ç‚¹</h4>
                <ul>
                  <li>æ˜ç¡®çš„å¯¼èˆªç»“æ„</li>
                  <li>å®¹æ˜“å®šä½ç‰¹å®šé¡µ</li>
                  <li>SEOå‹å¥½</li>
                </ul>
              </div>
              <div class="cons">
                <h4>ç¼ºç‚¹</h4>
                <ul>
                  <li>éœ€è¦ç”¨æˆ·ä¸»åŠ¨ç‚¹å‡»</li>
                  <li>ä¸­æ–­æµè§ˆä½“éªŒ</li>
                </ul>
              </div>
            </div>
          </div>

          <div class="alternative-card">
            <div class="alt-icon">â¬</div>
            <h3>"åŠ è½½æ›´å¤š"æŒ‰é’®</h3>
            <p>æ‰‹åŠ¨è§¦å‘çš„æ— é™æ»šåŠ¨å˜ä½“</p>
            <div class="pros-cons">
              <div class="pros">
                <h4>ä¼˜ç‚¹</h4>
                <ul>
                  <li>ç”¨æˆ·æ§åˆ¶åŠ è½½æ—¶æœº</li>
                  <li>é¿å…æ„å¤–åŠ è½½</li>
                  <li>æ›´æ˜“å®ç°</li>
                </ul>
              </div>
              <div class="cons">
                <h4>ç¼ºç‚¹</h4>
                <ul>
                  <li>éœ€è¦ç”¨æˆ·æ“ä½œ</li>
                  <li>ä¸­æ–­æµè§ˆæµç¨‹</li>
                </ul>
              </div>
            </div>
          </div>
        </div>
      </section>
    </div>
  </div>
</template>

<script setup lang="ts">
import { ref, onMounted, onUnmounted } from 'vue';

// æ ‡ç­¾é¡µ
const tabs = [
  { id: 'composition', label: 'Composition API' },
  { id: 'component', label: 'ç»„ä»¶ç¤ºä¾‹' },
  { id: 'options', label: 'é«˜çº§é…ç½®' }
];
const activeTab = ref('composition');

// æ¼”ç¤ºæ•°æ®
const scrollContainer = ref<HTMLElement | null>(null);
const demoItems = ref<any[]>([]);
const page = ref(1);
const loading = ref(false);
const allLoaded = ref(false);
const threshold = ref(200);
const loadDelay = ref(800);
const containerHeight = ref(500);

// ç”Ÿæˆæ¼”ç¤ºæ•°æ®
const generateDemoItems = (page: number, pageSize = 10) => {
  return Array.from({ length: pageSize }, (_, i) => {
    const id = (page - 1) * pageSize + i + 1;
    return {
      id,
      date: new Date(Date.now() - Math.random() * 30 * 24 * 60 * 60 * 1000)
        .toLocaleDateString()
    };
  });
};

// åŠ è½½æ›´å¤šæ•°æ®
const loadMore = async () => {
  if (loading.value || allLoaded.value) return;

  loading.value = true;

  // æ¨¡æ‹ŸAPIè¯·æ±‚å»¶è¿Ÿ
  await new Promise(resolve => setTimeout(resolve, loadDelay.value));

  const newItems = generateDemoItems(page.value);
  demoItems.value = [...demoItems.value, ...newItems];
  page.value += 1;

  // æ¨¡æ‹Ÿæ•°æ®ç»“æŸ
  if (page.value > 5) {
    allLoaded.value = true;
  }

  loading.value = false;
};

// æ£€æŸ¥æ»šåŠ¨ä½ç½®
const checkScroll = () => {
  if (!scrollContainer.value) return;

  const { scrollTop, scrollHeight, clientHeight } = scrollContainer.value;

  if (scrollHeight - scrollTop - clientHeight < threshold.value) {
    loadMore();
  }
};

// é˜²æŠ–å‡½æ•°
const debounce = (fn: Function, delay: number) => {
  let timeoutId: number;
  return (...args: any[]) => {
    clearTimeout(timeoutId);
    timeoutId = setTimeout(() => fn(...args), delay);
  };
};

const debouncedCheck = debounce(checkScroll, 100);

// è®¾ç½®äº‹ä»¶ç›‘å¬
onMounted(() => {
  if (!scrollContainer.value) return;
  scrollContainer.value.addEventListener('scroll', debouncedCheck);
  loadMore(); // åˆå§‹åŠ è½½
});

onUnmounted(() => {
  if (!scrollContainer.value) return;
  scrollContainer.value.removeEventListener('scroll', debouncedCheck);
});

// é‡ç½®æ¼”ç¤º
const resetDemo = () => {
  page.value = 1;
  demoItems.value = [];
  allLoaded.value = false;
  loadMore();
};
</script>

<style lang="less" scoped>
@primary-color: #4361ee;
@secondary-color: #3a0ca3;
@accent-color: #4895ef;
@light-bg: #f8f9fa;
@card-bg: #ffffff;
@text-color: #2b2d42;
@border-color: #e9ecef;
@success-color: #06d6a0;
@warning-color: #ffd166;
@error-color: #ef476f;

.infinite-scroll {
  font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
  line-height: 1.6;
  color: @text-color;
  background: linear-gradient(135deg, #f5f7fa 0%, #e4edf5 100%);
  min-height: 100vh;
  padding: 2rem;
}

.header {
  text-align: center;
  margin-bottom: 2.5rem;
  padding: 2rem;
  background: linear-gradient(120deg, @primary-color, @secondary-color);
  border-radius: 16px;
  color: white;
  box-shadow: 0 6px 20px rgba(0, 0, 0, 0.12);

  h1 {
    font-size: 2.8rem;
    margin-bottom: 0.5rem;
    font-weight: 700;
  }

  p {
    font-size: 1.2rem;
    opacity: 0.9;
    max-width: 600px;
    margin: 0 auto;
  }
}

.content-container {
  max-width: 1400px;
  margin: 0 auto;
}

.section-header {
  display: flex;
  align-items: center;
  gap: 1rem;
  margin-bottom: 1.8rem;
  padding-bottom: 0.8rem;
  border-bottom: 2px solid @primary-color;

  .icon {
    font-size: 2rem;
    background: @primary-color;
    color: white;
    width: 50px;
    height: 50px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
  }

  h2 {
    font-size: 1.8rem;
    color: @secondary-color;
  }
}

.concept-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
  gap: 1.8rem;
  margin-bottom: 2.5rem;
}

.concept-card {
  background: @card-bg;
  border-radius: 16px;
  padding: 1.8rem;
  box-shadow: 0 5px 15px rgba(0, 0, 0, 0.06);
  transition: all 0.3s ease;

  &:hover {
    transform: translateY(-5px);
    box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
  }

  .concept-icon {
    font-size: 2.5rem;
    margin-bottom: 1.2rem;
    color: @primary-color;
  }

  ul {
    padding-left: 1.2rem;

    li {
      padding: 0.5rem 0;
      border-bottom: 1px dashed @border-color;

      &:last-child {
        border-bottom: none;
      }
    }
  }
}

.implementation-steps {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
  gap: 1.5rem;
  margin-bottom: 2.5rem;
}

.step {
  display: flex;
  background: @card-bg;
  border-radius: 14px;
  padding: 1.5rem;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.06);

  .step-number {
    width: 40px;
    height: 40px;
    background: @primary-color;
    color: white;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 1.5rem;
    font-weight: bold;
    margin-right: 1.2rem;
    flex-shrink: 0;
  }

  .step-content {
    h3 {
      color: @secondary-color;
      margin-bottom: 0.8rem;
      font-size: 1.3rem;
    }
  }
}

.visualization {
  background: @card-bg;
  border-radius: 16px;
  padding: 2rem;
  box-shadow: 0 5px 15px rgba(0, 0, 0, 0.06);
  margin-top: 2rem;

  h3 {
    text-align: center;
    color: @secondary-color;
    margin-bottom: 1.5rem;
  }
}

.scroll-container {
  height: 300px;
  border: 1px solid @border-color;
  border-radius: 8px;
  overflow: hidden;
  position: relative;
  margin: 0 auto 2rem;
  max-width: 400px;
}

.scroll-content {
  padding: 1rem;

  .item {
    background: @light-bg;
    padding: 1rem;
    margin-bottom: 0.5rem;
    border-radius: 6px;
    text-align: center;
  }

  .trigger-area {
    background: fade(@primary-color, 10%);
    padding: 1.5rem;
    text-align: center;
    color: @primary-color;
    font-weight: 500;
    border: 2px dashed @primary-color;
    border-radius: 8px;
  }

  .end-message {
    background: fade(@success-color, 10%);
    padding: 1.5rem;
    text-align: center;
    color: darken(@success-color, 20%);
    font-weight: 500;
    border-radius: 8px;
  }
}

.scroll-indicator {
  height: 20px;
  background: @light-bg;
  border-radius: 10px;
  margin: 0 auto;
  max-width: 400px;
  position: relative;

  .scroll-bar {
    position: absolute;
    left: 30%;
    width: 40%;
    height: 100%;
    background: linear-gradient(90deg, @primary-color, @accent-color);
    border-radius: 10px;
  }
}

.scroll-labels {
  display: flex;
  justify-content: space-between;
  max-width: 400px;
  margin: 0.5rem auto 0;

  .label {
    padding: 0.3rem 0.8rem;
    background: @light-bg;
    border-radius: 20px;
    font-size: 0.9rem;

    &.trigger {
      background: fade(@primary-color, 10%);
      color: @primary-color;
    }
  }
}

.code-tabs {
  display: flex;
  gap: 0.5rem;
  margin-bottom: 1.5rem;
  flex-wrap: wrap;

  button {
    padding: 0.8rem 1.5rem;
    background: @light-bg;
    border: none;
    border-radius: 8px;
    font-size: 1rem;
    font-weight: 500;
    cursor: pointer;
    transition: all 0.3s ease;

    &:hover {
      background: lighten(@primary-color, 40%);
    }

    &.active {
      background: @primary-color;
      color: white;
      box-shadow: 0 4px 10px rgba(67, 97, 238, 0.3);
    }
  }
}

.code-content {
  background: @card-bg;
  border-radius: 16px;
  padding: 2rem;
  box-shadow: 0 5px 15px rgba(0, 0, 0, 0.06);
  overflow-x: auto;

  pre {
    background: #2b2d42;
    border-radius: 8px;
    padding: 1.5rem;
    overflow-x: auto;

    code {
      font-family: 'Fira Code', monospace;
      font-size: 0.95rem;
      line-height: 1.6;
      color: #f8f9fa;
    }
  }
}

.demo-container {
  background: @card-bg;
  border-radius: 16px;
  padding: 2rem;
  box-shadow: 0 5px 15px rgba(0, 0, 0, 0.06);
}

.demo-controls {
  display: flex;
  flex-wrap: wrap;
  gap: 1.5rem;
  margin-bottom: 1.5rem;
  align-items: center;

  .control-group {
    display: flex;
    align-items: center;
    gap: 0.8rem;

    label {
      font-weight: 500;
    }

    input[type="range"] {
      width: 150px;
    }
  }

  button {
    background: @primary-color;
    color: white;
    border: none;
    border-radius: 8px;
    padding: 0.8rem 1.5rem;
    font-size: 1rem;
    cursor: pointer;
    transition: all 0.3s ease;

    &:hover {
      background: darken(@primary-color, 10%);
      transform: translateY(-2px);
    }
  }
}

.scroll-container {
  border: 1px solid @border-color;
  border-radius: 8px;
  overflow-y: auto;
  background: @light-bg;
}

.demo-item {
  background: white;
  border-radius: 8px;
  padding: 1.2rem;
  margin-bottom: 12px;
  box-shadow: 0 2px 6px rgba(0, 0, 0, 0.05);

  .item-number {
    font-weight: bold;
    color: @primary-color;
    margin-bottom: 0.5rem;
  }

  .item-content {
    display: flex;
    gap: 1rem;

    .avatar {
      width: 50px;
      height: 50px;
      background: linear-gradient(135deg, @primary-color, @accent-color);
      border-radius: 50%;
    }

    .details {
      flex: 1;

      h3 {
        margin: 0 0 0.3rem;
        font-size: 1.1rem;
      }

      p {
        color: lighten(@text-color, 30%);
        margin: 0;
        font-size: 0.9rem;
      }
    }
  }
}

.loader {
  text-align: center;
  padding: 2rem;

  .spinner {
    width: 40px;
    height: 40px;
    border: 3px solid fade(@primary-color, 20%);
    border-top: 3px solid @primary-color;
    border-radius: 50%;
    margin: 0 auto 1rem;
    animation: spin 1s linear infinite;
  }

  p {
    color: @primary-color;
    margin: 0;
  }
}

.end-message {
  text-align: center;
  padding: 2rem;
  background: fade(@success-color, 10%);
  color: darken(@success-color, 20%);
  font-weight: 500;
  border-radius: 8px;
  margin: 1rem;
}

@keyframes spin {
  0% { transform: rotate(0deg); }
  100% { transform: rotate(360deg); }
}

.practices-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
  gap: 1.8rem;
  margin-bottom: 2rem;
}

.practice-card {
  background: @card-bg;
  border-radius: 16px;
  padding: 1.8rem;
  text-align: center;
  box-shadow: 0 5px 15px rgba(0, 0, 0, 0.06);
  transition: all 0.3s ease;

  &:hover {
    transform: translateY(-5px);
    box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
  }

  .practice-icon {
    font-size: 2.5rem;
    margin-bottom: 1.2rem;
    color: @primary-color;
  }

  h3 {
    color: @secondary-color;
    margin-bottom: 1rem;
    font-size: 1.3rem;
  }
}

.alternatives-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
  gap: 1.8rem;
}

.alternative-card {
  background: @card-bg;
  border-radius: 16px;
  padding: 1.8rem;
  box-shadow: 0 5px 15px rgba(0, 0, 0, 0.06);

  .alt-icon {
    font-size: 3rem;
    text-align: center;
    margin-bottom: 1rem;
    color: @primary-color;
  }

  h3 {
    text-align: center;
    color: @secondary-color;
    margin-bottom: 1rem;
  }

  .pros-cons {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 1rem;
    margin-top: 1.5rem;

    .pros, .cons {
      background: @light-bg;
      border-radius: 8px;
      padding: 1rem;

      h4 {
        color: @secondary-color;
        margin-top: 0;
        padding-bottom: 0.5rem;
        border-bottom: 1px solid @border-color;
      }

      ul {
        padding-left: 1.2rem;
        margin-bottom: 0;

        li {
          padding: 0.3rem 0;
        }
      }
    }

    .pros {
      border-left: 3px solid @success-color;
    }

    .cons {
      border-left: 3px solid @error-color;
    }
  }
}

@media (max-width: 768px) {
  .header {
    padding: 1.5rem;

    h1 {
      font-size: 2rem;
    }
  }

  .demo-controls {
    flex-direction: column;
    align-items: flex-start;
  }
}
</style>
