<template>
  <div class="record-tuple-container">
    <!-- æ ‡é¢˜éƒ¨åˆ† -->
    <header class="header">
      <h1>ğŸ†• Record & Tuple ææ¡ˆè§£æ</h1>
      <p class="subtitle">JavaScript ä¸å¯å˜æ•°æ®ç»“æ„æ–°æ–¹æ¡ˆ</p>
      <div class="proposal-status">Stage 2 Proposal</div>
    </header>


    <!-- Record & Tuple ä»‹ç» -->
    <section class="introduction-section">
      <h2 class="section-title">
        <span class="icon">ğŸ“–</span>
        Record & Tuple ä»‹ç»
      </h2>
      <p>
        Record å’Œ Tuple æ˜¯ JavaScript ä¸­çš„æ–°ææ¡ˆï¼Œæ—¨åœ¨æä¾›ä¸å¯å˜çš„æ•°æ®ç»“æ„ã€‚Record æ˜¯ä¸€ç§é”®å€¼å¯¹é›†åˆï¼Œè€Œ Tuple
        æ˜¯ä¸€ç§æœ‰åºçš„å€¼é›†åˆã€‚è¿™äº›æ•°æ®ç»“æ„å¯ä»¥å¸®åŠ©å¼€å‘è€…æ›´å¥½åœ°ç®¡ç†çŠ¶æ€å’Œæ•°æ®ï¼Œç¡®ä¿æ•°æ®çš„ä¸å¯å˜æ€§ï¼Œä»è€Œå‡å°‘é”™è¯¯å’Œæé«˜ä»£ç çš„å¯ç»´æŠ¤æ€§ã€‚
      </p>
      <div>
        <h3>ä½¿ç”¨æ–¹æ³•</h3>
        <p>
          Record å’Œ Tuple æä¾›äº†ä¸€ç§æ–°çš„æ–¹å¼æ¥å¤„ç†ä¸å¯å˜æ•°æ®ã€‚åœ¨ JavaScript ä¸­ï¼Œä½¿ç”¨ Record å’Œ Tuple å¯ä»¥ç¡®ä¿æ•°æ®çš„ä¸å¯å˜æ€§ï¼Œä»è€Œå‡å°‘æ„å¤–ä¿®æ”¹å¸¦æ¥çš„é”™è¯¯ã€‚
        </p>
        <h4>Record ç¤ºä¾‹</h4>
        <pre class="code-sample">
          const person = #{ name: "Alice", age: 30 };
          // å°è¯•ä¿®æ”¹ä¼šæŠ›å‡ºé”™è¯¯
          // person.age = 31; // TypeError
        </pre>
        <h4>Tuple ç¤ºä¾‹</h4>
        <pre class="code-sample">
          const coordinates = #[1, 2, 3];
          // å°è¯•ä¿®æ”¹ä¼šæŠ›å‡ºé”™è¯¯
          // coordinates[0] = 4; // TypeError
        </pre>
      </div>
    </section>

    <!-- ä¸»å†…å®¹åŒº -->
    <main class="main-content">
      <!-- æ ¸å¿ƒæ¦‚å¿µ -->
      <section class="concept-section">
        <h2 class="section-title">
          <span class="icon">ğŸŒŸ</span>
          æ ¸å¿ƒç‰¹æ€§
        </h2>
        <div class="feature-grid">
          <div v-for="(feature, index) in features" :key="index" class="feature-card">
            <div class="feature-header">
              <span class="feature-icon">{{ feature.icon }}</span>
              <h3>{{ feature.title }}</h3>
            </div>
            <p class="feature-desc">{{ feature.description }}</p>
            <pre class="code-sample">{{ feature.syntax }}</pre>
          </div>
        </div>
      </section>

      <!-- ç±»å‹å¯¹æ¯” -->
      <section class="comparison-section">
        <h2 class="section-title">
          <span class="icon">âš–ï¸</span>
          ç±»å‹å¯¹æ¯”
        </h2>
        <div class="type-table">
          <div class="table-header">
            <div>ç‰¹æ€§</div>
            <div>Record</div>
            <div>Tuple</div>
          </div>
          <div class="table-row" v-for="(row, index) in typeComparison" :key="index">
            <div class="row-title">{{ row.title }}</div>
            <div :class="['row-value', { yes: row.record }]">{{ row.record ? 'âœ…' : 'âŒ' }}</div>
            <div :class="['row-value', { yes: row.tuple }]">{{ row.tuple ? 'âœ…' : 'âŒ' }}</div>
          </div>
        </div>
      </section>

      <!-- ä½¿ç”¨åœºæ™¯ -->
      <section class="scenario-section">
        <h2 class="section-title">
          <span class="icon">ğŸ¯</span>
          å…¸å‹åº”ç”¨åœºæ™¯
        </h2>
        <div class="scenario-grid">
          <div v-for="(scene, index) in scenarios" :key="index" class="scene-card">
            <div class="scene-icon">{{ scene.icon }}</div>
            <h4>{{ scene.title }}</h4>
            <ul class="scene-points">
              <li v-for="(point, pIndex) in scene.points" :key="pIndex">{{ point }}</li>
            </ul>
          </div>
        </div>
      </section>

      <!-- æ³¨æ„äº‹é¡¹ -->
      <div class="notice-section">
        <h3>âš ï¸ é‡è¦æ³¨æ„äº‹é¡¹</h3>
        <ul>
          <li v-for="(note, index) in importantNotes" :key="index">{{ note }}</li>
        </ul>
      </div>
    </main>
  </div>
</template>

<script setup lang="ts">
import { ref } from "vue";
interface Feature {
  icon: string;
  title: string;
  description: string;
  syntax: string;
}

interface ComparisonRow {
  title: string;
  record: boolean;
  tuple: boolean;
}

interface Scenario {
  icon: string;
  title: string;
  points: string[];
}

const features = ref<Feature[]>([
  {
    icon: "ğŸ”’",
    title: "æ·±åº¦ä¸å¯å˜",
    description: "åˆ›å»ºåæ— æ³•ä¿®æ”¹å†…éƒ¨ä»»ä½•å±‚çº§çš„å±æ€§",
    syntax: "const record = #{ x: 1, y: 2 };\n// record.x = 3 ä¼šæŠ›å‡ºé”™è¯¯"
  },
  {
    icon: "âš¡",
    title: "ç»“æ„å…±äº«",
    description: "é‡ç”¨æœªä¿®æ”¹éƒ¨åˆ†çš„å†…å­˜ç»“æ„",
    syntax: "const newRecord = #{ ...oldRecord, z: 3 };"
  },
  {
    icon: "ğŸ”",
    title: "å€¼æ¯”è¾ƒ",
    description: "ç›´æ¥æ¯”è¾ƒæ•°æ®ç»“æ„å†…å®¹è€Œéå¼•ç”¨",
    syntax: "#{ a: 1 } === #{ a: 1 } // true"
  }
]);

const typeComparison = ref<ComparisonRow[]>([
  { title: "ä¸å¯å˜æ€§", record: true, tuple: true },
  { title: "ç´¢å¼•è®¿é—®", record: true, tuple: true },
  { title: "åŠ¨æ€é”®å", record: false, tuple: true },
  { title: "æ–¹æ³•æ”¯æŒ", record: false, tuple: false },
  { title: "ç±»å‹æ¨å¯¼", record: true, tuple: true }
]);

const scenarios = ref<Scenario[]>([
  {
    icon: "ğŸ”„",
    title: "çŠ¶æ€ç®¡ç†",
    points: ["ReduxçŠ¶æ€æ ‘", "ä¸å¯å˜æ•°æ®æµ", "å†å²çŠ¶æ€è¿½è¸ª"]
  },
  {
    icon: "ğŸ”",
    title: "å®‰å…¨æ•°æ®",
    points: ["é…ç½®ä¿¡æ¯å­˜å‚¨", "é˜²æ­¢æ„å¤–ä¿®æ”¹", "å…±äº«æ•°æ®ä¿æŠ¤"]
  },
  {
    icon: "ğŸ“Š",
    title: "æ•°æ®æ¯”å¯¹",
    points: ["å¿«é€Ÿå·®å¼‚æ£€æµ‹", "Memoizationä¼˜åŒ–", "ç¼“å­˜é”®ç”Ÿæˆ"]
  }
]);

const importantNotes = ref([
  'å½“å‰ä¸ºStage 2ææ¡ˆï¼Œè¯­æ³•å¯èƒ½å˜åŒ–',
  'éœ€è¦Babelæ’ä»¶æ”¯æŒï¼ˆ@babel/plugin-proposal-record-and-tupleï¼‰',
  'ä¸èƒ½åŒ…å«å¯å˜æ•°æ®ç»“æ„',
  'é€‚åˆå­˜å‚¨åŸºç¡€ç±»å‹å€¼'
]);
</script>

<style lang="less" scoped>
@primary-color: #2196f3;
@warning-color: #ff9800;
@success-color: #4caf50;
@error-color: #e53935;

.record-tuple-container {
  max-width: 1200px;
  margin: 0 auto;
  padding: 2rem;
  background: linear-gradient(145deg, #f8f9fa, #e9ecef);

  .header {
    text-align: center;
    margin-bottom: 3rem;
    position: relative;

    h1 {
      font-size: 2.5rem;
      color: #2c3e50;
      margin-bottom: 0.5rem;
    }

    .subtitle {
      color: #7f8c8d;
      font-size: 1.1rem;
    }

    .proposal-status {
      position: absolute;
      top: -1rem;
      right: -1rem;
      background: @warning-color;
      color: white;
      padding: 0.5rem 1rem;
      border-radius: 4px;
      transform: rotate(5deg);
    }
  }

  .concept-section {
    .feature-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      gap: 2rem;

      .feature-card {
        background: white;
        border-radius: 12px;
        padding: 1.5rem;
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);

        .feature-header {
          display: flex;
          align-items: center;
          gap: 1rem;
          margin-bottom: 1rem;

          .feature-icon {
            font-size: 1.8rem;
          }
        }

        .code-sample {
          background: #2c3e50;
          color: white;
          padding: 1rem;
          border-radius: 8px;
          font-family: 'Fira Code', monospace;
          white-space: pre-wrap;
          margin-top: 1rem;
        }
      }
    }
  }

  .comparison-section {
    margin: 3rem 0;

    .type-table {
      background: white;
      border-radius: 12px;
      box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
      overflow: hidden;

      .table-header {
        display: grid;
        grid-template-columns: 1fr 1fr 1fr;
        padding: 1rem;
        background: @primary-color;
        color: white;
        font-weight: bold;
      }

      .table-row {
        display: grid;
        grid-template-columns: 1fr 1fr 1fr;
        padding: 1rem;
        border-bottom: 1px solid #eee;

        &:last-child {
          border-bottom: none;
        }

        .row-title {
          font-weight: 500;
        }

        .row-value.yes {
          color: @success-color;
        }
      }
    }
  }

  .scenario-section {
    .scenario-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
      gap: 2rem;

      .scene-card {
        background: white;
        border-radius: 12px;
        padding: 1.5rem;
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
        text-align: center;

        .scene-icon {
          font-size: 2rem;
          margin-bottom: 1rem;
        }

        .scene-points {
          list-style: none;
          padding-left: 0;

          li {
            padding: 0.3rem 0;
          }
        }
      }
    }
  }

  .notice-section {
    background: #fff3e0;
    border-radius: 12px;
    padding: 2rem;
    margin-top: 2rem;

    ul {
      list-style: none;
      padding-left: 1rem;

      li {
        padding: 0.5rem 0;
        position: relative;

        &::before {
          content: "â€¢";
          color: @error-color;
          position: absolute;
          left: -1rem;
        }
      }
    }
  }
}
</style>
