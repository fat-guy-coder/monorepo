<template>
  <div class="cookie-container">
    <h1 class="main-title">JavaScript Cookie åŸºæœ¬æŒ‡å—</h1>

    <h2>
      <p>Cookie æ˜¯ç”± Web æœåŠ¡å™¨å‘é€åˆ°ç”¨æˆ·æµè§ˆå™¨å¹¶ä¿å­˜åœ¨æœ¬åœ°çš„å°å‹æ•°æ®æ–‡ä»¶ã€‚å®ƒä»¬é€šå¸¸ç”¨äºå­˜å‚¨ç”¨æˆ·çš„åå¥½ã€ä¼šè¯ä¿¡æ¯ä»¥åŠå…¶ä»–éœ€è¦æŒä¹…åŒ–çš„æ•°æ®ï¼Œä»¥ä¾¿åœ¨ç”¨æˆ·è®¿é—®åŒä¸€ç½‘ç«™æ—¶æä¾›æ›´å¥½çš„ä½“éªŒã€‚</p>
      <p>Cookie çš„å¸¸è§ç”¨é€”åŒ…æ‹¬ç”¨æˆ·èº«ä»½éªŒè¯ã€è·Ÿè¸ªç”¨æˆ·è¡Œä¸ºã€ä¿å­˜è®¾ç½®ç­‰ã€‚</p>
    </h2>

    <section class="cookie-section">
      <h2 class="section-title">ğŸª æ“ä½œ</h2>
      <div class="operation-grid">
        <pre><code>
          è¯»å–: document.cookie
          å†™å…¥ï¼šdocument.cookie = newCookie
          åˆ é™¤ï¼šdocument.cookie = 'name=; expires=Thu, 01 Jan 1970 00:00:00 GMT'
          è®¾ç½®ï¼šdocument.cookie = 'name=value; expires=expiration_date; path=path; domain=domain; secure'
          ç¦æ­¢jsè¯»å–ï¼šdocument.cookie = 'name=value; HttpOnly'
          ç¦æ­¢jså†™å…¥ï¼šdocument.cookie = 'name=value; Secure'
        </code></pre>
      </div>
    </section>

    <section class="cookie-section">
      <h2 class="section-title">ğŸ“„ Cookie æ ¼å¼</h2>
      <div class="format-description">
        <p>Cookie çš„æ ¼å¼ï¼šé”®å€¼å¯¹å½¢å¼çš„å­—ç¬¦ä¸²</p>
        <pre><code>
        name=value; expires=expiration_date; path=path; domain=domain; secure
      </code></pre>
        <p>å…¶ä¸­ï¼š</p>
        <ul>
          <li><strong>name</strong>: Cookie çš„åç§°</li>
          <li><strong>value</strong>: Cookie çš„å€¼</li>
          <li><strong>expires</strong>: Cookie çš„è¿‡æœŸæ—¶é—´</li>
          <li><strong>path</strong>: Cookie çš„æœ‰æ•ˆè·¯å¾„</li>
          <li><strong>domain</strong>: Cookie çš„æœ‰æ•ˆåŸŸå</li>
          <li><strong>secure</strong>: ä»…åœ¨ HTTPS è¿æ¥ä¸­ä¼ è¾“</li>
        </ul>
      </div>
    </section>

    <section class="cookie-section">
      <h2 class="section-title">ğŸ“‹ ä½¿ç”¨åœºæ™¯</h2>
      <div class="scenario-grid">
        <div v-for="scene in scenarios" :key="scene.title" class="scenario-card">
          <h3>{{ scene.title }}</h3>
          <p>{{ scene.desc }}</p>
          <div class="case-tags">
            <span v-for="tag in scene.tags" :key="tag">{{ tag }}</span>
          </div>
        </div>
      </div>
    </section>

    <section class="cookie-section">
      <h2 class="section-title">âœ… Cookie çš„ä¼˜ç¼ºç‚¹</h2>
      <div class="pros-cons-grid">
        <h3>ä¼˜ç‚¹:</h3>
        <ul>
          <li>å¯ä»¥å­˜å‚¨ç”¨æˆ·åå¥½ï¼Œæå‡ç”¨æˆ·ä½“éªŒ</li>
          <li>æ”¯æŒè·¨ä¼šè¯æŒä¹…åŒ–æ•°æ®</li>
          <li>ç®€å•æ˜“ç”¨ï¼Œå¹¿æ³›æ”¯æŒ</li>
        </ul>
        <h3>ç¼ºç‚¹:</h3>
        <ul>
          <li>å­˜å‚¨ç©ºé—´æœ‰é™ï¼ˆæ¯ä¸ªCookieçº¦4KBï¼‰</li>
          <li>å¯èƒ½è¢«ç”¨æˆ·ç¦ç”¨æˆ–åˆ é™¤</li>
          <li>å®‰å…¨æ€§é—®é¢˜ï¼Œå¯èƒ½è¢«ç”¨äºè·Ÿè¸ªç”¨æˆ·è¡Œä¸º</li>
        </ul>
      </div>
    </section>

    <section class="cookie-section">
      <h2 class="section-title">âš ï¸ æ³¨æ„äº‹é¡¹</h2>
      <div class="notice-grid">
        <div v-for="(note, index) in notices" :key="index" class="notice-card">
          <div class="notice-icon">â—</div>
          <p>{{ note }}</p>
        </div>
      </div>
    </section>
  </div>
</template>

<script setup lang="ts">

interface UseCase {
  title: string
  desc: string
  tags: string[]
}


const scenarios: UseCase[] = [
  {
    title: 'ç”¨æˆ·èº«ä»½éªŒè¯',
    desc: 'å­˜å‚¨ä¼šè¯æ ‡è¯†æˆ–è®¿é—®ä»¤ç‰Œ',
    tags: ['JWT', 'SessionID', 'è‡ªåŠ¨ç™»å½•']
  },
  {
    title: 'ä¸ªæ€§åŒ–è®¾ç½®',
    desc: 'ä¿å­˜ç”¨æˆ·ä¸»é¢˜åå¥½å’Œè¯­è¨€è®¾ç½®',
    tags: ['æ·±è‰²æ¨¡å¼', 'è¯­è¨€åˆ‡æ¢', 'å¸ƒå±€åå¥½']
  },
  {
    title: 'è¡Œä¸ºè¿½è¸ª',
    desc: 'è®°å½•ç”¨æˆ·è®¿é—®ä¿¡æ¯ç”¨äºåˆ†æ',
    tags: ['é¦–æ¬¡è®¿é—®', 'é¡µé¢åœç•™', 'æ¥æºè¿½è¸ª']
  },
  {
    title: 'è´­ç‰©è½¦åŠŸèƒ½',
    desc: 'ä¿å­˜ç”¨æˆ·è´­ç‰©è½¦ä¸­çš„å•†å“ä¿¡æ¯',
    tags: ['è´­ç‰©è½¦', 'å•†å“ID', 'æ•°é‡']
  },
  {
    title: 'ç”¨æˆ·åå¥½',
    desc: 'å­˜å‚¨ç”¨æˆ·çš„è¯­è¨€å’Œåœ°åŒºè®¾ç½®',
    tags: ['è¯­è¨€', 'åœ°åŒº', 'åå¥½è®¾ç½®']
  },
  {
    title: 'å¹¿å‘Šä¸ªæ€§åŒ–',
    desc: 'æ ¹æ®ç”¨æˆ·è¡Œä¸ºå±•ç¤ºä¸ªæ€§åŒ–å¹¿å‘Š',
    tags: ['å¹¿å‘Š', 'ä¸ªæ€§åŒ–', 'ç”¨æˆ·è¡Œä¸º']
  },
  {
    title: 'ä¼šè¯ç®¡ç†',
    desc: 'åœ¨ç”¨æˆ·ä¼šè¯æœŸé—´å­˜å‚¨çŠ¶æ€ä¿¡æ¯',
    tags: ['ä¼šè¯', 'çŠ¶æ€', 'ç”¨æˆ·ä½“éªŒ']
  }
]

const notices: string[] = [
  'å•ä¸ªåŸŸåä¸‹æœ€å¤šå­˜å‚¨50ä¸ªCookie',
  'æ¯ä¸ªCookieå¤§å°é™åˆ¶çº¦4KB',
  'æ•æ„Ÿä¿¡æ¯éœ€è®¾ç½®HttpOnlyå’ŒSecureæ ‡å¿—',
  'éœ€éµå®ˆGDPRç­‰éšç§ä¿æŠ¤æ³•è§„'
]

// Cookieæ“ä½œå·¥å…·å‡½æ•°
const setCookie = (
  name: string,
  value: string,
  options: {
    expires?: number
    path?: string
    domain?: string
    secure?: boolean
  } = {}
): void => {
  let cookie = `${encodeURIComponent(name)}=${encodeURIComponent(value)}`

  if (options.expires) {
    const d = new Date()
    d.setTime(d.getTime() + options.expires * 864e5)
    cookie += `; expires=${d.toUTCString()}`
  }

  if (options.path) cookie += `; path=${options.path}`
  if (options.domain) cookie += `; domain=${options.domain}`
  if (options.secure) cookie += '; secure'

  document.cookie = cookie
}

const getCookie = (name: string): string | undefined => {
  return document.cookie
    .split('; ')
    .find(row => row.startsWith(`${encodeURIComponent(name)}=`))
    ?.split('=')[1]
    ?.replace(/(%[0-9A-F]{2})+/g, decodeURIComponent)
}

const deleteCookie = (
  name: string,
  options: { path?: string; domain?: string } = {}
): void => {
  setCookie(name, '', {
    ...options,
    expires: -1
  })
}
</script>

<style scoped>
.cookie-container {
  max-width: 1280px;
  margin: 0 auto;
  padding: 2rem;
  font-family: 'Inter', system-ui, sans-serif;
  color: #2d3748;
}

.main-title {
  text-align: center;
  margin-bottom: 2.5rem;
  font-size: 2.6rem;
  background: linear-gradient(45deg, #2c3e50, #42b983);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
}

.operation-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
  gap: 1.5rem;
  margin: 2rem 0;
}

.operation-card {
  background: white;
  border-radius: 12px;
  padding: 1.5rem;
  border-left: 4px solid #42b983;
  transition: transform 0.2s;
}

.operation-card:hover {
  transform: translateY(-3px);
}

.op-icon {
  font-size: 2rem;
  margin-bottom: 1rem;
}

.code-example {
  background: #1e293b;
  color: #f8fafc;
  padding: 1rem;
  border-radius: 6px;
  font-family: 'Fira Code', monospace;
  font-size: 0.9em;
  margin-top: 1rem;
  overflow-x: auto;
}

.scenario-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
  gap: 1.5rem;
}

.scenario-card {
  background: white;
  border-radius: 12px;
  padding: 1.5rem;
  box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.05);
}

.case-tags {
  display: flex;
  flex-wrap: wrap;
  gap: 0.5rem;
  margin-top: 1rem;
}

.case-tags span {
  background: #e2e8f0;
  color: #475569;
  padding: 0.3rem 0.8rem;
  border-radius: 20px;
  font-size: 0.85em;
}

.notice-grid {
  display: grid;
  gap: 1rem;
  margin-top: 1.5rem;
}

.notice-card {
  display: flex;
  align-items: start;
  gap: 1rem;
  padding: 1.2rem;
  background: #fff3cd;
  border-radius: 8px;
  color: #856404;
}

.notice-icon {
  font-size: 1.2rem;
  flex-shrink: 0;
}

.section-title {
  color: #2c3e50;
  margin: 3rem 0 1.5rem;
  font-size: 1.8rem;
  font-weight: 600;
}
</style>
