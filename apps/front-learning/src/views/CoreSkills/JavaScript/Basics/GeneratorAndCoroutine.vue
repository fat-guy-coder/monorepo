<template>
  <div class="generator-guide">
    <h1 class="title">JavaScript ç”Ÿæˆå™¨ä¸åç¨‹</h1>
    <h4>è¿™ä¸ºè¿›é˜¶çŸ¥è¯†é“ºå«ï¼Œå¯å…ˆäº†è§£ï¼Œåç»­å†æ·±å…¥ã€‚<a @click="handleClick">ES6 ç”Ÿæˆå™¨</a></h4>

    <!-- æ¦‚å¿µä»‹ç» -->
    <section class="card concept-section">
      <h2>ğŸ¯ æ ¸å¿ƒæ¦‚å¿µ</h2>

      <div class="concept-item">
        <h3>1. ç”Ÿæˆå™¨ (Generator)</h3>
        <p>ç”Ÿæˆå™¨æ˜¯ ES6 å¼•å…¥çš„ç‰¹æ®Šå‡½æ•°ï¼š</p>
        <ul>
          <li>é€šè¿‡ <code>function*</code> è¯­æ³•å®šä¹‰</li>
          <li>ä½¿ç”¨ <code>yield</code> æš‚åœæ‰§è¡Œ</li>
          <li>é€šè¿‡ <code>next()</code> æ¢å¤æ‰§è¡Œ</li>
          <li>å®ç°è¿­ä»£å™¨åè®®</li>
        </ul>
      </div>

      <div class="concept-item">
        <h3>2. åç¨‹ (Coroutine)</h3>
        <p>åç¨‹çš„æ›´é«˜çº§æŠ½è±¡ï¼š</p>
        <ul>
          <li>åä½œå¼å¤šä»»åŠ¡å¤„ç†</li>
          <li>å¯æš‚åœå’Œæ¢å¤çš„æ‰§è¡Œä¸Šä¸‹æ–‡</li>
          <li>ç”Ÿæˆå™¨æ˜¯åç¨‹çš„è½»é‡çº§å®ç°</li>
          <li>é€‚ç”¨äºçŠ¶æ€ç®¡ç†å’Œå¼‚æ­¥æµç¨‹æ§åˆ¶</li>
        </ul>
      </div>
    </section>

    <!-- ç”Ÿæˆå™¨åŸºç¡€ä»‹ç» -->
    <section class="card generator-section">
      <h2>ğŸ›  ç”Ÿæˆå™¨ç”¨æ³•ç¤ºä¾‹</h2>

      <div class="code-group">
        <div class="code-item">
          <h3>åŸºæœ¬ç»“æ„</h3>
          <pre><code>{{ codeBasic }}</code></pre>
        </div>

        <div class="code-item">
          <h3>æ§åˆ¶æµç¨‹</h3>
          <pre><code>{{ codeFlow }}</code></pre>
        </div>

        <div class="code-item">
          <h3>æ— é™åºåˆ—</h3>
          <pre><code>{{ codeInfinite }}</code></pre>
        </div>

        <div class="code-item">
          <h3>åç¨‹å®ç°</h3>
          <pre><code>{{ codeCoroutine }}</code></pre>
        </div>
      </div>
    </section>

    <!-- åº”ç”¨åœºæ™¯ -->
    <section class="card usage-section">
      <h2>ğŸ’¡ åº”ç”¨åœºæ™¯</h2>

      <div class="usage-grid">
        <div class="usage-card">
          <h3>ğŸ”„ æƒ°æ€§è®¡ç®—</h3>
          <p>æŒ‰éœ€ç”Ÿæˆæ•°æ®åºåˆ—ï¼ŒèŠ‚çœå†…å­˜</p>
        </div>

        <div class="usage-card">
          <h3>â³ çŠ¶æ€ç®¡ç†</h3>
          <p>å°è£…å¤æ‚çš„çŠ¶æ€è½¬æ¢é€»è¾‘</p>
        </div>

        <div class="usage-card">
          <h3>ğŸŒ€ å¼‚æ­¥æµç¨‹</h3>
          <p>é…åˆPromiseå®ç°ç±»async/awaitæ•ˆæœ</p>
        </div>

        <div class="usage-card">
          <h3>ğŸ® æ¸¸æˆå¾ªç¯</h3>
          <p>ç®¡ç†æ¸¸æˆå®ä½“çŠ¶æ€æœº</p>
        </div>
      </div>
    </section>
  </div>
</template>

<script setup lang="ts">
// ç¤ºä¾‹ä»£ç 
const codeBasic = `function* simpleGenerator() {
  yield 1;
  yield 2;
  return 3;
}

const gen = simpleGenerator();
gen.next(); // { value: 1, done: false }
gen.next(); // { value: 2, done: false }
gen.next(); // { value: 3, done: true }`;

const codeFlow = `function* flowControl() {
  const user = yield getUser();
  const posts = yield getPosts(user.id);
  return processData(posts);
}

const runner = flowControl();
runner.next().value.then(user =>
  runner.next(user).value.then(posts =>
    runner.next(posts)
  )
)`;

const codeInfinite = `function* idGenerator() {
  let id = 1;
  while(true) {
    yield id++;
  }
}

const idMaker = idGenerator();
idMaker.next().value; // 1
idMaker.next().value; // 2`;

const codeCoroutine = `function* coroutine() {
  let result = yield;
  while(true) {
    result = yield process(result);
  }
}

const co = coroutine();
co.next(); // å¯åŠ¨
co.next(42); // ä¼ é€’å€¼
co.next(100); // ç»§ç»­å¤„ç†`;

const emit = defineEmits(['goToByRouteName'])

const handleClick = () => {
  emit('goToByRouteName', 'Generator')
}
</script>

<style lang="less">
@primary-color: #2c3e50;
@accent-color: #3498db;
@code-bg: #f8f9fa;

.generator-guide {
  max-width: 1200px;
  margin: 0 auto;
  padding: 2rem;

  .title {
    color: @primary-color;
    text-align: center;
    margin-bottom: 2rem;
  }

  .card {
    background: white;
    border-radius: 8px;
    padding: 1.5rem;
    margin-bottom: 2rem;
    box-shadow: 0 2px 12px rgba(0, 0, 0, 0.1);

    h2 {
      color: @accent-color;
      border-bottom: 2px solid #eee;
      padding-bottom: 0.8rem;
      margin-bottom: 1.5rem;
    }
  }

  .concept-item {
    margin: 1.5rem 0;
    padding: 1rem;
    background: lighten(@code-bg, 3%);
    border-radius: 6px;

    h3 {
      color: darken(@primary-color, 10%);
      margin-bottom: 0.8rem;
    }

    ul {
      padding-left: 1.5rem;
      line-height: 1.6;

      li {
        margin: 0.5rem 0;

        &::marker {
          color: @accent-color;
        }
      }
    }
  }

  .code-group {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
    gap: 1.5rem;

    .code-item {
      background: @code-bg;
      border-radius: 6px;
      padding: 1rem;
      overflow-x: auto;

      h3 {
        color: darken(@accent-color, 10%);
        margin-bottom: 0.5rem;
      }

      pre {
        margin: 0;

        code {
          font-family: 'SFMono-Regular', Consolas, monospace;
          font-size: 0.9em;
        }
      }
    }
  }

  .usage-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
    gap: 1.5rem;

    .usage-card {
      padding: 1.2rem;
      background: lighten(@accent-color, 35%);
      border-radius: 8px;
      transition: transform 0.2s;

      h3 {
        color: darken(@accent-color, 15%);
        margin-bottom: 0.5rem;
      }

      &:hover {
        transform: translateY(-3px);
      }
    }
  }
}
</style>
