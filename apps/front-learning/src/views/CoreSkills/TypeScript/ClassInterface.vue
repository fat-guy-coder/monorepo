<template>
  <div class="ts-class-guide">
    <header class="guide-header">
      <h1 class="title">TypeScript ç±»(Class)åŸºç¡€è§£æ</h1>
      <p class="subtitle">æŒæ¡é¢å‘å¯¹è±¡ç¼–ç¨‹çš„æ ¸å¿ƒç‰¹æ€§</p>
    </header>

    <div class="content-grid">
      <!-- åŸºç¡€ç±»å®šä¹‰ -->
      <section class="class-section">
        <h2 class="section-title">ğŸ—ï¸ åŸºç¡€ç±»å®šä¹‰</h2>
        <div class="feature-card">
          <h3>åŸºæœ¬ç±»ç»“æ„</h3>
          <pre class="code-block"><code>class Person {
  // å±æ€§å£°æ˜
  name: string
  age: number

  // æ„é€ å‡½æ•°
  constructor(name: string, age: number) {
    this.name = name
    this.age = age
  }

  // æ–¹æ³•
  greet() {
    return `Hello, my name is ${this.name}`
  }
}

const person = new Person('Alice', 25)
person.greet() // "Hello, my name is Alice"</code></pre>
        </div>
      </section>

      <!-- è®¿é—®ä¿®é¥°ç¬¦ -->
      <section class="class-section">
        <h2 class="section-title">ğŸ” è®¿é—®ä¿®é¥°ç¬¦</h2>
        <div class="feature-card">
          <h3>public (é»˜è®¤)</h3>
          <pre class="code-block"><code>class Animal {
  public name: string  // publicå¯çœç•¥

  constructor(name: string) {
    this.name = name
  }

  public move(distance: number) {
    console.log(`${this.name} moved ${distance}m`)
  }
}</code></pre>
        </div>

        <div class="feature-card">
          <h3>private</h3>
          <pre class="code-block"><code>class BankAccount {
  private balance: number

  constructor(initialBalance: number) {
    this.balance = initialBalance
  }

  deposit(amount: number) {
    this.balance += amount
  }

  // å¤–éƒ¨æ— æ³•ç›´æ¥è®¿é—®balance
}

const account = new BankAccount(1000)
// account.balance // é”™è¯¯ï¼</code></pre>
        </div>

        <div class="feature-card">
          <h3>protected</h3>
          <pre class="code-block"><code>class Vehicle {
  protected speed: number

  accelerate() {
    this.speed += 10
  }
}

class Car extends Vehicle {
  turboBoost() {
    this.speed += 50  // å­ç±»å¯ä»¥è®¿é—®
  }
}

const car = new Car()
// car.speed // é”™è¯¯ï¼å¤–éƒ¨ä¸èƒ½è®¿é—®</code></pre>
        </div>
      </section>

      <!-- é«˜çº§ç‰¹æ€§ -->
      <section class="class-section">
        <h2 class="section-title">ğŸš€ é«˜çº§ç±»ç‰¹æ€§</h2>
        <div class="feature-card">
          <h3>readonly å±æ€§</h3>
          <pre class="code-block"><code>class Circle {
  readonly PI = 3.14
  readonly radius: number

  constructor(radius: number) {
    this.radius = radius
  }

  get area() {
    return this.PI * this.radius ** 2
  }
}

const circle = new Circle(5)
// circle.radius = 10 // é”™è¯¯ï¼</code></pre>
        </div>

        <div class="feature-card">
          <h3>getter/setter</h3>
          <pre class="code-block"><code>class Temperature {
  private _celsius = 0

  get celsius() {
    return this._celsius
  }

  set celsius(value: number) {
    if (value &lt; -273.15) {
      throw new Error('æ¸©åº¦ä¸èƒ½ä½äºç»å¯¹é›¶åº¦')
    }
    this._celsius = value
  }

  get fahrenheit() {
    return this._celsius * 1.8 + 32
  }
}

const temp = new Temperature()
temp.celsius = 25 // è°ƒç”¨setter
console.log(temp.fahrenheit) // 77</code></pre>
        </div>

        <div class="feature-card">
          <h3>é™æ€æˆå‘˜</h3>
          <pre class="code-block"><code>class MathHelper {
  static PI = 3.1415926

  static circleArea(radius: number) {
    return this.PI * radius ** 2
  }
}

console.log(MathHelper.PI) // 3.1415926
MathHelper.circleArea(5) // 78.539815</code></pre>
        </div>
      </section>

      <!-- ç±»ä¸æ¥å£ -->
      <section class="class-section">
        <h2 class="section-title">ğŸ¤ ç±»ä¸æ¥å£</h2>
        <div class="feature-card">
          <h3>å®ç°æ¥å£</h3>
          <pre class="code-block"><code>interface ClockInterface {
  currentTime: Date
  setTime(d: Date): void
}

class Clock implements ClockInterface {
  currentTime: Date = new Date()

  setTime(d: Date) {
    this.currentTime = d
  }
}</code></pre>
        </div>

        <div class="feature-card">
          <h3>æŠ½è±¡ç±»</h3>
          <pre class="code-block"><code>abstract class Animal {
  abstract makeSound(): void

  move(): void {
    console.log('roaming the earth...')
  }
}

class Dog extends Animal {
  makeSound() {
    console.log('Woof! Woof!')
  }
}

// const animal = new Animal() // é”™è¯¯ï¼</code></pre>
        </div>
      </section>
    </div>

    <section class="best-practice">
      <h2 class="section-title">ğŸ† æœ€ä½³å®è·µ</h2>
      <div class="practice-grid">
        <div class="practice-card">
          <h3>Vueç»„ä»¶ä¸­çš„ç±»</h3>
          <pre class="code-block"><code>// ä½¿ç”¨ç±»å¼ç»„ä»¶
@Component
class MyComponent extends Vue {
  private count = 0

  increment() {
    this.count++
  }

  get doubleCount() {
    return this.count * 2
  }
}</code></pre>
        </div>

        <div class="practice-card">
          <h3>thisç±»å‹çº¦æŸ</h3>
          <pre class="code-block"><code>class Box {
  content = ""

  set(value: string): this {
    this.content = value
    return this
  }

  reset() {
    this.content = ""
    return this
  }
}

new Box().set("hello").reset()</code></pre>
        </div>

        <div class="practice-card">
          <h3>ç§æœ‰å­—æ®µ(#è¯­æ³•)</h3>
          <pre class="code-block"><code>class Person {
  #age: number  // çœŸæ­£çš„ç§æœ‰å­—æ®µ

  constructor(age: number) {
    this.#age = age
  }

  getAge() {
    return this.#age
  }
}

const p = new Person(30)
// p.#age // è¯­æ³•é”™è¯¯</code></pre>
        </div>
      </div>
    </section>
  </div>
</template>

<script setup lang="ts">
// ç¤ºä¾‹ç±»å®šä¹‰
class ExampleUser {
  private id: number
  public name: string = '123'
  protected email?: string

  constructor(id: number, name?: string) {
    this.id = id
    this.name = name ?? 'default'
  }

  get userId() {
    return `user-${this.id}`
  }
}

// ç¤ºä¾‹æŠ½è±¡ç±»
abstract class Shape {
  abstract area(): number
  abstract perimeter(): number
}
</script>

<style lang="less" scoped>
.ts-class-guide {
  max-width: 1200px;
  margin: 0 auto;
  padding: 2rem;
  font-family: 'Inter', system-ui, sans-serif;
  color: #2d3748;
  line-height: 1.6;
}

.guide-header {
  text-align: center;
  margin-bottom: 3rem;

  .title {
    font-size: 2.5rem;
    margin-bottom: 0.5rem;
    color: #2d3748;
    font-weight: 800;
    background: linear-gradient(90deg, #3b82f6, #8b5cf6);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
  }

  .subtitle {
    font-size: 1.2rem;
    color: #64748b;
    font-weight: 400;
  }
}

.section-title {
  font-size: 1.8rem;
  color: #2d3748;
  margin-top: 0;
  margin-bottom: 1.5rem;
  position: relative;
  padding-bottom: 0.5rem;

  &::after {
    content: '';
    position: absolute;
    left: 0;
    bottom: 0;
    width: 60px;
    height: 4px;
    background: linear-gradient(90deg, #3b82f6, #8b5cf6);
    border-radius: 2px;
  }
}

.content-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
  gap: 2rem;
  margin-bottom: 3rem;
}

.class-section {
  h2 {
    font-size: 1.5rem;
    color: #1e40af;
  }
}

.feature-card {
  background: white;
  border-radius: 0.5rem;
  padding: 1.5rem;
  margin-bottom: 1.5rem;
  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.05);

  h3 {
    margin-top: 0;
    color: #1e40af;
    font-size: 1.2rem;
  }
}

.code-block {
  background: #1e293b;
  border-radius: 0.375rem;
  padding: 1rem;
  overflow-x: auto;

  code {
    font-family: 'Fira Code', monospace;
    font-size: 0.85rem;
    color: #f8fafc;
    line-height: 1.5;
    white-space: pre;
  }
}

.best-practice {
  margin-bottom: 3rem;
}

.practice-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));
  gap: 1.5rem;
}

.practice-card {
  background: white;
  border-radius: 0.75rem;
  padding: 1.5rem;
  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);

  h3 {
    margin-top: 0;
    color: #1e40af;
    font-size: 1.2rem;
    padding-bottom: 0.5rem;
    border-bottom: 2px solid #e2e8f0;
  }

  pre {
    margin: 0;
  }
}
</style>
