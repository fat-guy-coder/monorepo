<template>
  <div class="loading-optimization-container">
    <header class="header">
      <h1>èµ„æºåŠ è½½ä¼˜åŒ–ï¼šé¢„åŠ è½½ä¸æ‡’åŠ è½½</h1>
      <p class="subtitle">æå‡ç½‘é¡µæ€§èƒ½çš„å…³é”®æŠ€æœ¯</p>
    </header>

    <div class="content-wrapper">
      <section class="intro">
        <div class="comparison-cards">
          <div class="loading-card lazy">
            <div class="card-header">
              <div class="icon">ğŸ¦¥</div>
              <h2>æ‡’åŠ è½½ (Lazy Loading)</h2>
            </div>
            <div class="card-content">
              <p>å»¶è¿ŸåŠ è½½éå…³é”®èµ„æºï¼Œç›´åˆ°éœ€è¦æ—¶å†åŠ è½½</p>
              <div class="loading-bar">
                <div class="progress" style="width: 30%"></div>
              </div>
              <div class="stats">
                <div class="stat">
                  <span class="value">30%</span>
                  <span class="label">åˆå§‹åŠ è½½é‡</span>
                </div>
                <div class="stat">
                  <span class="value">æŒ‰éœ€</span>
                  <span class="label">åŠ è½½æ—¶æœº</span>
                </div>
              </div>
            </div>
          </div>

          <div class="vs">VS</div>

          <div class="loading-card preload">
            <div class="card-header">
              <div class="icon">âš¡</div>
              <h2>é¢„åŠ è½½ (Preloading)</h2>
            </div>
            <div class="card-content">
              <p>æå‰åŠ è½½åç»­é¡µé¢æ‰€éœ€çš„å…³é”®èµ„æº</p>
              <div class="loading-bar">
                <div class="progress" style="width: 100%"></div>
              </div>
              <div class="stats">
                <div class="stat">
                  <span class="value">100%</span>
                  <span class="label">åˆå§‹åŠ è½½é‡</span>
                </div>
                <div class="stat">
                  <span class="value">æå‰</span>
                  <span class="label">åŠ è½½æ—¶æœº</span>
                </div>
              </div>
            </div>
          </div>
        </div>
      </section>

      <div class="columns">
        <section class="lazy-loading">
          <h2><span class="icon">ğŸ¦¥</span> æ‡’åŠ è½½ä»‹ç»</h2>
          <div class="card">
            <h3>å®ç°åŸç†</h3>
            <p>æ‡’åŠ è½½çš„æ ¸å¿ƒæ€æƒ³æ˜¯å»¶è¿ŸåŠ è½½éå…³é”®èµ„æºï¼Œç›´åˆ°ç”¨æˆ·éœ€è¦å®ƒä»¬æ—¶å†åŠ è½½ã€‚</p>

            <div class="implementation">
              <div class="step">
                <div class="step-number">1</div>
                <div class="step-content">
                  <h4>å ä½å†…å®¹</h4>
                  <p>åˆå§‹åŠ è½½æ—¶ä½¿ç”¨å ä½å†…å®¹ï¼ˆå¦‚å›¾ç‰‡å ä½ç¬¦ã€éª¨æ¶å±ï¼‰</p>
                </div>
              </div>

              <div class="step">
                <div class="step-number">2</div>
                <div class="step-content">
                  <h4>ç›‘å¬è§†å£</h4>
                  <p>ä½¿ç”¨IntersectionObserver APIç›‘å¬å…ƒç´ æ˜¯å¦è¿›å…¥è§†å£</p>
                </div>
              </div>

              <div class="step">
                <div class="step-number">3</div>
                <div class="step-content">
                  <h4>åŠ¨æ€åŠ è½½</h4>
                  <p>å½“å…ƒç´ è¿›å…¥è§†å£æ—¶ï¼ŒåŠ¨æ€åŠ è½½å®é™…èµ„æº</p>
                </div>
              </div>
            </div>

            <div class="code-block">
              <pre><code>// å›¾ç‰‡æ‡’åŠ è½½ç¤ºä¾‹
const lazyImages = document.querySelectorAll('img.lazy');

const observer = new IntersectionObserver((entries) => {
  entries.forEach(entry => {
    if (entry.isIntersecting) {
      const img = entry.target;
      img.src = img.dataset.src;
      img.classList.remove('lazy');
      observer.unobserve(img);
    }
  });
});

lazyImages.forEach(img => {
  observer.observe(img);
});</code></pre>
            </div>

            <h3>ä½¿ç”¨åœºæ™¯</h3>
            <div class="scenarios">
              <div class="scenario">
                <div class="icon">ğŸ–¼ï¸</div>
                <div class="content">
                  <h4>é•¿é¡µé¢å›¾ç‰‡</h4>
                  <p>åªåŠ è½½ç”¨æˆ·å¯è§åŒºåŸŸçš„å›¾ç‰‡</p>
                </div>
              </div>

              <div class="scenario">
                <div class="icon">ğŸ“œ</div>
                <div class="content">
                  <h4>æ— é™æ»šåŠ¨å†…å®¹</h4>
                  <p>åŠ è½½ç”¨æˆ·å³å°†æµè§ˆçš„å†…å®¹</p>
                </div>
              </div>

              <div class="scenario">
                <div class="icon">ğŸ“¦</div>
                <div class="content">
                  <h4>å¤§å‹ç»„ä»¶åº“</h4>
                  <p>æŒ‰éœ€åŠ è½½UIç»„ä»¶</p>
                </div>
              </div>

              <div class="scenario">
                <div class="icon">ğŸ“„</div>
                <div class="content">
                  <h4>å¤šé¡µç­¾å†…å®¹</h4>
                  <p>åªåœ¨æ¿€æ´»æ—¶åŠ è½½å†…å®¹</p>
                </div>
              </div>
            </div>

            <h3>ä¼˜ç¼ºç‚¹</h3>
            <div class="pros-cons">
              <div class="pros">
                <h4>ä¼˜ç‚¹</h4>
                <ul>
                  <li>å‡å°‘åˆå§‹åŠ è½½æ—¶é—´</li>
                  <li>é™ä½å¸¦å®½æ¶ˆè€—</li>
                  <li>æå‡é¦–å±æ€§èƒ½</li>
                  <li>èŠ‚çœç”¨æˆ·æµé‡ï¼ˆç§»åŠ¨ç«¯ï¼‰</li>
                </ul>
              </div>

              <div class="cons">
                <h4>ç¼ºç‚¹</h4>
                <ul>
                  <li>æ»šåŠ¨æ—¶å¯èƒ½äº§ç”Ÿå†…å®¹é—ªçƒ</li>
                  <li>éœ€è¦é¢å¤–JSå®ç°</li>
                  <li>SEOå¯èƒ½å—å½±å“ï¼ˆéœ€æ­£ç¡®å¤„ç†ï¼‰</li>
                </ul>
              </div>
            </div>
          </div>
        </section>

        <section class="preloading">
          <h2><span class="icon">âš¡</span> é¢„åŠ è½½ä»‹ç»</h2>
          <div class="card">
            <h3>å®ç°åŸç†</h3>
            <p>é¢„åŠ è½½çš„æ ¸å¿ƒæ˜¯æå‰è·å–åç»­é¡µé¢æ‰€éœ€çš„å…³é”®èµ„æºã€‚</p>

            <div class="preload-types">
              <div class="type">
                <div class="type-header">
                  <h4>Resource Hints</h4>
                  <span class="tag">HTML</span>
                </div>
                <div class="code-block">
                  <pre><code>&lt;!-- DNSé¢„è§£æ --&gt;
&lt;link rel="dns-prefetch" href="//example.com"&gt;

&lt;!-- é¢„è¿æ¥ --&gt;
&lt;link rel="preconnect" href="//api.example.com"&gt;

&lt;!-- é¢„åŠ è½½ --&gt;
&lt;link rel="preload" href="critical.js" as="script"&gt;

&lt;!-- é¢„è·å– --&gt;
&lt;link rel="prefetch" href="next-page-data.json" as="fetch"&gt;</code></pre>
                </div>
              </div>

              <div class="type">
                <div class="type-header">
                  <h4>HTTPå¤´éƒ¨</h4>
                  <span class="tag">Server</span>
                </div>
                <div class="code-block">
                  <pre><code>Link: &lt;/critical.css&gt;; rel=preload; as=style
Link: &lt;/next-page.js&gt;; rel=prefetch; as=script</code></pre>
                </div>
              </div>
            </div>

            <h3>é¢„åŠ è½½JSæ‰§è¡Œæ—¶æœº</h3>
            <div class="execution-timing">
              <div class="timeline">
                <div class="event">
                  <div class="time">0ms</div>
                  <div class="description">é¡µé¢å¼€å§‹åŠ è½½</div>
                </div>
                <div class="event">
                  <div class="time">100ms</div>
                  <div class="description">é¢„åŠ è½½JSå®Œæˆä¸‹è½½</div>
                </div>
                <div class="event">
                  <div class="time">200ms</div>
                  <div class="description">ä¸»JSæ‰§è¡Œ</div>
                </div>
                <div class="event highlight">
                  <div class="time">300ms</div>
                  <div class="description">é¢„åŠ è½½JSæ‰§è¡Œ*</div>
                </div>
              </div>
              <div class="note">
                <p>* é¢„åŠ è½½çš„èµ„æºä»…æå‰ä¸‹è½½ï¼Œæ‰§è¡Œæ—¶æœºç”±æµè§ˆå™¨æ§åˆ¶ï¼š</p>
                <ul>
                  <li>è„šæœ¬æŒ‰æ–‡æ¡£é¡ºåºæ‰§è¡Œ</li>
                  <li>é»˜è®¤ä¸ä¼šæå‰æ‰§è¡Œ</li>
                  <li>å¯é€šè¿‡<code>async</code>æˆ–<code>defer</code>æ§åˆ¶</li>
                </ul>
              </div>
            </div>

            <h3>prefetch vs preconnect</h3>
            <div class="comparison">
              <div class="comparison-row">
                <div class="comparison-header"></div>
                <div class="comparison-header">prefetch</div>
                <div class="comparison-header">preconnect</div>
              </div>

              <div class="comparison-row">
                <div class="comparison-cell">ç›®çš„</div>
                <div class="comparison-cell">è·å–ç‰¹å®šèµ„æº</div>
                <div class="comparison-cell">å»ºç«‹è¿æ¥é€šé“</div>
              </div>

              <div class="comparison-row">
                <div class="comparison-cell">ä½¿ç”¨åœºæ™¯</div>
                <div class="comparison-cell">ä¸‹é¡µé¢çš„å…³é”®èµ„æº</div>
                <div class="comparison-cell">è·¨åŸŸAPIè°ƒç”¨</div>
              </div>

              <div class="comparison-row">
                <div class="comparison-cell">èµ„æºç±»å‹</div>
                <div class="comparison-cell">JS/CSS/å­—ä½“/å›¾åƒ</div>
                <div class="comparison-cell">DNS/TCP/TLS</div>
              </div>

              <div class="comparison-row">
                <div class="comparison-cell">ä¼˜å…ˆçº§</div>
                <div class="comparison-cell">Low (æœ€ä½)</div>
                <div class="comparison-cell">Medium (ä¸­ç­‰)</div>
              </div>
            </div>

            <h3>ä½¿ç”¨åœºæ™¯</h3>
            <div class="scenarios">
              <div class="scenario">
                <div class="icon">ğŸ“Š</div>
                <div class="content">
                  <h4>å…³é”®æ¸²æŸ“è·¯å¾„èµ„æº</h4>
                  <p>æå‰åŠ è½½é˜»å¡æ¸²æŸ“çš„CSS/JS</p>
                </div>
              </div>

              <div class="scenario">
                <div class="icon">ğŸ”„</div>
                <div class="content">
                  <h4>ä¸‹ä¸€é¡µèµ„æº</h4>
                  <p>é¢„åŠ è½½ç”¨æˆ·å¯èƒ½è®¿é—®çš„ä¸‹ä¸€é¡µèµ„æº</p>
                </div>
              </div>

              <div class="scenario">
                <div class="icon">ğŸ” </div>
                <div class="content">
                  <h4>è‡ªå®šä¹‰å­—ä½“</h4>
                  <p>é¿å…å­—ä½“åŠ è½½æ—¶çš„å¸ƒå±€åç§»</p>
                </div>
              </div>

              <div class="scenario">
                <div class="icon">ğŸ¥</div>
                <div class="content">
                  <h4>åª’ä½“æ–‡ä»¶</h4>
                  <p>é¢„åŠ è½½è§†é¢‘/éŸ³é¢‘å…³é”®å¸§</p>
                </div>
              </div>
            </div>
          </div>
        </section>
      </div>

      <section class="best-practices">
        <h2><span class="icon">âœ…</span> æœ€ä½³å®è·µ</h2>
        <div class="card">
          <div class="practices-grid">
            <div class="practice">
              <div class="icon">ğŸ¯</div>
              <h3>å…³é”®èµ„æºä¼˜å…ˆ</h3>
              <p>ä½¿ç”¨preloadåŠ è½½é¦–å±å…³é”®èµ„æºï¼Œä½¿ç”¨prefetchåŠ è½½åç»­èµ„æº</p>
            </div>

            <div class="practice">
              <div class="icon">ğŸ“±</div>
              <h3>è€ƒè™‘ç½‘ç»œæ¡ä»¶</h3>
              <p>åœ¨æ…¢é€Ÿç½‘ç»œä¸Šè°¨æ…ä½¿ç”¨é¢„åŠ è½½ï¼Œé¿å…æµªè´¹å¸¦å®½</p>
            </div>

            <div class="practice">
              <div class="icon">âš–ï¸</div>
              <h3>å¹³è¡¡åŠ è½½ç­–ç•¥</h3>
              <p>é¦–å±ä½¿ç”¨é¢„åŠ è½½ï¼Œéé¦–å±å†…å®¹ä½¿ç”¨æ‡’åŠ è½½</p>
            </div>

            <div class="practice">
              <div class="icon">ğŸ”</div>
              <h3>ç›‘æ§æ€§èƒ½</h3>
              <p>ä½¿ç”¨Chrome DevToolsåˆ†æåŠ è½½æ€§èƒ½</p>
            </div>
          </div>

          <div class="performance-metrics">
            <h3>æ€§èƒ½æŒ‡æ ‡å¯¹æ¯”</h3>
            <div class="metrics-table">
              <table>
                <thead>
                  <tr>
                    <th>ç­–ç•¥</th>
                    <th>LCP</th>
                    <th>FID</th>
                    <th>åŠ è½½æ—¶é—´</th>
                    <th>å¸¦å®½ä½¿ç”¨</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td>æ— ä¼˜åŒ–</td>
                    <td>3.2s</td>
                    <td>120ms</td>
                    <td>4.5s</td>
                    <td>2.1MB</td>
                  </tr>
                  <tr>
                    <td>ä»…æ‡’åŠ è½½</td>
                    <td>1.8s</td>
                    <td>85ms</td>
                    <td>2.9s</td>
                    <td>1.4MB</td>
                  </tr>
                  <tr>
                    <td>ä»…é¢„åŠ è½½</td>
                    <td>1.5s</td>
                    <td>45ms</td>
                    <td>2.2s</td>
                    <td>2.3MB</td>
                  </tr>
                  <tr class="highlight">
                    <td>ç»„åˆä½¿ç”¨</td>
                    <td>1.2s</td>
                    <td>32ms</td>
                    <td>1.8s</td>
                    <td>1.6MB</td>
                  </tr>
                </tbody>
              </table>
              <p class="note">
                æµ‹è¯•æ•°æ®åŸºäºå…¸å‹ç”µå•†é¡µé¢ï¼Œæ•°å€¼è¶Šä½è¶Šå¥½ï¼ˆLCP: æœ€å¤§å†…å®¹ç»˜åˆ¶ï¼ŒFID: é¦–æ¬¡è¾“å…¥å»¶è¿Ÿï¼‰
              </p>
            </div>
          </div>
        </div>
      </section>

      <section class="implementation">
        <h2><span class="icon">ğŸ’»</span> å®é™…å®ç°</h2>
        <div class="card">
          <div class="tabs">
            <button
              v-for="(tab, index) in tabs"
              :key="index"
              :class="['tab', { active: activeTab === tab.id }]"
              @click="activeTab = tab.id"
            >
              {{ tab.label }}
            </button>
          </div>

          <div class="tab-content">
            <div v-if="activeTab === 'vue'" class="code-example">
              <h3>Vueä¸­çš„å®ç°</h3>
              <div class="code-block">
                <pre><code>// æ‡’åŠ è½½ç»„ä»¶
const ProductGallery = () => import('./ProductGallery.vue');

// é¢„åŠ è½½å…³é”®èµ„æº
&lt;link rel="preload" href="/fonts/roboto.woff2" as="font" crossorigin&gt;

// è·¯ç”±é¢„è·å–
const router = new VueRouter({
  routes: [...],
  scrollBehavior(to, from, savedPosition) {
    return savedPosition || { x: 0, y: 0 }
  }
})

// ä½¿ç”¨è·¯ç”±å®ˆå«é¢„å–æ•°æ®
router.beforeResolve((to, from, next) => {
  if (to.meta.prefetchData) {
    store.dispatch('prefetchData', to.params.id)
  }
  next()
})</code></pre>
              </div>
            </div>

            <div v-if="activeTab === 'react'" class="code-example">
              <h3>Reactä¸­çš„å®ç°</h3>
              <div class="code-block">
                <pre><code>// æ‡’åŠ è½½ç»„ä»¶
const ProductDetails = React.lazy(() => import('./ProductDetails'));

// é¢„åŠ è½½èµ„æº
import { Helmet } from 'react-helmet';

function App() {
  return (
    &lt;&gt;
      &lt;Helmet&gt;
        &lt;link rel="preload" href="critical.css" as="style" /&gt;
        &lt;link rel="prefetch" href="next-page-data.json" as="fetch" /&gt;
      &lt;/Helmet&gt;
      {/* åº”ç”¨å†…å®¹ */}
    &lt;/&gt;
  );
}

// ä½¿ç”¨Suspenseå¤„ç†åŠ è½½çŠ¶æ€
&lt;Suspense fallback={&lt;Spinner /&gt}&gt;
  &lt;ProductDetails /&gt;
&lt;/Suspense&gt;</code></pre>
              </div>
            </div>

            <div v-if="activeTab === 'native'" class="code-example">
              <h3>åŸç”ŸJavaScriptå®ç°</h3>
              <div class="code-block">
                <pre><code>// åŠ¨æ€é¢„åŠ è½½èµ„æº
function preloadResource(url, as = 'script') {
  const link = document.createElement('link');
  link.rel = 'preload';
  link.href = url;
  link.as = as;
  document.head.appendChild(link);
}

// æ¡ä»¶é¢„åŠ è½½
if (navigator.connection.effectiveType === '4g') {
  preloadResource('next-page.js');
}

// å›¾ç‰‡æ‡’åŠ è½½
const observer = new IntersectionObserver((entries) => {
  entries.forEach(entry => {
    if (entry.isIntersecting) {
      const img = entry.target;
      img.src = img.dataset.src;
      observer.unobserve(img);
    }
  });
});

document.querySelectorAll('img.lazy').forEach(img => {
  observer.observe(img);
});</code></pre>
              </div>
            </div>
          </div>
        </div>
      </section>
    </div>

    <footer class="footer">
      <p>é¢„åŠ è½½å’Œæ‡’åŠ è½½æ˜¯ä¼˜åŒ–ç½‘é¡µæ€§èƒ½çš„äº’è¡¥æŠ€æœ¯ï¼Œæ­£ç¡®ç»„åˆä½¿ç”¨å¯æ˜¾è‘—æå‡ç”¨æˆ·ä½“éªŒã€‚</p>
      <p>ä½¿ç”¨Chrome DevToolsçš„Performanceå’ŒNetworké¢æ¿åˆ†æä½ çš„åº”ç”¨åŠ è½½æ€§èƒ½ã€‚</p>
    </footer>
  </div>
</template>

<script setup lang="ts">
import { ref } from 'vue'

const tabs = [
  { id: 'vue', label: 'Vueå®ç°' },
  { id: 'react', label: 'Reactå®ç°' },
  { id: 'native', label: 'åŸç”ŸJSå®ç°' },
]

const activeTab = ref('vue')
</script>

<style lang="less" scoped>
// é¢œè‰²å˜é‡
@primary-color: #4a6cf7;
@secondary-color: #657ef8;
@accent-color: #ff6b6b;
@light-bg: #f8faff;
@card-bg: #ffffff;
@text-color: #2c3e50;
@border-color: #e0e7ff;
@code-bg: #f0f4ff;
@lazy-color: #6a89cc;
@preload-color: #4cd137;
@warning-color: #ff9f43;

// åŸºç¡€æ ·å¼
* {
  box-sizing: border-box;
  margin: 0;
  padding: 0;
}

.loading-optimization-container {
  font-family: 'Roboto', sans-serif;
  line-height: 1.6;
  color: @text-color;
  background-color: @light-bg;
  padding: 20px;
  max-width: 1200px;
  margin: 0 auto;
}

.header {
  text-align: center;
  margin-bottom: 30px;
  padding: 30px 20px;
  background: linear-gradient(135deg, @primary-color, #3051d3);
  color: white;
  border-radius: 16px;
  box-shadow: 0 6px 20px rgba(74, 108, 247, 0.2);

  h1 {
    font-size: 2.5rem;
    margin-bottom: 10px;
    font-weight: 700;
  }

  .subtitle {
    font-size: 1.2rem;
    opacity: 0.9;
    font-weight: 300;
  }
}

.content-wrapper {
  background-color: @card-bg;
  border-radius: 16px;
  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.04);
  padding: 30px;
  margin-bottom: 30px;
}

h2 {
  font-size: 1.8rem;
  color: @primary-color;
  margin-bottom: 25px;
  padding-bottom: 12px;
  border-bottom: 2px solid #e8eaed;
  display: flex;
  align-items: center;

  .icon {
    margin-right: 12px;
    font-size: 1.5rem;
  }
}

h3 {
  font-size: 1.4rem;
  color: @secondary-color;
  margin: 20px 0 15px;
}

h4 {
  font-size: 1.2rem;
  color: @primary-color;
  margin: 15px 0 10px;
}

.card {
  background-color: @card-bg;
  border-radius: 12px;
  padding: 25px;
  margin-bottom: 30px;
  box-shadow: 0 3px 15px rgba(0, 0, 0, 0.03);
  border: 1px solid @border-color;
}

// å¯¹æ¯”å¡ç‰‡
.comparison-cards {
  display: flex;
  justify-content: center;
  align-items: center;
  flex-wrap: wrap;
  gap: 30px;
  margin: 30px 0;

  .loading-card {
    flex: 1;
    min-width: 300px;
    border-radius: 16px;
    overflow: hidden;
    box-shadow: 0 6px 20px rgba(0, 0, 0, 0.08);
    transition: transform 0.3s ease;

    &:hover {
      transform: translateY(-5px);
    }

    &.lazy {
      border-top: 4px solid @lazy-color;
    }

    &.preload {
      border-top: 4px solid @preload-color;
    }

    .card-header {
      padding: 20px;
      background: linear-gradient(135deg, #f0f4ff, #e6eeff);
      display: flex;
      align-items: center;

      .icon {
        font-size: 2rem;
        margin-right: 15px;
      }

      h2 {
        margin: 0;
        padding: 0;
        border: none;
        color: @text-color;
      }
    }

    .card-content {
      padding: 20px;

      p {
        margin-bottom: 15px;
      }

      .loading-bar {
        height: 8px;
        background-color: #e0e7ff;
        border-radius: 4px;
        overflow: hidden;
        margin: 20px 0;

        .progress {
          height: 100%;
          border-radius: 4px;
        }

        .lazy & .progress {
          background-color: @lazy-color;
        }

        .preload & .progress {
          background-color: @preload-color;
        }
      }

      .stats {
        display: flex;
        justify-content: space-around;

        .stat {
          text-align: center;

          .value {
            display: block;
            font-size: 1.8rem;
            font-weight: 700;
          }

          .label {
            font-size: 0.9rem;
            color: #666;
          }
        }
      }
    }
  }

  .vs {
    font-size: 1.5rem;
    font-weight: bold;
    color: @warning-color;
    padding: 10px;
  }
}

.columns {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 25px;
  margin-bottom: 25px;

  @media (max-width: 768px) {
    grid-template-columns: 1fr;
  }
}

// æ‡’åŠ è½½éƒ¨åˆ†
.implementation {
  display: grid;
  gap: 20px;
  margin: 20px 0;

  .step {
    display: flex;
    align-items: flex-start;

    .step-number {
      width: 36px;
      height: 36px;
      background: @primary-color;
      color: white;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: bold;
      margin-right: 15px;
      flex-shrink: 0;
    }

    .step-content {
      h4 {
        margin-top: 0;
      }
    }
  }
}

// ä½¿ç”¨åœºæ™¯ç½‘æ ¼
.scenarios {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
  gap: 15px;
  margin: 20px 0;

  .scenario {
    display: flex;
    align-items: center;
    background: #f0f4ff;
    border-radius: 10px;
    padding: 15px;

    .icon {
      font-size: 1.8rem;
      margin-right: 15px;
    }

    .content {
      h4 {
        margin: 0 0 5px 0;
      }

      p {
        font-size: 0.9rem;
        color: #666;
        margin: 0;
      }
    }
  }
}

.pros-cons {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 20px;
  margin: 20px 0;

  .pros,
  .cons {
    padding: 15px;
    border-radius: 10px;
  }

  .pros {
    background: #e6f7ee;
    border-left: 4px solid @preload-color;
  }

  .cons {
    background: #ffefef;
    border-left: 4px solid @accent-color;
  }
}

// é¢„åŠ è½½éƒ¨åˆ†
.preload-types {
  display: grid;
  gap: 20px;
  margin: 20px 0;

  .type {
    border: 1px solid @border-color;
    border-radius: 10px;
    overflow: hidden;

    .type-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 12px 15px;
      background: #f0f4ff;

      .tag {
        background: @primary-color;
        color: white;
        padding: 3px 10px;
        border-radius: 20px;
        font-size: 0.8rem;
      }
    }
  }
}

.execution-timing {
  background: #f0f4ff;
  border-radius: 10px;
  padding: 20px;
  margin: 20px 0;

  .timeline {
    display: flex;
    justify-content: space-between;
    position: relative;
    margin: 30px 0;

    &::before {
      content: '';
      position: absolute;
      top: 20px;
      left: 0;
      right: 0;
      height: 4px;
      background: #d0d9ff;
      z-index: 1;
    }

    .event {
      text-align: center;
      position: relative;
      z-index: 2;

      .time {
        font-weight: bold;
        margin-bottom: 5px;
      }

      .description {
        background: white;
        padding: 5px 10px;
        border-radius: 20px;
        box-shadow: 0 2px 6px rgba(0, 0, 0, 0.05);
      }

      &::before {
        content: '';
        position: absolute;
        top: 10px;
        left: 50%;
        width: 16px;
        height: 16px;
        background: @primary-color;
        border-radius: 50%;
        transform: translateX(-50%);
      }

      &.highlight::before {
        background: @preload-color;
        width: 20px;
        height: 20px;
        top: 9px;
      }
    }
  }

  .note {
    background: white;
    border-left: 4px solid @preload-color;
    padding: 15px;
    border-radius: 0 8px 8px 0;
  }
}

.comparison {
  border: 1px solid @border-color;
  border-radius: 10px;
  overflow: hidden;
  margin: 20px 0;

  .comparison-row {
    display: grid;
    grid-template-columns: 1fr 1fr 1fr;

    &:nth-child(odd) {
      background: #f8faff;
    }

    &:first-child {
      background: @primary-color;
      color: white;
    }
  }

  .comparison-cell {
    padding: 12px 15px;
  }
}

// æœ€ä½³å®è·µ
.practices-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
  gap: 20px;
  margin: 20px 0;

  .practice {
    text-align: center;
    padding: 25px 20px;
    border-radius: 12px;
    background: #f0f4ff;
    transition: transform 0.3s ease;

    &:hover {
      transform: translateY(-5px);
    }

    .icon {
      font-size: 2.5rem;
      margin-bottom: 15px;
    }

    h3 {
      margin: 10px 0;
    }
  }
}

.performance-metrics {
  margin-top: 30px;

  .metrics-table {
    overflow-x: auto;

    table {
      width: 100%;
      border-collapse: collapse;
      border-radius: 10px;
      overflow: hidden;
      box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);

      th,
      td {
        padding: 12px 15px;
        text-align: center;
        border: 1px solid @border-color;
      }

      thead {
        background: @primary-color;
        color: white;
      }

      tbody {
        tr {
          &:nth-child(even) {
            background: #f8faff;
          }

          &.highlight {
            background: #e6f7ee;
            font-weight: bold;
          }
        }
      }
    }

    .note {
      font-size: 0.9rem;
      color: #666;
      margin-top: 10px;
      text-align: center;
    }
  }
}

// å®ç°éƒ¨åˆ†
.tabs {
  display: flex;
  gap: 10px;
  margin-bottom: 20px;

  .tab {
    padding: 10px 20px;
    background: #f0f4ff;
    border: none;
    border-radius: 30px;
    cursor: pointer;
    transition: all 0.3s ease;

    &.active {
      background: @primary-color;
      color: white;
    }
  }
}

.code-example {
  h3 {
    margin-top: 0;
  }
}

// ä»£ç å—æ ·å¼
.code-block {
  background-color: @code-bg;
  border-radius: 10px;
  padding: 18px;
  margin: 18px 0;
  overflow-x: auto;
  font-family: 'Source Code Pro', monospace;
  font-size: 0.95rem;
  border: 1px solid @border-color;

  pre {
    margin: 0;
    white-space: pre-wrap;
  }

  code {
    color: #2c3e50;
    line-height: 1.5;
  }
}

.footer {
  text-align: center;
  padding: 25px;
  font-style: italic;
  color: #666;
  margin-top: 20px;
  border-top: 1px solid @border-color;
  line-height: 1.8;
}

// å“åº”å¼è°ƒæ•´
@media (max-width: 768px) {
  .header h1 {
    font-size: 2rem;
  }

  h2 {
    font-size: 1.5rem;
  }

  .content-wrapper {
    padding: 20px;
  }

  .comparison-cards {
    flex-direction: column;

    .vs {
      transform: rotate(90deg);
    }
  }

  .columns {
    grid-template-columns: 1fr;
  }
}
</style>
