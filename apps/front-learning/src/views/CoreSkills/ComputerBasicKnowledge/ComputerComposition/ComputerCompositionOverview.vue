<template>
  <div class="computer-architecture">
    <h1>è®¡ç®—æœºç»„æˆåŸç†æ¦‚è§ˆ</h1>

    <!-- å†¯Â·è¯ºä¾æ›¼ä½“ç³»ç»“æ„ -->
    <div class="section">
      <h2>å†¯Â·è¯ºä¾æ›¼ä½“ç³»ç»“æ„</h2>
      <div class="von-neumann">
        <div class="component" v-for="(comp, index) in vonNeumannComponents" :key="index">
          <div class="icon" :class="comp.icon"></div>
          <h3>{{ comp.name }}</h3>
          <p>{{ comp.description }}</p>
        </div>
      </div>
      <div class="workflow">
        <div class="step" v-for="(step, index) in workflow" :key="index">
          <span class="step-number">{{ index + 1 }}</span>
          <div class="step-content">
            <strong>{{ step.title }}</strong>
            <p>{{ step.description }}</p>
          </div>
        </div>
      </div>
    </div>

    <!-- æ ¸å¿ƒç»„ä»¶è¯¦ç»†è¯´æ˜ -->
    <div class="section">
      <h2>æ ¸å¿ƒç»„ä»¶</h2>
      <div class="components-grid">
        <div class="component-card" v-for="(component, index) in coreComponents" :key="index">
          <h3>{{ component.name }}</h3>
          <div class="function">{{ component.function }}</div>
          <div class="tech-evolution">
            <h4>æŠ€æœ¯æ¼”è¿›</h4>
            <ul>
              <li v-for="(tech, techIndex) in component.tech" :key="techIndex">{{ tech }}</li>
            </ul>
          </div>
        </div>
      </div>
    </div>

    <!-- ç°ä»£è®¡ç®—æœºä½“ç³»ç»“æ„ -->
    <div class="section">
      <h2>å“ˆä½›ä½“ç³»ç»“æ„</h2>
      <div class="von-neumann">
        <div class="component" v-for="(comp, index) in harvardComponents" :key="index">
          <div class="icon" :class="comp.icon"></div>
          <h3>{{ comp.name }}</h3>
          <p>{{ comp.description }}</p>
        </div>
      </div>
      <div class="workflow">
        <div class="step" v-for="(step, index) in harvardWorkflow" :key="index">
          <span class="step-number">{{ index + 1 }}</span>
          <div class="step-content">
            <strong>{{ step.title }}</strong>
            <p>{{ step.description }}</p>
          </div>
        </div>
      </div>
    </div>

    <!-- æ€§èƒ½æŒ‡æ ‡ -->
    <div class="section">
      <h2>æ€§èƒ½æŒ‡æ ‡</h2>
      <div class="metrics">
        <div class="metric" v-for="(metric, index) in performanceMetrics" :key="index">
          <div class="metric-icon" :class="metric.icon"></div>
          <div class="metric-content">
            <h3>{{ metric.name }}</h3>
            <p>{{ metric.description }}</p>
            <div class="formula">{{ metric.formula }}</div>
          </div>
        </div>
      </div>
    </div>

    <!-- æŒ‡ä»¤å‘¨æœŸ -->
    <div class="section">
      <h2>æŒ‡ä»¤æ‰§è¡Œå‘¨æœŸ</h2>
      <div class="instruction-cycle">
        <div class="cycle-stage" v-for="(stage, index) in instructionCycle" :key="index">
          <div class="stage-header">
            <div class="stage-number">{{ index + 1 }}</div>
            <h3>{{ stage.name }}</h3>
          </div>
          <p>{{ stage.description }}</p>
          <div class="stage-time">è€—æ—¶: {{ stage.time }}</div>
        </div>
      </div>
    </div>
  </div>
</template>

<script setup lang="ts">
import { ref } from 'vue';

// å†¯Â·è¯ºä¾æ›¼ä½“ç³»ç»“æ„ç»„ä»¶
const vonNeumannComponents = ref([
  {
    name: "è¾“å…¥è®¾å¤‡",
    description: "å°†æ•°æ®å’ŒæŒ‡ä»¤è¾“å…¥è®¡ç®—æœºï¼ˆé”®ç›˜ã€é¼ æ ‡ç­‰ï¼‰",
    icon: "input"
  },
  {
    name: "å­˜å‚¨å™¨",
    description: "å­˜å‚¨ç¨‹åºå’Œæ•°æ®ï¼ˆå†…å­˜ã€ç¡¬ç›˜ç­‰ï¼‰",
    icon: "memory"
  },
  {
    name: "è¿ç®—å™¨",
    description: "æ‰§è¡Œç®—æœ¯å’Œé€»è¾‘è¿ç®—ï¼ˆALUï¼‰",
    icon: "alu"
  },
  {
    name: "æ§åˆ¶å™¨",
    description: "åè°ƒå„éƒ¨ä»¶å·¥ä½œï¼ˆCPUæ§åˆ¶å•å…ƒï¼‰",
    icon: "control"
  },
  {
    name: "è¾“å‡ºè®¾å¤‡",
    description: "æ˜¾ç¤ºå¤„ç†ç»“æœï¼ˆæ˜¾ç¤ºå™¨ã€æ‰“å°æœºç­‰ï¼‰",
    icon: "output"
  }
]);

// å“ˆä½›ä½“ç³»ç»“æ„ç»„ä»¶
const harvardComponents = ref([
  {
    name: "æŒ‡ä»¤å­˜å‚¨å™¨",
    description: "ä¸“é—¨å­˜å‚¨ç¨‹åºæŒ‡ä»¤çš„å­˜å‚¨å™¨",
    icon: "instruction-memory"
  },
  {
    name: "æ•°æ®å­˜å‚¨å™¨",
    description: "ä¸“é—¨å­˜å‚¨æ•°æ®çš„å­˜å‚¨å™¨",
    icon: "data-memory"
  },
  {
    name: "è¿ç®—å™¨",
    description: "æ‰§è¡Œç®—æœ¯å’Œé€»è¾‘è¿ç®—ï¼ˆALUï¼‰",
    icon: "alu"
  },
  {
    name: "æ§åˆ¶å™¨",
    description: "æ§åˆ¶æŒ‡ä»¤çš„æ‰§è¡Œå’Œåè°ƒå„éƒ¨ä»¶å·¥ä½œ",
    icon: "control"
  },
  {
    name: "è¾“å…¥è®¾å¤‡",
    description: "å°†æ•°æ®è¾“å…¥è®¡ç®—æœºï¼ˆé”®ç›˜ã€é¼ æ ‡ç­‰ï¼‰",
    icon: "input"
  },
  {
    name: "è¾“å‡ºè®¾å¤‡",
    description: "è¾“å‡ºè®¡ç®—æœºå¤„ç†ç»“æœï¼ˆæ˜¾ç¤ºå™¨ã€æ‰“å°æœºç­‰ï¼‰",
    icon: "output"
  }
]);

// å“ˆä½›ä½“ç³»ç»“æ„å·¥ä½œæµç¨‹
const harvardWorkflow = ref([
  {
    title: "å–æŒ‡ä»¤",
    description: "ä»æŒ‡ä»¤å­˜å‚¨å™¨ä¸­å–å‡ºæŒ‡ä»¤"
  },
  {
    title: "æŒ‡ä»¤è¯‘ç ",
    description: "è§£ææŒ‡ä»¤çš„æ“ä½œç±»å‹å’Œæ“ä½œæ•°"
  },
  {
    title: "æ‰§è¡ŒæŒ‡ä»¤",
    description: "è¿ç®—å™¨æ‰§è¡ŒæŒ‡ä»¤æ“ä½œ"
  },
  {
    title: "è®¿é—®æ•°æ®å­˜å‚¨å™¨",
    description: "è¯»å–æˆ–å†™å…¥æ•°æ®"
  },
  {
    title: "å†™å›ç»“æœ",
    description: "å°†æ‰§è¡Œç»“æœå†™å›å¯„å­˜å™¨æˆ–å­˜å‚¨å™¨"
  }
]);

// è®¡ç®—æœºå·¥ä½œæµç¨‹
const workflow = ref([
  {
    title: "å–æŒ‡ä»¤",
    description: "ä»å­˜å‚¨å™¨ä¸­å–å‡ºæŒ‡ä»¤"
  },
  {
    title: "æŒ‡ä»¤è¯‘ç ",
    description: "è§£ææŒ‡ä»¤çš„æ“ä½œç±»å‹å’Œæ“ä½œæ•°"
  },
  {
    title: "æ‰§è¡ŒæŒ‡ä»¤",
    description: "è¿ç®—å™¨æ‰§è¡ŒæŒ‡ä»¤æ“ä½œ"
  },
  {
    title: "è®¿é—®å­˜å‚¨å™¨",
    description: "è¯»å–æˆ–å†™å…¥æ•°æ®"
  },
  {
    title: "å†™å›ç»“æœ",
    description: "å°†æ‰§è¡Œç»“æœå†™å›å¯„å­˜å™¨æˆ–å­˜å‚¨å™¨"
  }
]);

// æ ¸å¿ƒç»„ä»¶
const coreComponents = ref([
  {
    name: "ä¸­å¤®å¤„ç†å™¨(CPU)",
    function: "æ‰§è¡ŒæŒ‡ä»¤å’Œå¤„ç†æ•°æ®",
    tech: [
      "1971: è‹±ç‰¹å°”4004 (4ä½)",
      "1978: è‹±ç‰¹å°”8086 (x86æ¶æ„)",
      "1993: å¥”è…¾å¤„ç†å™¨ (è¶…æ ‡é‡)",
      "2005: å¤šæ ¸å¤„ç†å™¨ (Core 2 Duo)",
      "2010s: å¼‚æ„è®¡ç®— (CPU+GPU)"
    ]
  },
  {
    name: "ä¸»å­˜å‚¨å™¨(RAM)",
    function: "ä¸´æ—¶å­˜å‚¨è¿è¡Œä¸­çš„ç¨‹åºå’Œæ•°æ®",
    tech: [
      "1940s: å»¶è¿Ÿçº¿å­˜å‚¨å™¨",
      "1950s: ç£èŠ¯å­˜å‚¨å™¨",
      "1970s: DRAM (åŠ¨æ€éšæœºå­˜å–)",
      "1990s: SDRAM (åŒæ­¥DRAM)",
      "2010s: DDR4/DDR5 (åŒå€æ•°æ®é€Ÿç‡)"
    ]
  },
  {
    name: "å­˜å‚¨è®¾å¤‡",
    function: "é•¿æœŸå­˜å‚¨æ•°æ®å’Œç¨‹åº",
    tech: [
      "1956: ç¡¬ç›˜é©±åŠ¨å™¨ (IBM 350)",
      "1971: è½¯ç›˜ (8è‹±å¯¸)",
      "1980s: CD-ROM (700MB)",
      "1990s: å›ºæ€ç¡¬ç›˜ (SSD)",
      "2020s: NVMe SSD (3500MB/s+)"
    ]
  },
  {
    name: "ç³»ç»Ÿæ€»çº¿",
    function: "è¿æ¥å„ç»„ä»¶çš„æ•°æ®é€šè·¯",
    tech: [
      "1970: å•æ€»çº¿ç»“æ„",
      "1981: ISAæ€»çº¿ (8ä½)",
      "1992: PCIæ€»çº¿ (32ä½)",
      "2004: PCI Express (ä¸²è¡Œé«˜é€Ÿ)",
      "2010s: é«˜é€Ÿäº’è¿ (InfiniBand)"
    ]
  }
]);

// æ€§èƒ½æŒ‡æ ‡
const performanceMetrics = ref([
  {
    name: "æ—¶é’Ÿé¢‘ç‡",
    description: "CPUæ—¶é’Ÿæ¯ç§’å‘¨æœŸæ•°ï¼Œå½±å“æŒ‡ä»¤æ‰§è¡Œé€Ÿåº¦",
    formula: "f = 1/T (Tä¸ºæ—¶é’Ÿå‘¨æœŸ)",
    icon: "clock"
  },
  {
    name: "CPI",
    description: "æ¯æ¡æŒ‡ä»¤æ‰€éœ€çš„æ—¶é’Ÿå‘¨æœŸæ•°",
    formula: "CPI = æ€»æ—¶é’Ÿå‘¨æœŸæ•° / æŒ‡ä»¤æ•°",
    icon: "cpi"
  },
  {
    name: "MIPS",
    description: "æ¯ç§’æ‰§è¡Œçš„ç™¾ä¸‡æ¡æŒ‡ä»¤æ•°",
    formula: "MIPS = æŒ‡ä»¤æ•° / (æ‰§è¡Œæ—¶é—´ Ã— 10â¶)",
    icon: "mips"
  },
  {
    name: "å¸¦å®½",
    description: "æ€»çº¿æˆ–å†…å­˜çš„æ•°æ®ä¼ è¾“é€Ÿç‡",
    formula: "å¸¦å®½ = ä¼ è¾“æ•°æ®é‡ / æ—¶é—´",
    icon: "bandwidth"
  }
]);

// æŒ‡ä»¤æ‰§è¡Œå‘¨æœŸ
const instructionCycle = ref([
  {
    name: "å–æŒ‡",
    description: "ä»å†…å­˜è¯»å–æŒ‡ä»¤åˆ°æŒ‡ä»¤å¯„å­˜å™¨",
    time: "1-3ä¸ªæ—¶é’Ÿå‘¨æœŸ"
  },
  {
    name: "è¯‘ç ",
    description: "è§£ææŒ‡ä»¤çš„æ“ä½œç å’Œæ“ä½œæ•°",
    time: "1-2ä¸ªæ—¶é’Ÿå‘¨æœŸ"
  },
  {
    name: "æ‰§è¡Œ",
    description: "æ‰§è¡ŒæŒ‡ä»¤æ“ä½œï¼ˆç®—æœ¯ã€é€»è¾‘ã€ç§»ä½ç­‰ï¼‰",
    time: "1-10ä¸ªæ—¶é’Ÿå‘¨æœŸ"
  },
  {
    name: "è®¿å­˜",
    description: "è®¿é—®å†…å­˜è¯»å–æˆ–å†™å…¥æ•°æ®",
    time: "10-100ä¸ªæ—¶é’Ÿå‘¨æœŸ"
  },
  {
    name: "å†™å›",
    description: "å°†ç»“æœå†™å›å¯„å­˜å™¨æˆ–å†…å­˜",
    time: "1-2ä¸ªæ—¶é’Ÿå‘¨æœŸ"
  }
]);
</script>

<style lang="less" scoped>
.computer-architecture {
  max-width: 1200px;
  margin: 0 auto;
  padding: 20px;
  font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
  color: #333;
  background: linear-gradient(to bottom, #f8f9fa, #e9ecef);

  h1 {
    text-align: center;
    font-size: 2.2rem;
    margin-bottom: 30px;
    padding-bottom: 15px;
    border-bottom: 2px solid #3498db;
    color: #2c3e50;
  }

  h2 {
    font-size: 1.8rem;
    padding-left: 10px;
    border-left: 4px solid #3498db;
    color: #2c3e50;
    margin-top: 40px;
    margin-bottom: 20px;
  }

  .section {
    background: white;
    border-radius: 8px;
    padding: 20px;
    margin-bottom: 30px;
    box-shadow: 0 3px 10px rgba(0, 0, 0, 0.08);
  }

  // å†¯Â·è¯ºä¾æ›¼ä½“ç³»ç»“æ„æ ·å¼
  .von-neumann {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: 20px;
    margin-bottom: 30px;

    .component {
      text-align: center;
      padding: 15px;
      background: #f8f9fa;
      border-radius: 8px;
      border: 1px solid #e0e0e0;

      .icon {
        width: 70px;
        height: 70px;
        margin: 0 auto 15px;
        border-radius: 50%;
        background: #3498db;
        position: relative;

        &::after {
          content: '';
          position: absolute;
          top: 50%;
          left: 50%;
          transform: translate(-50%, -50%);
          font-size: 1.5rem;
          color: white;
        }

        &.input::after {
          content: 'âŒ¨ï¸';
        }

        &.memory::after {
          content: 'ğŸ’¾';
        }

        &.alu::after {
          content: 'ğŸ§®';
        }

        &.control::after {
          content: 'ğŸ›ï¸';
        }

        &.output::after {
          content: 'ğŸ–¨ï¸';
        }
      }

      h3 {
        margin: 10px 0;
        color: #2980b9;
        font-size: 1.3rem;
      }

      p {
        font-size: 0.9rem;
        color: #555;
        line-height: 1.4;
      }
    }
  }

  .workflow {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: 15px;

    .step {
      display: flex;
      background: #2c3e50;
      color: white;
      border-radius: 8px;
      overflow: hidden;

      .step-number {
        min-width: 40px;
        display: flex;
        align-items: center;
        justify-content: center;
        background: #3498db;
        font-weight: bold;
        font-size: 1.2rem;
      }

      .step-content {
        padding: 12px;

        strong {
          display: block;
          margin-bottom: 5px;
          font-size: 1.1rem;
        }

        p {
          margin: 0;
          font-size: 0.9rem;
          opacity: 0.9;
        }
      }
    }
  }

  // æ ¸å¿ƒç»„ä»¶æ ·å¼
  .components-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
    gap: 20px;

    .component-card {
      border: 1px solid #e0e0e0;
      border-radius: 8px;
      padding: 15px;
      background: #f8f9fa;

      h3 {
        margin-top: 0;
        color: #e74c3c;
        font-size: 1.3rem;
        padding-bottom: 8px;
        border-bottom: 1px solid #ddd;
      }

      .function {
        font-weight: bold;
        margin: 10px 0;
        color: #2980b9;
      }

      .tech-evolution {
        margin-top: 15px;

        h4 {
          margin: 0 0 8px;
          color: #2c3e50;
          font-size: 1.1rem;
        }

        ul {
          padding-left: 20px;
          margin: 0;

          li {
            margin-bottom: 8px;
            font-size: 0.85rem;
            line-height: 1.4;
            color: #555;
          }
        }
      }
    }
  }

  // æ€§èƒ½æŒ‡æ ‡æ ·å¼
  .metrics {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
    gap: 20px;

    .metric {
      display: flex;
      padding: 15px;
      background: #f1f2f6;
      border-radius: 8px;
      border-left: 4px solid #3498db;

      .metric-icon {
        min-width: 50px;
        height: 50px;
        margin-right: 15px;
        border-radius: 50%;
        background: #3498db;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 1.5rem;

        &.clock::after {
          content: 'â±ï¸';
        }

        &.cpi::after {
          content: 'ğŸ“ˆ';
        }

        &.mips::after {
          content: 'ğŸš€';
        }

        &.bandwidth::after {
          content: 'ğŸ”';
        }
      }

      .metric-content {
        h3 {
          margin: 0 0 5px;
          color: #2c3e50;
          font-size: 1.2rem;
        }

        p {
          margin: 0 0 8px;
          font-size: 0.9rem;
          color: #555;
        }

        .formula {
          font-family: monospace;
          background: #2c3e50;
          color: white;
          padding: 5px 10px;
          border-radius: 4px;
          font-size: 0.9rem;
        }
      }
    }
  }

  // æŒ‡ä»¤å‘¨æœŸæ ·å¼
  .instruction-cycle {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
    gap: 15px;

    .cycle-stage {
      background: #f8f9fa;
      border-radius: 8px;
      padding: 15px;
      border: 1px solid #e0e0e0;

      .stage-header {
        display: flex;
        align-items: center;
        margin-bottom: 10px;

        .stage-number {
          width: 30px;
          height: 30px;
          background: #3498db;
          color: white;
          border-radius: 50%;
          display: flex;
          align-items: center;
          justify-content: center;
          font-weight: bold;
          margin-right: 10px;
        }

        h3 {
          margin: 0;
          font-size: 1.2rem;
          color: #2c3e50;
        }
      }

      p {
        margin: 0 0 10px;
        font-size: 0.9rem;
        color: #555;
      }

      .stage-time {
        font-size: 0.85rem;
        color: #e74c3c;
        font-weight: bold;
      }
    }
  }

  @media (max-width: 768px) {
    padding: 10px;

    h1 {
      font-size: 1.8rem;
    }

    h2 {
      font-size: 1.5rem;
    }

    .von-neumann,
    .components-grid,
    .metrics,
    .instruction-cycle {
      grid-template-columns: 1fr;
    }
  }
}
</style>