<template>
  <div class="state-pattern-container">
    <div class="header-section">
      <h1><span class="highlight">çŠ¶æ€æ¨¡å¼</span>æ·±å…¥è§£æ</h1>
      <p class="subtitle">è¡Œä¸ºå‹è®¾è®¡æ¨¡å¼ Â· å¯¹è±¡è¡Œä¸ºéšçŠ¶æ€æ”¹å˜è€Œæ”¹å˜</p>
    </div>

    <div class="pattern-overview">
      <div class="definition-card">
        <h2><i class="icon icon-definition"></i>çŠ¶æ€æ¨¡å¼å®šä¹‰</h2>
        <p>å…è®¸ä¸€ä¸ªå¯¹è±¡åœ¨å…¶<span class="highlight">å†…éƒ¨çŠ¶æ€æ”¹å˜æ—¶æ”¹å˜å®ƒçš„è¡Œä¸º</span>ï¼Œä½¿å¯¹è±¡çœ‹èµ·æ¥ä¼¼ä¹ä¿®æ”¹äº†å®ƒçš„ç±»ã€‚</p>
        <div class="key-points">
          <div class="point">
            <div class="point-icon">ğŸ”„</div>
            <div>
              <h3>çŠ¶æ€è½¬æ¢</h3>
              <p>å¯¹è±¡åœ¨ä¸åŒçŠ¶æ€ä¸‹è¡¨ç°å‡ºä¸åŒè¡Œä¸º</p>
            </div>
          </div>
          <div class="point">
            <div class="point-icon">ğŸ§©</div>
            <div>
              <h3>è§£è€¦çŠ¶æ€</h3>
              <p>æ¯ä¸ªçŠ¶æ€å°è£…åœ¨ç‹¬ç«‹çš„ç±»ä¸­</p>
            </div>
          </div>
          <div class="point">
            <div class="point-icon">âš™ï¸</div>
            <div>
              <h3>æ¶ˆé™¤æ¡ä»¶é€»è¾‘</h3>
              <p>é¿å…å¤§é‡çš„if-elseçŠ¶æ€åˆ¤æ–­</p>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="content-columns">
      <div class="main-content">
        <div class="pattern-structure">
          <h2><i class="icon icon-structure"></i>æ¨¡å¼ç»“æ„</h2>
          <div class="uml-diagram">
            <div class="context">
              <h4>Context (ä¸Šä¸‹æ–‡)</h4>
              <p>æŒæœ‰å½“å‰çŠ¶æ€å¯¹è±¡</p>
              <p>å®šä¹‰å®¢æˆ·ç«¯éœ€è¦çš„æ¥å£</p>
            </div>
            <div class="state-interface">
              <h4>State (çŠ¶æ€æ¥å£)</h4>
              <p>å®šä¹‰çŠ¶æ€è¡Œä¸ºçš„æ–¹æ³•</p>
            </div>
            <div class="states">
              <div class="state">
                <h4>ConcreteStateA</h4>
                <p>å®ç°ç‰¹å®šçŠ¶æ€çš„è¡Œä¸º</p>
              </div>
              <div class="state">
                <h4>ConcreteStateB</h4>
                <p>å®ç°ç‰¹å®šçŠ¶æ€çš„è¡Œä¸º</p>
              </div>
              <div class="state">
                <h4>ConcreteStateC</h4>
                <p>å®ç°ç‰¹å®šçŠ¶æ€çš„è¡Œä¸º</p>
              </div>
            </div>
            <div class="arrows">
              <div class="arrow">â†’</div>
              <div class="arrow">â†’</div>
              <div class="arrow">â†</div>
            </div>
          </div>
        </div>

        <div class="code-implementation">
          <h2><i class="icon icon-code"></i>ä»£ç å®ç°</h2>
          <div class="code-tabs">
            <div class="tabs">
              <button v-for="(tab, index) in tabs" :key="index" :class="{ active: activeTab === index }"
                @click="activeTab = index">
                {{ tab.title }}
              </button>
            </div>
            <div class="tab-content">
              <div v-if="activeTab === 0">
                <pre><code>// çŠ¶æ€æ¥å£
interface State {
  insertCoin(): void;
  pressButton(): void;
  dispense(): void;
}

// å”®ç½„çŠ¶æ€
class SoldOutState implements State {
  machine: VendingMachine;

  constructor(machine: VendingMachine) {
    this.machine = machine;
  }

  insertCoin() {
    console.log("æœºå™¨å”®ç½„ï¼Œæ— æ³•æŠ•å¸");
  }

  pressButton() {
    console.log("æœºå™¨å”®ç½„ï¼ŒæŒ‰é’®æ— æ•ˆ");
  }

  dispense() {
    console.log("æœºå™¨å”®ç½„ï¼Œæ— æ³•å‡ºè´§");
  }
}

// æ— å¸çŠ¶æ€
class NoCoinState implements State {
  // ç±»ä¼¼å®ç°...
}

// æœ‰å¸çŠ¶æ€
class HasCoinState implements State {
  // ç±»ä¼¼å®ç°...
}

// å”®å–çŠ¶æ€
class SoldState implements State {
  // ç±»ä¼¼å®ç°...
}</code></pre>
              </div>
              <div v-if="activeTab === 1">
                <pre><code>// è‡ªåŠ¨å”®è´§æœº - ä¸Šä¸‹æ–‡
class VendingMachine {
  private soldOutState: State;
  private noCoinState: State;
  private hasCoinState: State;
  private soldState: State;

  private currentState: State;
  private productCount: number;

  constructor(productCount: number) {
    this.soldOutState = new SoldOutState(this);
    this.noCoinState = new NoCoinState(this);
    this.hasCoinState = new HasCoinState(this);
    this.soldState = new SoldState(this);

    this.productCount = productCount;
    this.currentState = productCount > 0
      ? this.noCoinState
      : this.soldOutState;
  }

  insertCoin() {
    this.currentState.insertCoin();
  }

  pressButton() {
    this.currentState.pressButton();
    this.currentState.dispense();
  }

  // çŠ¶æ€å˜æ›´æ–¹æ³•
  setState(state: State) {
    this.currentState = state;
  }

  // å…¶ä»–è¾…åŠ©æ–¹æ³•...
}</code></pre>
              </div>
            </div>
          </div>
        </div>

        <div class="real-world-demo">
          <h2><i class="icon icon-demo"></i>è‡ªåŠ¨å”®è´§æœºæ¼”ç¤º</h2>
          <div class="vending-machine">
            <div class="display">
              <div class="state-indicator" :class="currentState.toLowerCase()">
                å½“å‰çŠ¶æ€: <span>{{ currentState }}</span>
              </div>
              <div class="product-count">
                å‰©ä½™äº§å“: {{ productCount }}
              </div>
            </div>

            <div class="controls">
              <button @click="insertCoin" :disabled="!canInsertCoin">
                <i class="icon-coin"></i> æŠ•å…¥ç¡¬å¸
              </button>
              <button @click="pressButton" :disabled="!canPressButton">
                <i class="icon-button"></i> æŒ‰ä¸‹æŒ‰é’®
              </button>
              <button @click="restock">
                <i class="icon-restock"></i> è¡¥å……å•†å“ ({{ restockAmount }})
              </button>
            </div>

            <div class="logs">
              <h3>æ“ä½œæ—¥å¿—:</h3>
              <div class="log-container">
                <div v-for="(log, index) in logs" :key="index" class="log-entry">
                  {{ log }}
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <div class="sidebar">
        <div class="use-cases">
          <h2><i class="icon icon-usecase"></i>ä½¿ç”¨åœºæ™¯</h2>
          <div class="case" v-for="(useCase, index) in useCases" :key="index">
            <div class="case-icon">{{ useCase.icon }}</div>
            <div class="case-content">
              <h3>{{ useCase.title }}</h3>
              <p>{{ useCase.description }}</p>
            </div>
          </div>
        </div>

        <div class="pros-cons">
          <h2><i class="icon icon-proscons"></i>ä¼˜ç¼ºç‚¹åˆ†æ</h2>
          <div class="pros">
            <h3><i class="icon icon-check"></i> ä¼˜ç‚¹</h3>
            <ul>
              <li v-for="(pro, index) in pros" :key="index">{{ pro }}</li>
            </ul>
          </div>
          <div class="cons">
            <h3><i class="icon icon-warning"></i> ç¼ºç‚¹</h3>
            <ul>
              <li v-for="(con, index) in cons" :key="index">{{ con }}</li>
            </ul>
          </div>
        </div>

        <div class="comparison">
          <h2><i class="icon icon-compare"></i>ä¸ç­–ç•¥æ¨¡å¼æ¯”è¾ƒ</h2>
          <table>
            <thead>
              <tr>
                <th></th>
                <th>çŠ¶æ€æ¨¡å¼</th>
                <th>ç­–ç•¥æ¨¡å¼</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>ç›®çš„</td>
                <td>å¤„ç†å¯¹è±¡çŠ¶æ€å˜åŒ–</td>
                <td>å°è£…å¯äº’æ¢çš„ç®—æ³•</td>
              </tr>
              <tr>
                <td>çŠ¶æ€è½¬æ¢</td>
                <td>çŠ¶æ€ä¹‹é—´å¯ä»¥ç›¸äº’è½¬æ¢</td>
                <td>ç­–ç•¥é€šå¸¸ç‹¬ç«‹å­˜åœ¨</td>
              </tr>
              <tr>
                <td>å®¢æˆ·ç«¯æ„ŸçŸ¥</td>
                <td>å®¢æˆ·ç«¯å¯èƒ½ä¸çŸ¥é“çŠ¶æ€å˜åŒ–</td>
                <td>å®¢æˆ·ç«¯ä¸»åŠ¨é€‰æ‹©ç­–ç•¥</td>
              </tr>
              <tr>
                <td>çŠ¶æ€æ•°é‡</td>
                <td>é€šå¸¸çŠ¶æ€æ•°é‡æœ‰é™</td>
                <td>ç­–ç•¥æ•°é‡å¯èƒ½å¾ˆå¤š</td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
    </div>

    <div class="conclusion">
      <h2><i class="icon icon-summary"></i>æ€»ç»“</h2>
      <div class="summary-content">
        <p>çŠ¶æ€æ¨¡å¼çš„æ ¸å¿ƒæ€æƒ³æ˜¯å°†<span class="highlight">å¯¹è±¡çš„çŠ¶æ€å°è£…æˆç‹¬ç«‹çš„ç±»</span>ï¼Œå¹¶å°†è¯·æ±‚å§”æ‰˜ç»™å½“å‰çŠ¶æ€å¯¹è±¡å¤„ç†ã€‚</p>
        <p>è¯¥æ¨¡å¼é€‚ç”¨äºçŠ¶æ€æ•°é‡æœ‰é™ä½†çŠ¶æ€è½¬æ¢å¤æ‚çš„åœºæ™¯ï¼Œèƒ½æœ‰æ•ˆ<span class="highlight">æ¶ˆé™¤åºå¤§çš„æ¡ä»¶åˆ†æ”¯è¯­å¥</span>ï¼Œæé«˜ä»£ç çš„å¯ç»´æŠ¤æ€§å’Œæ‰©å±•æ€§ã€‚</p>
        <div class="best-practices">
          <h3>æœ€ä½³å®è·µ:</h3>
          <ul>
            <li>å°†çŠ¶æ€è½¬æ¢é€»è¾‘æ”¾åœ¨çŠ¶æ€ç±»ä¸­</li>
            <li>ç¡®ä¿çŠ¶æ€å¯¹è±¡æ²¡æœ‰å®ä¾‹å˜é‡ï¼ˆå¯å¤ç”¨ï¼‰</li>
            <li>ä½¿ç”¨çŠ¶æ€è¡¨ç®€åŒ–çŠ¶æ€åˆ›å»º</li>
            <li>å¯¹äºç®€å•çŠ¶æ€è½¬æ¢ï¼Œè€ƒè™‘ä½¿ç”¨çŠ¶æ€æœºåº“</li>
          </ul>
        </div>
      </div>
    </div>
  </div>
</template>

<script setup lang="ts">
import { ref, reactive } from 'vue';

// çŠ¶æ€æ¨¡å¼å®ç°
interface State {
  insertCoin(): void;
  pressButton(): void;
  dispense(): void;
}

// å”®è´§æœºç±»
class VendingMachine {
  private currentState: State;
  private productCount: number;
  private logs: string[] = [];

  constructor() {
    this.productCount = 3;
    this.currentState = new NoCoinState(this);
  }

  setState(state: State) {
    this.currentState = state;
  }

  insertCoin() {
    this.currentState.insertCoin();
  }

  pressButton() {
    this.currentState.pressButton();
  }

  dispense() {
    this.currentState.dispense();
  }

  releaseProduct() {
    if (this.productCount > 0) {
      this.productCount--;
      this.log('å•†å“å·²å‡ºè´§');
    }
  }

  restock(count: number) {
    this.productCount += count;
    this.log(`å·²è¡¥å……å•†å“ï¼Œå½“å‰åº“å­˜: ${this.productCount}`);
  }

  log(message: string) {
    this.logs.unshift(`[${new Date().toLocaleTimeString()}] ${message}`);
    if (this.logs.length > 10) this.logs.pop();
  }

  getStateName(): string {
    return this.currentState.constructor.name.replace('State', '');
  }

  getProductCount(): number {
    return this.productCount;
  }

  getLogs(): string[] {
    return [...this.logs];
  }
}

// çŠ¶æ€ç±» - å”®ç½„
class SoldOutState implements State {
  constructor(private machine: VendingMachine) { }

  insertCoin() {
    this.machine.log("æœºå™¨å”®ç½„ï¼Œè¯·å‹¿æŠ•å¸");
  }

  pressButton() {
    this.machine.log("æœºå™¨å”®ç½„ï¼ŒæŒ‰é’®æ— æ•ˆ");
  }

  dispense() {
    // æ— æ“ä½œ
  }
}

// çŠ¶æ€ç±» - æ— å¸
class NoCoinState implements State {
  constructor(private machine: VendingMachine) { }

  insertCoin() {
    this.machine.log("å·²æŠ•å…¥ç¡¬å¸");
    this.machine.setState(new HasCoinState(this.machine));
  }

  pressButton() {
    this.machine.log("è¯·å…ˆæŠ•å…¥ç¡¬å¸");
  }

  dispense() {
    // æ— æ“ä½œ
  }
}

// çŠ¶æ€ç±» - æœ‰å¸
class HasCoinState implements State {
  constructor(private machine: VendingMachine) { }

  insertCoin() {
    this.machine.log("å·²æŠ•å¸ï¼Œæ— éœ€å†æŠ•");
  }

  pressButton() {
    this.machine.log("æŒ‰é’®å·²æŒ‰ä¸‹ï¼Œå‡†å¤‡å‡ºè´§...");
    this.machine.setState(new SoldState(this.machine));
    this.machine.dispense();
  }

  dispense() {
    // ç”±SoldStateå¤„ç†
  }
}

// çŠ¶æ€ç±» - å”®å–ä¸­
class SoldState implements State {
  constructor(private machine: VendingMachine) { }

  insertCoin() {
    this.machine.log("æ­£åœ¨å‡ºè´§ï¼Œè¯·ç¨å€™...");
  }

  pressButton() {
    this.machine.log("æ­£åœ¨å‡ºè´§ï¼Œè¯·å‹¿é‡å¤æŒ‰ä¸‹");
  }

  dispense() {
    if (this.machine.getProductCount() > 0) {
      this.machine.releaseProduct();

      if (this.machine.getProductCount() > 0) {
        this.machine.setState(new NoCoinState(this.machine));
      } else {
        this.machine.setState(new SoldOutState(this.machine));
      }
    } else {
      this.machine.setState(new SoldOutState(this.machine));
    }
  }
}

// åˆ›å»ºå®ä¾‹
const vendingMachine = new VendingMachine();

// å“åº”å¼æ•°æ®
const currentState = ref(vendingMachine.getStateName());
const productCount = ref(vendingMachine.getProductCount());
const logs = reactive<string[]>(vendingMachine.getLogs());

const restockAmount = ref(3);

const canInsertCoin = ref(true);
const canPressButton = ref(true);

// æ ‡ç­¾é¡µæ§åˆ¶
const tabs = [
  { title: 'çŠ¶æ€æ¥å£ä¸å®ç°', content: '' },
  { title: 'ä¸Šä¸‹æ–‡å®ç°', content: '' }
];
const activeTab = ref(0);

// ä½¿ç”¨åœºæ™¯
const useCases = [
  { icon: 'ğŸ›’', title: 'ç”µå­å•†åŠ¡è®¢å•', description: 'è®¢å•çŠ¶æ€ç®¡ç†ï¼ˆå¾…æ”¯ä»˜ã€å·²æ”¯ä»˜ã€å‘è´§ä¸­ã€å·²å®Œæˆç­‰ï¼‰' },
  { icon: 'ğŸ®', title: 'æ¸¸æˆè§’è‰²çŠ¶æ€', description: 'è§’è‰²çŠ¶æ€ï¼ˆæ­£å¸¸ã€ä¸­æ¯’ã€çœ©æ™•ã€æ— æ•Œç­‰ï¼‰å½±å“è§’è‰²è¡Œä¸º' },
  { icon: 'ğŸš¦', title: 'äº¤é€šä¿¡å·ç¯', description: 'ä¸åŒç¯è‰²çŠ¶æ€æ§åˆ¶è½¦è¾†é€šè¡Œè§„åˆ™' },
  { icon: 'âŒ¨ï¸', title: 'ç¼–è¾‘å™¨æ¨¡å¼', description: 'ç¼–è¾‘å™¨çš„ä¸åŒæ¨¡å¼ï¼ˆæ’å…¥ã€é€‰æ‹©ã€å‘½ä»¤ç­‰ï¼‰' },
  { icon: 'ğŸ“±', title: 'è®¾å¤‡è¿æ¥çŠ¶æ€', description: 'è®¾å¤‡è¿æ¥çŠ¶æ€ï¼ˆæ–­å¼€ã€è¿æ¥ä¸­ã€å·²è¿æ¥ã€é”™è¯¯ï¼‰' },
  { icon: 'ğŸ§', title: 'ATMæœºçŠ¶æ€', description: 'ATMçŠ¶æ€ç®¡ç†ï¼ˆç©ºé—²ã€éªŒè¯ä¸­ã€äº¤æ˜“ä¸­ã€ç»´æŠ¤ä¸­ï¼‰' }
];

// ä¼˜ç¼ºç‚¹
const pros = [
  'å•ä¸€èŒè´£åŸåˆ™ï¼šæ¯ä¸ªçŠ¶æ€ç±»è´Ÿè´£ç‰¹å®šçŠ¶æ€è¡Œä¸º',
  'å¼€é—­åŸåˆ™ï¼šæ— éœ€ä¿®æ”¹ä¸Šä¸‹æ–‡å³å¯æ–°å¢çŠ¶æ€',
  'æ¶ˆé™¤åºå¤§çš„æ¡ä»¶åˆ†æ”¯è¯­å¥',
  'çŠ¶æ€è½¬æ¢é€»è¾‘ç»„ç»‡æ›´æ¸…æ™°',
  'çŠ¶æ€ç±»å¤ç”¨æ€§é«˜'
];

const cons = [
  'çŠ¶æ€æ•°é‡å¤šæ—¶ä¼šäº§ç”Ÿè®¸å¤šç±»',
  'ä¸Šä¸‹æ–‡å’ŒçŠ¶æ€ç±»å­˜åœ¨åŒå‘ä¾èµ–',
  'è¿‡åº¦ä½¿ç”¨å¯èƒ½ä½¿ç®€å•é—®é¢˜å¤æ‚åŒ–',
  'çŠ¶æ€è½¬æ¢é€»è¾‘åˆ†æ•£åœ¨å„çŠ¶æ€ç±»ä¸­'
];

// æ“ä½œæ–¹æ³•
const insertCoin = () => {
  vendingMachine.insertCoin();
  updateMachineState();
};

const pressButton = () => {
  vendingMachine.pressButton();
  updateMachineState();
};

const restock = () => {
  vendingMachine.restock(restockAmount.value);
  updateMachineState();
};

// æ›´æ–°çŠ¶æ€
const updateMachineState = () => {
  currentState.value = vendingMachine.getStateName();
  productCount.value = vendingMachine.getProductCount();

  // æ›´æ–°æ—¥å¿—
  logs.length = 0;
  logs.push(...vendingMachine.getLogs());

  // æ›´æ–°æŒ‰é’®çŠ¶æ€
  canInsertCoin.value = currentState.value !== 'Sold';
  canPressButton.value = currentState.value === 'HasCoin';
};
</script>

<style lang="less" scoped>
@primary-color: #3498db;
@secondary-color: #2c3e50;
@success-color: #2ecc71;
@warning-color: #f39c12;
@danger-color: #e74c3c;
@border-color: #e0e0e0;
@light-bg: #f8f9fa;
@dark-text: #2c3e50;

.state-pattern-container {
  max-width: 1200px;
  margin: 0 auto;
  padding: 25px;
  font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
  color: @dark-text;
  background: linear-gradient(135deg, #f5f7fa 0%, #e4ecef 100%);
  border-radius: 12px;
  box-shadow: 0 10px 30px rgba(0, 0, 0, 0.08);

  .header-section {
    text-align: center;
    margin-bottom: 30px;
    padding: 30px 0;
    background: white;
    border-radius: 10px;
    box-shadow: 0 4px 15px rgba(0, 0, 0, 0.05);

    h1 {
      color: @secondary-color;
      font-size: 2.5rem;
      margin-bottom: 10px;

      .highlight {
        color: @primary-color;
        position: relative;

        &::after {
          content: '';
          position: absolute;
          bottom: -5px;
          left: 0;
          width: 100%;
          height: 4px;
          background: linear-gradient(90deg, @primary-color, transparent);
          border-radius: 2px;
        }
      }
    }

    .subtitle {
      color: #7f8c8d;
      font-size: 1.1rem;
      font-weight: 500;
      margin: 0;
    }
  }

  .pattern-overview {
    margin-bottom: 30px;

    .definition-card {
      background: white;
      border-radius: 10px;
      padding: 25px;
      box-shadow: 0 4px 15px rgba(0, 0, 0, 0.05);

      h2 {
        color: @primary-color;
        border-bottom: 2px solid @primary-color;
        padding-bottom: 15px;
        margin-top: 0;
        display: flex;
        align-items: center;

        .icon {
          margin-right: 12px;
          font-size: 1.4em;
        }
      }

      p {
        font-size: 1.1rem;
        line-height: 1.7;

        .highlight {
          background: linear-gradient(120deg, rgba(52, 152, 219, 0.2) 0%, rgba(52, 152, 219, 0) 100%);
          padding: 0 5px;
          font-weight: 600;
          border-radius: 3px;
        }
      }

      .key-points {
        display: flex;
        gap: 20px;
        margin-top: 25px;

        .point {
          flex: 1;
          display: flex;
          align-items: center;
          background: @light-bg;
          padding: 20px;
          border-radius: 8px;
          box-shadow: 0 3px 10px rgba(0, 0, 0, 0.05);
          transition: transform 0.3s ease;

          &:hover {
            transform: translateY(-5px);
          }

          .point-icon {
            font-size: 2.2rem;
            margin-right: 15px;
          }

          h3 {
            margin: 0 0 8px;
            color: @secondary-color;
          }

          p {
            margin: 0;
            color: #666;
            font-size: 0.95rem;
          }
        }
      }
    }
  }

  .content-columns {
    display: flex;
    gap: 30px;

    .main-content {
      flex: 2;
      display: flex;
      flex-direction: column;
      gap: 25px;
    }

    .sidebar {
      flex: 1;
      display: flex;
      flex-direction: column;
      gap: 25px;
    }
  }

  .pattern-structure {
    background: white;
    border-radius: 10px;
    padding: 25px;
    box-shadow: 0 4px 15px rgba(0, 0, 0, 0.05);

    h2 {
      color: @primary-color;
      border-bottom: 2px solid @primary-color;
      padding-bottom: 15px;
      margin-top: 0;
      display: flex;
      align-items: center;

      .icon {
        margin-right: 12px;
        font-size: 1.4em;
      }
    }

    .uml-diagram {
      display: flex;
      flex-direction: column;
      align-items: center;
      margin-top: 20px;

      .context,
      .state-interface {
        background: @light-bg;
        border: 2px solid @primary-color;
        border-radius: 8px;
        padding: 20px;
        text-align: center;
        width: 80%;
        margin-bottom: 30px;
        box-shadow: 0 4px 10px rgba(0, 0, 0, 0.05);

        h4 {
          margin-top: 0;
          color: @primary-color;
        }
      }

      .state-interface {
        border-color: @success-color;
      }

      .states {
        display: flex;
        justify-content: space-around;
        width: 100%;
        margin-top: 20px;

        .state {
          background: white;
          border: 2px solid @warning-color;
          border-radius: 8px;
          padding: 15px;
          width: 28%;
          text-align: center;
          box-shadow: 0 4px 8px rgba(0, 0, 0, 0.05);

          h4 {
            margin-top: 0;
            color: @warning-color;
          }
        }
      }

      .arrows {
        display: flex;
        justify-content: space-around;
        width: 100%;
        margin: 20px 0;

        .arrow {
          font-size: 1.8rem;
          color: @secondary-color;
        }
      }
    }
  }

  .code-implementation {
    background: white;
    border-radius: 10px;
    padding: 25px;
    box-shadow: 0 4px 15px rgba(0, 0, 0, 0.05);

    h2 {
      color: @primary-color;
      border-bottom: 2px solid @primary-color;
      padding-bottom: 15px;
      margin-top: 0;
      display: flex;
      align-items: center;

      .icon {
        margin-right: 12px;
        font-size: 1.4em;
      }
    }

    .code-tabs {
      margin-top: 20px;

      .tabs {
        display: flex;
        border-bottom: 2px solid @light-bg;

        button {
          padding: 12px 25px;
          background: none;
          border: none;
          font-size: 1rem;
          font-weight: 500;
          cursor: pointer;
          color: #7f8c8d;
          position: relative;
          transition: all 0.3s ease;

          &.active {
            color: @primary-color;

            &::after {
              content: '';
              position: absolute;
              bottom: -2px;
              left: 0;
              width: 100%;
              height: 3px;
              background: @primary-color;
              border-radius: 3px 3px 0 0;
            }
          }

          &:hover:not(.active) {
            background: @light-bg;
          }
        }
      }

      .tab-content {
        margin-top: 20px;

        pre {
          background: #2d2d2d;
          color: #f8f8f2;
          padding: 20px;
          border-radius: 8px;
          overflow-x: auto;
          font-size: 0.95rem;
          line-height: 1.5;

          code {
            font-family: 'Fira Code', monospace;
          }
        }
      }
    }
  }

  .real-world-demo {
    background: white;
    border-radius: 10px;
    padding: 25px;
    box-shadow: 0 4px 15px rgba(0, 0, 0, 0.05);

    h2 {
      color: @primary-color;
      border-bottom: 2px solid @primary-color;
      padding-bottom: 15px;
      margin-top: 0;
      display: flex;
      align-items: center;

      .icon {
        margin-right: 12px;
        font-size: 1.4em;
      }
    }

    .vending-machine {
      background: #f5f5f5;
      border-radius: 10px;
      padding: 25px;
      box-shadow: inset 0 0 10px rgba(0, 0, 0, 0.05);
      border: 2px solid @border-color;

      .display {
        display: flex;
        justify-content: space-between;
        margin-bottom: 25px;

        .state-indicator {
          background: white;
          padding: 15px;
          border-radius: 8px;
          font-weight: 600;
          flex: 1;
          margin-right: 15px;
          box-shadow: 0 4px 8px rgba(0, 0, 0, 0.05);

          span {
            padding: 3px 10px;
            border-radius: 20px;
            color: white;
          }

          &.nocoin span {
            background: @warning-color;
          }

          &.hascoin span {
            background: @success-color;
          }

          &.sold span {
            background: @primary-color;
          }

          &.soldout span {
            background: @danger-color;
          }
        }

        .product-count {
          background: white;
          padding: 15px;
          border-radius: 8px;
          font-weight: 600;
          width: 200px;
          text-align: center;
          box-shadow: 0 4px 8px rgba(0, 0, 0, 0.05);

          &::before {
            content: 'ğŸ“¦ ';
          }
        }
      }

      .controls {
        display: flex;
        gap: 15px;
        margin-bottom: 25px;

        button {
          flex: 1;
          padding: 15px;
          border: none;
          border-radius: 8px;
          font-size: 1rem;
          font-weight: 600;
          cursor: pointer;
          transition: all 0.3s ease;
          display: flex;
          align-items: center;
          justify-content: center;
          gap: 8px;
          box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);

          &:hover:not(:disabled) {
            transform: translateY(-3px);
            box-shadow: 0 6px 12px rgba(0, 0, 0, 0.15);
          }

          &:disabled {
            opacity: 0.5;
            cursor: not-allowed;
          }

          &:nth-child(1) {
            background: linear-gradient(135deg, #f6d365 0%, #fda085 100%);
            color: white;
          }

          &:nth-child(2) {
            background: linear-gradient(135deg, #5ee7df 0%, #b490ca 100%);
            color: white;
          }

          &:nth-child(3) {
            background: linear-gradient(135deg, #d4fc79 0%, #96e6a1 100%);
            color: #333;
          }
        }
      }

      .logs {
        h3 {
          margin-top: 0;
          color: @secondary-color;
          padding-bottom: 10px;
          border-bottom: 1px solid @border-color;
        }

        .log-container {
          background: #2d2d2d;
          color: #f8f8f2;
          border-radius: 8px;
          padding: 15px;
          height: 200px;
          overflow-y: auto;
          font-family: 'Fira Code', monospace;
          font-size: 0.9rem;

          .log-entry {
            padding: 8px 0;
            border-bottom: 1px solid #444;

            &:last-child {
              border-bottom: none;
            }
          }
        }
      }
    }
  }

  .use-cases {
    background: white;
    border-radius: 10px;
    padding: 25px;
    box-shadow: 0 4px 15px rgba(0, 0, 0, 0.05);

    h2 {
      color: @primary-color;
      border-bottom: 2px solid @primary-color;
      padding-bottom: 15px;
      margin-top: 0;
      display: flex;
      align-items: center;

      .icon {
        margin-right: 12px;
        font-size: 1.4em;
      }
    }

    .case {
      display: flex;
      padding: 15px 0;
      border-bottom: 1px dashed @border-color;

      &:last-child {
        border-bottom: none;
      }

      .case-icon {
        font-size: 1.8rem;
        margin-right: 15px;
        width: 40px;
        text-align: center;
      }

      .case-content {
        h3 {
          margin: 0 0 5px;
          color: @secondary-color;
        }

        p {
          margin: 0;
          color: #666;
          font-size: 0.95rem;
        }
      }
    }
  }

  .pros-cons {
    background: white;
    border-radius: 10px;
    padding: 25px;
    box-shadow: 0 4px 15px rgba(0, 0, 0, 0.05);

    h2 {
      color: @primary-color;
      border-bottom: 2px solid @primary-color;
      padding-bottom: 15px;
      margin-top: 0;
      display: flex;
      align-items: center;

      .icon {
        margin-right: 12px;
        font-size: 1.4em;
      }
    }

    .pros,
    .cons {
      padding: 15px;
      border-radius: 8px;
      margin-bottom: 20px;

      h3 {
        display: flex;
        align-items: center;
        margin-top: 0;
        padding-bottom: 10px;
        border-bottom: 2px solid;

        .icon {
          margin-right: 10px;
        }
      }

      ul {
        padding-left: 20px;
        margin: 15px 0 0;

        li {
          padding: 8px 0;
          line-height: 1.5;
        }
      }
    }

    .pros {
      background: rgba(46, 204, 113, 0.05);
      border: 1px solid rgba(46, 204, 113, 0.2);

      h3 {
        color: @success-color;
        border-color: @success-color;
      }
    }

    .cons {
      background: rgba(231, 76, 60, 0.05);
      border: 1px solid rgba(231, 76, 60, 0.2);

      h3 {
        color: @danger-color;
        border-color: @danger-color;
      }
    }
  }

  .comparison {
    background: white;
    border-radius: 10px;
    padding: 25px;
    box-shadow: 0 4px 15px rgba(0, 0, 0, 0.05);

    h2 {
      color: @primary-color;
      border-bottom: 2px solid @primary-color;
      padding-bottom: 15px;
      margin-top: 0;
      display: flex;
      align-items: center;

      .icon {
        margin-right: 12px;
        font-size: 1.4em;
      }
    }

    table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 15px;

      th,
      td {
        padding: 12px 15px;
        text-align: left;
        border-bottom: 1px solid @border-color;
      }

      th {
        background: @light-bg;
        font-weight: 600;
      }

      tbody tr:hover {
        background: rgba(52, 152, 219, 0.05);
      }
    }
  }

  .conclusion {
    background: white;
    border-radius: 10px;
    padding: 25px;
    margin-top: 30px;
    box-shadow: 0 4px 15px rgba(0, 0, 0, 0.05);

    h2 {
      color: @primary-color;
      border-bottom: 2px solid @primary-color;
      padding-bottom: 15px;
      margin-top: 0;
      display: flex;
      align-items: center;

      .icon {
        margin-right: 12px;
        font-size: 1.4em;
      }
    }

    .summary-content {
      p {
        font-size: 1.1rem;
        line-height: 1.7;

        .highlight {
          background: linear-gradient(120deg, rgba(52, 152, 219, 0.2) 0%, rgba(52, 152, 219, 0) 100%);
          padding: 0 5px;
          font-weight: 600;
          border-radius: 3px;
        }
      }

      .best-practices {
        background: @light-bg;
        border-left: 4px solid @primary-color;
        padding: 20px;
        border-radius: 0 8px 8px 0;
        margin-top: 20px;

        h3 {
          margin-top: 0;
          color: @secondary-color;
        }

        ul {
          padding-left: 20px;
          margin: 15px 0 0;

          li {
            padding: 8px 0;
            line-height: 1.5;
          }
        }
      }
    }
  }
}

@media (max-width: 768px) {
  .content-columns {
    flex-direction: column;
  }

  .key-points {
    flex-direction: column;
  }

  .controls {
    flex-direction: column;
  }
}
</style>