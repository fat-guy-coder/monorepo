<template>
  <div class="webgl-rendering">
    <!-- é¡µé¢å¤´éƒ¨ -->
    <header class="page-header">
      <div class="header-content">
        <h1 class="title">WebGL æ¸²æŸ“æµç¨‹</h1>
        <p class="subtitle">æ·±å…¥ç†è§£ä»æ•°æ®åˆ°åƒç´ çš„å®Œæ•´æ¸²æŸ“è¿‡ç¨‹</p>
        <div class="header-badge">æ ¸å¿ƒæ¦‚å¿µ</div>
      </div>
    </header>

    <!-- ä¸»è¦å†…å®¹ -->
    <main class="content">
      <!-- æ¦‚è¿°éƒ¨åˆ† -->
      <section class="overview-section">
        <div class="section-card">
          <h2 class="section-title">
            <span class="icon">ğŸ¯</span>
            æ¸²æŸ“æµç¨‹æ¦‚è¿°
          </h2>
          <div class="overview-content">
            <p>WebGLæ¸²æŸ“æµç¨‹æ˜¯ä¸€ä¸ªå°†3Dæ•°æ®è½¬æ¢ä¸º2Då›¾åƒçš„å¤æ‚è¿‡ç¨‹ï¼Œæ¶‰åŠå¤šä¸ªé˜¶æ®µçš„å¤„ç†ã€‚ç†è§£è¿™ä¸ªæµç¨‹å¯¹äºä¼˜åŒ–WebGLåº”ç”¨æ€§èƒ½è‡³å…³é‡è¦ã€‚</p>
            <div class="info-box">
              <div class="info-icon">ğŸ’¡</div>
              <div class="info-content">
                <p><strong>å…³é”®æ¦‚å¿µï¼š</strong>WebGLåŸºäºOpenGL ES 2.0ï¼Œä½¿ç”¨å¯ç¼–ç¨‹æ¸²æŸ“ç®¡çº¿ï¼Œå¼€å‘è€…å¯ä»¥ç¼–å†™è‡ªå®šä¹‰çš„ç€è‰²å™¨æ¥æ§åˆ¶æ¸²æŸ“è¿‡ç¨‹ã€‚</p>
              </div>
            </div>
          </div>
        </div>
      </section>

      <!-- æ¸²æŸ“ç®¡çº¿å›¾ -->
      <section class="pipeline-section">
        <h2 class="section-title">
          <span class="icon">ğŸ“Š</span>
          WebGLæ¸²æŸ“ç®¡çº¿
        </h2>
        <div class="pipeline-container">
          <div class="pipeline-track">
            <!-- æ•°æ®å‡†å¤‡é˜¶æ®µ -->
            <div class="pipeline-stage" :class="{ active: activeStage === 0 }" @mouseenter="setActiveStage(0)">
              <div class="stage-header">
                <div class="stage-number">01</div>
                <h3 class="stage-title">æ•°æ®å‡†å¤‡</h3>
              </div>
              <div class="stage-content">
                <p>å‡†å¤‡é¡¶ç‚¹æ•°æ®ã€ç¼“å†²åŒºå¯¹è±¡å’Œå±æ€§é…ç½®</p>
                <ul>
                  <li>é¡¶ç‚¹ä½ç½®</li>
                  <li>é¢œè‰²æ•°æ®</li>
                  <li>çº¹ç†åæ ‡</li>
                  <li>æ³•çº¿å‘é‡</li>
                </ul>
              </div>
              <div class="stage-connector"></div>
            </div>

            <!-- é¡¶ç‚¹ç€è‰²å™¨é˜¶æ®µ -->
            <div class="pipeline-stage" :class="{ active: activeStage === 1 }" @mouseenter="setActiveStage(1)">
              <div class="stage-header">
                <div class="stage-number">02</div>
                <h3 class="stage-title">é¡¶ç‚¹ç€è‰²å™¨</h3>
              </div>
              <div class="stage-content">
                <p>å¤„ç†æ¯ä¸ªé¡¶ç‚¹ï¼Œæ‰§è¡Œåæ ‡å˜æ¢</p>
                <ul>
                  <li>æ¨¡å‹å˜æ¢</li>
                  <li>è§†å›¾å˜æ¢</li>
                  <li>æŠ•å½±å˜æ¢</li>
                  <li>æ³•çº¿å˜æ¢</li>
                </ul>
              </div>
              <div class="stage-connector"></div>
            </div>

            <!-- å›¾å…ƒè£…é… -->
            <div class="pipeline-stage" :class="{ active: activeStage === 2 }" @mouseenter="setActiveStage(2)">
              <div class="stage-header">
                <div class="stage-number">03</div>
                <h3 class="stage-title">å›¾å…ƒè£…é…</h3>
              </div>
              <div class="stage-content">
                <p>å°†é¡¶ç‚¹ç»„è£…æˆå‡ ä½•å›¾å…ƒ</p>
                <ul>
                  <li>ç‚¹ã€çº¿ã€ä¸‰è§’å½¢</li>
                  <li>èƒŒé¢å‰”é™¤</li>
                  <li>è§†é”¥ä½“å‰”é™¤</li>
                </ul>
              </div>
              <div class="stage-connector"></div>
            </div>

            <!-- å…‰æ …åŒ– -->
            <div class="pipeline-stage" :class="{ active: activeStage === 3 }" @mouseenter="setActiveStage(3)">
              <div class="stage-header">
                <div class="stage-number">04</div>
                <h3 class="stage-title">å…‰æ …åŒ–</h3>
              </div>
              <div class="stage-content">
                <p>å°†å›¾å…ƒè½¬æ¢ä¸ºåƒç´ ç‰‡æ®µ</p>
                <ul>
                  <li>æ‰«æè½¬æ¢</li>
                  <li>æ’å€¼è®¡ç®—</li>
                  <li>æ·±åº¦å€¼è®¡ç®—</li>
                </ul>
              </div>
              <div class="stage-connector"></div>
            </div>

            <!-- ç‰‡å…ƒç€è‰²å™¨ -->
            <div class="pipeline-stage" :class="{ active: activeStage === 4 }" @mouseenter="setActiveStage(4)">
              <div class="stage-header">
                <div class="stage-number">05</div>
                <h3 class="stage-title">ç‰‡å…ƒç€è‰²å™¨</h3>
              </div>
              <div class="stage-content">
                <p>è®¡ç®—æ¯ä¸ªç‰‡å…ƒçš„æœ€ç»ˆé¢œè‰²</p>
                <ul>
                  <li>çº¹ç†é‡‡æ ·</li>
                  <li>å…‰ç…§è®¡ç®—</li>
                  <li>é¢œè‰²æ··åˆ</li>
                </ul>
              </div>
              <div class="stage-connector"></div>
            </div>

            <!-- é€ç‰‡å…ƒæ“ä½œ -->
            <div class="pipeline-stage" :class="{ active: activeStage === 5 }" @mouseenter="setActiveStage(5)">
              <div class="stage-header">
                <div class="stage-number">06</div>
                <h3 class="stage-title">é€ç‰‡å…ƒæ“ä½œ</h3>
              </div>
              <div class="stage-content">
                <p>æœ€ç»ˆå¤„ç†å†³å®šåƒç´ é¢œè‰²</p>
                <ul>
                  <li>æ·±åº¦æµ‹è¯•</li>
                  <li>æ¨¡æ¿æµ‹è¯•</li>
                  <li>é¢œè‰²æ··åˆ</li>
                </ul>
              </div>
            </div>
          </div>
        </div>
      </section>

      <!-- è¯¦ç»†é˜¶æ®µè¯´æ˜ -->
      <section class="stages-section">
        <h2 class="section-title">
          <span class="icon">ğŸ”</span>
          è¯¦ç»†é˜¶æ®µè¯´æ˜
        </h2>
        <div class="stages-content">
          <!-- æ•°æ®å‡†å¤‡é˜¶æ®µ -->
          <div class="stage-detail" :class="{ active: activeStage === 0 }">
            <div class="detail-header">
              <h3 class="detail-title">æ•°æ®å‡†å¤‡é˜¶æ®µ</h3>
              <div class="detail-badge">åŸºç¡€</div>
            </div>
            <div class="detail-content">
              <p>åœ¨è¿™ä¸ªé˜¶æ®µï¼Œæˆ‘ä»¬éœ€è¦å‡†å¤‡æ‰€æœ‰æ¸²æŸ“æ‰€éœ€çš„æ•°æ®ï¼ŒåŒ…æ‹¬é¡¶ç‚¹ä½ç½®ã€é¢œè‰²ã€çº¹ç†åæ ‡å’Œæ³•çº¿ç­‰ä¿¡æ¯ã€‚</p>

              <div class="code-example">
                <div class="code-header">åˆ›å»ºç¼“å†²åŒºç¤ºä¾‹</div>
                <pre><code>// åˆ›å»ºé¡¶ç‚¹ç¼“å†²åŒº
const vertices = new Float32Array([
  -0.5, -0.5, 0.0,  // å·¦ä¸‹è§’
   0.5, -0.5, 0.0,  // å³ä¸‹è§’
   0.0,  0.5, 0.0   // é¡¶éƒ¨
]);

const vertexBuffer = gl.createBuffer();
gl.bindBuffer(gl.ARRAY_BUFFER, vertexBuffer);
gl.bufferData(gl.ARRAY_BUFFER, vertices, gl.STATIC_DRAW);

// è®¾ç½®é¡¶ç‚¹å±æ€§æŒ‡é’ˆ
gl.vertexAttribPointer(
  positionAttributeLocation, // å±æ€§ä½ç½®
  3,                         // æ¯ä¸ªé¡¶ç‚¹çš„åˆ†é‡æ•°
  gl.FLOAT,                  // æ•°æ®ç±»å‹
  false,                     // æ˜¯å¦å½’ä¸€åŒ–
  0,                         // æ­¥é•¿
  0                          // åç§»é‡
);
gl.enableVertexAttribArray(positionAttributeLocation);</code></pre>
              </div>

              <div class="key-points">
                <h4>å…³é”®è¦ç‚¹ï¼š</h4>
                <ul>
                  <li>ä½¿ç”¨<code>gl.createBuffer()</code>åˆ›å»ºç¼“å†²åŒºå¯¹è±¡</li>
                  <li>é€šè¿‡<code>gl.bindBuffer()</code>ç»‘å®šç¼“å†²åŒº</li>
                  <li>ä½¿ç”¨<code>gl.bufferData()</code>ä¸Šä¼ æ•°æ®åˆ°GPU</li>
                  <li>ä½¿ç”¨<code>gl.vertexAttribPointer()</code>é…ç½®å±æ€§æŒ‡é’ˆ</li>
                </ul>
              </div>
            </div>
          </div>

          <!-- é¡¶ç‚¹ç€è‰²å™¨é˜¶æ®µ -->
          <div class="stage-detail" :class="{ active: activeStage === 1 }">
            <div class="detail-header">
              <h3 class="detail-title">é¡¶ç‚¹ç€è‰²å™¨é˜¶æ®µ</h3>
              <div class="detail-badge">æ ¸å¿ƒ</div>
            </div>
            <div class="detail-content">
              <p>é¡¶ç‚¹ç€è‰²å™¨å¯¹æ¯ä¸ªé¡¶ç‚¹æ‰§è¡Œä¸€æ¬¡ï¼Œä¸»è¦è´Ÿè´£åæ ‡å˜æ¢å’Œé¡¶ç‚¹å±æ€§çš„è®¡ç®—ã€‚</p>

              <div class="code-example">
                <div class="code-header">é¡¶ç‚¹ç€è‰²å™¨ç¤ºä¾‹</div>
                <pre><code>// é¡¶ç‚¹ç€è‰²å™¨æºç 
const vertexShaderSource = `
  attribute vec4 a_position;
  attribute vec2 a_texCoord;
  uniform mat4 u_modelViewMatrix;
  uniform mat4 u_projectionMatrix;

  varying vec2 v_texCoord;

  void main() {
    // åº”ç”¨æ¨¡å‹è§†å›¾å’ŒæŠ•å½±å˜æ¢
    gl_Position = u_projectionMatrix * u_modelViewMatrix * a_position;

    // ä¼ é€’çº¹ç†åæ ‡åˆ°ç‰‡å…ƒç€è‰²å™¨
    v_texCoord = a_texCoord;
  }
`;</code></pre>
              </div>

              <div class="transform-visual">
                <h4>åæ ‡å˜æ¢æµç¨‹ï¼š</h4>
                <div class="transform-steps">
                  <div class="transform-step">
                    <span class="step-label">å±€éƒ¨åæ ‡</span>
                    <span class="step-arrow">â†’</span>
                  </div>
                  <div class="transform-step">
                    <span class="step-label">ä¸–ç•Œåæ ‡</span>
                    <span class="step-arrow">â†’</span>
                  </div>
                  <div class="transform-step">
                    <span class="step-label">è§†å›¾åæ ‡</span>
                    <span class="step-arrow">â†’</span>
                  </div>
                  <div class="transform-step">
                    <span class="step-label">è£å‰ªåæ ‡</span>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <!-- å›¾å…ƒè£…é…é˜¶æ®µ -->
          <div class="stage-detail" :class="{ active: activeStage === 2 }">
            <div class="detail-header">
              <h3 class="detail-title">å›¾å…ƒè£…é…é˜¶æ®µ</h3>
              <div class="detail-badge">å¤„ç†</div>
            </div>
            <div class="detail-content">
              <p>åœ¨è¿™ä¸ªé˜¶æ®µï¼Œé¡¶ç‚¹è¢«ç»„è£…æˆç‚¹ã€çº¿æˆ–ä¸‰è§’å½¢ç­‰åŸºæœ¬å›¾å…ƒï¼Œå¹¶è¿›è¡Œè£å‰ªå’Œå‰”é™¤æ“ä½œã€‚</p>

              <div class="primitives-grid">
                <div class="primitive-card">
                  <div class="primitive-icon">â—</div>
                  <h4>ç‚¹ (POINTS)</h4>
                  <p>å•ä¸ªé¡¶ç‚¹ï¼Œå¸¸ç”¨äºç²’å­ç³»ç»Ÿ</p>
                </div>
                <div class="primitive-card">
                  <div class="primitive-icon">â”€</div>
                  <h4>çº¿ (LINES)</h4>
                  <p>ä¸¤ä¸ªé¡¶ç‚¹ç»„æˆçš„çº¿æ®µ</p>
                </div>
                <div class="primitive-card">
                  <div class="primitive-icon">â–³</div>
                  <h4>ä¸‰è§’å½¢ (TRIANGLES)</h4>
                  <p>ä¸‰ä¸ªé¡¶ç‚¹ç»„æˆçš„ä¸‰è§’å½¢ï¼Œæœ€å¸¸ç”¨çš„å›¾å…ƒ</p>
                </div>
              </div>

              <div class="culling-info">
                <h4>å‰”é™¤æ“ä½œï¼š</h4>
                <ul>
                  <li><strong>èƒŒé¢å‰”é™¤ï¼š</strong>ç§»é™¤èƒŒå¯¹ç›¸æœºçš„ä¸‰è§’å½¢ï¼Œæé«˜æ€§èƒ½</li>
                  <li><strong>è§†é”¥ä½“å‰”é™¤ï¼š</strong>ç§»é™¤ç›¸æœºè§†é‡å¤–çš„å›¾å…ƒ</li>
                  <li><strong>è£å‰ªï¼š</strong>å°†è¶…å‡ºè£å‰ªç©ºé—´çš„å›¾å…ƒè¿›è¡Œè£å‰ª</li>
                </ul>
              </div>
            </div>
          </div>

          <!-- å…‰æ …åŒ–é˜¶æ®µ -->
          <div class="stage-detail" :class="{ active: activeStage === 3 }">
            <div class="detail-header">
              <h3 class="detail-title">å…‰æ …åŒ–é˜¶æ®µ</h3>
              <div class="detail-badge">è½¬æ¢</div>
            </div>
            <div class="detail-content">
              <p>å…‰æ …åŒ–å°†å‡ ä½•å›¾å…ƒè½¬æ¢ä¸ºåƒç´ ç‰‡æ®µï¼Œè®¡ç®—æ¯ä¸ªç‰‡æ®µçš„ä½ç½®å’Œæ’å€¼å±æ€§ã€‚</p>

              <div class="rasterization-visual">
                <div class="triangle-grid">
                  <div class="grid-container">
                    <div class="triangle-outline"></div>
                    <div class="fragment" v-for="fragment in fragments" :key="fragment.id"
                         :style="fragment.style"></div>
                  </div>
                </div>
                <p class="visual-caption">ä¸‰è§’å½¢å…‰æ …åŒ–è¿‡ç¨‹ï¼šå‡ ä½•å›¾å…ƒè¢«è½¬æ¢ä¸ºåƒç´ ç‰‡æ®µ</p>
              </div>

              <div class="interpolation-info">
                <h4>æ’å€¼è®¡ç®—ï¼š</h4>
                <p>åœ¨å…‰æ …åŒ–è¿‡ç¨‹ä¸­ï¼Œé¡¶ç‚¹å±æ€§ï¼ˆå¦‚é¢œè‰²ã€çº¹ç†åæ ‡ã€æ³•çº¿ï¼‰ä¼šåœ¨ä¸‰è§’å½¢è¡¨é¢è¿›è¡Œæ’å€¼è®¡ç®—ï¼Œä¸ºæ¯ä¸ªç‰‡æ®µç”Ÿæˆç›¸åº”çš„å±æ€§å€¼ã€‚</p>
              </div>
            </div>
          </div>

          <!-- ç‰‡å…ƒç€è‰²å™¨é˜¶æ®µ -->
          <div class="stage-detail" :class="{ active: activeStage === 4 }">
            <div class="detail-header">
              <h3 class="detail-title">ç‰‡å…ƒç€è‰²å™¨é˜¶æ®µ</h3>
              <div class="detail-badge">ç€è‰²</div>
            </div>
            <div class="detail-content">
              <p>ç‰‡å…ƒç€è‰²å™¨å¯¹æ¯ä¸ªç‰‡æ®µæ‰§è¡Œä¸€æ¬¡ï¼Œè®¡ç®—æœ€ç»ˆçš„é¢œè‰²å€¼ï¼Œå¯ä»¥åº”ç”¨çº¹ç†ã€å…‰ç…§å’Œå…¶ä»–è§†è§‰æ•ˆæœã€‚</p>

              <div class="code-example">
                <div class="code-header">ç‰‡å…ƒç€è‰²å™¨ç¤ºä¾‹</div>
                <pre><code>// ç‰‡å…ƒç€è‰²å™¨æºç 
const fragmentShaderSource = `
  precision mediump float;

  uniform sampler2D u_texture;
  uniform vec3 u_lightDirection;
  uniform vec3 u_lightColor;

  varying vec2 v_texCoord;
  varying vec3 v_normal;

  void main() {
    // çº¹ç†é‡‡æ ·
    vec4 textureColor = texture2D(u_texture, v_texCoord);

    // ç®€å•å…‰ç…§è®¡ç®—
    float diffuse = max(dot(v_normal, u_lightDirection), 0.0);
    vec3 lightEffect = u_lightColor * diffuse;

    // æœ€ç»ˆé¢œè‰²è®¡ç®—
    gl_FragColor = vec4(textureColor.rgb * lightEffect, textureColor.a);
  }
`;</code></pre>
              </div>

              <div class="shader-effects">
                <h4>å¸¸è§ç€è‰²æ•ˆæœï¼š</h4>
                <div class="effects-grid">
                  <div class="effect-item">
                    <div class="effect-dot" style="background: linear-gradient(45deg, #ff6b6b, #ffa726)"></div>
                    <span>çº¹ç†æ˜ å°„</span>
                  </div>
                  <div class="effect-item">
                    <div class="effect-dot" style="background: linear-gradient(45deg, #4ecdc4, #45b7d1)"></div>
                    <span>å…‰ç…§è®¡ç®—</span>
                  </div>
                  <div class="effect-item">
                    <div class="effect-dot" style="background: linear-gradient(45deg, #96ceb4, #ffeaa7)"></div>
                    <span>æ³•çº¿æ˜ å°„</span>
                  </div>
                  <div class="effect-item">
                    <div class="effect-dot" style="background: linear-gradient(45deg, #dda0dd, #98d8c8)"></div>
                    <span>ç¯å¢ƒå…‰é®è”½</span>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <!-- é€ç‰‡å…ƒæ“ä½œé˜¶æ®µ -->
          <div class="stage-detail" :class="{ active: activeStage === 5 }">
            <div class="detail-header">
              <h3 class="detail-title">é€ç‰‡å…ƒæ“ä½œé˜¶æ®µ</h3>
              <div class="detail-badge">æœ€ç»ˆå¤„ç†</div>
            </div>
            <div class="detail-content">
              <p>è¿™æ˜¯æ¸²æŸ“ç®¡çº¿çš„æœ€åé˜¶æ®µï¼Œå†³å®šå“ªäº›ç‰‡æ®µæœ€ç»ˆå†™å…¥å¸§ç¼“å†²åŒºï¼Œå¹¶è¿›è¡Œæ··åˆæ“ä½œã€‚</p>

              <div class="fragment-operations">
                <div class="operation-card">
                  <h4>æ·±åº¦æµ‹è¯•</h4>
                  <p>æ¯”è¾ƒç‰‡æ®µçš„æ·±åº¦å€¼ä¸æ·±åº¦ç¼“å†²åŒºä¸­çš„å€¼ï¼Œå†³å®šæ˜¯å¦ä¸¢å¼ƒè¯¥ç‰‡æ®µ</p>
                  <div class="operation-visual">
                    <div class="depth-comparison">
                      <div class="depth-buffer"></div>
                      <div class="depth-fragment"></div>
                    </div>
                  </div>
                </div>

                <div class="operation-card">
                  <h4>æ¨¡æ¿æµ‹è¯•</h4>
                  <p>æ ¹æ®æ¨¡æ¿ç¼“å†²åŒºçš„å€¼å†³å®šæ˜¯å¦æ¸²æŸ“ç‰‡æ®µï¼Œå¸¸ç”¨äºå®ç°ç‰¹æ®Šæ•ˆæœ</p>
                  <div class="operation-visual">
                    <div class="stencil-pattern"></div>
                  </div>
                </div>

                <div class="operation-card">
                  <h4>é¢œè‰²æ··åˆ</h4>
                  <p>å°†ç‰‡æ®µé¢œè‰²ä¸å¸§ç¼“å†²åŒºä¸­çš„é¢œè‰²è¿›è¡Œæ··åˆï¼Œå®ç°é€æ˜æ•ˆæœ</p>
                  <div class="operation-visual">
                    <div class="blending-demo">
                      <div class="bg-color"></div>
                      <div class="fg-color"></div>
                      <div class="blended-color"></div>
                    </div>
                  </div>
                </div>
              </div>

              <div class="final-output">
                <h4>æœ€ç»ˆè¾“å‡ºï¼š</h4>
                <p>é€šè¿‡æ‰€æœ‰æµ‹è¯•çš„ç‰‡æ®µé¢œè‰²å°†è¢«å†™å…¥å¸§ç¼“å†²åŒºï¼Œæœ€ç»ˆæ˜¾ç¤ºåœ¨å±å¹•ä¸Šã€‚</p>
                <div class="code-example">
                  <div class="code-header">ç»˜åˆ¶è°ƒç”¨</div>
                  <pre><code>// æ¸…é™¤é¢œè‰²å’Œæ·±åº¦ç¼“å†²åŒº
gl.clear(gl.COLOR_BUFFER_BIT | gl.DEPTH_BUFFER_BIT);

// å¯ç”¨æ·±åº¦æµ‹è¯•
gl.enable(gl.DEPTH_TEST);

// å¯ç”¨æ··åˆï¼ˆç”¨äºé€æ˜æ•ˆæœï¼‰
gl.enable(gl.BLEND);
gl.blendFunc(gl.SRC_ALPHA, gl.ONE_MINUS_SRC_ALPHA);

// æ‰§è¡Œç»˜åˆ¶
gl.drawArrays(gl.TRIANGLES, 0, vertexCount);</code></pre>
                </div>
              </div>
            </div>
          </div>
        </div>
      </section>

      <!-- æ€§èƒ½ä¼˜åŒ–å»ºè®® -->
      <section class="optimization-section">
        <div class="section-card">
          <h2 class="section-title">
            <span class="icon">âš¡</span>
            æ€§èƒ½ä¼˜åŒ–å»ºè®®
          </h2>
          <div class="optimization-tips">
            <div class="tip-card">
              <div class="tip-icon">ğŸš€</div>
              <h3>å‡å°‘çŠ¶æ€åˆ‡æ¢</h3>
              <p>å°†ä½¿ç”¨ç›¸åŒç€è‰²å™¨å’ŒçŠ¶æ€çš„ç‰©ä½“ä¸€èµ·æ¸²æŸ“ï¼Œå‡å°‘WebGLçŠ¶æ€åˆ‡æ¢å¼€é”€ã€‚</p>
            </div>
            <div class="tip-card">
              <div class="tip-icon">ğŸ’¾</div>
              <h3>ä½¿ç”¨ç´¢å¼•ç»˜åˆ¶</h3>
              <p>ä½¿ç”¨<code>gl.drawElements()</code>ä»£æ›¿<code>gl.drawArrays()</code>ï¼Œå‡å°‘é¡¶ç‚¹æ•°æ®é‡å¤ã€‚</p>
            </div>
            <div class="tip-card">
              <div class="tip-icon">ğŸ“</div>
              <h3>ä¼˜åŒ–é¡¶ç‚¹æ•°æ®</h3>
              <p>ä½¿ç”¨äº¤é”™é¡¶ç‚¹æ•°ç»„ï¼Œå‡å°‘ç¼“å†²åŒºç»‘å®šæ¬¡æ•°ï¼Œæé«˜æ•°æ®è®¿é—®æ•ˆç‡ã€‚</p>
            </div>
            <div class="tip-card">
              <div class="tip-icon">ğŸ¯</div>
              <h3>åˆç†ä½¿ç”¨å‰”é™¤</h3>
              <p>å¯ç”¨èƒŒé¢å‰”é™¤å’Œè§†é”¥ä½“å‰”é™¤ï¼Œå‡å°‘ä¸å¿…è¦çš„æ¸²æŸ“è®¡ç®—ã€‚</p>
            </div>
          </div>
        </div>
      </section>
    </main>

    <!-- é¡µé¢åº•éƒ¨ -->
    <footer class="page-footer">
      <div class="footer-content">
        <p class="footer-text">
          ç†è§£WebGLæ¸²æŸ“æµç¨‹æ˜¯ä¼˜åŒ–3Dåº”ç”¨æ€§èƒ½çš„å…³é”®ã€‚æ¯ä¸ªé˜¶æ®µéƒ½æœ‰å…¶ç‰¹å®šçš„ä¼˜åŒ–ç­–ç•¥ï¼Œåˆç†åˆ©ç”¨è¿™äº›çŸ¥è¯†å¯ä»¥æ˜¾è‘—æå‡åº”ç”¨æ€§èƒ½ã€‚
        </p>
        <div class="footer-links">
          <a href="#" class="footer-link">WebGLå®˜æ–¹æ–‡æ¡£</a>
          <a href="#" class="footer-link">OpenGL ESå‚è€ƒ</a>
          <a href="#" class="footer-link">ç€è‰²å™¨ç¼–ç¨‹æŒ‡å—</a>
        </div>
      </div>
    </footer>
  </div>
</template>

<script setup lang="ts">
import { ref, onMounted } from 'vue'

// å½“å‰æ¿€æ´»çš„é˜¶æ®µ
const activeStage = ref(0)

// è®¾ç½®æ¿€æ´»é˜¶æ®µ
const setActiveStage = (stage: number) => {
  activeStage.value = stage
}

// å…‰æ …åŒ–æ¼”ç¤ºç‰‡æ®µ
const fragments = ref<Array<{id: number, style: string}>>([])

// åˆå§‹åŒ–å…‰æ …åŒ–æ¼”ç¤º
onMounted(() => {
  // ç”Ÿæˆå…‰æ …åŒ–æ¼”ç¤ºçš„ç‰‡æ®µ
  const fragmentCount = 50
  for (let i = 0; i < fragmentCount; i++) {
    const left = Math.random() * 80 + 10
    const top = Math.random() * 60 + 20
    const size = Math.random() * 10 + 5
    const opacity = Math.random() * 0.5 + 0.3

    fragments.value.push({
      id: i,
      style: `left: ${left}%; top: ${top}%; width: ${size}px; height: ${size}px; opacity: ${opacity};`
    })
  }
})
</script>

<style lang="less" scoped>
.webgl-rendering {
  max-width: 1200px;
  margin: 0 auto;
  padding: 0 1.5rem;
  font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
  line-height: 1.6;
  color: #2d3748;
  background: linear-gradient(135deg, #f5f7fa 0%, #e4eaf1 100%);
  min-height: 100vh;
}

.page-header {
  text-align: center;
  padding: 3rem 0 2rem;

  .header-content {
    position: relative;
  }

  .title {
    font-size: 3rem;
    font-weight: 800;
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    margin-bottom: 0.5rem;
    letter-spacing: -0.5px;
  }

  .subtitle {
    font-size: 1.25rem;
    color: #718096;
    font-weight: 500;
    margin-bottom: 1rem;
  }

  .header-badge {
    display: inline-block;
    background: rgba(102, 126, 234, 0.1);
    color: #667eea;
    padding: 0.5rem 1rem;
    border-radius: 20px;
    font-size: 0.875rem;
    font-weight: 600;
    border: 1px solid rgba(102, 126, 234, 0.2);
  }
}

.content {
  display: flex;
  flex-direction: column;
  gap: 2.5rem;
  padding-bottom: 3rem;
}

.section-card {
  background: white;
  border-radius: 16px;
  padding: 2rem;
  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
  border: 1px solid rgba(255, 255, 255, 0.8);
  backdrop-filter: blur(10px);
}

.section-title {
  font-size: 1.75rem;
  font-weight: 700;
  color: #2d3748;
  margin-bottom: 1.5rem;
  display: flex;
  align-items: center;
  gap: 0.75rem;

  .icon {
    font-size: 1.5rem;
  }
}

.overview-content {
  p {
    margin-bottom: 1.25rem;
    color: #4a5568;
    font-size: 1.05rem;
    line-height: 1.7;
  }
}

.info-box {
  display: flex;
  align-items: flex-start;
  gap: 1rem;
  background: linear-gradient(135deg, #e3f2fd, #f3e5f5);
  padding: 1.25rem;
  border-radius: 12px;
  border-left: 4px solid #667eea;
  margin: 1.5rem 0;

  .info-icon {
    font-size: 1.5rem;
    flex-shrink: 0;
  }

  .info-content {
    p {
      margin: 0;
      color: #5a67d8;
      font-weight: 500;
    }
  }
}

// æ¸²æŸ“ç®¡çº¿æ ·å¼
.pipeline-container {
  background: white;
  border-radius: 16px;
  padding: 2rem;
  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
  overflow-x: auto;
}

.pipeline-track {
  display: flex;
  min-width: 1000px;
  gap: 0;
  position: relative;

  &::before {
    content: '';
    position: absolute;
    top: 60px;
    left: 0;
    right: 0;
    height: 3px;
    background: linear-gradient(90deg, #667eea, #764ba2);
    z-index: 1;
  }
}

.pipeline-stage {
  flex: 1;
  position: relative;
  z-index: 2;
  transition: all 0.3s ease;
  cursor: pointer;

  &.active {
    transform: translateY(-5px);

    .stage-header {
      background: linear-gradient(135deg, #667eea, #764ba2);

      .stage-number, .stage-title {
        color: white;
      }
    }
  }

  .stage-header {
    background: white;
    border: 2px solid #667eea;
    border-radius: 12px;
    padding: 1.5rem 1rem;
    text-align: center;
    margin-bottom: 1rem;
    transition: all 0.3s ease;
    box-shadow: 0 4px 15px rgba(102, 126, 234, 0.1);
  }

  .stage-number {
    font-size: 0.875rem;
    font-weight: 700;
    color: #667eea;
    margin-bottom: 0.5rem;
  }

  .stage-title {
    font-size: 1.125rem;
    font-weight: 600;
    color: #2d3748;
    margin: 0;
  }

  .stage-content {
    background: #f7fafc;
    border-radius: 8px;
    padding: 1rem;

    p {
      font-size: 0.875rem;
      color: #4a5568;
      margin: 0 0 0.75rem 0;
      font-weight: 500;
    }

    ul {
      list-style: none;
      padding: 0;
      margin: 0;
    }

    li {
      font-size: 0.75rem;
      color: #718096;
      padding: 0.25rem 0;

      &::before {
        content: 'â€¢';
        color: #667eea;
        font-weight: bold;
        display: inline-block;
        width: 1em;
        margin-left: -1em;
      }
    }
  }

  .stage-connector {
    position: absolute;
    top: 60px;
    right: -10px;
    width: 20px;
    height: 3px;
    background: #667eea;
    z-index: 3;

    &::after {
      content: '';
      position: absolute;
      right: -5px;
      top: -4px;
      width: 0;
      height: 0;
      border-left: 8px solid #667eea;
      border-top: 5px solid transparent;
      border-bottom: 5px solid transparent;
    }
  }
}

// è¯¦ç»†é˜¶æ®µè¯´æ˜
.stages-content {
  display: flex;
  flex-direction: column;
  gap: 1.5rem;
}

.stage-detail {
  background: white;
  border-radius: 12px;
  padding: 0;
  box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
  border: 2px solid transparent;
  transition: all 0.3s ease;
  max-height: 0;
  overflow: hidden;

  &.active {
    max-height: 2000px;
    border-color: #667eea;
    box-shadow: 0 8px 25px rgba(102, 126, 234, 0.15);
  }

  .detail-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 1.5rem;
    background: #f7fafc;
    border-radius: 12px 12px 0 0;
  }

  .detail-title {
    font-size: 1.25rem;
    font-weight: 600;
    color: #2d3748;
    margin: 0;
  }

  .detail-badge {
    background: #667eea;
    color: white;
    padding: 0.375rem 0.75rem;
    border-radius: 20px;
    font-size: 0.75rem;
    font-weight: 600;
  }

  .detail-content {
    padding: 1.5rem;

    p {
      color: #4a5568;
      line-height: 1.7;
      margin-bottom: 1.5rem;
    }
  }
}

.code-example {
  background: #2d3748;
  border-radius: 8px;
  overflow: hidden;
  margin: 1.5rem 0;

  .code-header {
    background: #4a5568;
    color: #cbd5e0;
    padding: 0.75rem 1rem;
    font-size: 0.875rem;
    font-weight: 600;
  }

  pre {
    margin: 0;
    padding: 1.25rem;
    overflow-x: auto;
  }

  code {
    font-family: 'Fira Code', 'Consolas', 'Monaco', monospace;
    font-size: 0.85rem;
    line-height: 1.5;
    color: #e2e8f0;
  }
}

.key-points {
  background: #f0fff4;
  border-left: 4px solid #48bb78;
  padding: 1rem 1.5rem;
  border-radius: 0 8px 8px 0;

  h4 {
    color: #2f855a;
    margin: 0 0 0.75rem 0;
    font-size: 1rem;
  }

  ul {
    list-style: none;
    padding: 0;
    margin: 0;
  }

  li {
    padding: 0.375rem 0;
    color: #2d3748;

    code {
      background: #e2e8f0;
      padding: 0.125rem 0.375rem;
      border-radius: 4px;
      font-family: 'Fira Code', monospace;
      font-size: 0.8rem;
      color: #2d3748;
    }

    &::before {
      content: 'âœ“';
      color: #48bb78;
      font-weight: bold;
      display: inline-block;
      width: 1.5em;
      margin-left: -1.5em;
    }
  }
}

// å˜æ¢å¯è§†åŒ–
.transform-visual {
  margin: 1.5rem 0;

  h4 {
    color: #4a5568;
    margin-bottom: 1rem;
  }
}

.transform-steps {
  display: flex;
  justify-content: space-between;
  align-items: center;
  background: #f7fafc;
  padding: 1.5rem;
  border-radius: 8px;
}

.transform-step {
  display: flex;
  flex-direction: column;
  align-items: center;
  flex: 1;
}

.step-label {
  background: #667eea;
  color: white;
  padding: 0.5rem 1rem;
  border-radius: 20px;
  font-size: 0.875rem;
  font-weight: 600;
  text-align: center;
  min-width: 80px;
}

.step-arrow {
  font-size: 1.5rem;
  color: #a0aec0;
  margin: 0.5rem 0;
}

// å›¾å…ƒç½‘æ ¼
.primitives-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
  gap: 1rem;
  margin: 1.5rem 0;
}

.primitive-card {
  background: #f7fafc;
  border: 1px solid #e2e8f0;
  border-radius: 8px;
  padding: 1.5rem;
  text-align: center;
  transition: transform 0.2s ease;

  &:hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
  }

  .primitive-icon {
    font-size: 2rem;
    margin-bottom: 0.75rem;
    color: #667eea;
  }

  h4 {
    font-size: 1rem;
    font-weight: 600;
    color: #2d3748;
    margin: 0 0 0.5rem 0;
  }

  p {
    font-size: 0.875rem;
    color: #718096;
    margin: 0;
  }
}

.culling-info {
  background: #fffaf0;
  border-left: 4px solid #ed8936;
  padding: 1rem 1.5rem;
  border-radius: 0 8px 8px 0;

  h4 {
    color: #dd6b20;
    margin: 0 0 0.75rem 0;
  }

  ul {
    list-style: none;
    padding: 0;
    margin: 0;
  }

  li {
    padding: 0.375rem 0;
    color: #744210;

    strong {
      color: #dd6b20;
    }
  }
}

// å…‰æ …åŒ–å¯è§†åŒ–
.rasterization-visual {
  margin: 1.5rem 0;

  .triangle-grid {
    background: #f7fafc;
    border-radius: 8px;
    padding: 2rem;
    position: relative;
    height: 200px;
  }

  .grid-container {
    position: relative;
    width: 100%;
    height: 100%;
    background:
      linear-gradient(90deg, #e2e8f0 1px, transparent 1px) 0 0 / 20px 20px,
      linear-gradient(0deg, #e2e8f0 1px, transparent 1px) 0 0 / 20px 20px;
  }

  .triangle-outline {
    position: absolute;
    top: 20%;
    left: 20%;
    width: 60%;
    height: 60%;
    background: rgba(102, 126, 234, 0.1);
    clip-path: polygon(50% 0%, 0% 100%, 100% 100%);
    border: 2px solid #667eea;
  }

  .fragment {
    position: absolute;
    background: rgba(102, 126, 234, 0.6);
    border-radius: 2px;
    transition: all 0.3s ease;
  }

  .visual-caption {
    text-align: center;
    color: #718096;
    font-size: 0.875rem;
    margin-top: 0.75rem;
    font-style: italic;
  }
}

.interpolation-info {
  background: #f0f9ff;
  border-left: 4px solid #63b3ed;
  padding: 1rem 1.5rem;
  border-radius: 0 8px 8px 0;

  h4 {
    color: #3182ce;
    margin: 0 0 0.75rem 0;
  }

  p {
    color: #2c5282;
    margin: 0;
  }
}

// ç€è‰²æ•ˆæœ
.shader-effects {
  margin: 1.5rem 0;

  h4 {
    color: #4a5568;
    margin-bottom: 1rem;
  }
}

.effects-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
  gap: 1rem;
}

.effect-item {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 0.5rem;

  .effect-dot {
    width: 60px;
    height: 60px;
    border-radius: 50%;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
  }

  span {
    font-size: 0.875rem;
    color: #4a5568;
    font-weight: 500;
  }
}

// é€ç‰‡å…ƒæ“ä½œ
.fragment-operations {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
  gap: 1.5rem;
  margin: 1.5rem 0;
}

.operation-card {
  background: #f7fafc;
  border: 1px solid #e2e8f0;
  border-radius: 8px;
  padding: 1.5rem;

  h4 {
    font-size: 1.125rem;
    font-weight: 600;
    color: #2d3748;
    margin: 0 0 0.75rem 0;
  }

  p {
    color: #718096;
    margin: 0 0 1rem 0;
    font-size: 0.9rem;
    line-height: 1.5;
  }
}

.operation-visual {
  height: 80px;
  display: flex;
  align-items: center;
  justify-content: center;
}

.depth-comparison {
  display: flex;
  gap: 1rem;
  align-items: center;
}

.depth-buffer, .depth-fragment {
  width: 50px;
  height: 50px;
  border-radius: 8px;
}

.depth-buffer {
  background: linear-gradient(135deg, #a0aec0, #718096);
  position: relative;

  &::after {
    content: 'æ·±åº¦å€¼: 0.5';
    position: absolute;
    bottom: -25px;
    left: 50%;
    transform: translateX(-50%);
    font-size: 0.75rem;
    color: #718096;
    white-space: nowrap;
  }
}

.depth-fragment {
  background: linear-gradient(135deg, #667eea, #764ba2);
  position: relative;

  &::after {
    content: 'æ·±åº¦å€¼: 0.3';
    position: absolute;
    bottom: -25px;
    left: 50%;
    transform: translateX(-50%);
    font-size: 0.75rem;
    color: #667eea;
    white-space: nowrap;
  }
}

.stencil-pattern {
  width: 80px;
  height: 50px;
  background:
    linear-gradient(45deg, #e2e8f0 25%, transparent 25%),
    linear-gradient(-45deg, #e2e8f0 25%, transparent 25%),
    linear-gradient(45deg, transparent 75%, #e2e8f0 75%),
    linear-gradient(-45deg, transparent 75%, #e2e8f0 75%);
  background-size: 20px 20px;
  background-position: 0 0, 0 10px, 10px -10px, -10px 0px;
  border: 2px solid #a0aec0;
}

.blending-demo {
  display: flex;
  align-items: center;
  gap: 0.5rem;

  .bg-color, .fg-color, .blended-color {
    width: 30px;
    height: 30px;
    border-radius: 4px;
  }

  .bg-color {
    background: #667eea;
  }

  .fg-color {
    background: rgba(237, 137, 54, 0.6);
  }

  .blended-color {
    background: #8b6bc7; // æ··åˆåçš„é¢œè‰²
  }

  &::before {
    content: '+';
    color: #718096;
  }

  &::after {
    content: '=';
    color: #718096;
  }
}

.final-output {
  margin-top: 2rem;

  h4 {
    color: #4a5568;
    margin-bottom: 0.75rem;
  }

  p {
    color: #718096;
    margin-bottom: 1.5rem;
  }
}

// æ€§èƒ½ä¼˜åŒ–
.optimization-tips {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
  gap: 1.5rem;
}

.tip-card {
  background: #f7fafc;
  border: 1px solid #e2e8f0;
  border-radius: 12px;
  padding: 1.5rem;
  text-align: center;
  transition: transform 0.2s ease;

  &:hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
  }

  .tip-icon {
    font-size: 2.5rem;
    margin-bottom: 1rem;
  }

  h3 {
    font-size: 1.125rem;
    font-weight: 600;
    color: #2d3748;
    margin: 0 0 0.75rem 0;
  }

  p {
    color: #718096;
    margin: 0;
    line-height: 1.5;
    font-size: 0.9rem;
  }
}

.page-footer {
  background: white;
  border-radius: 16px;
  padding: 2rem;
  margin-bottom: 2rem;
  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);

  .footer-content {
    text-align: center;
  }

  .footer-text {
    color: #4a5568;
    margin-bottom: 1.5rem;
    font-size: 1.05rem;
    line-height: 1.7;
  }

  .footer-links {
    display: flex;
    justify-content: center;
    gap: 2rem;
  }

  .footer-link {
    color: #667eea;
    text-decoration: none;
    font-weight: 600;
    transition: color 0.2s;

    &:hover {
      color: #5a67d8;
      text-decoration: underline;
    }
  }
}

// å“åº”å¼è®¾è®¡
@media (max-width: 768px) {
  .webgl-rendering {
    padding: 0 1rem;
  }

  .page-header .title {
    font-size: 2.25rem;
  }

  .pipeline-track {
    flex-direction: column;
    gap: 1rem;
    min-width: auto;

    &::before {
      display: none;
    }
  }

  .pipeline-stage .stage-connector {
    display: none;
  }

  .primitives-grid,
  .optimization-tips {
    grid-template-columns: 1fr;
  }

  .fragment-operations {
    grid-template-columns: 1fr;
  }

  .footer-links {
    flex-direction: column;
    gap: 1rem;
  }
}

// æ»šåŠ¨æ¡æ ·å¼
::-webkit-scrollbar {
  width: 6px;
  height: 6px;
}

::-webkit-scrollbar-track {
  background: #f1f1f1;
  border-radius: 3px;
}

::-webkit-scrollbar-thumb {
  background: #c1c1c1;
  border-radius: 3px;
}

::-webkit-scrollbar-thumb:hover {
  background: #a8a8a8;
}
</style>
