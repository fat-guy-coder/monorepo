<template>
  <div class="package-managers-comparison">
    <header class="header">
      <div class="header-content">
        <h1>npm vs Yarn vs pnpm æ·±åº¦å¯¹æ¯”</h1>
        <p>åŸºæœ¬è§£æä¸‰å¤§åŒ…ç®¡ç†å·¥å…·çš„æ ¸å¿ƒå·®å¼‚</p>
      </div>
      <div class="package-managers-icons">
        <div class="manager-icon" :class="{ active: activeManager === 'npm' }">
          <i class="fab fa-npm"></i>
          <span>npm</span>
        </div>
        <div class="manager-icon" :class="{ active: activeManager === 'yarn' }">
          <i class="fab fa-yarn"></i>
          <span>Yarn</span>
        </div>
        <div class="manager-icon" :class="{ active: activeManager === 'pnpm' }">
          <i class="fas fa-box"></i>
          <span>pnpm</span>
        </div>
      </div>
    </header>

    <div class="content-container">
      <aside class="sidebar">
        <nav>
          <ul>
            <li v-for="section in sections" :key="section.id">
              <a :href="`#${section.id}`" @click.prevent="scrollTo(section.id)"
                :class="{ active: activeSection === section.id }">
                <i :class="section.icon"></i>
                <span>{{ section.title }}</span>
              </a>
            </li>
          </ul>
        </nav>
        <div class="sidebar-footer">
          <div class="recommendation">
            <i class="fas fa-star"></i>
            <span>æ¨è: pnpm</span>
          </div>
        </div>
      </aside>

      <main class="main-content">
        <section id="overview" class="section">
          <div class="section-header">
            <i class="fas fa-list"></i>
            <h2>å·¥å…·æ¦‚è§ˆ</h2>
          </div>

          <div class="content-card">
            <div class="managers-overview">
              <div class="manager-card">
                <div class="manager-header">
                  <i class="fab fa-npm"></i>
                  <h3>npm</h3>
                </div>
                <div class="manager-info">
                  <p><strong>Node Package Manager</strong></p>
                  <p>Node.js çš„å®˜æ–¹åŒ…ç®¡ç†å™¨ï¼Œéš Node.js ä¸€èµ·å®‰è£…</p>
                  <div class="release-info">
                    <i class="fas fa-calendar-alt"></i>
                    <span>å‘å¸ƒäº 2010 å¹´</span>
                  </div>
                </div>
              </div>

              <div class="manager-card">
                <div class="manager-header">
                  <i class="fab fa-yarn"></i>
                  <h3>Yarn</h3>
                </div>
                <div class="manager-info">
                  <p><strong>Yet Another Resource Negotiator</strong></p>
                  <p>ç”± Facebook åˆ›å»ºï¼Œæ—¨åœ¨è§£å†³ npm çš„æ€§èƒ½å’Œå®‰å…¨é—®é¢˜</p>
                  <div class="release-info">
                    <i class="fas fa-calendar-alt"></i>
                    <span>å‘å¸ƒäº 2016 å¹´</span>
                  </div>
                </div>
              </div>

              <div class="manager-card">
                <div class="manager-header">
                  <i class="fas fa-box"></i>
                  <h3>pnpm</h3>
                </div>
                <div class="manager-info">
                  <p><strong>Performant npm</strong></p>
                  <p>ä¸“æ³¨äºæ€§èƒ½å’Œç£ç›˜ç©ºé—´æ•ˆç‡çš„åŒ…ç®¡ç†å™¨</p>
                  <div class="release-info">
                    <i class="fas fa-calendar-alt"></i>
                    <span>å‘å¸ƒäº 2017 å¹´</span>
                  </div>
                </div>
              </div>
            </div>

            <div class="key-differences">
              <h3>æ ¸å¿ƒå·®å¼‚æ¦‚è§ˆ</h3>
              <table class="differences-table">
                <thead>
                  <tr>
                    <th>ç‰¹æ€§</th>
                    <th>npm</th>
                    <th>Yarn</th>
                    <th>pnpm</th>
                  </tr>
                </thead>
                <tbody>
                  <tr v-for="diff in keyDiffs" :key="diff.feature">
                    <td>{{ diff.feature }}</td>
                    <td :class="{ 'highlight': diff.npm === 'âœ“' }">
                      <i v-if="diff.npm === 'âœ“'" class="fas fa-check"></i>
                      <i v-else-if="diff.npm === 'âœ—'" class="fas fa-times"></i>
                      <span v-else>{{ diff.npm }}</span>
                    </td>
                    <td :class="{ 'highlight': diff.yarn === 'âœ“' }">
                      <i v-if="diff.yarn === 'âœ“'" class="fas fa-check"></i>
                      <i v-else-if="diff.yarn === 'âœ—'" class="fas fa-times"></i>
                      <span v-else>{{ diff.yarn }}</span>
                    </td>
                    <td :class="{ 'highlight': diff.pnpm === 'âœ“' }">
                      <i v-if="diff.pnpm === 'âœ“'" class="fas fa-check"></i>
                      <i v-else-if="diff.pnpm === 'âœ—'" class="fas fa-times"></i>
                      <span v-else>{{ diff.pnpm }}</span>
                    </td>
                  </tr>
                </tbody>
              </table>
            </div>
          </div>
        </section>

        <section id="resolution" class="section">
          <div class="section-header">
            <i class="fas fa-search"></i>
            <h2>åŒ…è§£ææœºåˆ¶</h2>
          </div>

          <div class="content-card">
            <h3>åŒ…æŸ¥æ‰¾ä¸è§£æé€»è¾‘</h3>

            <div class="resolution-methods">
              <div class="method">
                <h4>npm</h4>
                <div class="method-description">
                  <p>ä½¿ç”¨åµŒå¥—çš„ node_modules ç»“æ„ï¼š</p>
                  <ul>
                    <li>æ¯ä¸ªåŒ…éƒ½æœ‰è‡ªå·±çš„ node_modules æ–‡ä»¶å¤¹</li>
                    <li>å¯èƒ½å¯¼è‡´æ·±å±‚åµŒå¥—å’Œé‡å¤ä¾èµ–</li>
                    <li>ä¾èµ–è§£æé¡ºåºå½±å“æœ€ç»ˆå®‰è£…ç»“æœ</li>
                  </ul>
                  <div class="folder-structure">
                    <div class="folder">node_modules</div>
                    <div class="folder nested">
                      <div>packageA</div>
                      <div class="folder">node_modules</div>
                    </div>
                    <div class="folder nested">
                      <div>packageB</div>
                      <div class="folder">node_modules</div>
                    </div>
                  </div>
                </div>
              </div>

              <div class="method">
                <h4>Yarn</h4>
                <div class="method-description">
                  <p>ä½¿ç”¨æ‰å¹³åŒ– node_modulesï¼š</p>
                  <ul>
                    <li>å°†ä¾èµ–æå‡åˆ°é¡¶å±‚ node_modules</li>
                    <li>å‡å°‘åµŒå¥—æ·±åº¦</li>
                    <li>å¯èƒ½å¼•å…¥å¹»å½±ä¾èµ–é—®é¢˜</li>
                  </ul>
                  <div class="folder-structure flat">
                    <div class="folder">node_modules</div>
                    <div class="folder-content">
                      <div>packageA</div>
                      <div>packageB</div>
                      <div>shared-dep</div>
                    </div>
                  </div>
                </div>
              </div>

              <div class="method">
                <h4>pnpm</h4>
                <div class="method-description">
                  <p>ä½¿ç”¨å†…å®¹å¯»å€å­˜å‚¨å’Œç¬¦å·é“¾æ¥ï¼š</p>
                  <ul>
                    <li>æ‰€æœ‰åŒ…å­˜å‚¨åœ¨å…¨å±€å­˜å‚¨ä¸­</li>
                    <li>é¡¹ç›® node_modules ä½¿ç”¨ç¬¦å·é“¾æ¥</li>
                    <li>é¿å…ä¾èµ–é‡å¤å’Œå¹»å½±ä¾èµ–</li>
                  </ul>
                  <div class="folder-structure">
                    <div class="folder">node_modules</div>
                    <div class="folder nested">
                      <div>.pnpm</div>
                      <div class="folder">å­˜å‚¨æ‰€æœ‰ä¾èµ–</div>
                    </div>
                    <div class="folder nested">
                      <div>packageA</div>
                      <div class="link">â†’ å…¨å±€å­˜å‚¨</div>
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <div class="resolution-pros-cons">
              <h3>åŒ…è§£æä¼˜ç¼ºç‚¹å¯¹æ¯”</h3>
              <div class="pros-cons-grid">
                <div class="pros-cons">
                  <h4>npm</h4>
                  <div class="pros">
                    <h5>ä¼˜ç‚¹</h5>
                    <ul>
                      <li>ä¸ Node.js åŸç”Ÿé›†æˆ</li>
                      <li>æœ€å¹¿æ³›çš„å…¼å®¹æ€§</li>
                    </ul>
                  </div>
                  <div class="cons">
                    <h5>ç¼ºç‚¹</h5>
                    <ul>
                      <li>æ·±å±‚åµŒå¥—ç»“æ„</li>
                      <li>ä¾èµ–é‡å¤é—®é¢˜</li>
                      <li>å®‰è£…é€Ÿåº¦è¾ƒæ…¢</li>
                    </ul>
                  </div>
                </div>

                <div class="pros-cons">
                  <h4>Yarn</h4>
                  <div class="pros">
                    <h5>ä¼˜ç‚¹</h5>
                    <ul>
                      <li>æ‰å¹³ç»“æ„å‡å°‘åµŒå¥—</li>
                      <li>ç¡®å®šæ€§å®‰è£…ï¼ˆyarn.lockï¼‰</li>
                      <li>æ›´å¥½çš„æ€§èƒ½</li>
                    </ul>
                  </div>
                  <div class="cons">
                    <h5>ç¼ºç‚¹</h5>
                    <ul>
                      <li>å¹»å½±ä¾èµ–é—®é¢˜</li>
                      <li>å¯èƒ½å¼•å…¥ä¸å…¼å®¹ç‰ˆæœ¬</li>
                    </ul>
                  </div>
                </div>

                <div class="pros-cons">
                  <h4>pnpm</h4>
                  <div class="pros">
                    <h5>ä¼˜ç‚¹</h5>
                    <ul>
                      <li>æ˜¾è‘—çš„ç£ç›˜ç©ºé—´èŠ‚çœ</li>
                      <li>æå¿«çš„å®‰è£…é€Ÿåº¦</li>
                      <li>ä¸¥æ ¼çš„ä¾èµ–éš”ç¦»</li>
                    </ul>
                  </div>
                  <div class="cons">
                    <h5>ç¼ºç‚¹</h5>
                    <ul>
                      <li>æŸäº›å·¥å…·å…¼å®¹æ€§é—®é¢˜</li>
                      <li>ç¬¦å·é“¾æ¥å¯èƒ½å¯¼è‡´é—®é¢˜</li>
                    </ul>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </section>

        <section id="performance" class="section">
          <div class="section-header">
            <i class="fas fa-tachometer-alt"></i>
            <h2>æ€§èƒ½å¯¹æ¯”</h2>
          </div>

          <div class="content-card">
            <h3>å®‰è£…é€Ÿåº¦ä¸ç£ç›˜ä½¿ç”¨</h3>

            <div class="performance-charts">
              <div class="chart">
                <h4>å®‰è£…æ—¶é—´å¯¹æ¯” (ç§’)</h4>
                <div class="chart-bars">
                  <div class="bar-container">
                    <div class="bar-label">npm</div>
                    <div class="bar" :style="{ width: '100%' }">
                      <span class="bar-value">42s</span>
                    </div>
                  </div>
                  <div class="bar-container">
                    <div class="bar-label">Yarn</div>
                    <div class="bar" :style="{ width: '65%' }">
                      <span class="bar-value">27s</span>
                    </div>
                  </div>
                  <div class="bar-container">
                    <div class="bar-label">pnpm</div>
                    <div class="bar" :style="{ width: '35%' }">
                      <span class="bar-value">15s</span>
                    </div>
                  </div>
                </div>
              </div>

              <div class="chart">
                <h4>ç£ç›˜ç©ºé—´ä½¿ç”¨ (MB)</h4>
                <div class="chart-bars">
                  <div class="bar-container">
                    <div class="bar-label">npm</div>
                    <div class="bar" :style="{ width: '100%' }">
                      <span class="bar-value">320MB</span>
                    </div>
                  </div>
                  <div class="bar-container">
                    <div class="bar-label">Yarn</div>
                    <div class="bar" :style="{ width: '95%' }">
                      <span class="bar-value">305MB</span>
                    </div>
                  </div>
                  <div class="bar-container">
                    <div class="bar-label">pnpm</div>
                    <div class="bar" :style="{ width: '40%' }">
                      <span class="bar-value">128MB</span>
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <div class="performance-factors">
              <h3>æ€§èƒ½å…³é”®å› ç´ </h3>
              <div class="factors-grid">
                <div class="factor">
                  <div class="factor-icon">
                    <i class="fas fa-hdd"></i>
                  </div>
                  <div class="factor-content">
                    <h4>ç£ç›˜ I/O</h4>
                    <p>pnpm ä½¿ç”¨ç¡¬é“¾æ¥å‡å°‘æ–‡ä»¶å¤åˆ¶æ“ä½œ</p>
                  </div>
                </div>

                <div class="factor">
                  <div class="factor-icon">
                    <i class="fas fa-network-wired"></i>
                  </div>
                  <div class="factor-content">
                    <h4>å¹¶è¡Œä¸‹è½½</h4>
                    <p>Yarn å’Œ pnpm æ”¯æŒå¹¶è¡Œä¸‹è½½åŒ…</p>
                  </div>
                </div>

                <div class="factor">
                  <div class="factor-icon">
                    <i class="fas fa-archive"></i>
                  </div>
                  <div class="factor-content">
                    <h4>å…¨å±€å­˜å‚¨</h4>
                    <p>pnpm çš„å…¨å±€å­˜å‚¨é¿å…é‡å¤ä¸‹è½½ç›¸åŒåŒ…</p>
                  </div>
                </div>

                <div class="factor">
                  <div class="factor-icon">
                    <i class="fas fa-file-contract"></i>
                  </div>
                  <div class="factor-content">
                    <h4>é”å®šæ–‡ä»¶</h4>
                    <p>Yarn å’Œ pnpm æœ‰æ›´å¿«çš„é”å®šæ–‡ä»¶è§£æ</p>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </section>

        <section id="phantom" class="section">
          <div class="section-header">
            <i class="fas fa-ghost"></i>
            <h2>å¹»å½±ä¾èµ–</h2>
          </div>

          <div class="content-card">
            <h3>å¹»å½±ä¾èµ–é—®é¢˜è§£æ</h3>

            <div class="dependency-management">
              <div class="dependency-model">
                <h4>ä»€ä¹ˆæ˜¯å¹»å½±ä¾èµ–?</h4>
                <div class="model-description">
                  <p>å¹»å½±ä¾èµ–(Phantom Dependencies)æ˜¯æŒ‡:</p>
                  <ul>
                    <li>é¡¹ç›®ä¸­ä½¿ç”¨äº†æœªåœ¨ package.json ä¸­å£°æ˜çš„ä¾èµ–</li>
                    <li>è¿™äº›ä¾èµ–æ˜¯å…¶ä»–åŒ…çš„ä¾èµ–é¡¹è¢«æå‡åˆ°é¡¶å±‚å¯¼è‡´çš„</li>
                    <li>å¯èƒ½å¯¼è‡´é¡¹ç›®åœ¨ä¸åŒç¯å¢ƒä¸‹è¡¨ç°ä¸ä¸€è‡´</li>
                  </ul>
                </div>
              </div>

              <div class="dependency-model">
                <h4>å„åŒ…ç®¡ç†å™¨çš„å¤„ç†</h4>
                <div class="model-description">
                  <p>ä¸åŒåŒ…ç®¡ç†å™¨çš„åº”å¯¹æ–¹æ¡ˆ:</p>
                  <ul>
                    <li>npm/Yarn: æ‰å¹³åŒ–å¤„ç†å¯¼è‡´å¹»å½±ä¾èµ–é—®é¢˜</li>
                    <li>pnpm: ä¸¥æ ¼çš„ä¾èµ–éš”ç¦»é¿å…å¹»å½±ä¾èµ–</li>
                    <li>å»ºè®®: å§‹ç»ˆåœ¨ package.json ä¸­æ˜¾å¼å£°æ˜æ‰€æœ‰ä¾èµ–</li>
                  </ul>
                </div>
              </div>

              <div class="dependency-model">
                <h4>æœ€ä½³å®è·µ</h4>
                <div class="model-description">
                  <p>é¿å…å¹»å½±ä¾èµ–çš„æ–¹æ³•:</p>
                  <ul>
                    <li>ä½¿ç”¨ pnpm çš„ä¸¥æ ¼æ¨¡å¼</li>
                    <li>å®šæœŸå®¡æŸ¥å’Œæ¸…ç†ä¾èµ–</li>
                    <li>ä½¿ç”¨ä¾èµ–æ£€æŸ¥å·¥å…·</li>
                    <li>åœ¨ CI/CD ä¸­è¿›è¡Œä¾èµ–éªŒè¯</li>
                  </ul>
                </div>
              </div>
            </div>
          </div>
        </section>

        <section id="dependencies" class="section">
          <div class="section-header">
            <i class="fas fa-code-branch"></i>
            <h2>ä¾èµ–ç®¡ç†</h2>
          </div>

          <div class="content-card">
            <h3>ä¾èµ–å¤„ç†æœºåˆ¶å¯¹æ¯”</h3>

            <div class="dependency-management">
              <div class="dependency-model">
                <h4>npm</h4>
                <div class="model-description">
                  <p>åµŒå¥—ä¾èµ–æ ‘ï¼š</p>
                  <ul>
                    <li>æ¯ä¸ªåŒ…éƒ½æœ‰è‡ªå·±çš„ node_modules</li>
                    <li>å¯èƒ½å¯¼è‡´å¤šä¸ªåŒ…ç‰ˆæœ¬é‡å¤</li>
                    <li>ä¾èµ–æ ‘å¯èƒ½éå¸¸æ·±</li>
                  </ul>
                  <div class="tree-structure">
                    <div class="tree-node">packageA</div>
                    <div class="tree-children">
                      <div class="tree-node">dep@1.0.0</div>
                      <div class="tree-node">packageB</div>
                      <div class="tree-children">
                        <div class="tree-node">dep@1.0.0</div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>

              <div class="dependency-model">
                <h4>Yarn</h4>
                <div class="model-description">
                  <p>æ‰å¹³åŒ–ä¾èµ–ï¼š</p>
                  <ul>
                    <li>æå‡ä¾èµ–åˆ°é¡¶å±‚ node_modules</li>
                    <li>è§£å†³é‡å¤é—®é¢˜ä½†å¯èƒ½å¼•å…¥ç‰ˆæœ¬å†²çª</li>
                    <li>ä½¿ç”¨ç¡®å®šæ€§ç®—æ³•è§£å†³ä¾èµ–</li>
                  </ul>
                  <div class="tree-structure flat">
                    <div class="tree-node">packageA</div>
                    <div class="tree-node">packageB</div>
                    <div class="tree-node">dep@1.0.0</div>
                  </div>
                </div>
              </div>

              <div class="dependency-model">
                <h4>pnpm</h4>
                <div class="model-description">
                  <p>å†…å®¹å¯»å€å­˜å‚¨ï¼š</p>
                  <ul>
                    <li>æ‰€æœ‰åŒ…å­˜å‚¨åœ¨å…¨å±€ ~/.pnpm-store</li>
                    <li>é¡¹ç›®ä¸­ä½¿ç”¨ç¡¬é“¾æ¥å’Œç¬¦å·é“¾æ¥</li>
                    <li>æ¯ä¸ªåŒ…åªå®‰è£…ä¸€æ¬¡ï¼ŒèŠ‚çœç©ºé—´</li>
                  </ul>
                  <div class="tree-structure">
                    <div class="tree-node">packageA</div>
                    <div class="tree-link">â†’ dep@1.0.0</div>
                    <div class="tree-node">packageB</div>
                    <div class="tree-link">â†’ dep@1.0.0</div>
                    <div class="tree-store">å…¨å±€å­˜å‚¨</div>
                  </div>
                </div>
              </div>
            </div>

            <div class="dependency-features">
              <h3>é«˜çº§ä¾èµ–ç®¡ç†ç‰¹æ€§</h3>
              <table class="features-table">
                <thead>
                  <tr>
                    <th>ç‰¹æ€§</th>
                    <th>npm</th>
                    <th>Yarn</th>
                    <th>pnpm</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td>é”å®šæ–‡ä»¶</td>
                    <td>package-lock.json</td>
                    <td>yarn.lock</td>
                    <td>pnpm-lock.yaml</td>
                  </tr>
                  <tr>
                    <td>å·¥ä½œåŒºæ”¯æŒ</td>
                    <td>âœ“ (v7+)</td>
                    <td>âœ“</td>
                    <td>âœ“</td>
                  </tr>
                  <tr>
                    <td>ç¦»çº¿æ¨¡å¼</td>
                    <td>âœ“</td>
                    <td>âœ“</td>
                    <td>âœ“</td>
                  </tr>
                  <tr>
                    <td>é€‰æ‹©æ€§ä¾èµ–è§£æ</td>
                    <td>âœ—</td>
                    <td>âœ“</td>
                    <td>âœ“</td>
                  </tr>
                  <tr>
                    <td>ä¸¥æ ¼ä¾èµ–éš”ç¦»</td>
                    <td>âœ—</td>
                    <td>âœ—</td>
                    <td>âœ“</td>
                  </tr>
                </tbody>
              </table>
            </div>

            <div class="hard-link-and-symbol-link">
              <h3>ç¡¬é“¾æ¥å’Œç¬¦å·é“¾æ¥</h3>
              <p>ç¡¬é“¾æ¥å’Œç¬¦å·é“¾æ¥æ˜¯åŒ…ç®¡ç†å™¨ä¸­å¸¸ç”¨çš„ä¸¤ç§é“¾æ¥æ–¹å¼ã€‚</p>
              <p>ç¡¬é“¾æ¥æ˜¯ç›´æ¥å°†æ–‡ä»¶å¤åˆ¶åˆ°ç›®æ ‡ä½ç½®ï¼Œè€Œç¬¦å·é“¾æ¥æ˜¯åˆ›å»ºä¸€ä¸ªæŒ‡å‘æºæ–‡ä»¶çš„é“¾æ¥ã€‚</p>
              <p>ç¡¬é“¾æ¥å’Œç¬¦å·é“¾æ¥çš„åŒºåˆ«åœ¨äºï¼Œç¡¬é“¾æ¥æ˜¯ç›´æ¥å°†æ–‡ä»¶å¤åˆ¶åˆ°ç›®æ ‡ä½ç½®ï¼Œè€Œç¬¦å·é“¾æ¥æ˜¯åˆ›å»ºä¸€ä¸ªæŒ‡å‘æºæ–‡ä»¶çš„é“¾æ¥ã€‚</p>
            </div>
          </div>
        </section>

        <section id="ecosystem" class="section">
          <div class="section-header">
            <i class="fas fa-globe"></i>
            <h2>ç”Ÿæ€ç³»ç»Ÿä¸å…¼å®¹æ€§</h2>
          </div>

          <div class="content-card">
            <h3>ç”Ÿæ€ç³»ç»Ÿæ”¯æŒ</h3>

            <div class="ecosystem-support">
              <div class="support-card">
                <div class="support-header">
                  <i class="fab fa-npm"></i>
                  <h4>npm</h4>
                </div>
                <div class="support-content">
                  <ul>
                    <li><i class="fas fa-check"></i> å®˜æ–¹åŒ…ç®¡ç†å™¨ï¼Œ100% å…¼å®¹</li>
                    <li><i class="fas fa-check"></i> æœ€å¤§è§„æ¨¡çš„åŒ…ç”Ÿæ€ç³»ç»Ÿ</li>
                    <li><i class="fas fa-check"></i> æ‰€æœ‰å·¥å…·åŸç”Ÿæ”¯æŒ</li>
                    <li><i class="fas fa-times"></i> æŸäº›é«˜çº§åŠŸèƒ½ç¼ºå¤±</li>
                  </ul>
                </div>
              </div>

              <div class="support-card">
                <div class="support-header">
                  <i class="fab fa-yarn"></i>
                  <h4>Yarn</h4>
                </div>
                <div class="support-content">
                  <ul>
                    <li><i class="fas fa-check"></i> å¹¿æ³›é‡‡ç”¨çš„æ›¿ä»£æ–¹æ¡ˆ</li>
                    <li><i class="fas fa-check"></i> ä¸ npm ç”Ÿæ€ç³»ç»Ÿé«˜åº¦å…¼å®¹</li>
                    <li><i class="fas fa-check"></i> è‰¯å¥½çš„å·¥å…·æ”¯æŒ</li>
                    <li><i class="fas fa-times"></i> æŸäº›è¾¹ç¼˜æƒ…å†µå¯èƒ½å­˜åœ¨å…¼å®¹æ€§é—®é¢˜</li>
                  </ul>
                </div>
              </div>

              <div class="support-card">
                <div class="support-header">
                  <i class="fas fa-box"></i>
                  <h4>pnpm</h4>
                </div>
                <div class="support-content">
                  <ul>
                    <li><i class="fas fa-check"></i> å…¼å®¹ npm åŒ…ç”Ÿæ€ç³»ç»Ÿ</li>
                    <li><i class="fas fa-check"></i> æ”¯æŒ package.json å’Œ npm å‘½ä»¤</li>
                    <li><i class="fas fa-times"></i> æŸäº›å·¥å…·å¯èƒ½ä¸å…¼å®¹ç¬¦å·é“¾æ¥</li>
                    <li><i class="fas fa-times"></i> æ—§ç‰ˆ Node.js æ”¯æŒæœ‰é™</li>
                  </ul>
                </div>
              </div>
            </div>

            <div class="compatibility-table">
              <h3>å·¥å…·å…¼å®¹æ€§å¯¹æ¯”</h3>
              <table>
                <thead>
                  <tr>
                    <th>å·¥å…·/ç¯å¢ƒ</th>
                    <th>npm</th>
                    <th>Yarn</th>
                    <th>pnpm</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td>Node.js</td>
                    <td><i class="fas fa-check"></i> å®Œç¾æ”¯æŒ</td>
                    <td><i class="fas fa-check"></i> å®Œç¾æ”¯æŒ</td>
                    <td><i class="fas fa-check"></i> éœ€è¦ Node.js 12+</td>
                  </tr>
                  <tr>
                    <td>React/Vue/Angular</td>
                    <td><i class="fas fa-check"></i> æ”¯æŒ</td>
                    <td><i class="fas fa-check"></i> æ”¯æŒ</td>
                    <td><i class="fas fa-check"></i> æ”¯æŒ</td>
                  </tr>
                  <tr>
                    <td>Docker</td>
                    <td><i class="fas fa-check"></i> æ”¯æŒ</td>
                    <td><i class="fas fa-check"></i> æ”¯æŒ</td>
                    <td><i class="fas fa-check"></i> éœ€è¦é¢å¤–é…ç½®</td>
                  </tr>
                  <tr>
                    <td>CI/CD ç³»ç»Ÿ</td>
                    <td><i class="fas fa-check"></i> å…¨é¢æ”¯æŒ</td>
                    <td><i class="fas fa-check"></i> å…¨é¢æ”¯æŒ</td>
                    <td><i class="fas fa-check"></i> å¤§å¤šæ•°æ”¯æŒ</td>
                  </tr>
                  <tr>
                    <td>Heroku/Vercel</td>
                    <td><i class="fas fa-check"></i> åŸç”Ÿæ”¯æŒ</td>
                    <td><i class="fas fa-check"></i> åŸç”Ÿæ”¯æŒ</td>
                    <td><i class="fas fa-check"></i> éœ€è¦é…ç½®</td>
                  </tr>
                </tbody>
              </table>
            </div>
          </div>
        </section>

        <section id="conclusion" class="section">
          <div class="section-header">
            <i class="fas fa-flag-checkered"></i>
            <h2>æ€»ç»“ä¸æ¨è</h2>
          </div>

          <div class="content-card">
            <div class="final-comparison">
              <h3>åœºæ™¯åŒ–æ¨è</h3>
              <div class="recommendations">
                <div class="recommendation">
                  <h4>æ–°é¡¹ç›®</h4>
                  <p><i class="fas fa-star"></i> æ¨è pnpmï¼šæ€§èƒ½ä¼˜å¼‚ï¼ŒèŠ‚çœç£ç›˜ç©ºé—´</p>
                  <div class="code-block">
                    <pre><code>npm install -g pnpm
pnpm create vite@latest my-project</code></pre>
                  </div>
                </div>

                <div class="recommendation">
                  <h4>å¤§å‹é¡¹ç›®/Monorepo</h4>
                  <p><i class="fas fa-star"></i> æ¨è pnpm æˆ– Yarnï¼šä¼˜ç§€çš„å·¥ä½œåŒºæ”¯æŒ</p>
                  <div class="code-block">
                    <pre><code># pnpm
pnpm init

# Yarn
yarn init -w</code></pre>
                  </div>
                </div>

                <div class="recommendation">
                  <h4>å…¼å®¹æ€§ä¼˜å…ˆ</h4>
                  <p><i class="fas fa-star"></i> æ¨è npmï¼šæœ€å¹¿æ³›çš„å…¼å®¹æ€§</p>
                  <div class="code-block">
                    <pre><code>npm init
npm install</code></pre>
                  </div>
                </div>
              </div>

              <div class="migration-tips">
                <h3>è¿ç§»æŒ‡å—</h3>
                <div class="tips">
                  <div class="tip">
                    <h4>npm â†’ Yarn</h4>
                    <ol>
                      <li>åˆ é™¤ node_modules å’Œ package-lock.json</li>
                      <li>å®‰è£… Yarn: <code>npm install -g yarn</code></li>
                      <li>è¿è¡Œ <code>yarn install</code></li>
                    </ol>
                  </div>

                  <div class="tip">
                    <h4>npm/Yarn â†’ pnpm</h4>
                    <ol>
                      <li>åˆ é™¤ node_modules å’Œ lock æ–‡ä»¶</li>
                      <li>å®‰è£… pnpm: <code>npm install -g pnpm</code></li>
                      <li>è¿è¡Œ <code>pnpm import</code> è¿ç§» lock æ–‡ä»¶</li>
                      <li>è¿è¡Œ <code>pnpm install</code></li>
                    </ol>
                  </div>
                </div>
              </div>

              <div class="final-verdict">
                <h3>æœ€ç»ˆç»“è®º</h3>
                <div class="verdict-content">
                  <div class="verdict-card">
                    <i class="fas fa-crown"></i>
                    <h4>æ€§èƒ½ç‹è€…</h4>
                    <p>pnpm - æœ€å¿«çš„å®‰è£…é€Ÿåº¦å’Œæœ€å°çš„ç£ç›˜å ç”¨</p>
                  </div>

                  <div class="verdict-card">
                    <i class="fas fa-balance-scale"></i>
                    <h4>å¹³è¡¡ä¹‹é€‰</h4>
                    <p>Yarn - æˆç†Ÿç¨³å®šï¼ŒåŠŸèƒ½ä¸°å¯Œ</p>
                  </div>

                  <div class="verdict-card">
                    <i class="fas fa-shield-alt"></i>
                    <h4>å®‰å…¨é€‰æ‹©</h4>
                    <p>npm - å®˜æ–¹æ”¯æŒï¼Œæœ€ä½³å…¼å®¹æ€§</p>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </section>
      </main>
    </div>

    <footer class="footer">
      <p>npm vs Yarn vs pnpm æ·±åº¦å¯¹æ¯” | Vue3 + TypeScript å®ç°</p>
      <p> å‰ç«¯å·¥ç¨‹åŒ–ç ”ç©¶</p>
    </footer>
  </div>
</template>

<script setup lang="ts">
import { ref, onMounted, onBeforeUnmount } from 'vue';

// æ´»åŠ¨å¯¼èˆªé¡¹
const activeSection = ref('overview');
const activeManager = ref('pnpm');

// å¯¼èˆªéƒ¨åˆ†
const sections = ref([
  { id: 'overview', title: 'æ¦‚è§ˆ', icon: 'fas fa-list' },
  { id: 'resolution', title: 'åŒ…è§£æ', icon: 'fas fa-search' },
  { id: 'performance', title: 'æ€§èƒ½', icon: 'fas fa-tachometer-alt' },
  { id: 'dependencies', title: 'ä¾èµ–ç®¡ç†', icon: 'fas fa-code-branch' },
  { id: 'ecosystem', title: 'ç”Ÿæ€ç³»ç»Ÿ', icon: 'fas fa-globe' },
  { id: 'conclusion', title: 'æ€»ç»“', icon: 'fas fa-flag-checkered' }
]);

// å…³é”®å·®å¼‚æ•°æ®
const keyDiffs = ref([
  { feature: 'å®‰è£…é€Ÿåº¦', npm: 'æ…¢', yarn: 'å¿«', pnpm: 'æå¿«' },
  { feature: 'ç£ç›˜ç©ºé—´', npm: 'é«˜', yarn: 'é«˜', pnpm: 'æä½' },
  { feature: 'é”å®šæ–‡ä»¶', npm: 'âœ“', yarn: 'âœ“', pnpm: 'âœ“' },
  { feature: 'ç¦»çº¿æ¨¡å¼', npm: 'âœ“', yarn: 'âœ“', pnpm: 'âœ“' },
  { feature: 'å·¥ä½œåŒºæ”¯æŒ', npm: 'âœ“', yarn: 'âœ“', pnpm: 'âœ“' },
  { feature: 'å®‰å…¨å®¡è®¡', npm: 'âœ“', yarn: 'âœ“', pnpm: 'âœ“' },
  { feature: 'ä¸¥æ ¼ä¾èµ–éš”ç¦»', npm: 'âœ—', yarn: 'âœ—', pnpm: 'âœ“' },
  { feature: 'ç¬¦å·é“¾æ¥', npm: 'âœ—', yarn: 'âœ—', pnpm: 'âœ“' },
  { feature: 'å…¨å±€å­˜å‚¨', npm: 'âœ—', yarn: 'âœ—', pnpm: 'âœ“' }
]);

// æ»šåŠ¨ç›‘å¬
const handleScroll = () => {
  const sectionElements = sections.value.map(s =>
    document.getElementById(s.id)
  ).filter(Boolean) as HTMLElement[];

  const scrollPosition = window.scrollY + 100;

  sectionElements.forEach(section => {
    const sectionTop = section.offsetTop;
    const sectionHeight = section.offsetHeight;

    if (scrollPosition >= sectionTop &&
      scrollPosition < sectionTop + sectionHeight) {
      activeSection.value = section.id;
    }
  });
};

// æ»šåŠ¨åˆ°æŒ‡å®šåŒºåŸŸ
const scrollTo = (id: string) => {
  const element = document.getElementById(id);
  if (element) {
    element.scrollIntoView({ behavior: 'smooth' });
    activeSection.value = id;
  }
};

// ç”Ÿå‘½å‘¨æœŸé’©å­
onMounted(() => {
  window.addEventListener('scroll', handleScroll);
  handleScroll();
});

onBeforeUnmount(() => {
  window.removeEventListener('scroll', handleScroll);
});
</script>

<style lang="less" scoped>



// å˜é‡å®šä¹‰
@primary-color: #4361ee;
@secondary-color: #3a0ca3;
@accent-color: #4cc9f0;
@text-color: #2b2d42;
@light-bg: #f8f9fa;
@border-color: #e9ecef;
@card-shadow: 0 5px 20px rgba(0, 0, 0, 0.08);
@sidebar-width: 280px;

// åŸºç¡€æ ·å¼
* {
  box-sizing: border-box;
  margin: 0;
  padding: 0;
}

body {
  font-family: 'Roboto', sans-serif;
  color: @text-color;
  line-height: 1.6;
  background-color: #f0f2f5;
  overflow-x: hidden;
}

.package-managers-comparison {
  display: flex;
  flex-direction: column;
  min-height: 100vh;
  max-width: 1600px;
  margin: 0 auto;
  background: white;
  box-shadow: 0 0 40px rgba(0, 0, 0, 0.1);
}

// é¡µçœ‰æ ·å¼
.header {
  background: linear-gradient(135deg, darken(@secondary-color, 10%), @primary-color);
  color: white;
  padding: 3rem 2rem;
  position: relative;
  overflow: hidden;

  .header-content {
    max-width: 800px;
    margin: 0 auto 2rem;
    text-align: center;
    z-index: 2;
    position: relative;

    h1 {
      font-size: 2.6rem;
      margin-bottom: 1rem;
    }

    p {
      font-size: 1.3rem;
      opacity: 0.9;
    }
  }
}

.package-managers-icons {
  display: flex;
  justify-content: center;
  gap: 3rem;
  margin-top: 1rem;

  .manager-icon {
    display: flex;
    flex-direction: column;
    align-items: center;
    opacity: 0.7;
    transition: all 0.3s;
    cursor: pointer;

    i {
      font-size: 3.5rem;
      margin-bottom: 0.5rem;
    }

    span {
      font-size: 1.1rem;
      font-weight: 500;
    }

    &.active {
      opacity: 1;
      transform: scale(1.1);

      &.npm i {
        color: #cb3837;
      }

      &.yarn i {
        color: #2c8ebb;
      }

      &.pnpm i {
        color: #f69220;
      }
    }

    &:hover {
      opacity: 1;
    }
  }
}

// å†…å®¹å¸ƒå±€
.content-container {
  display: flex;
  flex: 1;
}

.sidebar {
  width: @sidebar-width;
  background: @light-bg;
  border-right: 1px solid @border-color;
  padding: 1.5rem 0;
  display: flex;
  flex-direction: column;
  position: sticky;
  top: 0;
  height: calc(100vh - 80px);

  nav ul {
    list-style: none;
    flex: 1;

    li {
      margin-bottom: 0.3rem;
    }

    a {
      display: flex;
      align-items: center;
      padding: 0.9rem 1.5rem;
      text-decoration: none;
      color: @text-color;
      font-weight: 500;
      transition: all 0.3s ease;
      border-left: 4px solid transparent;

      i {
        font-size: 1.1rem;
        width: 25px;
        margin-right: 0.8rem;
      }

      &:hover {
        background: rgba(@primary-color, 0.05);
        color: @primary-color;
      }

      &.active {
        background: rgba(@primary-color, 0.1);
        color: @primary-color;
        border-left: 4px solid @primary-color;
        font-weight: 600;
      }
    }
  }
}

.sidebar-footer {
  padding: 1rem;
  border-top: 1px solid @border-color;

  .recommendation {
    display: flex;
    align-items: center;
    background: rgba(@accent-color, 0.1);
    padding: 0.5rem 1rem;
    border-radius: 20px;
    color: darken(@accent-color, 20%);
    font-weight: 500;

    i {
      font-size: 1.2rem;
      color: @accent-color;
      margin-right: 0.7rem;
    }
  }
}

.main-content {
  flex: 1;
  padding: 2rem 3rem;
  overflow-y: auto;
}

// ç« èŠ‚æ ·å¼
.section {
  margin-bottom: 3rem;

  .section-header {
    display: flex;
    align-items: center;
    margin-bottom: 1.5rem;

    i {
      font-size: 1.8rem;
      color: @primary-color;
      margin-right: 1rem;
    }

    h2 {
      font-size: 1.8rem;
      color: @secondary-color;
    }
  }
}

.content-card {
  background: white;
  border-radius: 12px;
  padding: 2rem;
  box-shadow: @card-shadow;
  margin-bottom: 2rem;
  border: 1px solid @border-color;

  h3 {
    font-size: 1.4rem;
    margin: 1.5rem 0 1rem;
    color: @primary-color;
    padding-bottom: 0.5rem;
    border-bottom: 1px solid @border-color;
  }

  h4 {
    font-size: 1.2rem;
    margin: 1.2rem 0 0.8rem;
    color: darken(@text-color, 10%);
  }

  p {
    margin-bottom: 1rem;
    line-height: 1.7;
  }
}

// ç®¡ç†å™¨å¡ç‰‡
.managers-overview {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
  gap: 1.5rem;
  margin: 1.5rem 0;

  .manager-card {
    background: #f9f9f9;
    border-radius: 10px;
    overflow: hidden;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
    border: 1px solid @border-color;
    transition: transform 0.3s;

    &:hover {
      transform: translateY(-5px);
    }

    .manager-header {
      display: flex;
      align-items: center;
      padding: 1.5rem;
      background: rgba(@primary-color, 0.05);

      i {
        font-size: 2.5rem;
        margin-right: 1rem;

        &.fa-npm {
          color: #cb3837;
        }

        &.fa-yarn {
          color: #2c8ebb;
        }

        &.fa-box {
          color: #f69220;
        }
      }

      h3 {
        margin: 0;
        font-size: 1.5rem;
      }
    }

    .manager-info {
      padding: 1.5rem;

      .release-info {
        display: flex;
        align-items: center;
        margin-top: 1rem;
        color: #6c757d;

        i {
          margin-right: 0.5rem;
        }
      }
    }
  }
}

// å·®å¼‚è¡¨æ ¼
.differences-table {
  width: 100%;
  border-collapse: collapse;
  margin: 1.5rem 0;

  th,
  td {
    padding: 1rem;
    text-align: left;
    border-bottom: 1px solid @border-color;
  }

  th {
    background: @light-bg;
    font-weight: 600;
  }

  tr:hover {
    background: rgba(@primary-color, 0.03);
  }

  .highlight {
    font-weight: bold;
    color: @primary-color;
  }

  .fa-check {
    color: #28a745;
  }

  .fa-times {
    color: #dc3545;
  }
}

// è§£ææ–¹æ³•
.resolution-methods {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
  gap: 1.5rem;
  margin: 1.5rem 0;

  .method {
    background: #f9f9f9;
    border-radius: 8px;
    padding: 1.5rem;
    border: 1px solid @border-color;

    h4 {
      margin-top: 0;
      padding-bottom: 0.5rem;
      border-bottom: 1px solid @border-color;
    }
  }
}

// æ–‡ä»¶å¤¹ç»“æ„å¯è§†åŒ–
.folder-structure {
  margin-top: 1rem;
  font-family: 'Source Code Pro', monospace;
  font-size: 0.9rem;

  .folder {
    background: #e9ecef;
    padding: 0.5rem;
    border-radius: 4px;
    margin-bottom: 0.3rem;
    position: relative;

    &::before {
      content: 'ğŸ“';
      margin-right: 0.5rem;
    }
  }

  .nested {
    margin-left: 1.5rem;
    position: relative;

    &::before {
      content: '';
      position: absolute;
      left: -10px;
      top: 0;
      height: 100%;
      width: 2px;
      background: #dee2e6;
    }
  }

  .link::before {
    content: 'ğŸ”—';
    margin-right: 0.5rem;
  }

  .tree-store {
    background: #d4edda;
    padding: 0.5rem;
    border-radius: 4px;
    margin-top: 0.5rem;
    text-align: center;
  }
}

// æ€§èƒ½å›¾è¡¨
.performance-charts {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
  gap: 2rem;
  margin: 2rem 0;

  .chart {
    background: #f8f9fa;
    border-radius: 8px;
    padding: 1.5rem;
    border: 1px solid @border-color;
  }
}

.chart-bars {
  margin-top: 1rem;

  .bar-container {
    margin-bottom: 1rem;
    display: flex;
    align-items: center;
  }

  .bar-label {
    width: 80px;
    font-weight: 500;
  }

  .bar {
    height: 30px;
    background: linear-gradient(to right, @accent-color, lighten(@accent-color, 20%));
    border-radius: 4px;
    display: flex;
    align-items: center;
    justify-content: flex-end;
    padding: 0 1rem;
    transition: width 1s ease;

    .bar-value {
      color: white;
      font-weight: bold;
    }
  }
}

// å“åº”å¼è°ƒæ•´
@media (max-width: 1100px) {
  .content-container {
    flex-direction: column;
  }

  .sidebar {
    width: 100%;
    height: auto;
    position: static;
    border-right: none;
    border-bottom: 1px solid @border-color;
  }

  .main-content {
    padding: 1.5rem;
  }

  .header {
    padding: 1.5rem;

    .header-content h1 {
      font-size: 2rem;
    }
  }

  .package-managers-icons {
    gap: 1.5rem;

    .manager-icon i {
      font-size: 2.5rem;
    }
  }
}

@media (max-width: 768px) {

  .managers-overview,
  .resolution-methods,
  .performance-charts {
    grid-template-columns: 1fr;
  }

  .package-managers-icons {
    flex-wrap: wrap;
  }
}
</style>
