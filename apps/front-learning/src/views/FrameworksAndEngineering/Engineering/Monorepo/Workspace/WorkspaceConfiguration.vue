<template>
  <div class="pnpm-workspace-container">
    <header class="header">
      <h1>PNPM Workspace å®Œæ•´é…ç½®æŒ‡å—</h1>
      <p class="subtitle">ä»é›¶å¼€å§‹æ„å»ºé«˜æ•ˆ Monorepo å·¥ä½œæµ</p>
    </header>

    <div class="content-wrapper">
      <section class="intro">
        <div class="card">
          <h2><span class="icon">ğŸš€</span> ä¸ºä»€ä¹ˆé€‰æ‹© PNPM Workspaceï¼Ÿ</h2>
          <div class="benefits">
            <div class="benefit">
              <div class="icon">ğŸ“¦</div>
              <h3>é«˜æ•ˆç£ç›˜åˆ©ç”¨</h3>
              <p>æ‰€æœ‰ä¾èµ–å­˜å‚¨åœ¨å•ä¸€ä½ç½®ï¼Œé¿å…é‡å¤ä¸‹è½½</p>
            </div>
            <div class="benefit">
              <div class="icon">âš¡</div>
              <h3>é—ªç”µèˆ¬å®‰è£…é€Ÿåº¦</h3>
              <p>æ¯” npm/yarn å¿« 2 å€ä»¥ä¸Š</p>
            </div>
            <div class="benefit">
              <div class="icon">ğŸ”—</div>
              <h3>ä¸¥æ ¼ä¾èµ–ç®¡ç†</h3>
              <p>é¿å…å¹½çµä¾èµ–å’Œä¾èµ–å†²çª</p>
            </div>
            <div class="benefit">
              <div class="icon">ğŸ§©</div>
              <h3>å†…ç½® Monorepo æ”¯æŒ</h3>
              <p>æ— éœ€é¢å¤–å·¥å…·å³å¯ç®¡ç†å¤šåŒ…é¡¹ç›®</p>
            </div>
          </div>

          <div class="comparison">
            <h3>PNPM vs å…¶ä»–åŒ…ç®¡ç†å™¨</h3>
            <div class="comparison-table">
              <table>
                <thead>
                  <tr>
                    <th>ç‰¹æ€§</th>
                    <th>PNPM</th>
                    <th>NPM</th>
                    <th>Yarn</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td>ç£ç›˜ç©ºé—´ä½¿ç”¨</td>
                    <td class="best">âœ… æœ€ä¼˜</td>
                    <td>âŒ é‡å¤å­˜å‚¨</td>
                    <td>âŒ é‡å¤å­˜å‚¨</td>
                  </tr>
                  <tr>
                    <td>å®‰è£…é€Ÿåº¦</td>
                    <td class="best">âœ… æœ€å¿«</td>
                    <td>â±ï¸ ä¸­ç­‰</td>
                    <td>â±ï¸ ä¸­ç­‰</td>
                  </tr>
                  <tr>
                    <td>Monorepo æ”¯æŒ</td>
                    <td class="best">âœ… å†…ç½®</td>
                    <td>âš ï¸ éœ€ Lerna</td>
                    <td>âš ï¸ éœ€ Workspaces</td>
                  </tr>
                  <tr>
                    <td>ä¸¥æ ¼ä¾èµ–</td>
                    <td class="best">âœ… é˜²æ­¢å¹½çµä¾èµ–</td>
                    <td>âŒ å…è®¸å¹½çµä¾èµ–</td>
                    <td>âŒ å…è®¸å¹½çµä¾èµ–</td>
                  </tr>
                  <tr>
                    <td>å®‰å…¨æ€§</td>
                    <td class="best">âœ… å†…å®¹å¯å¯»å€å­˜å‚¨</td>
                    <td>âš ï¸ æ™®é€šå­˜å‚¨</td>
                    <td>âš ï¸ æ™®é€šå­˜å‚¨</td>
                  </tr>
                </tbody>
              </table>
            </div>
          </div>
        </div>
      </section>

      <section class="setup">
        <h2><span class="icon">ğŸ› ï¸</span> ç¯å¢ƒè®¾ç½®</h2>
        <div class="card">
          <div class="setup-steps">
            <div class="step">
              <div class="step-header">1. å®‰è£… PNPM</div>
              <div class="step-content">
                <p>ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤å…¨å±€å®‰è£… PNPMï¼š</p>
                <div class="code-block">
                  <pre><code># ä½¿ç”¨ npm
npm install -g pnpm

# ä½¿ç”¨ Homebrew (macOS)
brew install pnpm

# ä½¿ç”¨ Scoop (Windows)
scoop install pnpm

# ä½¿ç”¨è„šæœ¬
curl -fsSL https://get.pnpm.io/install.sh | sh -</code></pre>
                </div>
                <p>éªŒè¯å®‰è£…ï¼š</p>
                <div class="code-block">
                  <pre><code>pnpm --version
# åº”è¾“å‡ºç±»ä¼¼ï¼š7.15.0</code></pre>
                </div>
              </div>
            </div>

            <div class="step">
              <div class="step-header">2. åˆå§‹åŒ–é¡¹ç›®</div>
              <div class="step-content">
                <p>åˆ›å»ºé¡¹ç›®ç›®å½•å¹¶åˆå§‹åŒ–ï¼š</p>
                <div class="code-block">
                  <pre><code>mkdir my-monorepo
cd my-monorepo
pnpm init</code></pre>
                </div>
                <p>ç”Ÿæˆçš„ <code>package.json</code>ï¼š</p>
                <div class="code-block">
                  <pre><code>{
  "name": "my-monorepo",
  "version": "1.0.0",
  "description": "",
  "main": "index.js",
  "scripts": {
    "test": "echo \"Error: no test specified\" && exit 1"
  },
  "keywords": [],
  "author": "",
  "license": "ISC"
}</code></pre>
                </div>
              </div>
            </div>

            <div class="step">
              <div class="step-header">3. é…ç½® Workspace</div>
              <div class="step-content">
                <p>åˆ›å»º <code>pnpm-workspace.yaml</code> æ–‡ä»¶ï¼š</p>
                <div class="code-block">
                  <pre><code>touch pnpm-workspace.yaml</code></pre>
                </div>
                <p>ç¼–è¾‘æ–‡ä»¶å†…å®¹ï¼š</p>
                <div class="code-block">
                  <pre><code># pnpm-workspace.yaml
packages:
  # åŒ…å« packages ç›®å½•ä¸‹æ‰€æœ‰å­ç›®å½•
  - 'packages/**'

  # åŒ…å« apps ç›®å½•ä¸‹æ‰€æœ‰å­ç›®å½•
  - 'apps/*'

  # æ’é™¤ test ç›®å½•
  - '!**/test/**'

  # åŒ…å«æ ¹ç›®å½•ä¸‹çš„å•ä¸ªåŒ…
  - 'common'</code></pre>
                </div>
                <p>ç›®å½•ç»“æ„ç¤ºä¾‹ï¼š</p>
                <div class="code-block">
                  <pre><code>my-monorepo/
â”œâ”€â”€ pnpm-workspace.yaml
â”œâ”€â”€ package.json
â”œâ”€â”€ packages/
â”‚   â”œâ”€â”€ ui-kit/        # å…±äº«UIç»„ä»¶åº“
â”‚   â”‚   â”œâ”€â”€ package.json
â”‚   â”‚   â””â”€â”€ src/
â”‚   â”œâ”€â”€ utils/         # å…±äº«å·¥å…·å‡½æ•°
â”‚   â”‚   â”œâ”€â”€ package.json
â”‚   â”‚   â””â”€â”€ src/
â”‚   â””â”€â”€ config/        # å…±äº«é…ç½®
â”‚       â”œâ”€â”€ package.json
â”‚       â””â”€â”€ src/
â”œâ”€â”€ apps/
â”‚   â”œâ”€â”€ web-app/       # å‰ç«¯åº”ç”¨
â”‚   â”‚   â”œâ”€â”€ package.json
â”‚   â”‚   â””â”€â”€ src/
â”‚   â””â”€â”€ admin-panel/   # ç®¡ç†åå°
â”‚       â”œâ”€â”€ package.json
â”‚       â””â”€â”€ src/
â””â”€â”€ common/            # æ ¹ç›®å½•åŒ…
    â”œâ”€â”€ package.json
    â””â”€â”€ src/</code></pre>
                </div>
              </div>
            </div>
          </div>
        </div>
      </section>

      <section class="package-management">
        <h2><span class="icon">ğŸ“¦</span> åŒ…ç®¡ç†</h2>
        <div class="card">
          <div class="management-types">
            <div class="type">
              <div class="type-header">
                <h3>æ·»åŠ ä¾èµ–</h3>
              </div>
              <div class="type-content">
                <p><strong>å…¨å±€ä¾èµ–ï¼ˆæ‰€æœ‰åŒ…å…±ç”¨ï¼‰</strong> - æ·»åŠ åˆ°æ ¹ç›®å½•ï¼š</p>
                <div class="code-block">
                  <pre><code># æ·»åŠ å¼€å‘ä¾èµ–
pnpm add -Dw typescript eslint prettier

# æ·»åŠ ç”Ÿäº§ä¾èµ–
pnpm add -w axios lodash</code></pre>
                </div>

                <p><strong>ç‰¹å®šåŒ…ä¾èµ–</strong> - ä½¿ç”¨ <code>--filter</code>ï¼š</p>
                <div class="code-block">
                  <pre><code># ä¸º web-app æ·»åŠ  React
pnpm add react --filter web-app

# ä¸ºå¤šä¸ªåŒ…æ·»åŠ ä¾èµ–
pnpm add dayjs --filter web-app --filter admin-panel

# ä¸ºæ‰€æœ‰åŒ…æ·»åŠ ä¾èµ–
pnpm add cross-env -r</code></pre>
                </div>

                <p><strong>å·¥ä½œåŒºå†…åŒ…ä¾èµ–</strong> - å¼•ç”¨æœ¬åœ°åŒ…ï¼š</p>
                <div class="code-block">
                  <pre><code># åœ¨ web-app ä¸­å¼•ç”¨ ui-kit
pnpm add @my-monorepo/ui-kit --filter web-app --workspace

# ç­‰ä»·äºåœ¨ web-app/package.json ä¸­æ·»åŠ ï¼š
{
  "dependencies": {
    "@my-monorepo/ui-kit": "workspace:*"
  }
}</code></pre>
                </div>
              </div>
            </div>

            <div class="type">
              <div class="type-header">
                <h3>ä¾èµ–ç®¡ç†æœ€ä½³å®è·µ</h3>
              </div>
              <div class="type-content">
                <p><strong>1. ç‰ˆæœ¬ä¸€è‡´æ€§</strong> - ä½¿ç”¨ <code>overrides</code> ç»Ÿä¸€ä¾èµ–ç‰ˆæœ¬ï¼š</p>
                <div class="code-block">
                  <pre><code>// æ ¹ç›®å½• package.json
{
  "pnpm": {
    "overrides": {
      "react": "18.2.0",
      "react-dom": "18.2.0",
      "typescript": "^5.0.0"
    }
  }
}</code></pre>
                </div>

                <p><strong>2. é¿å…å¾ªç¯ä¾èµ–</strong> - ä½¿ç”¨ <code>pnpm why</code> æ£€æŸ¥ä¾èµ–å…³ç³»ï¼š</p>
                <div class="code-block">
                  <pre><code># æ£€æŸ¥ react ä¾èµ–å…³ç³»
pnpm why react -r

# è¾“å‡ºç¤ºä¾‹
Packages:
@my-monorepo/web-app  18.2.0
@my-monorepo/admin-panel  18.2.0
@my-monorepo/ui-kit  18.1.0  â†’ åº”å‡çº§åˆ° 18.2.0</code></pre>
                </div>

                <p><strong>3. ä¾èµ–ç±»å‹ç®¡ç†</strong> - æ­£ç¡®ä½¿ç”¨ dependency ç±»å‹ï¼š</p>
                <table class="dependency-table">
                  <thead>
                    <tr>
                      <th>ä¾èµ–ç±»å‹</th>
                      <th>å‘½ä»¤</th>
                      <th>å­˜å‚¨ä½ç½®</th>
                      <th>ä½¿ç”¨åœºæ™¯</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td>dependencies</td>
                      <td><code>pnpm add &lt;pkg&gt;</code></td>
                      <td>åŒ…ç›®å½•/node_modules</td>
                      <td>ç”Ÿäº§ç¯å¢ƒä¾èµ–</td>
                    </tr>
                    <tr>
                      <td>devDependencies</td>
                      <td><code>pnpm add -D &lt;pkg&gt;</code></td>
                      <td>åŒ…ç›®å½•/node_modules</td>
                      <td>å¼€å‘ç¯å¢ƒä¾èµ–</td>
                    </tr>
                    <tr>
                      <td>peerDependencies</td>
                      <td><code>pnpm add -P &lt;pkg&gt;</code></td>
                      <td>ä¸åœ¨ node_modules</td>
                      <td>æ’ä»¶å¼€å‘ï¼Œä¾èµ–å®¿ä¸»ç¯å¢ƒ</td>
                    </tr>
                    <tr>
                      <td>optionalDependencies</td>
                      <td><code>pnpm add -O &lt;pkg&gt;</code></td>
                      <td>åŒ…ç›®å½•/node_modules</td>
                      <td>å¯é€‰ä¾èµ–ï¼Œå®‰è£…å¤±è´¥ä¸ä¸­æ–­</td>
                    </tr>
                  </tbody>
                </table>
              </div>
            </div>
          </div>
        </div>
      </section>

      <section class="scripts">
        <h2><span class="icon">ğŸ“œ</span> è„šæœ¬ç®¡ç†</h2>
        <div class="card">
          <div class="script-types">
            <div class="type">
              <div class="type-header">
                <h3>è¿è¡Œè„šæœ¬</h3>
              </div>
              <div class="type-content">
                <p><strong>åŸºæœ¬ç”¨æ³•</strong> - ä½¿ç”¨ <code>pnpm run</code>ï¼š</p>
                <div class="code-block">
                  <pre><code># è¿è¡Œç‰¹å®šåŒ…çš„è„šæœ¬
pnpm --filter web-app run dev

# ç®€å†™å½¢å¼
pnpm -F web-app dev

# è¿è¡Œæ‰€æœ‰åŒ…çš„ test è„šæœ¬
pnpm -r run test

# å¹¶è¡Œè¿è¡Œè„šæœ¬ (--parallel)
pnpm -r --parallel run build</code></pre>
                </div>

                <p><strong>å¤æ‚è¿‡æ»¤</strong> - ç»„åˆä½¿ç”¨è¿‡æ»¤æ¡ä»¶ï¼š</p>
                <div class="code-block">
                  <pre><code># è¿è¡Œåç§°ä»¥ "app-" å¼€å¤´çš„åŒ…çš„ build è„šæœ¬
pnpm --filter='app-*' run build

# è¿è¡Œä¾èµ– @my-monorepo/ui-kit çš„åŒ…çš„è„šæœ¬
pnpm --filter='...@my-monorepo/ui-kit' run lint

# è¿è¡Œè‡ªä¸Šæ¬¡æäº¤ä»¥æ¥æ›´æ”¹çš„åŒ…çš„æµ‹è¯•
pnpm --filter='...[origin/master]' run test</code></pre>
                </div>
              </div>
            </div>

            <div class="type">
              <div class="type-header">
                <h3>é«˜çº§è„šæœ¬é…ç½®</h3>
              </div>
              <div class="type-content">
                <p><strong>1. æ ¹ç›®å½•è„šæœ¬ç®¡ç†</strong> - ç»Ÿä¸€æ‰§è¡Œå‘½ä»¤ï¼š</p>
                <div class="code-block">
                  <pre><code>// æ ¹ç›®å½• package.json
{
  "scripts": {
    "build": "pnpm -r run build",
    "test": "pnpm -r run test",
    "lint": "pnpm -r run lint",
    "dev": "pnpm run --parallel --stream dev",
    "clean": "pnpm -r exec -- rm -rf dist node_modules"
  }
}</code></pre>
                </div>

                <p><strong>2. å·¥ä½œæµè„šæœ¬</strong> - å¤æ‚ä»»åŠ¡ç¼–æ’ï¼š</p>
                <div class="code-block">
                  <pre><code>// æ ¹ç›®å½• package.json
{
  "scripts": {
    "prepare": "husky install",
    "preinstall": "npx only-allow pnpm",
    "postinstall": "pnpm run generate-types",
    "generate-types": "pnpm -F @my-monorepo/types run build",
    "ci": "run-s lint test build",
    "release": "bumpp package.json packages/*/package.json"
  }
}</code></pre>
                </div>

                <p><strong>3. è·¨åŒ…è„šæœ¬æ‰§è¡Œ</strong> - ä½¿ç”¨ <code>pnpm exec</code>ï¼š</p>
                <div class="code-block">
                  <pre><code># åœ¨æ‰€æœ‰åŒ…ä¸­è¿è¡Œ eslint
pnpm -r exec eslint --fix

# åœ¨ç‰¹å®šåŒ…ä¸­è¿è¡Œå‘½ä»¤
pnpm --filter @my-monorepo/web-app exec next telemetry disable</code></pre>
                </div>
              </div>
            </div>
          </div>
        </div>
      </section>

      <section class="advanced">
        <h2><span class="icon">ğŸš€</span> é«˜çº§é…ç½®</h2>
        <div class="card">
          <div class="advanced-sections">
            <div class="section">
              <h3>1. ç‰ˆæœ¬ç®¡ç†ä¸å‘å¸ƒ</h3>
              <p>ä½¿ç”¨ <code>changesets</code> ç®¡ç†ç‰ˆæœ¬å’Œå‘å¸ƒï¼š</p>
              <div class="steps">
                <div class="step">
                  <div class="step-number">1</div>
                  <div class="step-content">
                    <p>å®‰è£… changesetsï¼š</p>
                    <div class="code-block">
                      <pre><code>pnpm add -Dw @changesets/cli</code></pre>
                    </div>
                  </div>
                </div>

                <div class="step">
                  <div class="step-number">2</div>
                  <div class="step-content">
                    <p>åˆå§‹åŒ– changesetsï¼š</p>
                    <div class="code-block">
                      <pre><code>pnpm changeset init</code></pre>
                    </div>
                    <p>ç”Ÿæˆçš„ <code>.changeset/config.json</code>ï¼š</p>
                    <div class="code-block">
                      <pre><code>{
  "$schema": "https://unpkg.com/@changesets/config@2.0.0/schema.json",
  "changelog": "@changesets/cli/changelog",
  "commit": false,
  "access": "public",
  "baseBranch": "main",
  "updateInternalDependencies": "patch"
}</code></pre>
                    </div>
                  </div>
                </div>

                <div class="step">
                  <div class="step-number">3</div>
                  <div class="step-content">
                    <p>æ·»åŠ å˜æ›´é›†ï¼š</p>
                    <div class="code-block">
                      <pre><code>pnpm changeset</code></pre>
                    </div>
                  </div>
                </div>

                <div class="step">
                  <div class="step-number">4</div>
                  <div class="step-content">
                    <p>ç‰ˆæœ¬ç®¡ç†å’Œå‘å¸ƒï¼š</p>
                    <div class="code-block">
                      <pre><code># æ›´æ–°ç‰ˆæœ¬å·
pnpm changeset version

# å‘å¸ƒåˆ° npm
pnpm changeset publish

# å®Œæ•´çš„ CI å‘å¸ƒè„šæœ¬
{
  "scripts": {
    "release": "pnpm build && pnpm test && changeset publish"
  }
}</code></pre>
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <div class="section">
              <h3>2. ä¾èµ–ä¼˜åŒ–</h3>
              <p>ä½¿ç”¨ <code>.npmrc</code> æ–‡ä»¶ä¼˜åŒ–ä¾èµ–å®‰è£…ï¼š</p>
              <div class="code-block">
                <pre><code># .npmrc
# ä½¿ç”¨æœ€æ–°ç‰ˆæœ¬ä¾èµ–
prefer-frozen-lockfile=false

# å¹¶å‘å®‰è£…æ•°
child-concurrency=20

# å¯ç”¨å‰¯ä½œç”¨ç¼“å­˜
side-effects-cache=true

# ç¦ç”¨è‡ªåŠ¨å®‰è£… peerDependencies
auto-install-peers=false

# è®¾ç½®å­˜å‚¨è·¯å¾„
virtual-store-dir=.pnpm-store
modules-dir=node_modules

# å¿½ç•¥è„šæœ¬ï¼ˆå®‰å…¨ï¼‰
ignore-scripts=true

# ä»…å…è®¸ä½¿ç”¨ pnpm
engine-strict=true</code></pre>
              </div>
            </div>

            <div class="section">
              <h3>3. ä¸ Turborepo é›†æˆ</h3>
              <p>ç»“åˆ Turborepo å®ç°å¢é‡æ„å»ºå’Œç¼“å­˜ï¼š</p>
              <div class="steps">
                <div class="step">
                  <div class="step-number">1</div>
                  <div class="step-content">
                    <p>å®‰è£… Turborepoï¼š</p>
                    <div class="code-block">
                      <pre><code>pnpm add -Dw turbo</code></pre>
                    </div>
                  </div>
                </div>

                <div class="step">
                  <div class="step-number">2</div>
                  <div class="step-content">
                    <p>é…ç½® <code>turbo.json</code>ï¼š</p>
                    <div class="code-block">
                      <pre><code>{
  "$schema": "https://turbo.build/schema.json",
  "pipeline": {
    "build": {
      "dependsOn": ["^build"],
      "outputs": ["dist/**"]
    },
    "test": {
      "dependsOn": ["build"],
      "outputs": []
    },
    "lint": {
      "outputs": []
    },
    "dev": {
      "cache": false
    }
  }
}</code></pre>
                    </div>
                  </div>
                </div>

                <div class="step">
                  <div class="step-number">3</div>
                  <div class="step-content">
                    <p>æ›´æ–°æ ¹ç›®å½• <code>package.json</code>ï¼š</p>
                    <div class="code-block">
                      <pre><code>{
  "scripts": {
    "build": "turbo run build",
    "test": "turbo run test",
    "lint": "turbo run lint",
    "dev": "turbo run dev --parallel"
  }
}</code></pre>
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <div class="section">
              <h3>4. CI/CD é›†æˆ</h3>
              <p>GitHub Actions é…ç½®ç¤ºä¾‹ï¼š</p>
              <div class="code-block">
                <pre><code># .github/workflows/ci.yml
name: CI

on: [push, pull_request]

jobs:
  build:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout
        uses: actions/checkout@v3

      - name: Setup Node.js
        uses: actions/setup-node@v3
        with:
          node-version: 18

      - name: Setup PNPM
        uses: pnpm/action-setup@v2
        with:
          version: 7

      - name: Install dependencies
        run: pnpm install --frozen-lockfile

      - name: Lint
        run: pnpm lint

      - name: Build
        run: pnpm build

      - name: Test
        run: pnpm test

  release:
    if: github.ref == 'refs/heads/main'
    needs: [build]
    runs-on: ubuntu-latest
    steps:
      - name: Checkout
        uses: actions/checkout@v3

      - name: Setup Node.js
        uses: actions/setup-node@v3
        with:
          node-version: 18

      - name: Setup PNPM
        uses: pnpm/action-setup@v2
        with:
          version: 7

      - name: Install dependencies
        run: pnpm install --frozen-lockfile

      - name: Create release
        run: pnpm release
        env:
          GITHUB_TOKEN: $&#123;&#123; secrets.GITHUB_TOKEN &#125;&#125;
          NPM_TOKEN: $&#123;&#123; secrets.NPM_TOKEN &#125;&#125;</code></pre>
              </div>
            </div>
          </div>
        </div>
      </section>

      <section class="troubleshooting">
        <h2><span class="icon">âš ï¸</span> å¸¸è§é—®é¢˜è§£å†³</h2>
        <div class="card">
          <div class="issues">
            <div class="issue">
              <h3>å¹½çµä¾èµ– (Phantom Dependencies)</h3>
              <p><strong>é—®é¢˜ï¼š</strong> ä½¿ç”¨æœªåœ¨ package.json ä¸­å£°æ˜çš„ä¾èµ–</p>
              <p><strong>è§£å†³æ–¹æ¡ˆï¼š</strong> ä½¿ç”¨ <code>.npmrc</code> ä¸¥æ ¼æ¨¡å¼</p>
              <div class="code-block">
                <pre><code># .npmrc
# å¯ç”¨ä¸¥æ ¼æ¨¡å¼
strict-peer-dependencies=true
hoist=false</code></pre>
              </div>
            </div>

            <div class="issue">
              <h3>ä¾èµ–å†²çª</h3>
              <p><strong>é—®é¢˜ï¼š</strong> ä¸åŒåŒ…éœ€è¦åŒä¸€ä¾èµ–çš„ä¸åŒç‰ˆæœ¬</p>
              <p><strong>è§£å†³æ–¹æ¡ˆï¼š</strong> ä½¿ç”¨ <code>overrides</code> ç»Ÿä¸€ç‰ˆæœ¬</p>
              <div class="code-block">
                <pre><code>// æ ¹ç›®å½• package.json
{
  "pnpm": {
    "overrides": {
      "react": "18.2.0",
      "react-dom": "18.2.0"
    }
  }
}</code></pre>
              </div>
            </div>

            <div class="issue">
              <h3>å¾ªç¯ä¾èµ–</h3>
              <p><strong>é—®é¢˜ï¼š</strong> åŒ… A ä¾èµ–åŒ… Bï¼ŒåŒæ—¶åŒ… B åˆä¾èµ–åŒ… A</p>
              <p><strong>è§£å†³æ–¹æ¡ˆï¼š</strong> ä½¿ç”¨ <code>pnpm why</code> æ£€æµ‹å¹¶é‡æ„ä»£ç </p>
              <div class="code-block">
                <pre><code># æ£€æµ‹å¾ªç¯ä¾èµ–
pnpm -r exec npx dpdm src --circular

# é‡æ„æ–¹æ¡ˆï¼š
# 1. æå–å…±äº«ä»£ç åˆ°æ–°åŒ…
# 2. ä½¿ç”¨ä¾èµ–æ³¨å…¥
# 3. åˆå¹¶ç›¸å…³åŒ…</code></pre>
              </div>
            </div>

            <div class="issue">
              <h3>å®‰è£…é€Ÿåº¦æ…¢</h3>
              <p><strong>é—®é¢˜ï¼š</strong> é¦–æ¬¡å®‰è£…æˆ– CI ç¯å¢ƒå®‰è£…ç¼“æ…¢</p>
              <p><strong>è§£å†³æ–¹æ¡ˆï¼š</strong> ä¼˜åŒ– <code>.npmrc</code> é…ç½®</p>
              <div class="code-block">
                <pre><code># .npmrc
# å¯ç”¨å¹¶å‘å®‰è£…
child-concurrency=20

# ä½¿ç”¨æœ€æ–° lockfile
prefer-frozen-lockfile=false

# è®¾ç½®å­˜å‚¨è·¯å¾„
state-dir=/tmp/.pnpm-store

# ä½¿ç”¨æœ¬åœ°ç¼“å­˜
store-dir=~/.pnpm-store</code></pre>
              </div>
            </div>
          </div>
        </div>
      </section>
    </div>

    <footer class="footer">
      <p>PNPM Workspace æä¾›äº†ä¸€ç§é«˜æ•ˆã€å¯é çš„ Monorepo è§£å†³æ–¹æ¡ˆï¼Œé€‚ç”¨äºå„ç§è§„æ¨¡çš„é¡¹ç›®</p>
      <p>
        æ›´å¤šä¿¡æ¯è¯·å‚è€ƒå®˜æ–¹æ–‡æ¡£ï¼š<a href="https://pnpm.io/workspaces" target="_blank"
          >https://pnpm.io/workspaces</a
        >
      </p>
    </footer>
  </div>
</template>

<script setup lang="ts">
// æ­¤ç»„ä»¶ä¸éœ€è¦é¢å¤–çš„é€»è¾‘ï¼Œä»…ç”¨äºå±•ç¤ºPNPM Workspaceé…ç½®
</script>

<style lang="less" scoped>


// é¢œè‰²å˜é‡
@primary-color: #6c5ce7;
@secondary-color: #5d4de0;
@accent-color: #ff6b6b;
@light-bg: #f8f9ff;
@card-bg: #ffffff;
@text-color: #2c3e50;
@border-color: #e0e7ff;
@success-color: #00b894;
@warning-color: #fdcb6e;
@danger-color: #ff7675;
@info-color: #74b9ff;

// åŸºç¡€æ ·å¼
* {
  box-sizing: border-box;
  margin: 0;
  padding: 0;
}

.pnpm-workspace-container {
  font-family: 'Inter', sans-serif;
  line-height: 1.6;
  color: @text-color;
  background-color: @light-bg;
  padding: 20px;
  max-width: 1200px;
  margin: 0 auto;
}

.header {
  text-align: center;
  margin-bottom: 30px;
  padding: 30px 20px;
  background: linear-gradient(135deg, @primary-color, #5d4de0);
  color: white;
  border-radius: 16px;
  box-shadow: 0 6px 20px rgba(108, 92, 231, 0.2);

  h1 {
    font-size: 2.5rem;
    margin-bottom: 10px;
    font-weight: 700;
  }

  .subtitle {
    font-size: 1.2rem;
    opacity: 0.9;
    font-weight: 300;
  }
}

.content-wrapper {
  background-color: @card-bg;
  border-radius: 16px;
  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.05);
  padding: 30px;
  margin-bottom: 30px;
}

h2 {
  font-size: 1.8rem;
  color: @primary-color;
  margin-bottom: 25px;
  padding-bottom: 12px;
  border-bottom: 2px solid #e8eaed;
  display: flex;
  align-items: center;

  .icon {
    margin-right: 12px;
    font-size: 1.5rem;
  }
}

h3 {
  font-size: 1.4rem;
  color: @secondary-color;
  margin: 20px 0 15px;
}

.card {
  background-color: @card-bg;
  border-radius: 12px;
  padding: 25px;
  margin-bottom: 30px;
  box-shadow: 0 3px 15px rgba(0, 0, 0, 0.03);
  border: 1px solid @border-color;
}

// ä»‹ç»éƒ¨åˆ†
.benefits {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
  gap: 20px;
  margin: 25px 0;

  .benefit {
    text-align: center;
    padding: 20px;
    border-radius: 10px;
    background: #f0f4ff;
    transition: transform 0.3s ease;

    &:hover {
      transform: translateY(-5px);
    }

    .icon {
      font-size: 2.5rem;
      margin-bottom: 15px;
    }

    h3 {
      margin: 10px 0;
      color: @primary-color;
    }
  }
}

.comparison {
  margin-top: 30px;

  .comparison-table {
    overflow-x: auto;
    margin-top: 20px;

    table {
      width: 100%;
      border-collapse: collapse;
      border-radius: 10px;
      overflow: hidden;
      box-shadow: 0 1px 3px rgba(0, 0, 0, 0.05);

      th,
      td {
        padding: 12px 15px;
        text-align: left;
        border: 1px solid @border-color;
      }

      thead {
        background: @primary-color;
        color: white;

        th {
          font-weight: 500;
        }
      }

      tbody {
        tr {
          &:nth-child(even) {
            background: #f8f9ff;
          }
        }

        .best {
          background: #e6f7ee;
          font-weight: 600;
          position: relative;

          &::after {
            content: 'âœ“';
            margin-left: 5px;
            color: @success-color;
          }
        }
      }
    }
  }
}

// è®¾ç½®éƒ¨åˆ†
.setup-steps {
  display: grid;
  gap: 30px;

  .step {
    border-left: 4px solid @primary-color;
    padding-left: 20px;
    position: relative;

    &::before {
      content: '';
      position: absolute;
      left: -12px;
      top: 0;
      width: 20px;
      height: 20px;
      border-radius: 50%;
      background: @primary-color;
    }

    .step-header {
      font-size: 1.3rem;
      font-weight: 600;
      margin-bottom: 15px;
      color: @primary-color;
    }

    .step-content {
      p {
        margin-bottom: 10px;
      }
    }
  }
}

// ä»£ç å—æ ·å¼
.code-block {
  background-color: #f8f9ff;
  border-radius: 8px;
  padding: 18px;
  margin: 18px 0;
  overflow-x: auto;
  font-family: 'Courier New', monospace;
  font-size: 0.95rem;
  border: 1px solid @border-color;
  box-shadow: inset 0 1px 3px rgba(0, 0, 0, 0.05);

  pre {
    margin: 0;
    white-space: pre-wrap;
  }

  code {
    color: #2c3e50;
    line-height: 1.5;
  }
}

// ç®¡ç†éƒ¨åˆ†
.management-types {
  display: grid;
  gap: 25px;

  .type {
    border: 1px solid @border-color;
    border-radius: 10px;
    overflow: hidden;

    .type-header {
      padding: 15px 20px;
      background: #f0f4ff;
      border-bottom: 1px solid @border-color;

      h3 {
        margin: 0;
      }
    }

    .type-content {
      padding: 20px;

      p {
        margin-bottom: 15px;
      }
    }
  }
}

.dependency-table {
  width: 100%;
  border-collapse: collapse;
  margin: 20px 0;

  th,
  td {
    padding: 12px 15px;
    text-align: left;
    border: 1px solid @border-color;
  }

  thead {
    background: @primary-color;
    color: white;

    th {
      font-weight: 500;
    }
  }

  tbody {
    tr:nth-child(even) {
      background: #f8f9ff;
    }
  }
}

// è„šæœ¬éƒ¨åˆ†
.script-types {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 25px;

  @media (max-width: 768px) {
    grid-template-columns: 1fr;
  }

  .type {
    border: 1px solid @border-color;
    border-radius: 10px;
    overflow: hidden;

    .type-header {
      padding: 15px 20px;
      background: #f0f4ff;
      border-bottom: 1px solid @border-color;

      h3 {
        margin: 0;
      }
    }

    .type-content {
      padding: 20px;
    }
  }
}

// é«˜çº§éƒ¨åˆ†
.advanced-sections {
  display: grid;
  gap: 30px;

  .section {
    h3 {
      border-left: 4px solid @primary-color;
      padding-left: 15px;
      margin-bottom: 20px;
    }
  }
}

.steps {
  display: grid;
  gap: 20px;

  .step {
    display: flex;
    gap: 15px;

    .step-number {
      width: 30px;
      height: 30px;
      background: @primary-color;
      color: white;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: bold;
      flex-shrink: 0;
      margin-top: 3px;
    }
  }
}

// é—®é¢˜è§£å†³
.issues {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
  gap: 20px;

  .issue {
    border: 1px solid @border-color;
    border-radius: 10px;
    padding: 20px;
    background: #f8f9ff;

    h3 {
      margin-top: 0;
      color: @primary-color;
    }
  }
}

.footer {
  text-align: center;
  padding: 25px;
  font-style: italic;
  color: #666;
  margin-top: 20px;
  border-top: 1px solid @border-color;
  line-height: 1.8;

  a {
    color: @primary-color;
    text-decoration: none;

    &:hover {
      text-decoration: underline;
    }
  }
}

// å“åº”å¼è°ƒæ•´
@media (max-width: 768px) {
  .header h1 {
    font-size: 2rem;
  }

  h2 {
    font-size: 1.5rem;
  }

  .content-wrapper {
    padding: 20px;
  }

  .script-types {
    grid-template-columns: 1fr;
  }
}
</style>
