<template>
  <div class="webcomponent-guide">
    <header class="guide-header">
      <h1>WebComponent è¿›é˜¶ä½¿ç”¨æŒ‡å—</h1>
      <p>æŒæ¡WebComponentçš„é«˜çº§ç‰¹æ€§å’Œæœ€ä½³å®è·µ</p>
    </header>

    <div class="guide-content">
      <section class="section">
        <h2 class="section-title">æ ¸å¿ƒæ¦‚å¿µå›é¡¾</h2>
        <div class="section-content">
          <div class="concepts-grid">
            <div class="concept-card">
              <div class="concept-icon">C</div>
              <h3>Custom Elements</h3>
              <p>å®šä¹‰æ–°çš„HTMLå…ƒç´ å¹¶æ‰©å±•å·²æœ‰å…ƒç´ </p>
            </div>
            <div class="concept-card">
              <div class="concept-icon">S</div>
              <h3>Shadow DOM</h3>
              <p>å°è£…çš„DOMæ ‘ï¼Œç‹¬ç«‹äºä¸»æ–‡æ¡£</p>
            </div>
            <div class="concept-card">
              <div class="concept-icon">T</div>
              <h3>HTML Templates</h3>
              <p>å¯é‡å¤ä½¿ç”¨çš„æ ‡è®°æ¨¡æ¿</p>
            </div>
            <div class="concept-card">
              <div class="concept-icon">E</div>
              <h3>ES Modules</h3>
              <p>ç°ä»£JavaScriptæ¨¡å—ç³»ç»Ÿ</p>
            </div>
          </div>
        </div>
      </section>

      <section class="section">
        <h2 class="section-title">ä¸å…¶ä»–ç»„ä»¶é€šä¿¡</h2>
        <div class="section-content">
          <div class="communication-grid">
            <div class="method-card">
              <div class="method-header">
                <div class="method-icon">ğŸ“¤</div>
                <h3>å±æ€§ä¼ é€’</h3>
              </div>
              <div class="code-block">
                <pre>&lt;!-- è®¾ç½®å±æ€§ --&gt;
&lt;user-card name="John" age="30"&gt;&lt;/user-card&gt;

&lt;!-- ç›‘å¬å±æ€§å˜åŒ– --&gt;
static get observedAttributes() {
  return ['name', 'age'];
}

attributeChangedCallback(name, oldVal, newVal) {
  // å¤„ç†å±æ€§å˜åŒ–
}</pre>
              </div>
            </div>
            <div class="method-card">
              <div class="method-header">
                <div class="method-icon">ğŸ””</div>
                <h3>äº‹ä»¶é€šä¿¡</h3>
              </div>
              <div class="code-block">
                <pre>// ç»„ä»¶å†…éƒ¨å‘é€äº‹ä»¶
const event = new CustomEvent('user-selected', {
  detail: { userId: 123 },
  bubbles: true,
  composed: true
});
this.dispatchEvent(event);

// å¤–éƒ¨ç›‘å¬äº‹ä»¶
document.querySelector('user-card')
  .addEventListener('user-selected', e => {
    console.log('ç”¨æˆ·é€‰æ‹©:', e.detail.userId);
  });</pre>
              </div>
            </div>
            <div class="method-card">
              <div class="method-header">
                <div class="method-icon">ğŸ“¦</div>
                <h3>æ–¹æ³•è°ƒç”¨</h3>
              </div>
              <div class="code-block">
                <pre>class UserCard extends HTMLElement {
  // å®šä¹‰å…¬å…±æ–¹æ³•
  updateUser(data) {
    // æ›´æ–°é€»è¾‘
  }
}

// å¤–éƒ¨è°ƒç”¨æ–¹æ³•
const userCard = document.querySelector('user-card');
userCard.updateUser({ name: 'Alice' });</pre>
              </div>
            </div>
          </div>
        </div>
      </section>

      <section class="section">
        <h2 class="section-title">åŠ¨æ€åŠ è½½ä¸ç§»é™¤</h2>
        <div class="section-content">
          <div class="dynamic-demo">
            <div class="demo-controls">
              <div class="control-group">
                <button @click="loadComponent">
                  {{ componentLoaded ? 'ç»„ä»¶å·²åŠ è½½' : 'åŠ è½½ç»„ä»¶' }}
                </button>
                <button @click="removeComponent" :disabled="!componentLoaded">
                  ç§»é™¤ç»„ä»¶
                </button>
              </div>
              <div class="control-group">
                <button @click="loadLazyComponent" :disabled="componentLoaded">
                  å»¶è¿ŸåŠ è½½ç»„ä»¶
                </button>
                <button @click="toggleTheme" class="theme-toggle">
                  {{ darkTheme ? 'æµ…è‰²ä¸»é¢˜' : 'æ·±è‰²ä¸»é¢˜' }}
                </button>
              </div>
            </div>

            <div class="demo-area">
              <div v-if="componentLoaded" class="component-container">
                <div class="placeholder-element" :class="{ dark: darkTheme }">
                  <div class="element-header">
                    <div class="element-icon">âš¡</div>
                    <h3>ç”¨æˆ·å¡ç‰‡ç»„ä»¶</h3>
                  </div>
                  <div class="element-body">
                    <div class="user-info">
                      <div class="avatar">U</div>
                      <div class="user-details">
                        <div class="user-name">John Doe</div>
                        <div class="user-email">john.doe@example.com</div>
                      </div>
                    </div>
                    <div class="status">
                      <div class="status-indicator active"></div>
                      <span>åœ¨çº¿</span>
                    </div>
                  </div>
                  <div class="element-footer">
                    <button @click="simulateEvent">å‘é€æ¶ˆæ¯</button>
                    <button @click="updateComponent">æ›´æ–°èµ„æ–™</button>
                  </div>
                </div>
              </div>
              <div v-else class="empty-state">
                <div class="empty-icon">ğŸ“­</div>
                <p>ç»„ä»¶æœªåŠ è½½</p>
              </div>
            </div>

            <div class="demo-console">
              <div class="console-header">
                <span>äº‹ä»¶æ§åˆ¶å°</span>
                <button @click="clearLogs">æ¸…ç©ºæ—¥å¿—</button>
              </div>
              <div class="console-content">
                <div v-for="(log, index) in eventLogs" :key="index" class="log-entry">
                  <span class="log-time">[{{ log.time }}]</span>
                  <span class="log-message">{{ log.message }}</span>
                </div>
                <div v-if="eventLogs.length === 0" class="empty-log">æš‚æ— äº‹ä»¶è®°å½•</div>
              </div>
            </div>
          </div>

          <div class="code-samples">
            <div class="code-sample">
              <h3>åŠ¨æ€åŠ è½½WebComponent</h3>
              <div class="code-block">
                <pre>// åŠ¨æ€åŠ è½½WebComponent
function loadWebComponent() {
  // åˆ›å»ºç»„ä»¶å…ƒç´ 
  const element = document.createElement('user-card');

  // è®¾ç½®å±æ€§
  element.setAttribute('user-id', '12345');

  // æ·»åŠ åˆ°DOM
  document.getElementById('container').appendChild(element);

  // æ·»åŠ äº‹ä»¶ç›‘å¬
  element.addEventListener('user-action', handleUserAction);
}</pre>
              </div>
            </div>
            <div class="code-sample">
              <h3>ç§»é™¤WebComponent</h3>
              <div class="code-block">
                <pre>// ç§»é™¤WebComponent
function removeWebComponent() {
  const element = document.querySelector('user-card');

  if (element) {
    // ç§»é™¤äº‹ä»¶ç›‘å¬å™¨
    element.removeEventListener('user-action', handleUserAction);

    // ä»DOMä¸­ç§»é™¤
    element.parentNode.removeChild(element);

    // æ¸…é™¤å¼•ç”¨
    element = null;
  }
}</pre>
              </div>
            </div>
          </div>
        </div>
      </section>

      <section class="section">
        <h2 class="section-title">å†…éƒ¨åŠ è½½JavaScript</h2>
        <div class="section-content">
          <div class="internal-js">
            <div class="method">
              <h3>1. å†…è”è„šæœ¬</h3>
              <div class="code-block">
                <pre>class MyComponent extends HTMLElement {
  constructor() {
    super();

    // åˆ›å»ºShadow DOM
    this.attachShadow({ mode: 'open' });

    // æ·»åŠ HTMLå†…å®¹ï¼ˆåŒ…å«å†…è”è„šæœ¬ï¼‰
    this.shadowRoot.innerHTML = `
      &lt;div&gt;
        &lt;button id="btn"&gt;ç‚¹å‡»æˆ‘&lt;/button&gt;
        &lt;script&gt;
          document.getElementById('btn').addEventListener('click', () => {
            console.log('æŒ‰é’®è¢«ç‚¹å‡»!');
          });
        &lt;/script&gt;
      &lt;/div&gt;
    `;
  }
}</pre>
              </div>
            </div>

            <div class="method">
              <h3>2. å¤–éƒ¨è„šæœ¬æ¨¡å—</h3>
              <div class="code-block">
                <pre>// å®šä¹‰WebComponent
class MyComponent extends HTMLElement {
  constructor() {
    super();
    this.attachShadow({ mode: 'open' });

    // åŠ¨æ€åŠ è½½å¤–éƒ¨JS
    this.loadExternalScripts();
  }

  async loadExternalScripts() {
    // åŠ è½½å¤–éƒ¨æ¨¡å—
    const module = await import('./external-module.js');

    // æ¸²æŸ“ç»„ä»¶å†…å®¹
    this.shadowRoot.innerHTML = `
      &lt;div&gt;
        &lt;button id="action-btn"&gt;æ‰§è¡Œæ“ä½œ&lt;/button&gt;
      &lt;/div&gt;
    `;

    // ä½¿ç”¨æ¨¡å—åŠŸèƒ½
    this.shadowRoot.getElementById('action-btn')
      .addEventListener('click', module.doSomething);
  }
}</pre>
              </div>
            </div>
          </div>
        </div>
      </section>

      <section class="section">
        <h2 class="section-title">ç”Ÿå‘½å‘¨æœŸä¸å¸è½½</h2>
        <div class="section-content">
          <div class="lifecycle-grid">
            <div class="lifecycle-card">
              <div class="lifecycle-phase">1</div>
              <h3>connectedCallback</h3>
              <p>å½“å…ƒç´ é¦–æ¬¡è¢«æ’å…¥æ–‡æ¡£DOMæ—¶è°ƒç”¨</p>
              <div class="code-block small">
                <pre>connectedCallback() {
  // åˆå§‹åŒ–æ“ä½œ
  this.setupEventListeners();
  this.loadData();
}</pre>
              </div>
            </div>
            <div class="lifecycle-card">
              <div class="lifecycle-phase">2</div>
              <h3>attributeChangedCallback</h3>
              <p>å½“å…ƒç´ çš„å±æ€§è¢«æ·»åŠ ã€ç§»é™¤æˆ–æ›´æ”¹æ—¶è°ƒç”¨</p>
              <div class="code-block small">
                <pre>static get observedAttributes() {
  return ['value', 'disabled'];
}

attributeChangedCallback(name, oldVal, newVal) {
  // å¤„ç†å±æ€§å˜åŒ–
}</pre>
              </div>
            </div>
            <div class="lifecycle-card">
              <div class="lifecycle-phase">3</div>
              <h3>disconnectedCallback</h3>
              <p>å½“å…ƒç´ ä»æ–‡æ¡£DOMä¸­ç§»é™¤æ—¶è°ƒç”¨</p>
              <div class="code-block small">
                <pre>disconnectedCallback() {
  // æ¸…ç†æ“ä½œ
  this.removeEventListeners();
  this.cancelPendingRequests();
  this.cleanupResources();
}</pre>
              </div>
            </div>
            <div class="lifecycle-card">
              <div class="lifecycle-phase">4</div>
              <h3>adoptedCallback</h3>
              <p>å½“å…ƒç´ è¢«ç§»åŠ¨åˆ°æ–°æ–‡æ¡£æ—¶è°ƒç”¨</p>
              <div class="code-block small">
                <pre>adoptedCallback() {
  // å¤„ç†æ–‡æ¡£è¿ç§»
  console.log('å…ƒç´ è¢«ç§»åŠ¨åˆ°æ–°æ–‡æ¡£');
}</pre>
              </div>
            </div>
          </div>

          <div class="unmount-section">
            <h3>æ­£ç¡®å¸è½½WebComponent</h3>
            <div class="unmount-steps">
              <div class="step">
                <div class="step-number">1</div>
                <p>ç§»é™¤æ‰€æœ‰äº‹ä»¶ç›‘å¬å™¨</p>
              </div>
              <div class="step">
                <div class="step-number">2</div>
                <p>å–æ¶ˆæœªå®Œæˆçš„å¼‚æ­¥æ“ä½œ</p>
              </div>
              <div class="step">
                <div class="step-number">3</div>
                <p>æ¸…ç†å®šæ—¶å™¨</p>
              </div>
              <div class="step">
                <div class="step-number">4</div>
                <p>é‡Šæ”¾å†…å­˜å¼•ç”¨</p>
              </div>
              <div class="step">
                <div class="step-number">5</div>
                <p>ä»DOMä¸­ç§»é™¤å…ƒç´ </p>
              </div>
            </div>
          </div>
        </div>
      </section>

      <section class="section">
        <h2 class="section-title">æ€§èƒ½ä¼˜åŒ–ç­–ç•¥</h2>
        <div class="section-content">
          <div class="optimization-grid">
            <div class="optimization-card">
              <div class="optimization-icon">ğŸš€</div>
              <h3>å»¶è¿ŸåŠ è½½</h3>
              <p>ä½¿ç”¨åŠ¨æ€å¯¼å…¥æˆ–Intersection Observer</p>
              <div class="code-block small">
                <pre>// ä½¿ç”¨Intersection Observer
const observer = new IntersectionObserver(entries => {
  if (entries[0].isIntersecting) {
    import('./my-component.js');
    observer.disconnect();
  }
});
observer.observe(document.querySelector('#placeholder'));</pre>
              </div>
            </div>
            <div class="optimization-card">
              <div class="optimization-icon">ğŸ§ </div>
              <h3>é«˜æ•ˆæ¸²æŸ“</h3>
              <p>ä½¿ç”¨requestAnimationFrameæ‰¹é‡æ›´æ–°</p>
              <div class="code-block small">
                <pre>let updateScheduled = false;

updateData(data) {
  this.data = data;

  if (!updateScheduled) {
    requestAnimationFrame(() => {
      this.render();
      updateScheduled = false;
    });
    updateScheduled = true;
  }
}</pre>
              </div>
            </div>
            <div class="optimization-card">
              <div class="optimization-icon">ğŸ§©</div>
              <h3>æ¨¡å—åŒ–è®¾è®¡</h3>
              <p>æ‹†åˆ†å¤§å‹ç»„ä»¶ä¸ºå°å‹å¯å¤ç”¨ç»„ä»¶</p>
              <div class="code-block small">
                <pre>// ä¸»ç»„ä»¶
&lt;user-profile&gt;
  &lt;user-avatar&gt;&lt;/user-avatar&gt;
  &lt;user-info&gt;&lt;/user-info&gt;
  &lt;user-actions&gt;&lt;/user-actions&gt;
&lt;/user-profile&gt;</pre>
              </div>
            </div>
            <div class="optimization-card">
              <div class="optimization-icon">ğŸ“Š</div>
              <h3>æ€§èƒ½ç›‘æ§</h3>
              <p>ä½¿ç”¨æ€§èƒ½APIç›‘æ§å…³é”®æ“ä½œ</p>
              <div class="code-block small">
                <pre>connectedCallback() {
  performance.mark('component-start');

  // åˆå§‹åŒ–æ“ä½œ

  performance.mark('component-end');
  performance.measure(
    'component-init',
    'component-start',
    'component-end'
  );
}</pre>
              </div>
            </div>
          </div>

          <div class="best-practices">
            <h3>æœ€ä½³å®è·µ</h3>
            <ul>
              <li>ä½¿ç”¨Shadow DOMå®ç°æ ·å¼å’ŒDOMå°è£…</li>
              <li>é€šè¿‡<code>&lt;slot&gt;</code>å®ç°å†…å®¹åˆ†å‘</li>
              <li>ä½¿ç”¨CSSå˜é‡æä¾›ä¸»é¢˜å®šåˆ¶èƒ½åŠ›</li>
              <li>åœ¨disconnectedCallbackä¸­æ¸…ç†èµ„æº</li>
              <li>é¿å…åœ¨attributeChangedCallbackä¸­æ‰§è¡Œé‡æ“ä½œ</li>
              <li>ä½¿ç”¨ResizeObserveræ›¿ä»£resizeäº‹ä»¶</li>
              <li>ä¼˜å…ˆä½¿ç”¨CSSåŠ¨ç”»è€ŒéJavaScriptåŠ¨ç”»</li>
            </ul>
          </div>
        </div>
      </section>
    </div>

    <footer class="guide-footer">
      <p> WebComponenté«˜çº§ä½¿ç”¨æŒ‡å— | ä½¿ç”¨Vue 3 + TypeScriptå®ç°</p>
    </footer>
  </div>
</template>

<script setup lang="ts">
import { ref, onMounted } from 'vue';

const componentLoaded = ref(false);
const eventLogs = ref<{time: string, message: string}[]>([]);
const darkTheme = ref(false);

const loadComponent = () => {
  componentLoaded.value = true;
  addLog('ç”¨æˆ·å¡ç‰‡ç»„ä»¶å·²åŠ è½½');
};

const removeComponent = () => {
  componentLoaded.value = false;
  addLog('ç”¨æˆ·å¡ç‰‡ç»„ä»¶å·²ç§»é™¤');
};

const loadLazyComponent = () => {
  addLog('å¼€å§‹å»¶è¿ŸåŠ è½½ç»„ä»¶...');
  setTimeout(() => {
    componentLoaded.value = true;
    addLog('ç”¨æˆ·å¡ç‰‡ç»„ä»¶å»¶è¿ŸåŠ è½½å®Œæˆ');
  }, 1500);
};

const toggleTheme = () => {
  darkTheme.value = !darkTheme.value;
  addLog(`åˆ‡æ¢åˆ°${darkTheme.value ? 'æ·±è‰²' : 'æµ…è‰²'}ä¸»é¢˜`);
};

const simulateEvent = () => {
  addLog('ç”¨æˆ·æ“ä½œ: å‘é€æ¶ˆæ¯äº‹ä»¶è§¦å‘');
};

const updateComponent = () => {
  addLog('ç”¨æˆ·æ“ä½œ: æ›´æ–°ç”¨æˆ·èµ„æ–™');
};

const clearLogs = () => {
  eventLogs.value = [];
};

const addLog = (message: string) => {
  const now = new Date();
  const timeString = `${now.getHours().toString().padStart(2, '0')}:${now.getMinutes().toString().padStart(2, '0')}:${now.getSeconds().toString().padStart(2, '0')}`;

  eventLogs.value.push({
    time: timeString,
    message
  });

  // ä¿æŒæ—¥å¿—é•¿åº¦ä¸è¶…è¿‡15æ¡
  if (eventLogs.value.length > 15) {
    eventLogs.value.shift();
  }
};

// æ·»åŠ é”®ç›˜å¿«æ·é”®
onMounted(() => {
  window.addEventListener('keydown', (e) => {
    if (e.key === 'ArrowUp' && e.ctrlKey) {
      loadComponent();
    } else if (e.key === 'ArrowDown' && e.ctrlKey) {
      removeComponent();
    }
  });
});
</script>

<style lang="less" scoped>


:root {
  --primary-color: #4361ee;
  --primary-light: #eef2ff;
  --secondary-color: #3a0ca3;
  --accent-color: #4cc9f0;
  --success-color: #4ade80;
  --warning-color: #f59e0b;
  --danger-color: #ef4444;
  --light-color: #f8fafc;
  --dark-color: #1e293b;
  --text-color: #334155;
  --border-color: #e2e8f0;
  --card-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
  --transition: all 0.3s ease;
}

.dark-theme {
  --light-color: #0f172a;
  --dark-color: #f1f5f9;
  --text-color: #cbd5e1;
  --border-color: #334155;
  --card-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
}

.webcomponent-guide {
  font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
  background-color: var(--light-color);
  color: var(--text-color);
  line-height: 1.6;
  min-height: 100vh;
  padding: 0 0 40px;
  transition: var(--transition);
}

.guide-header {
  text-align: center;
  padding: 60px 20px 40px;
  background: linear-gradient(135deg, #4f6df5 0%, #3a56e6 100%);
  color: white;
  margin-bottom: 30px;

  h1 {
    font-size: 2.8rem;
    font-weight: 800;
    margin-bottom: 15px;
    letter-spacing: -0.5px;
  }

  p {
    font-size: 1.3rem;
    max-width: 700px;
    margin: 0 auto;
    opacity: 0.9;
  }
}

.guide-content {
  max-width: 1200px;
  margin: 0 auto;
  padding: 0 20px;
}

.section {
  background: var(--dark-color);
  border-radius: 16px;
  margin-bottom: 30px;
  box-shadow: var(--card-shadow);
  overflow: hidden;
  transition: var(--transition);

  &:hover {
    transform: translateY(-5px);
    box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
  }
}

.section-title {
  background: linear-gradient(90deg, #4f6df5, #3a56e6);
  padding: 18px 30px;
  margin: 0;
  font-size: 1.5rem;
  color: white;
  font-weight: 600;
}

.section-content {
  padding: 30px;
}

.concepts-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
  gap: 25px;
}

.concept-card {
  background: var(--light-color);
  border-radius: 12px;
  padding: 25px;
  text-align: center;
  border: 1px solid var(--border-color);
  transition: var(--transition);

  &:hover {
    border-color: var(--primary-color);
    transform: translateY(-5px);
  }

  .concept-icon {
    width: 70px;
    height: 70px;
    background: var(--primary-color);
    color: white;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 32px;
    font-weight: bold;
    margin: 0 auto 20px;
  }

  h3 {
    margin: 0 0 15px;
    color: var(--dark-color);
    font-size: 1.3rem;
  }

  p {
    color: var(--text-color);
    margin: 0;
    font-size: 1rem;
  }
}

.communication-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
  gap: 25px;
  margin-top: 20px;
}

.method-card {
  background: var(--light-color);
  border-radius: 12px;
  overflow: hidden;
  border: 1px solid var(--border-color);

  .method-header {
    display: flex;
    align-items: center;
    padding: 20px;
    background: var(--primary-light);
    border-bottom: 1px solid var(--border-color);

    .method-icon {
      font-size: 28px;
      margin-right: 15px;
      width: 50px;
      height: 50px;
      background: var(--primary-color);
      color: white;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    h3 {
      margin: 0;
      font-size: 1.3rem;
      color: var(--dark-color);
    }
  }
}

.code-block {
  background: #2d3748;
  color: #e2e8f0;
  border-radius: 8px;
  padding: 20px;
  overflow-x: auto;
  font-family: 'Fira Code', monospace;
  font-size: 0.95rem;
  line-height: 1.5;
  margin-top: 0;

  pre {
    margin: 0;
    white-space: pre-wrap;
  }

  &.small {
    font-size: 0.85rem;
    padding: 15px;
  }
}

.dynamic-demo {
  margin-top: 25px;
}

.demo-controls {
  display: flex;
  flex-wrap: wrap;
  gap: 20px;
  margin-bottom: 25px;

  .control-group {
    display: flex;
    gap: 15px;

    button {
      padding: 12px 25px;
      background: #6366f1;
      color: white;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      font-weight: 500;
      transition: var(--transition);
      display: flex;
      align-items: center;
      gap: 8px;

      &:hover {
        background: var(--secondary-color);
        transform: translateY(-2px);
      }

      &:active {
        transform: translateY(0);
      }

      &:disabled {
        background: #cbd5e0;
        cursor: not-allowed;
        transform: none;
      }

      &.active {
        background: var(--success-color);
      }

      &.theme-toggle {
        background: #6366f1;
      }
    }
  }
}

.demo-area {
  min-height: 220px;
  background: var(--light-color);
  border-radius: 12px;
  border: 1px dashed var(--border-color);
  display: flex;
  align-items: center;
  justify-content: center;
  margin-bottom: 25px;
  padding: 20px;
}

.placeholder-element {
  width: 320px;
  background: white;
  border-radius: 16px;
  overflow: hidden;
  box-shadow: 0 6px 18px rgba(0, 0, 0, 0.08);
  transition: var(--transition);

  &.dark {
    background: #1e293b;
    color: white;
  }

  .element-header {
    background: var(--primary-color);
    color: white;
    padding: 20px;
    display: flex;
    align-items: center;
    gap: 15px;

    .element-icon {
      font-size: 24px;
    }

    h3 {
      margin: 0;
      font-size: 1.4rem;
    }
  }

  .element-body {
    padding: 25px 20px;

    .user-info {
      display: flex;
      align-items: center;
      gap: 15px;
      margin-bottom: 20px;

      .avatar {
        width: 60px;
        height: 60px;
        background: var(--accent-color);
        color: white;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 24px;
        font-weight: bold;
      }

      .user-details {
        flex: 1;

        .user-name {
          font-weight: 600;
          font-size: 1.2rem;
          margin-bottom: 5px;
        }

        .user-email {
          font-size: 0.9rem;
          color: var(--text-color);
        }
      }
    }

    .status {
      display: flex;
      align-items: center;
      gap: 10px;
      font-size: 0.95rem;

      .status-indicator {
        width: 12px;
        height: 12px;
        border-radius: 50%;

        &.active {
          background: var(--success-color);
          box-shadow: 0 0 0 4px rgba(74, 222, 128, 0.3);
        }
      }
    }
  }

  .element-footer {
    padding: 15px 20px;
    background: var(--primary-light);
    display: flex;
    gap: 10px;

    button {
      flex: 1;
      padding: 10px;
      background: white;
      border: 1px solid var(--border-color);
      border-radius: 8px;
      cursor: pointer;
      transition: var(--transition);
      font-weight: 500;

      &:hover {
        background: var(--primary-color);
        color: white;
        border-color: var(--primary-color);
      }

      &:first-child {
        background: var(--primary-color);
        color: white;
        border-color: var(--primary-color);

        &:hover {
          background: var(--secondary-color);
        }
      }
    }
  }
}

.empty-state {
  text-align: center;
  color: #94a3b8;

  .empty-icon {
    font-size: 48px;
    margin-bottom: 15px;
  }

  p {
    margin: 0;
    font-size: 1.1rem;
  }
}

.demo-console {
  background: #1e293b;
  border-radius: 12px;
  overflow: hidden;
  color: #cbd5e1;

  .console-header {
    background: #0f172a;
    padding: 12px 20px;
    font-weight: 600;
    display: flex;
    justify-content: space-between;
    align-items: center;

    button {
      background: #334155;
      color: #cbd5e1;
      border: none;
      border-radius: 6px;
      padding: 6px 12px;
      font-size: 0.85rem;
      cursor: pointer;
      transition: var(--transition);

      &:hover {
        background: #475569;
      }
    }
  }

  .console-content {
    padding: 15px 20px;
    min-height: 120px;
    max-height: 200px;
    overflow-y: auto;
    font-family: 'Fira Code', monospace;
    font-size: 0.9rem;
  }
}

.log-entry {
  padding: 10px 0;
  border-bottom: 1px solid rgba(255, 255, 255, 0.05);
  display: flex;
  gap: 10px;

  &:last-child {
    border-bottom: none;
  }

  .log-time {
    color: #94a3b8;
    flex-shrink: 0;
  }

  .log-message {
    flex: 1;
  }
}

.empty-log {
  color: #64748b;
  text-align: center;
  padding: 30px 0;
  font-style: italic;
}

.code-samples {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(450px, 1fr));
  gap: 25px;
  margin-top: 40px;
}

.lifecycle-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
  gap: 25px;
  margin: 25px 0;
}

.lifecycle-card {
  background: var(--light-color);
  border-radius: 12px;
  padding: 25px;
  border: 1px solid var(--border-color);
  text-align: center;
  transition: var(--transition);

  &:hover {
    border-color: var(--primary-color);
    transform: translateY(-5px);
  }

  .lifecycle-phase {
    width: 50px;
    height: 50px;
    background: var(--primary-color);
    color: white;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 1.5rem;
    font-weight: bold;
    margin: 0 auto 20px;
  }

  h3 {
    margin: 0 0 15px;
    color: var(--dark-color);
    font-size: 1.2rem;
  }

  p {
    color: var(--text-color);
    margin: 0 0 15px;
    font-size: 0.95rem;
  }
}

.unmount-section {
  margin-top: 40px;
  padding-top: 30px;
  border-top: 1px solid var(--border-color);

  h3 {
    margin-top: 0;
    color: var(--dark-color);
    text-align: center;
    margin-bottom: 25px;
  }
}

.unmount-steps {
  display: flex;
  flex-wrap: wrap;
  justify-content: center;
  gap: 20px;

  .step {
    display: flex;
    flex-direction: column;
    align-items: center;
    width: 160px;

    .step-number {
      width: 50px;
      height: 50px;
      background: var(--warning-color);
      color: white;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: bold;
      font-size: 1.3rem;
      margin-bottom: 15px;
    }

    p {
      text-align: center;
      margin: 0;
      font-size: 0.95rem;
      color: var(--text-color);
    }
  }
}

.optimization-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
  gap: 25px;
  margin: 25px 0;
}

.optimization-card {
  background: var(--light-color);
  border-radius: 12px;
  padding: 25px;
  border: 1px solid var(--border-color);
  transition: var(--transition);

  &:hover {
    border-color: var(--primary-color);
    transform: translateY(-5px);
  }

  .optimization-icon {
    font-size: 36px;
    margin-bottom: 15px;
  }

  h3 {
    margin: 0 0 15px;
    color: var(--dark-color);
    font-size: 1.2rem;
  }

  p {
    color: var(--text-color);
    margin: 0 0 15px;
    font-size: 0.95rem;
  }
}

.best-practices {
  margin-top: 40px;
  padding: 25px;
  background: var(--primary-light);
  border-radius: 12px;
  border-left: 4px solid var(--primary-color);

  h3 {
    margin-top: 0;
    margin-bottom: 20px;
    color: var(--dark-color);
  }

  ul {
    padding-left: 20px;
    margin-bottom: 0;
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
    gap: 15px;

    li {
      margin-bottom: 10px;
      padding-left: 10px;
      position: relative;

      &::before {
        content: 'â€¢';
        color: var(--primary-color);
        position: absolute;
        left: -10px;
      }
    }
  }

  code {
    background: rgba(67, 97, 238, 0.1);
    padding: 2px 6px;
    border-radius: 4px;
    font-family: 'Fira Code', monospace;
    font-size: 0.9rem;
    color: var(--primary-color);
  }
}

.guide-footer {
  text-align: center;
  padding: 30px;
  color: #64748b;
  font-size: 0.95rem;
  margin-top: 50px;
}

@media (max-width: 768px) {
  .concepts-grid,
  .communication-grid,
  .lifecycle-grid,
  .optimization-grid,
  .code-samples {
    grid-template-columns: 1fr;
  }

  .guide-header {
    padding: 40px 15px;

    h1 {
      font-size: 2rem;
    }

    p {
      font-size: 1.1rem;
    }
  }

  .demo-controls {
    flex-direction: column;
    gap: 15px;

    .control-group {
      flex-wrap: wrap;
    }
  }

  .unmount-steps {
    flex-direction: column;
    align-items: center;
  }
}
</style>
