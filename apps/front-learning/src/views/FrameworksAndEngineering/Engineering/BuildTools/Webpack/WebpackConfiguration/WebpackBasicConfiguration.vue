<template>
  <div class="webpack-config-container">
    <header class="header">
      <h1>âš™ï¸ Webpack é…ç½®åŸºç¡€ä»‹ç»</h1>
      <p class="subtitle">æŒæ¡æ ¸å¿ƒé…ç½®é¡¹ï¼Œæ„å»ºé«˜æ•ˆå‰ç«¯å·¥ç¨‹</p>
    </header>

    <div class="navigation">
      <div class="nav-item" :class="{ active: activeSection === 'entry' }" @click="activeSection = 'entry'">
        <div class="nav-icon">ğŸ“</div>
        <div>å…¥å£(entry)</div>
      </div>
      <div class="nav-item" :class="{ active: activeSection === 'output' }" @click="activeSection = 'output'">
        <div class="nav-icon">ğŸ“¦</div>
        <div>è¾“å‡º(output)</div>
      </div>
      <div class="nav-item" :class="{ active: activeSection === 'loader' }" @click="activeSection = 'loader'">
        <div class="nav-icon">ğŸ”§</div>
        <div>åŠ è½½å™¨(loader)</div>
      </div>
      <div class="nav-item" :class="{ active: activeSection === 'plugin' }" @click="activeSection = 'plugin'">
        <div class="nav-icon">ğŸ§©</div>
        <div>æ’ä»¶(plugin)</div>
      </div>
    </div>

    <div class="content-section">
      <!-- Entry é…ç½® -->
      <div v-if="activeSection === 'entry'" class="config-section">
        <h2><span class="section-icon">ğŸ“</span> å…¥å£(entry)</h2>

        <div class="config-description">
          <p>å…¥å£èµ·ç‚¹(entry point)æŒ‡ç¤º Webpack åº”è¯¥ä½¿ç”¨å“ªä¸ªæ¨¡å—ï¼Œæ¥ä½œä¸ºæ„å»ºå…¶å†…éƒ¨ä¾èµ–å›¾çš„å¼€å§‹ã€‚</p>
          <p>è¿›å…¥å…¥å£èµ·ç‚¹åï¼ŒWebpack ä¼šæ‰¾å‡ºæœ‰å“ªäº›æ¨¡å—å’Œåº“æ˜¯å…¥å£èµ·ç‚¹ï¼ˆç›´æ¥å’Œé—´æ¥ï¼‰ä¾èµ–çš„ã€‚</p>
        </div>

        <div class="config-card">
          <h3>é…ç½®æ–¹å¼</h3>

          <div class="config-option">
            <h4>1. å•å…¥å£ï¼ˆå­—ç¬¦ä¸²è¯­æ³•ï¼‰</h4>
            <pre class="code">module.exports = {
  entry: './src/index.js'
};</pre>
            <p>é€‚ç”¨äºç®€å•çš„å•é¡µé¢åº”ç”¨(SPA)</p>
          </div>

          <div class="config-option">
            <h4>2. å¤šå…¥å£ï¼ˆå¯¹è±¡è¯­æ³•ï¼‰</h4>
            <pre class="code">module.exports = {
  entry: {
    app: './src/app.js',
    admin: './src/admin.js'
  }
};</pre>
            <p>é€‚ç”¨äºå¤šé¡µé¢åº”ç”¨(MPA)ï¼Œæ¯ä¸ªå…¥å£ç”Ÿæˆä¸€ä¸ª bundle</p>
          </div>

          <div class="config-option">
            <h4>3. åŠ¨æ€å…¥å£ï¼ˆå‡½æ•°è¯­æ³•ï¼‰</h4>
            <pre class="code">module.exports = {
  entry: () => ({
    app: './src/app.js',
    admin: './src/admin.js'
  })
};</pre>
            <p>é€‚ç”¨äºéœ€è¦åŠ¨æ€ç”Ÿæˆå…¥å£ç‚¹çš„åœºæ™¯</p>
          </div>
        </div>

        <div class="use-case">
          <h3>ä½¿ç”¨åœºæ™¯</h3>
          <ul>
            <li>å•é¡µé¢åº”ç”¨ï¼šå•å…¥å£é…ç½®</li>
            <li>å¤šé¡µé¢åº”ç”¨ï¼šå¤šä¸ªå…¥å£ç‚¹å¯¹åº”ä¸åŒé¡µé¢</li>
            <li>ä»£ç åˆ†ç¦»ï¼šä¸åŒå…¥å£å…±äº«å…¬å…±æ¨¡å—</li>
            <li>åŠ¨æ€åŠ è½½ï¼šæ ¹æ®æ¡ä»¶åŠ¨æ€ç”Ÿæˆå…¥å£ç‚¹</li>
          </ul>
        </div>
      </div>

      <!-- Output é…ç½® -->
      <div v-if="activeSection === 'output'" class="config-section">
        <h2><span class="section-icon">ğŸ“¦</span> è¾“å‡º(output)</h2>

        <div class="config-description">
          <p>output å±æ€§å‘Šè¯‰ Webpack åœ¨å“ªé‡Œè¾“å‡ºå®ƒæ‰€åˆ›å»ºçš„ bundlesï¼Œä»¥åŠå¦‚ä½•å‘½åè¿™äº›æ–‡ä»¶ã€‚</p>
          <p>ä¸»è¦è¾“å‡ºæ–‡ä»¶çš„é»˜è®¤å€¼æ˜¯ ./dist/main.jsï¼Œå…¶ä»–ç”Ÿæˆæ–‡ä»¶é»˜è®¤æ”¾ç½®åœ¨ ./dist æ–‡ä»¶å¤¹ä¸­ã€‚</p>
        </div>

        <div class="config-card">
          <h3>æ ¸å¿ƒé…ç½®é¡¹</h3>

          <div class="config-option">
            <h4>path</h4>
            <p>è¾“å‡ºæ–‡ä»¶çš„ç›®æ ‡è·¯å¾„</p>
            <pre class="code">const path = require('path');

module.exports = {
  output: {
    path: path.resolve(__dirname, 'dist')
  }
};</pre>
          </div>

          <div class="config-option">
            <h4>filename</h4>
            <p>è¾“å‡ºæ–‡ä»¶çš„åç§°</p>
            <pre class="code">module.exports = {
  output: {
    filename: 'bundle.js'
    // æˆ–ä½¿ç”¨å ä½ç¬¦
    // filename: '[name].bundle.js'
    // filename: '[name].[contenthash].js'
  }
};</pre>
          </div>

          <div class="config-option">
            <h4>publicPath</h4>
            <p>å…¬å…±è·¯å¾„ï¼Œç”¨äºåŠ è½½å¤–éƒ¨èµ„æº</p>
            <pre class="code">module.exports = {
  output: {
    publicPath: '/assets/'
    // æˆ–ä½¿ç”¨CDN
    // publicPath: 'https://cdn.example.com/assets/'
  }
};</pre>
          </div>

          <div class="config-option">
            <h4>chunkFilename</h4>
            <p>éå…¥å£(non-entry) chunk æ–‡ä»¶çš„åç§°</p>
            <pre class="code">module.exports = {
  output: {
    chunkFilename: '[name].chunk.js'
  }
};</pre>
          </div>
        </div>

        <div class="use-case">
          <h3>æœ€ä½³å®è·µ</h3>
          <ul>
            <li>ä½¿ç”¨ <code>path.resolve</code> å¤„ç†ç»å¯¹è·¯å¾„</li>
            <li>ä½¿ç”¨ <code>[contenthash]</code> å®ç°é•¿æ•ˆç¼“å­˜</li>
            <li>ç”Ÿäº§ç¯å¢ƒä½¿ç”¨CDNé…ç½® <code>publicPath</code></li>
            <li>ä¸ºä¸åŒç¯å¢ƒé…ç½®ä¸åŒçš„è¾“å‡ºè·¯å¾„</li>
          </ul>
        </div>
      </div>

      <!-- Loader é…ç½® -->
      <div v-if="activeSection === 'loader'" class="config-section">
        <h2><span class="section-icon">ğŸ”§</span> åŠ è½½å™¨(loader)</h2>

        <div class="config-description">
          <p>loader ç”¨äºå¯¹æ¨¡å—çš„æºä»£ç è¿›è¡Œè½¬æ¢ã€‚å®ƒä»¬å…è®¸ä½ é¢„å¤„ç†æ–‡ä»¶ï¼Œå°†å…¶è½¬æ¢ä¸º JavaScript å¯ä»¥è¯†åˆ«çš„æ ¼å¼ã€‚</p>
          <p>loader å¯ä»¥å°†æ–‡ä»¶ä»ä¸åŒçš„è¯­è¨€ï¼ˆå¦‚ TypeScriptï¼‰è½¬æ¢ä¸º JavaScriptï¼Œæˆ–å°†å†…è”å›¾åƒè½¬æ¢ä¸º data URLã€‚</p>
        </div>

        <div class="config-card">
          <h3>é…ç½®æ–¹å¼</h3>

          <div class="config-option">
            <h4>åŸºæœ¬ç»“æ„</h4>
            <pre class="code">module.exports = {
  module: {
    rules: [
      {
        test: /\.ext$/,  // åŒ¹é…æ–‡ä»¶æ‰©å±•å
        use: [          // ä½¿ç”¨çš„loader
          'loader-name'
        ],
        exclude: /node_modules/  // æ’é™¤ç›®å½•
      }
    ]
  }
};</pre>
          </div>

          <div class="common-loaders">
            <h3>å¸¸ç”¨ Loader ç¤ºä¾‹</h3>

            <div class="loader-example">
              <h4>Babel Loader</h4>
              <p>è½¬æ¢ ES6+ è¯­æ³•</p>
              <pre class="code">{
  test: /\.js$/,
  exclude: /node_modules/,
  use: {
    loader: 'babel-loader',
    options: {
      presets: ['@babel/preset-env']
    }
  }
}</pre>
            </div>

            <div class="loader-example">
              <h4>CSS Loader + Style Loader</h4>
              <p>å¤„ç† CSS æ–‡ä»¶</p>
              <pre class="code">{
  test: /\.css$/,
  use: [
    'style-loader',  // å°†CSSæ³¨å…¥DOM
    'css-loader'     // è§£æCSSå¯¼å…¥
  ]
}</pre>
            </div>

            <div class="loader-example">
              <h4>File Loader</h4>
              <p>å¤„ç†æ–‡ä»¶èµ„æº</p>
              <pre class="code">{
  test: /\.(png|jpe?g|gif|svg)$/,
  use: [
    {
      loader: 'file-loader',
      options: {
        name: '[name].[ext]',
        outputPath: 'images/'
      }
    }
  ]
}</pre>
            </div>
          </div>
        </div>

        <div class="use-case">
          <h3>Loader æ‰§è¡Œé¡ºåº</h3>
          <p>Loader ä»å³åˆ°å·¦ï¼ˆæˆ–ä»ä¸‹åˆ°ä¸Šï¼‰æ‰§è¡Œï¼š</p>
          <pre class="code">use: [
  'style-loader', // æœ€åæ‰§è¡Œ
  'css-loader',   // å…¶æ¬¡æ‰§è¡Œ
  'sass-loader'   // æœ€å…ˆæ‰§è¡Œ
]</pre>
          <p>æ•°æ®æµï¼šsass â†’ css â†’ style</p>
        </div>
      </div>

      <!-- Plugin é…ç½® -->
      <div v-if="activeSection === 'plugin'" class="config-section">
        <h2><span class="section-icon">ğŸ§©</span> æ’ä»¶(plugin)</h2>

        <div class="config-description">
          <p>æ’ä»¶æ˜¯ Webpack çš„æ”¯æŸ±åŠŸèƒ½ï¼Œç”¨äºæ‰§è¡ŒèŒƒå›´æ›´å¹¿çš„ä»»åŠ¡ã€‚æ’ä»¶çš„èŒƒå›´åŒ…æ‹¬ä»æ‰“åŒ…ä¼˜åŒ–å’Œå‹ç¼©ï¼Œä¸€ç›´åˆ°é‡æ–°å®šä¹‰ç¯å¢ƒä¸­çš„å˜é‡ã€‚</p>
          <p>æ’ä»¶æ¥å£åŠŸèƒ½æå…¶å¼ºå¤§ï¼Œå¯ä»¥ç”¨æ¥å¤„ç†å„ç§å„æ ·çš„ä»»åŠ¡ã€‚</p>
        </div>

        <div class="config-card">
          <h3>é…ç½®æ–¹å¼</h3>

          <div class="config-option">
            <h4>åŸºæœ¬ç»“æ„</h4>
            <pre class="code">const ExamplePlugin = require('example-plugin');

module.exports = {
  plugins: [
    new ExamplePlugin({ options })
  ]
};</pre>
            <p>æ’ä»¶é€šè¿‡æ„é€ å‡½æ•°å®ä¾‹åŒ–åæ·»åŠ åˆ° plugins æ•°ç»„</p>
          </div>

          <div class="common-plugins">
            <h3>å¸¸ç”¨æ’ä»¶ç¤ºä¾‹</h3>

            <div class="plugin-example">
              <h4>HtmlWebpackPlugin</h4>
              <p>è‡ªåŠ¨ç”Ÿæˆ HTML æ–‡ä»¶å¹¶æ³¨å…¥èµ„æº</p>
              <pre class="code">const HtmlWebpackPlugin = require('html-webpack-plugin');

module.exports = {
  plugins: [
    new HtmlWebpackPlugin({
      template: './src/index.html',
      filename: 'index.html',
      chunks: ['main']
    })
  ]
};</pre>
            </div>

            <div class="plugin-example">
              <h4>MiniCssExtractPlugin</h4>
              <p>å°† CSS æå–åˆ°å•ç‹¬çš„æ–‡ä»¶</p>
              <pre class="code">const MiniCssExtractPlugin = require('mini-css-extract-plugin');

module.exports = {
  module: {
    rules: [
      {
        test: /\.css$/,
        use: [
          MiniCssExtractPlugin.loader,
          'css-loader'
        ]
      }
    ]
  },
  plugins: [
    new MiniCssExtractPlugin({
      filename: '[name].[contenthash].css'
    })
  ]
};</pre>
            </div>

            <div class="plugin-example">
              <h4>CleanWebpackPlugin</h4>
              <p>åœ¨æ„å»ºå‰æ¸…ç†è¾“å‡ºç›®å½•</p>
              <pre class="code">const { CleanWebpackPlugin } = require('clean-webpack-plugin');

module.exports = {
  plugins: [
    new CleanWebpackPlugin()
  ]
};</pre>
            </div>
          </div>
        </div>

        <div class="use-case">
          <h3>æ’ä»¶ä½¿ç”¨åœºæ™¯</h3>
          <ul>
            <li>èµ„æºç®¡ç†ï¼šç”ŸæˆHTMLã€æå–CSS</li>
            <li>ä¼˜åŒ–ï¼šå‹ç¼©ä»£ç ã€å»é™¤æœªä½¿ç”¨ä»£ç </li>
            <li>ç¯å¢ƒå˜é‡ï¼šå®šä¹‰å…¨å±€å¸¸é‡</li>
            <li>å¼€å‘è¾…åŠ©ï¼šçƒ­æ›´æ–°ã€è¿›åº¦æ¡</li>
            <li>åˆ†æï¼šåŒ…å¤§å°åˆ†æã€ä¾èµ–å¯è§†åŒ–</li>
          </ul>
        </div>
      </div>
    </div>

    <div class="full-config">
      <h2><span class="section-icon">ğŸ“„</span> å®Œæ•´é…ç½®ç¤ºä¾‹</h2>
      <pre class="code">const path = require('path');
const HtmlWebpackPlugin = require('html-webpack-plugin');
const { CleanWebpackPlugin } = require('clean-webpack-plugin');

module.exports = {
  // å…¥å£é…ç½®
  entry: {
    main: './src/index.js',
    vendor: './src/vendor.js'
  },

  // è¾“å‡ºé…ç½®
  output: {
    path: path.resolve(__dirname, 'dist'),
    filename: '[name].[contenthash].js',
    publicPath: '/'
  },

  // æ¨¡å—å’Œloaderé…ç½®
  module: {
    rules: [
      {
        test: /\.js$/,
        exclude: /node_modules/,
        use: 'babel-loader'
      },
      {
        test: /\.css$/,
        use: ['style-loader', 'css-loader']
      },
      {
        test: /\.(png|svg|jpg|gif)$/,
        use: ['file-loader']
      }
    ]
  },

  // æ’ä»¶é…ç½®
  plugins: [
    new CleanWebpackPlugin(),
    new HtmlWebpackPlugin({
      template: './src/index.html'
    })
  ],

  // å¼€å‘æœåŠ¡å™¨
  devServer: {
    contentBase: './dist',
    hot: true
  },

  // æ¨¡å¼é…ç½®
  mode: 'development'
};</pre>
    </div>

    <footer class="footer">
      <p>Webpack é…ç½®æŒ‡å— | æœ€åæ›´æ–°: {{ currentDate }}</p>
      <div class="footer-links">
        <a href="https://webpack.js.org/" target="_blank">å®˜æ–¹æ–‡æ¡£</a>
        <a href="#">é…ç½®ç¤ºä¾‹</a>
        <a href="#">æœ€ä½³å®è·µ</a>
        <a href="#">é—®é¢˜åé¦ˆ</a>
      </div>
    </footer>
  </div>
</template>

<script setup lang="ts">
import { ref } from 'vue';

const activeSection = ref('entry');
const currentDate = new Date().toLocaleDateString('zh-CN', {
  year: 'numeric',
  month: 'long',
  day: 'numeric'
});
</script>

<style lang="less" scoped>


:root {
  --primary: #4a6cf7;
  --primary-light: #eef2ff;
  --secondary: #8b5cf6;
  --accent: #0ea5e9;
  --background: #f8fafc;
  --card-bg: #ffffff;
  --text: #1e293b;
  --text-light: #64748b;
  --border: #e2e8f0;
  --success: #10b981;
  --warning: #f59e0b;
  --error: #ef4444;
  --code-bg: #f1f5f9;
  --nav-active: #e0e7ff;
}

* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

body {
  background-color: var(--background);
  color: var(--text);
  font-family: 'Inter', sans-serif;
  line-height: 1.6;
}

.webpack-config-container {
  max-width: 1200px;
  margin: 0 auto;
  padding: 0 20px;
  min-height: 100vh;
  display: flex;
  flex-direction: column;
}

.header {
  text-align: center;
  padding: 3rem 0 1.5rem;
  margin-bottom: 1rem;

  h1 {
    font-size: 2.5rem;
    color: var(--primary);
    font-weight: 700;
    margin-bottom: 0.5rem;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 12px;
  }

  .subtitle {
    font-size: 1.2rem;
    color: var(--text-light);
    max-width: 800px;
    margin: 0 auto;
  }
}

.navigation {
  display: flex;
  justify-content: center;
  gap: 15px;
  margin-bottom: 2rem;
  flex-wrap: wrap;
  padding: 15px 0;
  background: var(--card-bg);
  border-radius: 12px;
  box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);

  .nav-item {
    display: flex;
    flex-direction: column;
    align-items: center;
    padding: 15px 25px;
    border-radius: 8px;
    cursor: pointer;
    transition: all 0.3s;
    min-width: 120px;

    &:hover {
      background: var(--primary-light);
    }

    &.active {
      background: var(--nav-active);
      color: var(--primary);
      font-weight: 600;
    }

    .nav-icon {
      font-size: 1.8rem;
      margin-bottom: 8px;
    }
  }
}

.content-section {
  flex: 1;
}

.config-section {
  background: var(--card-bg);
  border-radius: 12px;
  padding: 30px;
  margin-bottom: 2rem;
  box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);

  h2 {
    font-size: 1.8rem;
    margin-bottom: 25px;
    color: var(--primary);
    display: flex;
    align-items: center;
    gap: 12px;
    padding-bottom: 15px;
    border-bottom: 1px solid var(--border);

    .section-icon {
      font-size: 1.5rem;
    }
  }
}

.config-description {
  background: var(--primary-light);
  border-radius: 8px;
  padding: 20px;
  margin-bottom: 25px;

  p {
    margin-bottom: 15px;
    line-height: 1.7;
    color: var(--text);

    &:last-child {
      margin-bottom: 0;
    }
  }
}

.config-card {
  background: var(--card-bg);
  border: 1px solid var(--border);
  border-radius: 8px;
  padding: 25px;
  margin-bottom: 25px;

  h3 {
    font-size: 1.4rem;
    margin-bottom: 20px;
    color: var(--primary);
    padding-bottom: 10px;
    border-bottom: 1px solid var(--border);
  }
}

.config-option {
  margin-bottom: 30px;

  h4 {
    font-size: 1.2rem;
    margin-bottom: 10px;
    color: var(--secondary);
    display: flex;
    align-items: center;
    gap: 8px;
  }

  p {
    margin-bottom: 15px;
    color: var(--text-light);
    line-height: 1.6;
  }
}

.common-loaders,
.common-plugins {
  margin-top: 30px;

  h3 {
    font-size: 1.4rem;
    margin-bottom: 20px;
    color: var(--primary);
    padding-bottom: 10px;
    border-bottom: 1px solid var(--border);
  }
}

.loader-example,
.plugin-example {
  background: var(--primary-light);
  border-radius: 8px;
  padding: 20px;
  margin-bottom: 20px;

  h4 {
    font-size: 1.2rem;
    margin-bottom: 10px;
    color: var(--secondary);
  }

  p {
    margin-bottom: 15px;
    color: var(--text-light);
  }
}

.use-case {
  background: var(--card-bg);
  border: 1px solid var(--border);
  border-radius: 8px;
  padding: 25px;

  h3 {
    font-size: 1.3rem;
    margin-bottom: 15px;
    color: var(--primary);
  }

  ul {
    list-style: none;

    li {
      padding: 10px 0;
      position: relative;
      padding-left: 25px;

      &::before {
        content: 'â€¢';
        position: absolute;
        left: 10px;
        top: 10px;
        color: var(--primary);
        font-size: 1.2rem;
      }
    }
  }
}

.code {
  background: var(--code-bg);
  border-radius: 8px;
  padding: 20px;
  font-family: 'Courier New', monospace;
  font-size: 0.95rem;
  overflow-x: auto;
  margin: 15px 0;
  display: block;
  border: 1px solid var(--border);
  color: var(--text);
  line-height: 1.5;
  box-shadow: inset 0 1px 3px rgba(0, 0, 0, 0.1);
}

.full-config {
  background: var(--card-bg);
  border-radius: 12px;
  padding: 30px;
  margin-bottom: 2rem;
  box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);

  h2 {
    font-size: 1.8rem;
    margin-bottom: 25px;
    color: var(--primary);
    display: flex;
    align-items: center;
    gap: 12px;
    padding-bottom: 15px;
    border-bottom: 1px solid var(--border);
  }
}

.footer {
  text-align: center;
  padding: 25px 0;
  margin-top: auto;
  color: var(--text-light);
  font-size: 0.9rem;
  border-top: 1px solid var(--border);

  .footer-links {
    margin-top: 10px;

    a {
      color: var(--primary);
      text-decoration: none;
      margin: 0 10px;
      transition: color 0.3s;

      &:hover {
        color: var(--secondary);
      }
    }
  }
}

@media (max-width: 768px) {
  .header h1 {
    font-size: 2rem;
  }

  .navigation {
    gap: 8px;

    .nav-item {
      padding: 10px 15px;
      min-width: 100px;
    }
  }

  .config-section {
    padding: 20px;
  }

  .config-card {
    padding: 15px;
  }

  .code {
    font-size: 0.85rem;
    padding: 15px;
  }
}
</style>
