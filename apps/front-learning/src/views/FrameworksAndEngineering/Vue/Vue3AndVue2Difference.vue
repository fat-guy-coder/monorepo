<template>
  <div class="vue-comparison">
    <header class="header">
      <h1>Vue2 ä¸ Vue3 æ ¸å¿ƒåŒºåˆ«</h1>
      <p>åŸºæœ¬è§£æä¸¤å¤§ç‰ˆæœ¬çš„æ ¸å¿ƒå·®å¼‚ä¸å‡çº§äº®ç‚¹</p>
    </header>

    <div class="content">
      <div class="version-cards">
        <div class="version-card vue2">
          <div class="version-header">
            <div class="version-icon">2.x</div>
            <h2>Vue2</h2>
            <div class="version-year">2016-2023</div>
          </div>
          <div class="version-features">
            <div class="feature">Options API</div>
            <div class="feature">Flow ç±»å‹ç³»ç»Ÿ</div>
            <div class="feature">Object.defineProperty</div>
            <div class="feature">å…¨é‡ DOM Diff</div>
          </div>
        </div>

        <div class="version-card vue3">
          <div class="version-header">
            <div class="version-icon">3.x</div>
            <h2>Vue3</h2>
            <div class="version-year">2020-è‡³ä»Š</div>
          </div>
          <div class="version-features">
            <div class="feature">Composition API</div>
            <div class="feature">TypeScript é‡æ„</div>
            <div class="feature">Proxy å“åº”å¼</div>
            <div class="feature">ä¼˜åŒ–çš„ DOM Diff</div>
          </div>
        </div>
      </div>

      <div class="comparison-section">
        <h2>åº•å±‚å®ç°å·®å¼‚</h2>
        <div class="comparison-grid">
          <div class="comparison-card">
            <h3>å“åº”å¼ç³»ç»Ÿ</h3>
            <div class="comparison-details">
              <div class="vue2-detail">
                <h4>Vue2</h4>
                <p>åŸºäº Object.defineProperty</p>
                <ul>
                  <li>æ— æ³•æ£€æµ‹å¯¹è±¡å±æ€§çš„æ·»åŠ /åˆ é™¤</li>
                  <li>æ•°ç»„å˜å¼‚æ–¹æ³•éœ€è¦é‡å†™</li>
                  <li>éœ€è¦é€’å½’éå†æ‰€æœ‰å±æ€§</li>
                </ul>
              </div>
              <div class="vue3-detail">
                <h4>Vue3</h4>
                <p>åŸºäº Proxy çš„å“åº”å¼ç³»ç»Ÿ</p>
                <ul>
                  <li>æ”¯æŒåŠ¨æ€æ·»åŠ /åˆ é™¤å±æ€§</li>
                  <li>åŸç”Ÿæ”¯æŒæ•°ç»„å˜åŒ–æ£€æµ‹</li>
                  <li>æƒ°æ€§ä»£ç†ï¼Œæ€§èƒ½æ›´å¥½</li>
                </ul>
              </div>
            </div>
          </div>

          <div class="comparison-card">
            <h3>è™šæ‹Ÿ DOM ä¼˜åŒ–</h3>
            <div class="comparison-details">
              <div class="vue2-detail">
                <h4>Vue2</h4>
                <p>å…¨é‡ Diff ç®—æ³•</p>
                <ul>
                  <li>ç»„ä»¶æ ‘å…¨é‡æ¯”è¾ƒ</li>
                  <li>é™æ€èŠ‚ç‚¹æ— ä¼˜åŒ–</li>
                  <li>æ€§èƒ½ä¸æ¨¡æ¿å¤§å°çº¿æ€§ç›¸å…³</li>
                </ul>
              </div>
              <div class="vue3-detail">
                <h4>Vue3</h4>
                <p>ç¼–è¯‘æ—¶ä¼˜åŒ– + PatchFlag</p>
                <ul>
                  <li>é™æ€æå‡ (HoistStatic)</li>
                  <li>PatchFlag æ ‡è®°åŠ¨æ€èŠ‚ç‚¹</li>
                  <li>æ ‘ç»“æ„æ‹å¹³ (Tree Flattening)</li>
                </ul>
              </div>
            </div>
          </div>
        </div>
      </div>

      <div class="dom-diff-section">
        <h2>DOM-Diff ç®—æ³•ä¼˜åŒ–</h2>
        <div class="diff-explanation">
          <div class="diff-optimization">
            <h3>PatchFlag - åŠ¨æ€èŠ‚ç‚¹æ ‡è®°</h3>
            <div class="code-block">
              <pre><code>&lt;div&gt;
  &lt;span&gt;é™æ€æ–‡æœ¬&lt;/span&gt;
  &lt;span :class="dynamicClass"&gt;{ dynamicText }&lt;/span&gt;
&lt;/div&gt;</code></pre>
            </div>
            <div class="diff-visual">
              <div class="vnode">
                <div class="vnode-header">VNode</div>
                <div class="vnode-props">
                  <div>patchFlag: 9 <span class="flag-desc">(TEXT + CLASS)</span></div>
                  <div>dynamicProps: ["class"]</div>
                </div>
              </div>
            </div>
            <p>Vue3 åœ¨ç¼–è¯‘é˜¶æ®µæ ‡è®°åŠ¨æ€èŠ‚ç‚¹ç±»å‹ï¼ŒDiff æ—¶åªéœ€æ£€æŸ¥å¸¦æ ‡è®°çš„èŠ‚ç‚¹</p>
          </div>

          <div class="diff-optimization">
            <h3>æ ‘ç»“æ„æ‹å¹³ (Tree Flattening)</h3>
            <div class="tree-comparison">
              <div class="tree">
                <h4>Vue2 æ ‘ç»“æ„</h4>
                <div class="node root">Root</div>
                <div class="children">
                  <div class="node">Static</div>
                  <div class="node">Static</div>
                  <div class="node dynamic">Dynamic</div>
                  <div class="node">Static</div>
                  <div class="node dynamic">Dynamic</div>
                </div>
              </div>
              <div class="arrow">â†’</div>
              <div class="tree">
                <h4>Vue3 æ‹å¹³ç»“æ„</h4>
                <div class="flat-nodes">
                  <div class="node dynamic">Dynamic</div>
                  <div class="node dynamic">Dynamic</div>
                </div>
              </div>
            </div>
            <p>Vue3 å°†åŠ¨æ€èŠ‚ç‚¹æå–åˆ°æ•°ç»„ï¼Œè·³è¿‡é™æ€èŠ‚ç‚¹æ¯”è¾ƒ</p>
          </div>
        </div>
      </div>

      <div class="usage-section">
        <h2>ä½¿ç”¨æ–¹å¼å¯¹æ¯”</h2>
        <div class="api-comparison">
          <div class="api-card options-api">
            <h3>Options API (Vue2)</h3>
            <div class="code-block">
              <pre><code>export default {
  data() {
    return {
      count: 0
    }
  },
  computed: {
    double() {
      return this.count * 2
    }
  },
  methods: {
    increment() {
      this.count++
    }
  },
  mounted() {
    console.log('ç»„ä»¶å·²æŒ‚è½½')
  }
}</code></pre>
            </div>
            <div class="pros-cons">
              <div class="pros">
                <h4>ä¼˜ç‚¹</h4>
                <ul>
                  <li>ç»“æ„æ¸…æ™°ï¼Œæ˜“äºç†è§£</li>
                  <li>é€‚åˆç®€å•ç»„ä»¶</li>
                  <li>å¯¹æ–°æ‰‹å‹å¥½</li>
                </ul>
              </div>
              <div class="cons">
                <h4>ç¼ºç‚¹</h4>
                <ul>
                  <li>é€»è¾‘åˆ†æ•£åœ¨ä¸åŒé€‰é¡¹</li>
                  <li>å¤§å‹ç»„ä»¶éš¾ä»¥ç»´æŠ¤</li>
                  <li>ä»£ç å¤ç”¨å›°éš¾</li>
                </ul>
              </div>
            </div>
          </div>

          <div class="api-card composition-api">
            <h3>Composition API (Vue3)</h3>
            <div class="code-block">
              <pre><code>import { ref, computed, onMounted } from 'vue'

export default {
  setup() {
    const count = ref(0)
    const double = computed(() => count.value * 2)

    function increment() {
      count.value++
    }

    onMounted(() => {
      console.log('ç»„ä»¶å·²æŒ‚è½½')
    })

    return { count, double, increment }
  }
}</code></pre>
            </div>
            <div class="pros-cons">
              <div class="pros">
                <h4>ä¼˜ç‚¹</h4>
                <ul>
                  <li>é€»è¾‘å…³æ³¨ç‚¹é›†ä¸­</li>
                  <li>æ›´å¥½çš„ä»£ç ç»„ç»‡</li>
                  <li>å¼ºå¤§çš„ä»£ç å¤ç”¨èƒ½åŠ›</li>
                </ul>
              </div>
              <div class="cons">
                <h4>ç¼ºç‚¹</h4>
                <ul>
                  <li>å­¦ä¹ æ›²çº¿è¾ƒé™¡</li>
                  <li>éœ€è¦ç†è§£å“åº”å¼åŸç†</li>
                  <li>å°å‹ç»„ä»¶å¯èƒ½è¿‡åº¦å¤æ‚</li>
                </ul>
              </div>
            </div>
          </div>
        </div>
      </div>

      <div class="ecosystem-section">
        <h2>ç”Ÿæ€ç³»ç»Ÿå¯¹æ¯”</h2>
        <div class="ecosystem-grid">
          <div class="ecosystem-card">
            <h3>å®˜æ–¹å·¥å…·</h3>
            <div class="tools">
              <div class="tool vue2">
                <div>Vue CLI</div>
                <div class="status">ç»´æŠ¤ä¸­</div>
              </div>
              <div class="tool vue3">
                <div>Vite</div>
                <div class="status">æ¨è</div>
              </div>
            </div>
          </div>

          <div class="ecosystem-card">
            <h3>çŠ¶æ€ç®¡ç†</h3>
            <div class="tools">
              <div class="tool vue2">
                <div>Vuex 3</div>
                <div class="status">å…¼å®¹</div>
              </div>
              <div class="tool vue3">
                <div>Vuex 4/Pinia</div>
                <div class="status">æ¨è</div>
              </div>
            </div>
          </div>

          <div class="ecosystem-card">
            <h3>è·¯ç”±</h3>
            <div class="tools">
              <div class="tool vue2">
                <div>Vue Router 3</div>
                <div class="status">å…¼å®¹</div>
              </div>
              <div class="tool vue3">
                <div>Vue Router 4</div>
                <div class="status">æ¨è</div>
              </div>
            </div>
          </div>

          <div class="ecosystem-card">
            <h3>TypeScript</h3>
            <div class="tools">
              <div class="tool vue2">
                <div>æ”¯æŒæœ‰é™</div>
                <div class="status">éœ€é¢å¤–é…ç½®</div>
              </div>
              <div class="tool vue3">
                <div>åŸç”Ÿæ”¯æŒ</div>
                <div class="status">å®Œå–„ç±»å‹ç³»ç»Ÿ</div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <div class="upgrade-section">
        <h2>å‡çº§å»ºè®®</h2>
        <div class="upgrade-cards">
          <div class="upgrade-card">
            <h3>æ–°é¡¹ç›®</h3>
            <p>ç›´æ¥ä½¿ç”¨ Vue3 + Vite + Pinia + Vue Router 4</p>
            <div class="icon">ğŸš€</div>
          </div>
          <div class="upgrade-card">
            <h3>ä¸­å‹é¡¹ç›®</h3>
            <p>é€æ­¥è¿ç§»ï¼Œä½¿ç”¨ Vue3 å…¼å®¹å±‚</p>
            <div class="icon">ğŸ”„</div>
          </div>
          <div class="upgrade-card">
            <h3>å¤§å‹é¡¹ç›®</h3>
            <p>è¯„ä¼°è¿ç§»æˆæœ¬ï¼Œåˆ†æ¨¡å—è¿ç§»</p>
            <div class="icon">ğŸ§©</div>
          </div>
        </div>
      </div>
    </div>
  </div>
</template>

<script lang="ts" setup>
// è¿™é‡Œå¯ä»¥æ·»åŠ äº¤äº’é€»è¾‘ï¼ˆå¦‚æœéœ€è¦ï¼‰
</script>

<style lang="less" scoped>
.vue-comparison {
  max-width: 1200px;
  margin: 0 auto;
  padding: 2rem 1rem;
  font-family: 'Segoe UI', system-ui, sans-serif;
  color: #2c3e50;
  line-height: 1.6;
}

.header {
  text-align: center;
  margin-bottom: 3rem;

  h1 {
    font-size: 2.5rem;
    margin-bottom: 0.5rem;
    color: #34495e;
    font-weight: 700;
  }

  p {
    font-size: 1.2rem;
    color: #7f8c8d;
    margin-top: 0;
  }
}

.content {
  background: white;
  border-radius: 12px;
  box-shadow: 0 5px 20px rgba(0, 0, 0, 0.05);
  padding: 2.5rem;
}

.version-cards {
  display: flex;
  gap: 2rem;
  margin-bottom: 3rem;

  @media (max-width: 768px) {
    flex-direction: column;
  }
}

.version-card {
  flex: 1;
  border-radius: 12px;
  overflow: hidden;
  box-shadow: 0 8px 20px rgba(0, 0, 0, 0.1);
  transition: transform 0.3s ease;

  &:hover {
    transform: translateY(-5px);
  }

  &.vue2 {
    border-top: 4px solid #42b983;
  }

  &.vue3 {
    border-top: 4px solid #41b883;
  }
}

.version-header {
  padding: 1.5rem;
  text-align: center;
  color: white;
  position: relative;

  .vue2 & {
    background: linear-gradient(135deg, #42b983, #35495e);
  }

  .vue3 & {
    background: linear-gradient(135deg, #41b883, #34495e);
  }
}

.version-icon {
  position: absolute;
  top: -20px;
  left: 50%;
  transform: translateX(-50%);
  width: 60px;
  height: 60px;
  background: white;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 1.8rem;
  font-weight: bold;
  box-shadow: 0 4px 10px rgba(0, 0, 0, 0.15);

  .vue2 & {
    color: #42b983;
    border: 3px solid #42b983;
  }

  .vue3 & {
    color: #41b883;
    border: 3px solid #41b883;
  }
}

.version-features {
  padding: 1.5rem;

  .feature {
    padding: 0.8rem 1rem;
    margin-bottom: 0.8rem;
    border-radius: 8px;
    font-weight: 500;

    .vue2 & {
      background: #f0f9f4;
      border-left: 4px solid #42b983;
    }

    .vue3 & {
      background: #f0f9f4;
      border-left: 4px solid #41b883;
    }
  }
}

.comparison-section {
  margin-bottom: 3rem;

  h2 {
    font-size: 1.8rem;
    margin-bottom: 1.5rem;
    color: #34495e;
    padding-bottom: 0.8rem;
    border-bottom: 2px solid #f0f4f8;
  }
}

.comparison-grid {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 1.5rem;

  @media (max-width: 900px) {
    grid-template-columns: 1fr;
  }
}

.comparison-card {
  background: #f8fafc;
  border-radius: 12px;
  padding: 1.5rem;
  box-shadow: 0 4px 10px rgba(0, 0, 0, 0.05);

  h3 {
    margin-top: 0;
    margin-bottom: 1.5rem;
    color: #4f46e5;
    text-align: center;
    font-size: 1.4rem;
  }
}

.comparison-details {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 1rem;

  @media (max-width: 600px) {
    grid-template-columns: 1fr;
  }
}

.vue2-detail,
.vue3-detail {
  padding: 1.2rem;
  border-radius: 8px;

  h4 {
    margin-top: 0;
    padding-bottom: 0.5rem;
    border-bottom: 1px dashed #e2e8f0;
  }
}

.vue2-detail {
  background: #f0f9f4;
  border-left: 3px solid #42b983;
}

.vue3-detail {
  background: #f0f9f4;
  border-left: 3px solid #41b883;
}

.dom-diff-section {
  margin-bottom: 3rem;

  h2 {
    font-size: 1.8rem;
    margin-bottom: 1.5rem;
    color: #34495e;
    padding-bottom: 0.8rem;
    border-bottom: 2px solid #f0f4f8;
  }
}

.diff-explanation {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 1.5rem;

  @media (max-width: 900px) {
    grid-template-columns: 1fr;
  }
}

.diff-optimization {
  background: #f8fafc;
  border-radius: 12px;
  padding: 1.5rem;
  box-shadow: 0 4px 10px rgba(0, 0, 0, 0.05);

  h3 {
    margin-top: 0;
    color: #4f46e5;
    font-size: 1.3rem;
  }
}

.code-block {
  background: #2d2d2d;
  color: #f8f8f2;
  border-radius: 8px;
  padding: 1.2rem;
  margin: 1.2rem 0;
  overflow-x: auto;

  pre {
    margin: 0;
    font-family: 'Fira Code', 'Consolas', monospace;
    font-size: 0.95rem;
    line-height: 1.5;
  }
}

.diff-visual {
  display: flex;
  justify-content: center;
  margin: 1.5rem 0;
}

.vnode {
  border: 1px solid #e2e8f0;
  border-radius: 8px;
  overflow: hidden;
  width: 240px;

  .vnode-header {
    background: #4f46e5;
    color: white;
    padding: 0.8rem;
    font-weight: 500;
    text-align: center;
  }

  .vnode-props {
    padding: 1rem;
    background: white;

    div {
      padding: 0.5rem;
      font-family: 'Fira Code', monospace;
      font-size: 0.9rem;
    }
  }
}

.flag-desc {
  color: #4f46e5;
  font-size: 0.8rem;
}

.tree-comparison {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 2rem;
  margin: 1.5rem 0;
}

.tree {
  text-align: center;

  h4 {
    margin-top: 0;
    margin-bottom: 1rem;
    color: #4b5563;
  }
}

.node {
  padding: 0.8rem;
  margin: 0.5rem auto;
  border-radius: 6px;
  width: 120px;

  &.root {
    background: #4f46e5;
    color: white;
    font-weight: 500;
  }

  &.static {
    background: #e2e8f0;
    color: #4b5563;
  }

  &.dynamic {
    background: #ff6b6b;
    color: white;
    font-weight: 500;
  }
}

.children {
  margin-top: 1rem;
}

.flat-nodes {
  display: flex;
  flex-direction: column;
  gap: 0.5rem;
}

.arrow {
  font-size: 2rem;
  color: #94a3b8;
}

.usage-section {
  margin-bottom: 3rem;

  h2 {
    font-size: 1.8rem;
    margin-bottom: 1.5rem;
    color: #34495e;
    padding-bottom: 0.8rem;
    border-bottom: 2px solid #f0f4f8;
  }
}

.api-comparison {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 1.5rem;

  @media (max-width: 900px) {
    grid-template-columns: 1fr;
  }
}

.api-card {
  background: #f8fafc;
  border-radius: 12px;
  padding: 1.5rem;
  box-shadow: 0 4px 10px rgba(0, 0, 0, 0.05);

  h3 {
    margin-top: 0;
    text-align: center;
    color: #4f46e5;
    font-size: 1.4rem;
  }

  &.options-api {
    border-top: 3px solid #42b983;
  }

  &.composition-api {
    border-top: 3px solid #41b883;
  }
}

.pros-cons {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 1rem;
  margin-top: 1.5rem;

  .pros,
  .cons {
    padding: 1rem;
    border-radius: 8px;

    h4 {
      margin-top: 0;
      padding-bottom: 0.5rem;
      border-bottom: 1px dashed #e2e8f0;
    }
  }

  .pros {
    background: #f0fdf4;
    border-left: 3px solid #22c55e;
  }

  .cons {
    background: #fef2f2;
    border-left: 3px solid #ef4444;
  }
}

.ecosystem-section {
  margin-bottom: 3rem;

  h2 {
    font-size: 1.8rem;
    margin-bottom: 1.5rem;
    color: #34495e;
    padding-bottom: 0.8rem;
    border-bottom: 2px solid #f0f4f8;
  }
}

.ecosystem-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
  gap: 1.5rem;
}

.ecosystem-card {
  background: #f8fafc;
  border-radius: 12px;
  padding: 1.5rem;
  box-shadow: 0 4px 10px rgba(0, 0, 0, 0.05);

  h3 {
    margin-top: 0;
    text-align: center;
    color: #4f46e5;
  }
}

.tools {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 1rem;
  margin-top: 1.2rem;
}

.tool {
  padding: 1rem;
  border-radius: 8px;
  text-align: center;
  font-weight: 500;

  .vue2 & {
    background: #f0f9f4;
    border: 1px solid #42b983;
  }

  .vue3 & {
    background: #f0f9f4;
    border: 1px solid #41b883;
  }
}

.status {
  font-size: 0.8rem;
  padding: 0.2rem 0.5rem;
  border-radius: 12px;
  display: inline-block;
  margin-top: 0.5rem;

  .vue2 & {
    background: #e2e8f0;
    color: #4b5563;
  }

  .vue3 & {
    background: #4f46e5;
    color: white;
  }
}

.upgrade-section {
  margin-bottom: 2rem;

  h2 {
    font-size: 1.8rem;
    margin-bottom: 1.5rem;
    color: #34495e;
    padding-bottom: 0.8rem;
    border-bottom: 2px solid #f0f4f8;
  }
}

.upgrade-cards {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
  gap: 1.5rem;
}

.upgrade-card {
  background: #f8fafc;
  border-radius: 12px;
  padding: 1.8rem;
  text-align: center;
  box-shadow: 0 4px 10px rgba(0, 0, 0, 0.05);
  position: relative;
  overflow: hidden;
  transition: transform 0.3s ease;

  &:hover {
    transform: translateY(-5px);
  }

  h3 {
    margin-top: 0;
    color: #4f46e5;
  }

  p {
    margin-bottom: 1.5rem;
  }

  .icon {
    font-size: 3rem;
    margin-top: 1rem;
  }

  &:nth-child(1) {
    border-top: 4px solid #22c55e;
  }

  &:nth-child(2) {
    border-top: 4px solid #f59e0b;
  }

  &:nth-child(3) {
    border-top: 4px solid #6366f1;
  }
}

@media (max-width: 768px) {
  .content {
    padding: 1.5rem;
  }

  .header h1 {
    font-size: 2rem;
  }
}
</style>
