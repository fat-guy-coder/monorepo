<template>
  <div class="list-key-guide">
    <!-- é¡¶éƒ¨æ ‡é¢˜åŒºåŸŸ -->
    <div class="hero-section">
      <h1>Vue åˆ—è¡¨ä¸­çš„ Key</h1>
      <p class="subtitle">æå‡åˆ—è¡¨æ¸²æŸ“æ€§èƒ½ä¸æ­£ç¡®æ€§çš„å…³é”®</p>
    </div>

    <!-- å†…å®¹åŒºåŸŸ -->
    <div class="content-container">
      <!-- åŸºæœ¬æ¦‚å¿µ -->
      <section class="concept-section">
        <h2 class="section-title">
          <span class="section-icon">ğŸ”‘</span>
          <span>Key çš„ä½œç”¨</span>
        </h2>

        <div class="concept-content">
          <div class="definition-card">
            <p>
              åœ¨ Vue çš„ <code>v-for</code> åˆ—è¡¨ä¸­ï¼Œ<strong>key</strong>
              æ˜¯ä¸€ä¸ªç‰¹æ®Šçš„å±æ€§ï¼Œç”¨äºç»™æ¯ä¸ªèŠ‚ç‚¹æä¾›å”¯ä¸€æ ‡è¯†ã€‚
            </p>
            <p>å®ƒæ˜¯ Vue è™šæ‹Ÿ DOM ç®—æ³•è¯†åˆ«èŠ‚ç‚¹çš„å…³é”®ä¾æ®ã€‚</p>
          </div>

          <div class="code-example">
            <pre><code>&lt;!-- æ­£ç¡®ç”¨æ³• --&gt;
&lt;div v-for="item in items" :key="item.id"&gt;
   item.text
&lt;/div&gt;

&lt;!-- é”™è¯¯ç”¨æ³• --&gt;
&lt;div v-for="item in items"&gt;
   item.text
&lt;/div&gt;</code></pre>
          </div>
        </div>
      </section>

      <!-- ä¸ºä»€ä¹ˆéœ€è¦ Key -->
      <section class="why-section">
        <h2 class="section-title">
          <span class="section-icon">ğŸ¤”</span>
          <span>ä¸ºä»€ä¹ˆéœ€è¦ Key</span>
        </h2>

        <div class="reason-cards">
          <div class="reason-card">
            <div class="reason-icon">âš¡</div>
            <h3>æ€§èƒ½ä¼˜åŒ–</h3>
            <p>Vue é€šè¿‡ key å¯ä»¥ç²¾ç¡®è¯†åˆ«å“ªäº›èŠ‚ç‚¹å¯ä»¥å¤ç”¨ï¼Œé¿å…ä¸å¿…è¦çš„ DOM æ“ä½œï¼Œæå‡æ¸²æŸ“æ•ˆç‡ã€‚</p>
          </div>

          <div class="reason-card">
            <div class="reason-icon">âœ…</div>
            <h3>çŠ¶æ€ä¿æŒ</h3>
            <p>ç¡®ä¿ç»„ä»¶çŠ¶æ€åœ¨é‡æ–°æ¸²æŸ“æ—¶ä¸ä¼šä¸¢å¤±ï¼Œç‰¹åˆ«æ˜¯åœ¨æœ‰è¡¨å•å…ƒç´ æˆ–è¿‡æ¸¡åŠ¨ç”»çš„åˆ—è¡¨ä¸­ã€‚</p>
          </div>

          <div class="reason-card">
            <div class="reason-icon">ğŸ”„</div>
            <h3>æ­£ç¡®æ›´æ–°</h3>
            <p>å½“åˆ—è¡¨é¡ºåºæ”¹å˜æ—¶ï¼Œkey å¸®åŠ© Vue æ­£ç¡®è¯†åˆ«å…ƒç´ ä½ç½®å˜åŒ–ï¼Œè€Œä¸æ˜¯è¯¯åˆ¤ä¸ºå…ƒç´ å†…å®¹å˜åŒ–ã€‚</p>
          </div>
        </div>
      </section>

      <!-- å°±åœ°æ›´æ–° -->
      <section class="update-section">
        <h2 class="section-title">
          <span class="section-icon">ğŸ”„</span>
          <span>å°±åœ°æ›´æ–°ç­–ç•¥</span>
        </h2>

        <div class="concept-content">
          <div class="definition-card">
            <p>
              Vue åœ¨æ²¡æœ‰
              <code>key</code> çš„æƒ…å†µä¸‹ä¼šé‡‡ç”¨"å°±åœ°æ›´æ–°"ç­–ç•¥ã€‚è¿™æ„å‘³ç€å¦‚æœæ•°æ®é¡¹çš„é¡ºåºè¢«æ”¹å˜ï¼ŒVue
              å°†ä¸ä¼šç§»åŠ¨ DOM å…ƒç´ æ¥åŒ¹é…æ•°æ®é¡¹çš„é¡ºåºï¼Œè€Œæ˜¯å°±åœ°æ›´æ–°æ¯ä¸ªå…ƒç´ ã€‚
            </p>
          </div>

          <div class="reason-cards">
            <div class="reason-card">
              <div class="reason-icon">âš ï¸</div>
              <h3>æ½œåœ¨é—®é¢˜</h3>
              <p>
                å°±åœ°æ›´æ–°å¯èƒ½å¯¼è‡´æ¸²æŸ“ç»“æœä¸å¯é¢„æµ‹ï¼Œç‰¹åˆ«æ˜¯å½“åˆ—è¡¨ä¸­åŒ…å«ä¸´æ—¶çŠ¶æ€ï¼ˆå¦‚ç”¨æˆ·è¾“å…¥ã€å¤é€‰æ¡†é€‰ä¸­çŠ¶æ€ï¼‰æ—¶ã€‚
              </p>
            </div>

            <div class="reason-card">
              <div class="reason-icon">ğŸ“</div>
              <h3>ä½¿ç”¨åœºæ™¯</h3>
              <p>
                ä»…é€‚ç”¨äºåˆ—è¡¨æ¸²æŸ“è¾“å‡ºçš„ DOM å†…å®¹éå¸¸ç®€å•ï¼Œæˆ–è€…æœ‰æ„ä¾èµ–é»˜è®¤è¡Œä¸ºä»¥è·å–æ€§èƒ½ä¸Šçš„æå‡ã€‚
              </p>
            </div>

            <div class="reason-card">
              <div class="reason-icon">ğŸ’¡</div>
              <h3>æœ€ä½³å®è·µ</h3>
              <p>
                å»ºè®®å§‹ç»ˆä¸º <code>v-for</code> æä¾› <code>key</code> å±æ€§ï¼Œé™¤ééå†çš„ DOM
                å†…å®¹éå¸¸ç®€å•æˆ–åˆ»æ„ä¾èµ–é»˜è®¤è¡Œä¸ºã€‚
              </p>
            </div>
          </div>

          <div class="code-example">
            <pre><code>// å°±åœ°æ›´æ–°ç¤ºä¾‹
&lt;div v-for="item in items"&gt;
  { item.text }
&lt;/div&gt;

// ä½¿ç”¨keyçš„æ›´æ–°ç¤ºä¾‹
&lt;div v-for="item in items" :key="item.id"&gt;
  { item.text }
&lt;/div&gt;</code></pre>
          </div>
        </div>
      </section>

      <!-- å·¥ä½œåŸç† -->
      <section class="work-section">
        <h2 class="section-title">
          <span class="section-icon">âš™ï¸</span>
          <span>å·¥ä½œåŸç†</span>
        </h2>

        <div class="work-steps">
          <div class="step">
            <div class="step-number">1</div>
            <div class="step-content">
              <h3>è™šæ‹Ÿ DOM å¯¹æ¯”</h3>
              <p>Vue é€šè¿‡æ¯”è¾ƒæ–°æ—§è™šæ‹Ÿ DOM æ ‘æ¥ç¡®å®šéœ€è¦æ›´æ–°çš„éƒ¨åˆ†</p>
            </div>
          </div>

          <div class="step">
            <div class="step-number">2</div>
            <div class="step-content">
              <h3>Key åŒ¹é…</h3>
              <p>ä½¿ç”¨ key ä½œä¸ºå”¯ä¸€æ ‡è¯†æ¥åŒ¹é…æ–°æ—§æ ‘ä¸­çš„ç›¸åŒèŠ‚ç‚¹</p>
            </div>
          </div>

          <div class="step">
            <div class="step-number">3</div>
            <div class="step-content">
              <h3>æœ€å°åŒ–æ›´æ–°</h3>
              <p>åªæ›´æ–°çœŸæ­£å˜åŒ–çš„éƒ¨åˆ†ï¼Œè€Œä¸æ˜¯é‡æ–°æ¸²æŸ“æ•´ä¸ªåˆ—è¡¨</p>
            </div>
          </div>
        </div>

        <div class="comparison">
          <div class="comparison-item">
            <h4>æœ‰ Key çš„æƒ…å†µ</h4>
            <div class="comparison-visual good">
              <div class="node" v-for="i in 3" :key="i">èŠ‚ç‚¹ {{ i }}</div>
            </div>
            <p>èŠ‚ç‚¹æ­£ç¡®åŒ¹é…ï¼Œé«˜æ•ˆæ›´æ–°</p>
          </div>

          <div class="comparison-item">
            <h4>æ—  Key çš„æƒ…å†µ</h4>
            <pre><code>
              &lt;div v-for="item in items"&gt;
                { item.text }
              &lt;/div&gt;
            </code></pre>
            <p>å¯èƒ½å¯¼è‡´é”™è¯¯åŒ¹é…å’Œæ€§èƒ½ä¸‹é™</p>
          </div>
        </div>
      </section>

      <!-- æœ€ä½³å®è·µ -->
      <section class="best-practice-section">
        <h2 class="section-title">
          <span class="section-icon">ğŸŒŸ</span>
          <span>æœ€ä½³å®è·µ</span>
        </h2>

        <div class="practice-list">
          <div class="practice-item">
            <div class="practice-icon">ğŸ‘</div>
            <div class="practice-content">
              <h3>ä½¿ç”¨å”¯ä¸€æ ‡è¯†</h3>
              <p>ä¼˜å…ˆä½¿ç”¨æ•°æ®ä¸­çš„å”¯ä¸€ ID ä½œä¸º keyï¼Œè€Œä¸æ˜¯æ•°ç»„ç´¢å¼•</p>
              <pre><code>&lt;div v-for="user in users" :key="user.id"&gt;</code></pre>
            </div>
          </div>

          <div class="practice-item">
            <div class="practice-icon">ğŸ‘</div>
            <div class="practice-content">
              <h3>é¿å…ä½¿ç”¨ç´¢å¼•</h3>
              <p>å½“åˆ—è¡¨é¡ºåºå¯èƒ½å˜åŒ–æ—¶ï¼Œä½¿ç”¨ç´¢å¼•ä½œä¸º key ä¼šå¯¼è‡´é—®é¢˜</p>
              <pre><code>&lt;!-- ä¸æ¨è --&gt;
&lt;div v-for="(item, index) in items" :key="index"&gt;
ä¾‹å¦‚ï¼Œå½“åˆ é™¤åˆ—è¡¨ä¸­æŸä¸ªå…ƒç´ æ—¶ï¼Œå…¶åé¢çš„æ‰€æœ‰å…ƒç´ çš„ä¸‹æ ‡éƒ½ä¼šå‘ç”Ÿæ”¹å˜ï¼Œå¯¼è‡´Vueé‡æ–°æ¸²æŸ“æ•´ä¸ªåˆ—è¡¨ã€‚
</code></pre>
            </div>
          </div>

          <div class="practice-item">
            <div class="practice-icon">âš ï¸</div>
            <div class="practice-content">
              <h3>å¤æ‚æ•°æ®çš„æƒ…å†µ</h3>
              <p>å¯¹äºæ²¡æœ‰å”¯ä¸€ ID çš„æ•°æ®ï¼Œå¯ä»¥åˆ›å»ºå¤åˆ key</p>
              <pre><code>&lt;div v-for="item in items"
  :key="`${item.name}-${item.date}`"&gt;</code></pre>
            </div>
          </div>
        </div>
      </section>

      <!-- æ€»ç»“ -->
      <section class="summary-section">
        <h2>å…³é”®æ€»ç»“</h2>
        <div class="summary-content">
          <ul>
            <li><strong>Key æ˜¯å¿…é¡»çš„</strong> - å§‹ç»ˆä¸º v-for åˆ—è¡¨æä¾›å”¯ä¸€çš„ key</li>
            <li><strong>æ€§èƒ½ä¼˜åŒ–</strong> - key å¸®åŠ© Vue é«˜æ•ˆæ›´æ–° DOM</li>
            <li><strong>çŠ¶æ€ä¿æŒ</strong> - ç¡®ä¿ç»„ä»¶çŠ¶æ€åœ¨é‡æ–°æ¸²æŸ“æ—¶ä¸ä¼šæ··ä¹±</li>
            <li><strong>æ­£ç¡®åŒ¹é…</strong> - é¿å…åœ¨åˆ—è¡¨é¡ºåºå˜åŒ–æ—¶å‡ºç°æ¸²æŸ“é”™è¯¯</li>
          </ul>
          <div class="final-tip">
            <p>è®°ä½ï¼šå¥½çš„ key ç­–ç•¥æ˜¯ Vue é«˜æ•ˆæ¸²æŸ“çš„åŸºç¡€ï¼</p>
          </div>
        </div>
      </section>
    </div>
  </div>
</template>

<script setup lang="ts">
// è¿™é‡Œå¯ä»¥æ·»åŠ ä¸€äº›äº¤äº’é€»è¾‘
</script>

<style scoped lang="less">
@primary-color: #4f46e5;
@secondary-color: #7c3aed;
@text-color: #1e293b;
@light-bg: #f8fafc;
@border-color: #e2e8f0;
@radius: 8px;
@shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);

.list-key-guide {
  max-width: 900px;
  margin: 0 auto;
  padding: 20px;
  font-family: 'Inter', system-ui, sans-serif;
  color: @text-color;
  line-height: 1.6;
}

.hero-section {
  text-align: center;
  margin-bottom: 40px;
  padding: 30px 0;
  border-bottom: 1px solid @border-color;

  h1 {
    font-size: 2.5rem;
    font-weight: 700;
    margin-bottom: 10px;
    color: @primary-color;
  }

  .subtitle {
    font-size: 1.2rem;
    color: #64748b;
  }
}

.content-container {
  display: flex;
  flex-direction: column;
  gap: 40px;
}

.section-title {
  display: flex;
  align-items: center;
  gap: 10px;
  font-size: 1.5rem;
  color: @primary-color;
  margin-bottom: 20px;
  padding-bottom: 10px;
  border-bottom: 2px solid @border-color;

  .section-icon {
    font-size: 1.3rem;
  }
}

.concept-section {
  .definition-card {
    background: white;
    border-radius: @radius;
    box-shadow: @shadow;
    padding: 20px;
    margin-bottom: 20px;

    p {
      margin: 10px 0;

      &:first-child {
        margin-top: 0;
      }

      &:last-child {
        margin-bottom: 0;
      }
    }

    code {
      background: #f1f5f9;
      padding: 2px 4px;
      border-radius: 4px;
      font-family: 'Fira Code', monospace;
      font-size: 0.9em;
      color: #334155;
    }
  }
}

.code-example {
  pre {
    background: #1e293b;
    border-radius: @radius;
    padding: 15px;
    overflow-x: auto;

    code {
      font-family: 'Fira Code', monospace;
      font-size: 0.9rem;
      color: #e2e8f0;
    }
  }
}

.why-section {
  .reason-cards {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
    gap: 20px;

    .reason-card {
      background: white;
      border-radius: @radius;
      box-shadow: @shadow;
      padding: 20px;
      text-align: center;

      .reason-icon {
        font-size: 2rem;
        margin-bottom: 10px;
      }

      h3 {
        margin: 10px 0;
        color: @secondary-color;
      }

      p {
        margin: 0;
        color: #64748b;
        font-size: 0.9rem;
      }
    }
  }
}

.work-section {
  .work-steps {
    display: flex;
    flex-direction: column;
    gap: 15px;
    margin-bottom: 30px;

    .step {
      display: flex;
      gap: 15px;
      align-items: center;

      .step-number {
        background: @primary-color;
        color: white;
        width: 30px;
        height: 30px;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        font-weight: bold;
        flex-shrink: 0;
      }

      .step-content {
        h3 {
          margin: 0 0 5px 0;
          color: @text-color;
        }

        p {
          margin: 0;
          color: #64748b;
          font-size: 0.9rem;
        }
      }
    }
  }

  .comparison {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 20px;

    @media (max-width: 600px) {
      grid-template-columns: 1fr;
    }

    .comparison-item {
      h4 {
        margin: 0 0 10px 0;
        text-align: center;
      }

      p {
        text-align: center;
        margin: 10px 0 0;
        font-size: 0.9rem;
        color: #64748b;
      }
    }

    .comparison-visual {
      background: white;
      border-radius: @radius;
      box-shadow: @shadow;
      padding: 15px;
      min-height: 100px;
      display: flex;
      flex-direction: column;
      gap: 10px;

      &.good {
        border-top: 4px solid #10b981;
      }

      &.bad {
        border-top: 4px solid #ef4444;
      }

      .node {
        background: #f1f5f9;
        padding: 8px 12px;
        border-radius: 4px;
        font-size: 0.9rem;
      }
    }
  }
}

.best-practice-section {
  .practice-list {
    display: flex;
    flex-direction: column;
    gap: 20px;

    .practice-item {
      background: white;
      border-radius: @radius;
      box-shadow: @shadow;
      padding: 20px;
      display: flex;
      gap: 15px;

      .practice-icon {
        font-size: 1.5rem;
        flex-shrink: 0;
      }

      .practice-content {
        h3 {
          margin: 0 0 10px 0;
          color: @secondary-color;
        }

        p {
          margin: 0 0 10px 0;
          color: #64748b;
          font-size: 0.9rem;
        }

        pre {
          background: #f1f5f9;
          border-radius: 4px;
          padding: 10px;
          overflow-x: auto;
          margin: 0;

          code {
            font-family: 'Fira Code', monospace;
            font-size: 0.85rem;
            color: #334155;
          }
        }
      }
    }
  }
}

.summary-section {
  background: @light-bg;
  border-radius: @radius;
  padding: 25px;

  h2 {
    color: @primary-color;
    margin-top: 0;
    text-align: center;
  }

  .summary-content {
    ul {
      padding-left: 20px;

      li {
        margin-bottom: 10px;
        font-weight: 500;

        strong {
          color: @secondary-color;
        }
      }
    }

    .final-tip {
      background: rgba(79, 70, 229, 0.1);
      padding: 15px;
      border-radius: @radius;
      border-left: 4px solid @primary-color;
      margin-top: 20px;
      text-align: center;

      p {
        margin: 0;
        color: @primary-color;
        font-weight: 500;
      }
    }
  }
}

@media (max-width: 768px) {
  .list-key-guide {
    padding: 15px;
  }

  .hero-section {
    h1 {
      font-size: 2rem;
    }
  }
}
</style>
