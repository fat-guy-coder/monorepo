<template>
  <div class="pinia-container">
    <!-- å¤´éƒ¨åŒºåŸŸ -->
    <div class="header">
      <div class="logo-wrapper">
        <PiniaLogo />
      </div>
      <h1>PiniaçŠ¶æ€ç®¡ç†åº“</h1>
      <p>Vue.jsçš„ä¸‹ä¸€ä»£çŠ¶æ€ç®¡ç†è§£å†³æ–¹æ¡ˆ</p>
      <p><a href="https://pinia.vuejs.org/zh" target="_blank">Piniaå®˜æ–¹æ–‡æ¡£</a></p>
      <div class="features">
        <span v-for="feature in features" :key="feature" class="feature-badge">
          {{ feature }}
        </span>
      </div>
    </div>

    <!-- å†…å®¹åŒºåŸŸ -->
    <div class="content">
      <!-- ä»€ä¹ˆæ˜¯Pinia -->
      <div class="section">
        <div class="section-header">
          <div class="icon">ğŸ§ </div>
          <h2>ä»€ä¹ˆæ˜¯Piniaï¼Ÿ</h2>
        </div>
        <div class="section-content">
          <p>
            Piniaæ˜¯Vue.jså®˜æ–¹æ¨èçš„çŠ¶æ€ç®¡ç†åº“ï¼Œå–ä»£äº†ä¹‹å‰çš„Vuexã€‚å®ƒæ˜¯è½»é‡çº§ã€ç›´è§‚ä¸”ç±»å‹å®‰å…¨çš„ï¼Œ
            æä¾›äº†æ›´å¥½çš„TypeScriptæ”¯æŒï¼Œç®€åŒ–äº†çŠ¶æ€ç®¡ç†çš„å¤æ‚æ€§ã€‚
          </p>
          <div class="definition-card">
            <div class="definition-icon">ğŸ’¡</div>
            <p>
              <strong>Piniaçš„æ ¸å¿ƒæ¦‚å¿µ</strong>ï¼šé€šè¿‡å®šä¹‰storeæ¥ç®¡ç†å…¨å±€çŠ¶æ€ï¼Œæ¯ä¸ªstoreæ˜¯ä¸€ä¸ªç‹¬ç«‹çš„æ¨¡å—ï¼Œ
              åŒ…å«stateã€getterså’Œactionsï¼Œæä¾›å“åº”å¼ã€æ¨¡å—åŒ–çš„çŠ¶æ€ç®¡ç†æ–¹æ¡ˆã€‚
            </p>
          </div>
        </div>
      </div>

      <!-- æ ¸å¿ƒç‰¹æ€§ -->
      <div class="section">
        <div class="section-header">
          <div class="icon">â­</div>
          <h2>æ ¸å¿ƒç‰¹æ€§</h2>
        </div>
        <div class="features-grid">
          <div v-for="item in coreFeatures" :key="item.title" class="feature-card">
            <div class="feature-icon">{{ item.icon }}</div>
            <h3>{{ item.title }}</h3>
            <p>{{ item.description }}</p>
          </div>
        </div>
      </div>

      <!-- åŸºæœ¬ä½¿ç”¨ -->
      <div class="section">
        <div class="section-header">
          <div class="icon">ğŸ› ï¸</div>
          <h2>åŸºæœ¬ä½¿ç”¨</h2>
        </div>
        <div class="section-content">
          <h3>1. å®‰è£…Pinia</h3>
          <div class="code-block">
            <pre><code>npm install pinia</code></pre>
          </div>

          <h3>2. åˆ›å»ºStore</h3>
          <div class="code-block">
            <pre><code>// stores/counter.ts
import { defineStore } from 'pinia';

export const useCounterStore = defineStore('counter', {
  // çŠ¶æ€å®šä¹‰
  state: () => ({
    count: 0,
    name: 'My Counter'
  }),

  // è®¡ç®—å±æ€§
  getters: {
    doubleCount: (state) => state.count * 2
  },

  // æ“ä½œæ–¹æ³•
  actions: {
    increment() {
      this.count++;
    },
    reset() {
      this.count = 0;
    }
  }
});</code></pre>
          </div>

          <h3>3. åœ¨ç»„ä»¶ä¸­ä½¿ç”¨</h3>
          <div class="code-block">
            <pre><code>&lt;template&gt;
  &lt;div&gt;
    &lt;h1&gt;{ counter.name }&lt;/h1&gt;
    &lt;p&gt;Count: { counter.count }&lt;/p&gt;
    &lt;p&gt;Double: { counter.doubleCount }&lt;/p&gt;
    &lt;button @click="counter.increment"&gt;Increment&lt;/button&gt;
    &lt;button @click="counter.reset"&gt;Reset&lt;/button&gt;
  &lt;/div&gt;
&lt;/template&gt;

&lt;script setup lang="ts"&gt;
import { useCounterStore } from '@/stores/counter';

const counter = useCounterStore();
&lt;/script&gt;</code></pre>
          </div>
        </div>
      </div>

      <!-- ä½¿ç”¨åœºæ™¯ -->
      <div class="section">
        <div class="section-header">
          <div class="icon">ğŸ“±</div>
          <h2>ä½¿ç”¨åœºæ™¯</h2>
        </div>
        <div class="use-cases">
          <div class="use-case-card" v-for="(useCase, index) in useCases" :key="index">
            <div class="index">{{ index + 1 }}</div>
            <div>
              <h3>{{ useCase.title }}</h3>
              <p>{{ useCase.description }}</p>
            </div>
          </div>
        </div>
      </div>

      <!-- å¯¹æ¯”Vuex -->
      <div class="section">
        <div class="section-header">
          <div class="icon">ğŸ†š</div>
          <h2>Pinia vs Vuex</h2>
        </div>
        <div class="comparison">
          <div class="comparison-header">
            <div></div>
            <div class="pinia-col">Pinia</div>
            <div class="vuex-col">Vuex</div>
          </div>
          <div class="comparison-row" v-for="(item, index) in comparisonTable" :key="index">
            <div class="comparison-title">{{ item.title }}</div>
            <div class="pinia-col">{{ item.pinia }}</div>
            <div class="vuex-col">{{ item.vuex }}</div>
          </div>
        </div>
      </div>

      <!-- æ€»ç»“ -->
      <div class="section summary">
        <div class="section-header">
          <div class="icon">ğŸ</div>
          <h2>æ€»ç»“</h2>
        </div>
        <div class="summary-content">
          <p>
            Piniaæ˜¯VueçŠ¶æ€ç®¡ç†çš„æœªæ¥ï¼Œæä¾›äº†æ›´ç®€æ´ã€æ›´ç›´è§‚çš„APIï¼Œæ›´å¥½çš„TypeScriptæ”¯æŒï¼Œ
            ä»¥åŠæ›´å°çš„åŒ…ä½“ç§¯ã€‚å®ƒæ‘’å¼ƒäº†Vuexä¸­å¤æ‚çš„mutationæ¦‚å¿µï¼Œä½¿çŠ¶æ€ç®¡ç†æ›´åŠ ç›´æ¥ã€‚
          </p>
          <div class="recommendation">
            <div class="tip-icon">ğŸ’</div>
            <p>
              <strong>ä½•æ—¶é€‰æ‹©Pinia</strong>ï¼šæ–°é¡¹ç›®é¦–é€‰Piniaï¼Œå¤§å‹é¡¹ç›®ä»Vuexè¿ç§»ä¹Ÿéå¸¸å®¹æ˜“ã€‚
              Piniaçš„APIè®¾è®¡æ›´ç¬¦åˆVue3çš„Composition APIç†å¿µï¼Œè®©çŠ¶æ€ç®¡ç†æ›´åŠ è‡ªç„¶å’Œé«˜æ•ˆã€‚
            </p>
          </div>
        </div>
      </div>
    </div>
  </div>
</template>

<script setup lang="ts">
import { ref } from 'vue';
import { PiniaLogo } from './pinina.tsx';

// Piniaç‰¹æ€§åˆ—è¡¨
const features = ref([
  'è½»é‡çº§', 'DevToolsæ”¯æŒ', 'æ¨¡å—åŒ–', 'TypeScript', 'Composition API'
]);

// æ ¸å¿ƒç‰¹æ€§
const coreFeatures = ref([
  {
    icon: 'ğŸ“¦',
    title: 'æ¨¡å—åŒ–çŠ¶æ€å­˜å‚¨',
    description: 'æ¯ä¸ªStoreéƒ½æ˜¯ç‹¬ç«‹æ¨¡å—ï¼Œæ˜“äºç»„ç»‡å’Œç®¡ç†çŠ¶æ€'
  },
  {
    icon: 'ğŸ”„',
    title: 'å“åº”å¼çŠ¶æ€',
    description: 'çŠ¶æ€è‡ªåŠ¨å“åº”å¼æ›´æ–°ï¼Œè§†å›¾è‡ªåŠ¨åŒæ­¥'
  },
  {
    icon: 'ğŸ§©',
    title: 'ç»„åˆå¼API',
    description: 'å®Œç¾æ”¯æŒVue3çš„Composition API'
  },
  {
    icon: 'ğŸ§ª',
    title: 'DevToolsé›†æˆ',
    description: 'å†…ç½®Vue DevToolsæ”¯æŒï¼Œæ–¹ä¾¿è°ƒè¯•'
  },
  {
    icon: 'ğŸ§®',
    title: 'ç±»å‹å®‰å…¨',
    description: 'ä¸€æµçš„TypeScriptæ”¯æŒï¼Œæä¾›å®Œæ•´ç±»å‹æ¨æ–­'
  },
  {
    icon: 'ğŸ“',
    title: 'è½»é‡é«˜æ•ˆ',
    description: '1KBå¤§å°ï¼Œé›¶ä¾èµ–ï¼Œæ€§èƒ½å“è¶Š'
  }
]);

// ä½¿ç”¨åœºæ™¯
const useCases = ref([
  {
    title: 'ç”¨æˆ·è®¤è¯çŠ¶æ€',
    description: 'ç®¡ç†ç”¨æˆ·ç™»å½•çŠ¶æ€ã€tokenå’Œæƒé™ä¿¡æ¯'
  },
  {
    title: 'è´­ç‰©è½¦ç³»ç»Ÿ',
    description: 'å­˜å‚¨å•†å“ã€ä»·æ ¼å’Œè´­ç‰©è½¦çŠ¶æ€'
  },
  {
    title: 'ä¸»é¢˜åˆ‡æ¢',
    description: 'å…¨å±€ç®¡ç†åº”ç”¨ä¸»é¢˜å’ŒUIåå¥½'
  },
  {
    title: 'å¤šæ­¥éª¤è¡¨å•',
    description: 'åœ¨å¤æ‚è¡¨å•æµç¨‹ä¸­ä¿æŒæ•°æ®çŠ¶æ€'
  },
  {
    title: 'å®æ—¶æ•°æ®åŒæ­¥',
    description: 'ç®¡ç†WebSocketè¿æ¥å’Œå®æ—¶æ•°æ®'
  },
  {
    title: 'å…¨å±€é…ç½®',
    description: 'å­˜å‚¨åº”ç”¨çš„å…¨å±€è®¾ç½®å’Œé…ç½®é€‰é¡¹'
  }
]);

// å¯¹æ¯”è¡¨
const comparisonTable = ref([
  {
    title: 'APIå¤æ‚åº¦',
    pinia: 'ç®€æ´ç›´è§‚',
    vuex: 'ç›¸å¯¹å¤æ‚'
  },
  {
    title: 'TypeScriptæ”¯æŒ',
    pinia: 'ä¸€æµæ”¯æŒ',
    vuex: 'æ’ä»¶æ”¯æŒ'
  },
  {
    title: 'æ¨¡å—å®šä¹‰',
    pinia: 'å¤šä¸ªstore',
    vuex: 'å•ä¸€store'
  },
  {
    title: 'åŒ…ä½“ç§¯',
    pinia: 'çº¦1KB',
    vuex: 'çº¦10KB'
  },
  {
    title: 'Mutation',
    pinia: 'ä¸éœ€è¦',
    vuex: 'å¿…é¡»ä½¿ç”¨'
  },
  {
    title: 'å­¦ä¹ æ›²çº¿',
    pinia: 'å¹³ç¼“',
    vuex: 'è¾ƒé™¡å³­'
  }
]);
</script>

<style lang="less" scoped>
@primary-color: #ffd02c;
@primary-dark: #333;
@secondary-color: #4fc08d;
@background-light: #f8f9fa;
@text-dark: #2c3e50;
@text-light: #7f8c8d;
@border-radius: 10px;
@box-shadow: 0 6px 16px rgba(0, 0, 0, 0.08);
@transition: all 0.3s ease;

.pinia-container {
  max-width: 900px;
  margin: 0 auto;
  padding: 2rem;
  font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
  color: @text-dark;
  line-height: 1.6;
}

.header {
  text-align: center;
  padding: 2rem 0 3rem;
  position: relative;

  .logo-wrapper {
    margin: 0 auto 1rem;
    width: 90px;
    height: 90px;
    display: flex;
    align-items: center;
    justify-content: center;
    background: #fff;
    border-radius: 50%;
    box-shadow: @box-shadow;
  }

  h1 {
    font-size: 2.5rem;
    font-weight: 800;
    margin-bottom: 0.5rem;
    color: @primary-dark;
  }

  p {
    font-size: 1.25rem;
    color: @text-light;
    margin-bottom: 1.5rem;
  }

  .features {
    display: flex;
    justify-content: center;
    flex-wrap: wrap;
    gap: 0.8rem;
    max-width: 600px;
    margin: 0 auto;

    .feature-badge {
      padding: 0.5rem 1rem;
      border-radius: 50px;
      background: lighten(@primary-color, 35%);
      color: darken(@primary-color, 30%);
      font-size: 0.9rem;
      font-weight: 600;
      border: 1px solid fadeout(@primary-color, 40%);
      transition: @transition;

      &:hover {
        transform: translateY(-2px);
        background: lighten(@primary-color, 30%);
      }
    }
  }
}

.section {
  margin-bottom: 2.5rem;
  background: white;
  border-radius: @border-radius;
  overflow: hidden;
  box-shadow: @box-shadow;

  .section-header {
    display: flex;
    align-items: center;
    padding: 1.5rem 1.75rem;
    background: linear-gradient(to right, @primary-color, lighten(@primary-color, 15%));
    border-bottom: 1px solid darken(@primary-color, 5%);

    .icon {
      font-size: 1.75rem;
      margin-right: 1rem;
      display: flex;
      align-items: center;
      background: rgba(255, 255, 255, 0.2);
      width: 50px;
      height: 50px;
      border-radius: 50%;
      justify-content: center;
    }

    h2 {
      margin: 0;
      font-size: 1.5rem;
      font-weight: 700;
      color: @primary-dark;
    }
  }

  .section-content {
    padding: 2rem;

    .definition-card {
      display: flex;
      background: lighten(@primary-color, 40%);
      border-radius: @border-radius;
      padding: 1.5rem;
      margin-top: 1.5rem;
      border-left: 4px solid @primary-color;

      .definition-icon {
        font-size: 2rem;
        margin-right: 1rem;
        color: @primary-dark;
      }

      p {
        margin: 0;
        font-size: 1.05rem;
        line-height: 1.7;

        strong {
          color: @primary-dark;
        }
      }
    }
  }

  h3 {
    margin-top: 1.5rem;
    margin-bottom: 1rem;
    color: @secondary-color;
    font-size: 1.3rem;
    position: relative;
    padding-left: 1.5rem;

    &::before {
      content: "";
      position: absolute;
      left: 0;
      top: 50%;
      transform: translateY(-50%);
      width: 8px;
      height: 8px;
      background: @secondary-color;
      border-radius: 50%;
    }
  }
}

.features-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
  gap: 1.5rem;

  .feature-card {
    background: @background-light;
    border-radius: @border-radius;
    padding: 1.5rem;
    border: 1px solid #eee;
    transition: @transition;

    &:hover {
      transform: translateY(-5px);
      box-shadow: 0 10px 25px -10px rgba(0, 0, 0, 0.1);
    }

    .feature-icon {
      font-size: 2rem;
      margin-bottom: 1rem;
    }

    h3 {
      margin-top: 0;
      margin-bottom: 0.8rem;
      font-size: 1.2rem;
      color: @primary-dark;
    }

    p {
      margin: 0;
      color: @text-light;
      font-size: 0.95rem;
      line-height: 1.6;
    }
  }
}

.code-block {
  background: #2d2d2d;
  border-radius: @border-radius;
  padding: 1.25rem;
  margin: 1.25rem 0;
  overflow-x: auto;

  pre {
    margin: 0;

    code {
      color: #f8f8f2;
      font-family: 'Fira Code', monospace;
      font-size: 0.95rem;
      line-height: 1.5;
    }
  }
}

.use-cases {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
  gap: 1.25rem;

  .use-case-card {
    display: flex;
    background: white;
    border-radius: @border-radius;
    overflow: hidden;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
    transition: @transition;

    &:hover {
      transform: translateY(-3px);
      box-shadow: 0 6px 16px rgba(0, 0, 0, 0.1);
    }

    .index {
      width: 45px;
      min-width: 45px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1.5rem;
      font-weight: 700;
      background: @primary-color;
      color: @primary-dark;
    }

    div {
      padding: 1.25rem;
    }

    h3 {
      margin-top: 0;
      margin-bottom: 0.5rem;
      font-size: 1.1rem;
      color: @primary-dark;
    }

    p {
      margin: 0;
      color: @text-light;
      font-size: 0.95rem;
      line-height: 1.6;
    }
  }
}

.comparison {
  border-radius: @border-radius;
  overflow: hidden;
  border: 1px solid #eaeaea;

  .comparison-header {
    display: grid;
    grid-template-columns: 2fr 1fr 1fr;
    background: @background-light;
    font-weight: 700;
    padding: 1rem 1.5rem;
    border-bottom: 1px solid #eaeaea;

    .pinia-col {
      color: @primary-dark;
      text-align: center;
    }

    .vuex-col {
      color: #42b883;
      text-align: center;
    }
  }

  .comparison-row {
    display: grid;
    grid-template-columns: 2fr 1fr 1fr;
    padding: 1rem 1.5rem;
    border-bottom: 1px solid #f5f5f5;

    &:nth-child(even) {
      background: #fcfcfc;
    }

    &:last-child {
      border-bottom: none;
    }

    .comparison-title {
      font-weight: 500;
    }

    .pinia-col,
    .vuex-col {
      text-align: center;
      font-weight: 500;
    }

    .pinia-col {
      color: @primary-dark;
    }

    .vuex-col {
      color: #42b883;
    }
  }
}

.summary {
  .recommendation {
    display: flex;
    align-items: flex-start;
    background: lighten(@secondary-color, 45%);
    border-radius: @border-radius;
    padding: 1.5rem;
    margin-top: 1.5rem;
    border-left: 4px solid @secondary-color;

    .tip-icon {
      font-size: 1.8rem;
      margin-right: 1rem;
      color: @secondary-color;
    }

    p {
      margin: 0;
      font-size: 1.05rem;
      line-height: 1.7;

      strong {
        color: @secondary-color;
      }
    }
  }
}

@media (max-width: 768px) {
  .pinia-container {
    padding: 1rem;
  }

  .header {
    padding: 1rem 0 2rem;

    h1 {
      font-size: 2rem;
    }

    p {
      font-size: 1.1rem;
    }
  }

  .section {
    .section-header {
      padding: 1rem;

      .icon {
        width: 40px;
        height: 40px;
        font-size: 1.5rem;
      }

      h2 {
        font-size: 1.3rem;
      }
    }

    .section-content {
      padding: 1.5rem;
    }
  }
}
</style>